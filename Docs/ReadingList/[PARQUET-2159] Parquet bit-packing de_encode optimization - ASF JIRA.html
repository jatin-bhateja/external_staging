<!DOCTYPE html>
<!-- saved from url=(0084)https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22 -->
<html lang="en" class="js-focus-visible webkit chrome" data-js-focus-visible=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    









<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="application-name" content="JIRA" data-name="jira" data-version="8.20.10"><meta name="ajs-server-scheme" content="https">
<meta name="ajs-server-port" content="443">
<meta name="ajs-server-name" content="issues.apache.org">
<meta name="ajs-behind-proxy" content="null">
<meta name="ajs-base-url" content="https://issues.apache.org/jira">
<meta name="ajs-hasCriteriaAutoUpdate" content="false">
<meta name="ajs-viewissue-use-history-api" content="false">
<meta name="ajs-viewissue-max-cache-size" content="">
<meta name="ajs-autocomplete-enabled" content="true">
<meta name="ajs-view-issue-trace-key" content="jira.issue.refreshed">
<meta name="ajs-view-issue-psycho-key" content="jira.psycho.issue.refreshed">
<meta name="ajs-view-issue-refreshed-cached-key" content="jira.psycho.issue.refreshed.cached">
<meta name="ajs-return-to-search-trace-key" content="jira.returned.to.search">
<meta name="ajs-return-to-search-psycho-key" content="jira.psycho.returned.to.search">
<meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453">
<meta name="ajs-jira.issues.preferred.layout.key" content="split-view">
<meta name="ajs-max-recent-searchers" content="10">
<meta name="ajs-jira-base-url" content="https://issues.apache.org/jira">
<meta name="ajs-dev-mode" content="false">
<meta name="ajs-context-path" content="/jira">
<meta name="ajs-version-number" content="8.20.10">
<meta name="ajs-build-number" content="820010">
<meta name="ajs-is-beta" content="false">
<meta name="ajs-is-rc" content="false">
<meta name="ajs-is-snapshot" content="false">
<meta name="ajs-is-milestone" content="false">
<meta name="ajs-remote-user" content="">
<meta name="ajs-remote-user-fullname" content="">
<meta name="ajs-user-locale" content="en_UK">
<meta name="ajs-user-locale-group-separator" content=",">
<meta name="ajs-app-title" content="ASF JIRA">
<meta name="ajs-keyboard-shortcuts-enabled" content="true">
<meta name="ajs-keyboard-accesskey-modifier" content="Alt">
<meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;com.atlassian.jira.migration.features.assess-l1-cloud-tooling&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.email.templates.readFromJiraHome&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;jira.export.csv.enabled&quot;]">
<meta name="ajs-in-admin-mode" content="false">
<meta name="ajs-is-sysadmin" content="false">
<meta name="ajs-is-admin" content="false">
<meta name="ajs-outgoing-mail-enabled" content="true">
<meta name="ajs-archiving-enabled" content="true">
<meta name="ajs-date-relativize" content="true">
<meta name="ajs-date-time" content="HH:mm">
<meta name="ajs-date-day" content="EEEE HH:mm">
<meta name="ajs-date-dmy" content="dd/MMM/yy">
<meta name="ajs-date-complete" content="dd/MMM/yy HH:mm">
<script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script>


    
<meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED_90536a15cd31c3389484dceed59b99b2b44c07e2_lout">



<link rel="shortcut icon" href="https://issues.apache.org/jira/s/-lmjgmc/820010/13pdxe5/_/images/fav-jsw.png">


    



<!--[if IE]><![endif]-->
<script type="text/javascript">
    (function() {
        var contextPath = '/jira';

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                contextPath = value;
            }
        });
    })();

</script>
<script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.core:feature-flags-data.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"com.atlassian.jira.migration.features.assess-l1-cloud-tooling\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.email.templates.readFromJiraHome\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.use.same.site.none.for.xsrf.token.cookie\":true,\"com.atlassian.jira.agile.darkfeature.handle.ug.usernames\":true,\"com.atlassian.jira.security.endpoint.non.admin.access.screens\":false,\"com.atlassian.jira.mailHandlerImapMessageQueryLegacy\":false,\"com.atlassian.jira.webhookEventsAsyncProcessing\":false,\"com.atlassian.jira.serAllowShareWithNonMember\":true,\"com.atlassian.troubleshooting.healthcheck.jira.license.limit\":false,\"com.atlassian.jira.diagnostics.perflog\":true,\"com.atlassian.jira.dbr\":true,\"com.atlassian.jira.agile.darkfeature.legacy.epic.picker\":false,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"com.atlassian.jira.agile.darkfeature.unlink.sprints.on.issue.move\":true,\"jira.renderer.consider.variable.format\":true,\"com.atlassian.jira.user.dbIdBasedKeyGenerationStrategy\":true,\"com.atlassian.jira.plugin.issuenavigator.jql.autocomplete.eagerlyLoaded\":false,\"com.atlassian.portfolio.dcBundling\":true,\"com.atlassian.jira.sharedEntityEditRights\":true,\"com.atlassian.jira.security.endpoint.anonymous.access.resolution\":false,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"com.atlassian.jira.thumbnailsDeferredGeneration\":true,\"jira.cluster.monitoring.show.offline.nodes\":true,\"com.atlassian.jira.commentReactions\":true,\"data.pipeline.feature.jira.issue.links.export\":true,\"com.atlassian.jira.custom.csv.escaper\":true,\"com.atlassian.jira.fixedCommentDeletionNotifications\":true,\"com.atlassian.jira.allThumbnailsDeferred\":false,\"com.atlassian.jira.plugin.issuenavigator.filtersUxImprovment\":true,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"com.atlassian.jira.jsd.mobile\":true,\"jira.customfields.cleanup.identification\":true,\"data.pipeline.feature.jira.all.exportable.custom.fields\":true,\"com.atlassian.jira.defaultValuesForSystemFields\":true,\"jira.dc.cleanup.cluser.tasks\":true,\"jira.customfields.bulk.delete\":true,\"com.atlassian.jira.issues.archiving.filters\":false,\"mail.batching.override.core\":true,\"jira.users.and.roles.page.in.react\":true,\"jira.security.csp.sandbox\":true,\"com.atlassian.jira.agile.darkfeature.velocity.chart.ui\":true,\"com.atlassian.jira.returnDefaultAvatarsForBrokenAvatars\":true,\"com.atlassian.jira.agile.darkfeature.sprint.auto.management\":false,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.gdpr.rtbf\":true,\"com.atlassian.jira.security.xsrf.session.token\":true,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.security.project.admin.revoke.with.application.access\":true,\"com.atlassian.jiranomenclature\":true,\"com.atlassian.jira.security.endpoint.non.admin.access.avatar.system\":false,\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"com.atlassian.jira.agile.darkfeature.future.sprint.dates\":true,\"com.atlassian.jira.filtersAndDashboardsShareableWithAllGroupsAndRoles\":true,\"jira.customfields.paginated.ui\":true,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"jira.create.linked.issue\":true,\"com.atlassian.jira.advanced.audit.log\":true,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"external.links.new.window\":true,\"jira.quick.search\":true,\"jira.jql.smartautoselectfirst\":false,\"jira.jql.membersof.ignoreGlobalPermissionsForAnonymous\":false,\"data.pipeline.feature.jira.issue.history.export\":true,\"com.atlassian.jira.security.endpoint.non.browse.projects.access.fields\":false,\"atlassian.cdn.static.assets\":true,\"jira.richeditor.bidi.warning\":true,\"mail.batching\":false,\"com.atlassian.jira.privateEntitiesEditable\":true,\"com.atlassian.jira.security.endpoint.anonymous.access.priority\":false,\"jira.priorities.per.project.edit.default\":false,\"com.atlassian.jira.agile.darkfeature.issues.in.epic.details.view\":true,\"jira.priorities.per.project.jsd\":true,\"com.atlassian.jira.plugin.issuenavigator.anonymousPreventCfData\":false,\"com.atlassian.jira.agile.darkfeature.rapid.boards.bands\":true,\"com.atlassian.jira.agile.darkfeature.flexible.boards\":true,\"com.atlassian.jira.agile.darkfeature.sprint.picker.allsprints.suggestion\":true,\"com.atlassian.jira.agile.darkfeature.epic.validate.visibility\":true,\"jira.dc.lock.leasing\":true,\"com.atlassian.jira.accessibility.personal.settings\":true,\"mail.batching.create.section.cf\":true,\"com.atlassian.jira.send.email.notifications.to.user.without.application.access\":false,\"com.atlassian.jira.security.endpoint.non.browse.projects.access.autocompletedata\":false,\"com.atlassian.mail.server.managers.hostname.verification\":true,\"com.atlassian.advancedroadmaps.rebrand\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"com.atlassian.jira.security.endpoint.anonymous.access.projectCategory\":false,\"jira.redirect.anonymous.404.errors\":true,\"com.atlassian.jira.issuetable.draggable\":true,\"com.atlassian.jira.attachments.generate.unique.suffix\":true,\"com.atlassian.jira.agile.darkfeature.kanban.hide.old.done.issues\":true,\"jira.version.based.node.reindex.service\":true,\"com.atlassian.jira.agile.darkfeature.backlog.showmore\":true,\"com.atlassian.jira.agile.darkfeature.sprint.plan\":false,\"com.atlassian.jira.security.endpoint.anonymous.access.issueLinkType\":false,\"com.atlassian.jira.security.LegacyJiraTypeResolver.WARN_ONLY\":false,\"data.pipeline.feature.jira.schema.version.2\":true,\"com.atlassian.jira.agile.darkfeature.burnupchart\":true,\"com.atlassian.jira.agile.darkfeature.velocity.sprint.picker\":false,\"com.atlassian.jira.issues.archiving.browse\":true,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.security.ChartUtils.browse.projects.permission.check\":false,\"mail.batching.user.notification\":true,\"com.atlassian.portfolio.permission.check.for.permissions\":true,\"com.atlassian.jira.agile.darkfeature.dataonpageload\":true,\"data.pipeline.feature.jira.archived.issue.export\":false,\"com.atlassian.jira.projects.per.project.permission.query\":true,\"com.atlassian.jira.issues.archiving\":true,\"index.use.snappy\":true,\"jira.priorities.per.project\":true}}";
WRM._unparsedData["jira.core:default-comment-security-level-data.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-0820/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.core:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.onresolve.jira.groovy.groovyrunner:behaviours-translations.behaviours-translations-data-provider"]="{\"field.title.missing.value\":\"You must enter a value for this field\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/png,image/vnd.wap.wbmp,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-thumbnails.thumbnails-allowed"]="false";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-0820/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["jira.core:terminology-data.terminology"]="{\"terminologyEntries\":[{\"originalName\":\"sprint\",\"originalNamePlural\":\"sprints\",\"newName\":\"sprint\",\"newNamePlural\":\"sprints\",\"isDefault\":true},{\"originalName\":\"epic\",\"originalNamePlural\":\"epics\",\"newName\":\"epic\",\"newNamePlural\":\"epics\",\"isDefault\":true}],\"isTerminologyActive\":false}";
WRM._unparsedData["com.atlassian.jira.jira-quick-edit-plugin:create-issue-data.data"]="{\"configurableSystemFieldIds\":[\"description\"]}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-plugin:user-parms.userParms"]="{\"createSharedObjects\":false,\"createIssue\":false}";
WRM._unparsedData["com.onresolve.jira.groovy.groovyrunner:pluginInfoSettingsWebResources.settings-data-provider"]="{\"helpBaseUrl\":\"https://docs.adaptavist.com/sr4js/8.43.0/\",\"pluginVersion\":\"8.43.0\",\"buildNumber\":820010,\"appKey\":\"com.onresolve.jira.groovy.groovyrunner\",\"animationsEnabled\":true,\"staticResourcePrefix\":\"/jira/s/-lmjgmc/820010/13pdxe5/_\",\"editorSettings\":{\"miniMapEnabled\":true,\"hapiLinterEnabled\":true}}";
WRM._unparsedData["jira.core:jqlautocomplete-data.jql.autocomplete.recentFields"]="{\"key\":\"jqlValues\",\"value\":[\"affectedVersion\",\"assignee\",\"component\",\"description\",\"issue\",\"labels\",\"parent\",\"priority\",\"project\",\"reporter\",\"resolution\",\"status\",\"summary\",\"type\",\"watcher\"]}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["com.onresolve.jira.groovy.groovyrunner:web-item-response-renderer.web-item-actions-data-provider"]="[]";
WRM._unparsedData["com.atlassian.jira.plugins.jira-slack-server-integration-plugin:slack-link-error-resources.slack-link-error"]="{}";
WRM._unparsedData["jira.core:avatar-picker-data.data"]="{}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind Jira.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["jira.core:user-message-flags-data.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"ccd15d56de68ce\"";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script>
<link type="text/css" rel="stylesheet" href="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all">
<link type="text/css" rel="stylesheet" href="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/batch(1).css" data-wrm-key="jira.view.issue,viewissue.standalone,jira.navigator.kickass,atl.general,atl.global,jira.global,jira.navigator,jira.general,jira.navigator.simple,jira.navigator.advanced,-_super" data-wrm-batch-type="context" media="all">
<link type="text/css" rel="stylesheet" href="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/com.atlassian.jira.jira-tzdetect-plugin_tzdetect-banner-component.css" data-wrm-key="com.atlassian.jira.jira-tzdetect-plugin:tzdetect-banner-component" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/jira.filter.deletion.warning_styles.css" data-wrm-key="jira.filter.deletion.warning:styles" data-wrm-batch-type="resource" media="all">
<script type="text/javascript" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/batch.js.download" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered=""></script>
<script type="text/javascript" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/batch(1).js.download" data-wrm-key="jira.view.issue,viewissue.standalone,jira.navigator.kickass,atl.general,atl.global,jira.global,jira.navigator,jira.general,jira.navigator.simple,jira.navigator.advanced,-_super" data-wrm-batch-type="context" data-initially-rendered=""></script><style>.vui-page-header{display:flex;flex-direction:row;padding:15px 30px}.vui-page-header-title-container{margin-top:29px;margin-bottom:29px;margin-left:60px;display:flex;flex:1 1 0}.vui-page-header-icon{margin-top:5px;height:24px;margin-right:20px;color:#182c4c;font-size:18px;cursor:pointer}.vui-page-header-title{height:33px;font-weight:600;font-size:25px;line-height:33px;color:#182c4c}.vui-page-header-search-container{float:right;margin-right:60px;margin-top:29px;margin-bottom:29px;display:flex}.vui-page-header-search-input{width:350px}.vui-page-header-search-input>div>div>div>div>div>div>div>div>div>div>div>div{border:2px solid #dfe1e6;border-right:none;border-radius:4px 0 0 4px}.vui-page-header-search-input label{display:none}.vui-page-header-search-input #inputId{box-shadow:none}.vui-page-header-search-button>button{height:42px;width:42px;border-top-left-radius:0;border-bottom-left-radius:0}.vui-page-header-search-button>button>span{padding-top:4px}.vui-page-header-search-button-icon{color:#fff}</style><style data-styled-components=""></style><style type="text/css"></style><style type="text/css"></style><style type="text/css">@keyframes iLtbJJ {
  from { transform: rotate(230deg); -ms-transform: rotate(230deg); -webkit-transform: rotate(230deg); }
  to { transform: rotate(510deg); -ms-transform: rotate(510deg); -webkit-transform: rotate(510deg); }

}@-webkit-keyframes iLtbJJ {
  from { transform: rotate(230deg); -ms-transform: rotate(230deg); -webkit-transform: rotate(230deg); }
  to { transform: rotate(510deg); -ms-transform: rotate(510deg); -webkit-transform: rotate(510deg); }

}@keyframes cZJnvt {
  from { transform: rotate(50deg); -ms-transform: rotate(50deg); -webkit-transform: rotate(50deg); }
  to { transform: rotate(230deg); -ms-transform: rotate(230deg); -webkit-transform: rotate(230deg); }

}@-webkit-keyframes cZJnvt {
  from { transform: rotate(50deg); -ms-transform: rotate(50deg); -webkit-transform: rotate(50deg); }
  to { transform: rotate(230deg); -ms-transform: rotate(230deg); -webkit-transform: rotate(230deg); }

}@keyframes ibwhYF {
  to { transform: rotate(360deg); -ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); }

}@-webkit-keyframes ibwhYF {
  to { transform: rotate(360deg); -ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); }

}</style><style type="text/css"></style><style type="text/css">._3oWQF5W5kZzJBpObJfEzGt{align-items:center;display:inline-flex;justify-content:center;line-height:1}._37ccNB_mPuor8FT7FPGHGL{height:16px;width:16px}._37ccNB_mPuor8FT7FPGHGL ._2po-RCTEyN6ZJsP-FepcJZ{height:100%;width:100%}._2AwCSJIOic3TSJ2zFZJ00t{height:24px;width:24px}._2AwCSJIOic3TSJ2zFZJ00t ._2po-RCTEyN6ZJsP-FepcJZ{height:100%;width:100%}.UiatcvzPE_CLrAfejNq1Q{height:32px;width:32px}.UiatcvzPE_CLrAfejNq1Q ._2po-RCTEyN6ZJsP-FepcJZ{height:100%;width:100%}._2VK_u-zIY4PjNCAKCMiBvF{height:48px;width:48px}._2VK_u-zIY4PjNCAKCMiBvF ._2po-RCTEyN6ZJsP-FepcJZ{height:100%;width:100%}._2po-RCTEyN6ZJsP-FepcJZ{overflow:hidden;max-height:100%;max-width:100%;vertical-align:bottom}</style><style>.vui-bulk-attachment-page-content{padding-left:40px;padding-right:40px;padding-bottom:15px;background:#fff;border-top:2px solid #dfe1e6}.vui-page-content-issue-table{border-collapse:collapse;width:100%}.vui-page-content-issue-table-thread{color:#6b778c}.vui-page-content-issue-table-th{padding:15px 12px;font-weight:600;line-height:1.66666667;letter-spacing:0;text-transform:none;border-bottom:.25em solid #dfe1e6;text-align:left}.vui-page-content-issue-table-th>.vui-sort-icon{margin-left:10px}</style><style>.vui-page-content-issue-table-td{padding:23px 12px;text-align:left;vertical-align:top;border-top:1px solid #dfe1e6;border-bottom:1px solid #dfe1e6;font-size:13px}.vui-page-content-issue-expanded-icon{font-size:18px;cursor:pointer}.vui-page-content-issue-table-td>i{font-size:18px}.vui-page-content-issue-table-td.issue-type{color:#3284ff;padding-top:25px}</style><style>.vui-page-content-attachment-table-td{padding:12px 12px;line-height:1.66666667;border-top:1px solid #dfe1e6}.vui-page-content-attachment-table-td>label{cursor:pointer}.vui-page-content-attachment-table-td.preview{text-align:center;padding-left:20px}.vui-page-content-attachment-table-td.preview>img{max-width:30px;border-radius:3px;margin-top:-5px;margin-bottom:-10px}.vui-page-content-attachment-table-td.preview>.vui-file-alt-icon{color:#3284ff}</style><style>.vui-page-content-attachment-table{border-collapse:collapse;width:100%;background:#f4f5f7;font-size:13px}.vui-page-content-attachment-table-thread{color:#6b778c}.vui-page-content-attachment-table-th{padding:5px 12px;border-bottom:2px solid #dfe1e6;text-align:left}.vui-page-content-attachment-table-th>.vui-sort-icon{margin-left:10px}</style><style>.vui-page-footer{display:flex;flex-direction:row;border-bottom:1px solid #dfe1e6}.vui-page-footer-title{margin-top:45px;margin-bottom:45px;margin-left:58px;display:flex;flex:1 1 0;font-weight:600;font-size:25px;line-height:33px;color:#182c4c}.vui-page-footer-target-issue-select-container{float:right;margin-right:60px;margin-top:45px;margin-bottom:45px;display:flex}.vui-page-footer-target-issue-input{width:330px;height:33px;border-radius:3px;border:1px solid #dfe1e6}.vui-page-footer-target-issue-button{width:100px;margin-left:15px;margin-right:10px}</style><style>.vui-page-header{display:flex;flex-direction:row;padding:15px 30px}.vui-page-header-title-container{margin-top:29px;margin-bottom:29px;margin-left:60px;display:flex;flex:1 1 0}.vui-page-header-icon{margin-top:5px;height:24px;margin-right:20px;color:#182c4c;font-size:18px;cursor:pointer}.vui-page-header-title{height:33px;font-weight:600;font-size:25px;line-height:33px;color:#182c4c}.vui-page-header-search-container{float:right;margin-right:60px;margin-top:29px;margin-bottom:29px;display:flex}.vui-page-header-search-input{width:350px}.vui-page-header-search-input>div>div>div>div>div>div>div>div>div>div>div>div{border:2px solid #dfe1e6;border-right:none;border-radius:4px 0 0 4px}.vui-page-header-search-input label{display:none}.vui-page-header-search-input #inputId{box-shadow:none}.vui-page-header-search-button>button{height:42px;width:42px;border-top-left-radius:0;border-bottom-left-radius:0}.vui-page-header-search-button>button>span{padding-top:4px}.vui-page-header-search-button-icon{color:#fff}</style><style data-styled-components=""></style><style type="text/css"></style><style type="text/css"></style><style type="text/css">@keyframes iLtbJJ {
  from { transform: rotate(230deg); -ms-transform: rotate(230deg); -webkit-transform: rotate(230deg); }
  to { transform: rotate(510deg); -ms-transform: rotate(510deg); -webkit-transform: rotate(510deg); }

}@-webkit-keyframes iLtbJJ {
  from { transform: rotate(230deg); -ms-transform: rotate(230deg); -webkit-transform: rotate(230deg); }
  to { transform: rotate(510deg); -ms-transform: rotate(510deg); -webkit-transform: rotate(510deg); }

}@keyframes cZJnvt {
  from { transform: rotate(50deg); -ms-transform: rotate(50deg); -webkit-transform: rotate(50deg); }
  to { transform: rotate(230deg); -ms-transform: rotate(230deg); -webkit-transform: rotate(230deg); }

}@-webkit-keyframes cZJnvt {
  from { transform: rotate(50deg); -ms-transform: rotate(50deg); -webkit-transform: rotate(50deg); }
  to { transform: rotate(230deg); -ms-transform: rotate(230deg); -webkit-transform: rotate(230deg); }

}@keyframes ibwhYF {
  to { transform: rotate(360deg); -ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); }

}@-webkit-keyframes ibwhYF {
  to { transform: rotate(360deg); -ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); }

}</style><style type="text/css"></style><style type="text/css">._3oWQF5W5kZzJBpObJfEzGt{align-items:center;display:inline-flex;justify-content:center;line-height:1}._37ccNB_mPuor8FT7FPGHGL{height:16px;width:16px}._37ccNB_mPuor8FT7FPGHGL ._2po-RCTEyN6ZJsP-FepcJZ{height:100%;width:100%}._2AwCSJIOic3TSJ2zFZJ00t{height:24px;width:24px}._2AwCSJIOic3TSJ2zFZJ00t ._2po-RCTEyN6ZJsP-FepcJZ{height:100%;width:100%}.UiatcvzPE_CLrAfejNq1Q{height:32px;width:32px}.UiatcvzPE_CLrAfejNq1Q ._2po-RCTEyN6ZJsP-FepcJZ{height:100%;width:100%}._2VK_u-zIY4PjNCAKCMiBvF{height:48px;width:48px}._2VK_u-zIY4PjNCAKCMiBvF ._2po-RCTEyN6ZJsP-FepcJZ{height:100%;width:100%}._2po-RCTEyN6ZJsP-FepcJZ{overflow:hidden;max-height:100%;max-width:100%;vertical-align:bottom}</style><style>.vui-bulk-attachment-page-content{padding-left:40px;padding-right:40px;padding-bottom:15px;background:#fff;border-top:2px solid #dfe1e6}.vui-page-content-issue-table{border-collapse:collapse;width:100%}.vui-page-content-issue-table-thread{color:#6b778c}.vui-page-content-issue-table-th{padding:15px 12px;font-weight:600;line-height:1.66666667;letter-spacing:0;text-transform:none;border-bottom:.25em solid #dfe1e6;text-align:left}.vui-page-content-issue-table-th>.vui-sort-icon{margin-left:10px}</style><style>.vui-page-content-issue-table-td{padding:23px 12px;text-align:left;vertical-align:top;border-top:1px solid #dfe1e6;border-bottom:1px solid #dfe1e6;font-size:13px}.vui-page-content-issue-expanded-icon{font-size:18px;cursor:pointer}.vui-page-content-issue-table-td>i{font-size:18px}.vui-page-content-issue-table-td.issue-type{color:#3284ff;padding-top:25px}</style><style>.vui-page-content-attachment-table-td{padding:12px 12px;line-height:1.66666667;border-top:1px solid #dfe1e6}.vui-page-content-attachment-table-td>label{cursor:pointer}.vui-page-content-attachment-table-td.preview{text-align:center;padding-left:20px}.vui-page-content-attachment-table-td.preview>img{max-width:30px;border-radius:3px;margin-top:-5px;margin-bottom:-10px}.vui-page-content-attachment-table-td.preview>.vui-file-alt-icon{color:#3284ff}</style><style>.vui-page-content-attachment-table{border-collapse:collapse;width:100%;background:#f4f5f7;font-size:13px}.vui-page-content-attachment-table-thread{color:#6b778c}.vui-page-content-attachment-table-th{padding:5px 12px;border-bottom:2px solid #dfe1e6;text-align:left}.vui-page-content-attachment-table-th>.vui-sort-icon{margin-left:10px}</style><style>.vui-page-footer{display:flex;flex-direction:row;border-bottom:1px solid #dfe1e6}.vui-page-footer-title{margin-top:45px;margin-bottom:45px;margin-left:58px;display:flex;flex:1 1 0;font-weight:600;font-size:25px;line-height:33px;color:#182c4c}.vui-page-footer-target-issue-select-container{float:right;margin-right:60px;margin-top:45px;margin-bottom:45px;display:flex}.vui-page-footer-target-issue-input{width:330px;height:33px;border-radius:3px;border:1px solid #dfe1e6}.vui-page-footer-target-issue-button{width:100px;margin-left:15px;margin-right:10px}</style><style>.vui-page-header{display:flex;flex-direction:row;padding:15px 30px}.vui-page-header-title-container{margin-top:29px;margin-bottom:29px;margin-left:60px;display:flex;flex:1 1 0}.vui-page-header-icon{margin-top:5px;height:24px;margin-right:20px;color:#182c4c;font-size:18px;cursor:pointer}.vui-page-header-title{height:33px;font-weight:600;font-size:25px;line-height:33px;color:#182c4c}.vui-page-header-search-container{float:right;margin-right:60px;margin-top:29px;margin-bottom:29px;display:flex}.vui-page-header-search-input{width:350px}.vui-page-header-search-input>div>div>div>div>div>div>div>div>div>div>div>div{border:2px solid #dfe1e6;border-right:none;border-radius:4px 0 0 4px}.vui-page-header-search-input label{display:none}.vui-page-header-search-input #inputId{box-shadow:none}.vui-page-header-search-button>button{height:42px;width:42px;border-top-left-radius:0;border-bottom-left-radius:0}.vui-page-header-search-button>button>span{padding-top:4px}.vui-page-header-search-button-icon{color:#fff}</style><style data-styled-components=""></style><style type="text/css"></style><style type="text/css"></style><style type="text/css">@keyframes iLtbJJ {
  from { transform: rotate(230deg); -ms-transform: rotate(230deg); -webkit-transform: rotate(230deg); }
  to { transform: rotate(510deg); -ms-transform: rotate(510deg); -webkit-transform: rotate(510deg); }

}@-webkit-keyframes iLtbJJ {
  from { transform: rotate(230deg); -ms-transform: rotate(230deg); -webkit-transform: rotate(230deg); }
  to { transform: rotate(510deg); -ms-transform: rotate(510deg); -webkit-transform: rotate(510deg); }

}@keyframes cZJnvt {
  from { transform: rotate(50deg); -ms-transform: rotate(50deg); -webkit-transform: rotate(50deg); }
  to { transform: rotate(230deg); -ms-transform: rotate(230deg); -webkit-transform: rotate(230deg); }

}@-webkit-keyframes cZJnvt {
  from { transform: rotate(50deg); -ms-transform: rotate(50deg); -webkit-transform: rotate(50deg); }
  to { transform: rotate(230deg); -ms-transform: rotate(230deg); -webkit-transform: rotate(230deg); }

}@keyframes ibwhYF {
  to { transform: rotate(360deg); -ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); }

}@-webkit-keyframes ibwhYF {
  to { transform: rotate(360deg); -ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); }

}</style><style type="text/css"></style><style type="text/css">._3oWQF5W5kZzJBpObJfEzGt{align-items:center;display:inline-flex;justify-content:center;line-height:1}._37ccNB_mPuor8FT7FPGHGL{height:16px;width:16px}._37ccNB_mPuor8FT7FPGHGL ._2po-RCTEyN6ZJsP-FepcJZ{height:100%;width:100%}._2AwCSJIOic3TSJ2zFZJ00t{height:24px;width:24px}._2AwCSJIOic3TSJ2zFZJ00t ._2po-RCTEyN6ZJsP-FepcJZ{height:100%;width:100%}.UiatcvzPE_CLrAfejNq1Q{height:32px;width:32px}.UiatcvzPE_CLrAfejNq1Q ._2po-RCTEyN6ZJsP-FepcJZ{height:100%;width:100%}._2VK_u-zIY4PjNCAKCMiBvF{height:48px;width:48px}._2VK_u-zIY4PjNCAKCMiBvF ._2po-RCTEyN6ZJsP-FepcJZ{height:100%;width:100%}._2po-RCTEyN6ZJsP-FepcJZ{overflow:hidden;max-height:100%;max-width:100%;vertical-align:bottom}</style><style>.vui-bulk-attachment-page-content{padding-left:40px;padding-right:40px;padding-bottom:15px;background:#fff;border-top:2px solid #dfe1e6}.vui-page-content-issue-table{border-collapse:collapse;width:100%}.vui-page-content-issue-table-thread{color:#6b778c}.vui-page-content-issue-table-th{padding:15px 12px;font-weight:600;line-height:1.66666667;letter-spacing:0;text-transform:none;border-bottom:.25em solid #dfe1e6;text-align:left}.vui-page-content-issue-table-th>.vui-sort-icon{margin-left:10px}</style><style>.vui-page-content-issue-table-td{padding:23px 12px;text-align:left;vertical-align:top;border-top:1px solid #dfe1e6;border-bottom:1px solid #dfe1e6;font-size:13px}.vui-page-content-issue-expanded-icon{font-size:18px;cursor:pointer}.vui-page-content-issue-table-td>i{font-size:18px}.vui-page-content-issue-table-td.issue-type{color:#3284ff;padding-top:25px}</style><style>.vui-page-content-attachment-table-td{padding:12px 12px;line-height:1.66666667;border-top:1px solid #dfe1e6}.vui-page-content-attachment-table-td>label{cursor:pointer}.vui-page-content-attachment-table-td.preview{text-align:center;padding-left:20px}.vui-page-content-attachment-table-td.preview>img{max-width:30px;border-radius:3px;margin-top:-5px;margin-bottom:-10px}.vui-page-content-attachment-table-td.preview>.vui-file-alt-icon{color:#3284ff}</style><style>.vui-page-content-attachment-table{border-collapse:collapse;width:100%;background:#f4f5f7;font-size:13px}.vui-page-content-attachment-table-thread{color:#6b778c}.vui-page-content-attachment-table-th{padding:5px 12px;border-bottom:2px solid #dfe1e6;text-align:left}.vui-page-content-attachment-table-th>.vui-sort-icon{margin-left:10px}</style><style>.vui-page-footer{display:flex;flex-direction:row;border-bottom:1px solid #dfe1e6}.vui-page-footer-title{margin-top:45px;margin-bottom:45px;margin-left:58px;display:flex;flex:1 1 0;font-weight:600;font-size:25px;line-height:33px;color:#182c4c}.vui-page-footer-target-issue-select-container{float:right;margin-right:60px;margin-top:45px;margin-bottom:45px;display:flex}.vui-page-footer-target-issue-input{width:330px;height:33px;border-radius:3px;border:1px solid #dfe1e6}.vui-page-footer-target-issue-button{width:100px;margin-left:15px;margin-right:10px}</style>
<script type="text/javascript" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/com.atlassian.jira.jira-tzdetect-plugin_tzdetect-banner-component.js.download" data-wrm-key="com.atlassian.jira.jira-tzdetect-plugin:tzdetect-banner-component" data-wrm-batch-type="resource" data-initially-rendered=""></script>
<script type="text/javascript" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/com.atlassian.jira.jira-tzdetect-plugin_tzdetect-lib.js.download" data-wrm-key="com.atlassian.jira.jira-tzdetect-plugin:tzdetect-lib" data-wrm-batch-type="resource" data-initially-rendered=""></script>
<script type="text/javascript" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/jira.webresources_calendar-en.js.download" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered=""></script>
<script type="text/javascript" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/jira.webresources_calendar-localisation-moment.js.download" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered=""></script>
<link type="text/css" rel="stylesheet" href="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/batch(2).css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all">

<script type="text/javascript" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/shortcuts.js.download"></script>



    
    
    <meta name="decorator" content="atl.general">
    <meta id="isNavigator" name="isNavigator" content="true">
    <meta name="ajs-user.search.mode" content="basic">
    <meta name="ajs-issue-search-help-title" content="Searching for issues">
    <meta name="ajs-issue-search-help-url" content="https://docs.atlassian.com/jira/jcore-docs-0820/Searching+for+issues">
    <meta name="ajs-advanced-search-help-title" content="Advanced searching">
    <meta name="ajs-advanced-search-help-url" content="https://docs.atlassian.com/jira/jcore-docs-0820/Advanced+searching">
            <meta name="ajs-jql" content="text ~ &quot;Vector API&quot;">
        
    







<title>[PARQUET-2159] Parquet bit-packing de/encode optimization - ASF JIRA</title>
<link rel="search" type="application/opensearchdescription+xml" href="https://issues.apache.org/jira/osd.jsp" title="Issue Navigator - ASF JIRA">


<script type="text/javascript" charset="utf-8" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/batch(2).js.download"></script><link rel="stylesheet" type="text/css" href="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/batch(3).css"><script type="text/javascript" charset="utf-8" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/batch(3).js.download"></script><script type="text/javascript" charset="utf-8" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/tinymce.js.download"></script><script type="text/javascript" charset="utf-8" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/tinymce-amd.js.download"></script><script type="text/javascript" charset="utf-8" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/icons.js.download"></script><script type="text/javascript" charset="utf-8" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/theme.js.download"></script><script type="text/javascript" charset="utf-8" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/batch(4).js.download"></script><script type="text/javascript" charset="utf-8" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/jira.webresources_issue-table-dnd.js.download"></script></head>




<body id="jira" class="aui-layout aui-theme-default  ka ajax-issue-search-and-view page-type-navigator page-type-split" data-version="8.20.10" data-aui-version="9.2.3-4dc984d9f" data-behaviours-server-call-count="0" data-new-gr-c-s-check-loaded="14.1243.0" data-gr-ext-installed="">
<div id="page">
    <header id="header" role="banner">
        






<script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () { // eslint-disable-line @atlassian/onready-checks/no-jquery-onready
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script>



        




        


<a class="aui-skip-link" href="https://issues.apache.org/jira/login.jsp?os_destination=%2Fbrowse%2FPARQUET-2159%3Fjql%3Dtext%2520%7E%2520%2522Vector%2520API%2522">Log in</a><a class="aui-skip-link" href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#main">Skip to main content</a><a class="aui-skip-link" href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#sidebar">Skip to sidebar</a><nav class="aui-header aui-dropdown2-trigger-group" aria-label="Site" data-aui-responsive="true"><div class="aui-header-inner"><div class="aui-header-before"><button class=" aui-dropdown2-trigger app-switcher-trigger aui-dropdown2-trigger-arrowless" aria-controls="app-switcher" aria-haspopup="true" role="button" data-aui-trigger="" href="#app-switcher" resolved="" aria-expanded="false"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></button><div id="app-switcher" class="aui-dropdown2 aui-style-default aui-layer" role="menu" hidden="" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}" resolved="" tabindex="-1"><div class="aui-dropdown2-section"><ul class="nav-links"><li class="nav-link nav-link-local"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa" class="aui-dropdown2-radio aui-dropdown2-checked checked" title="https://issues.apache.org/jira/secure/MyJiraHome.jspa" resolved="" aria-checked="true" tabindex="0"><span class="nav-link-label">ASF JIRA</span></a></li><li class="nav-link"><a href="https://cwiki.apache.org/confluence/" class="aui-dropdown2-radio" title="https://cwiki.apache.org/confluence/" resolved="" aria-checked="false" tabindex="0"><span class="nav-link-label">Apache Software Foundation</span></a></li></ul></div></div></div><div class="aui-header-primary"><span id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa" aria-label="Go to home page"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/jira-logo-scaled.png" alt="ASF JIRA" data-aui-responsive-header-index="0"></a></span><ul class="aui-nav" resolved="" style="width: auto;"><li><a href="https://issues.apache.org/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d" elementtiming="app-header" resolved="" aria-expanded="false">Dashboards</a><div class="aui-dropdown2 aui-style-default aui-layer" id="home_link-content" data-aui-dropdown2-ajax-key="home_link" resolved="" tabindex="-1"></div></li><li><a href="https://issues.apache.org/jira/secure/BrowseProjects.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p" resolved="" aria-expanded="false">Projects</a><div class="aui-dropdown2 aui-style-default aui-layer" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link" resolved="" tabindex="-1"></div></li><li><a href="https://issues.apache.org/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i" resolved="" aria-expanded="false">Issues</a><div class="aui-dropdown2 aui-style-default aui-layer" id="find_link-content" data-aui-dropdown2-ajax-key="find_link" resolved="" tabindex="-1"></div></li>
</ul></div><div class="aui-header-secondary"><ul class="aui-nav" resolved="">
<li id="quicksearch-menu">
    <form action="https://issues.apache.org/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt">
        <input id="quickSearchInput" autocomplete="off" class="search" type="text" title="Search ( Type &#39;/&#39; )" placeholder="Search" name="searchString" accesskey="q"><div class="quick-search-spinner"></div>
        <input type="submit" class="hidden" value="Search">
    </form>
</li>





    <li id="system-help-menu">
        <a class="aui-nav-link aui-dropdown2-trigger aui-dropdown2-trigger-arrowless" id="help_menu" aria-haspopup="true" href="https://docs.atlassian.com/jira/jcore-docs-0820/" target="_blank" rel="noopener noreferrer" title="Help" resolved="" aria-controls="system-help-menu-content" aria-expanded="false"><span class="aui-icon aui-icon-small aui-iconfont-question-filled">Help</span></a>
        <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default aui-layer" resolved="" tabindex="-1">
                            <div class="aui-dropdown2-section">
                                                                <ul id="jira-help" class="aui-list-truncate">
                                                            <li>
                                    <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for Jira Core" href="https://docs.atlassian.com/jira/jcore-docs-0820/" target="_blank">Jira Core help</a>
                                </li>
                                                            <li>
                                    <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about Jira&#39;s Keyboard Shortcuts ( Type &#39;?&#39; )" href="https://issues.apache.org/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a>
                                </li>
                                                            <li>
                                    <a id="view_about" class="aui-nav-link " title="Get more information about Jira" href="https://issues.apache.org/jira/secure/AboutPage.jspa">About Jira</a>
                                </li>
                                                            <li>
                                    <a id="view_credits" class="aui-nav-link " title="See who did what" href="https://issues.apache.org/jira/secure/credits/AroundTheWorld!default.jspa" target="_blank">Jira Credits</a>
                                </li>
                                                    </ul>
                                    </div>
                    </div>
    </li>









<li id="user-options">
            <a class="aui-nav-link login-link" href="https://issues.apache.org/jira/login.jsp?os_destination=%2Fbrowse%2FPARQUET-2159%3Fjql%3Dtext%2520~%2520%2522Vector%2520API%2522">Log In</a>
                <div id="user-options-content" class="aui-dropdown2 aui-style-default aui-layer" resolved="" tabindex="-1">
                            <div class="aui-dropdown2-section">
                                                        </div>
                    </div>
    </li>
</ul></div></div><!-- .aui-header-inner--><aui-header-end resolved=""></aui-header-end></nav><!-- .aui-header -->
    </header>
    


<div id="announcement-banner" class="alertHeader">
    <div id="announcement-banner" class="alertHeader">
    <div style="border: solid red; border-width: 0 1em 0; font-size:1.2em; text-align:center;background-color:#EEE"><p>Public signup for this instance is <strong>disabled</strong>. Go to our <a href="https://selfserve.apache.org/jira-account.html">Self serve sign up page</a> to request an account. Report potential security issues <a href="https://apache.org/security/#reporting-a-vulnerability">privately</a></p></div>
</div>
</div>


    <div id="content">

    <div class="navigator-container">
                                                                                                                                <div class="hidden shortcut-links">
                                    <a class="issueaction-edit-issue" href="https://issues.apache.org/jira/secure/EditIssue!default.jspa?id={0}&amp;returnUrl=/secure/issues" title=" ( Type &#39;e&#39; )"></a>
                                    <a class="issueaction-assign-issue" href="https://issues.apache.org/jira/secure/AssignIssue!default.jspa?id={0}&amp;returnUrl=/secure/issues" title=" ( Type &#39;a&#39; )"></a>
                                    <a class="issueaction-assign-to-me hide-from-opsbar" href="https://issues.apache.org/jira/secure/AssignIssue.jspa?atl_token=A5KQ-2QAV-T4JA-FDED_90536a15cd31c3389484dceed59b99b2b44c07e2_lout&amp;id={0}&amp;&amp;returnUrl=/secure/issues" title=" ( Type &#39;i&#39; )"></a>
                                    <a class="issueaction-comment-issue add-issue-comment" href="https://issues.apache.org/jira/secure/AddComment!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-log-work" href="https://issues.apache.org/jira/secure/CreateWorklog!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-greenhopper-rapidboard-operation js-rapidboard-operation-issue" href="https://issues.apache.org/jira/secure/GHGoToBoard.jspa?issueId={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-greenhopper-rank-top-operation" href="https://issues.apache.org/jira/secure/RankTop.jspa?issueId={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-greenhopper-rank-bottom-operation" href="https://issues.apache.org/jira/secure/RankBottom.jspa?issueId={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-archive-issue" href="https://issues.apache.org/jira/secure/ArchiveIssue!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="unified-attach-file" href="https://issues.apache.org/jira/secure/AttachFile!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-attach-screenshot-html5" href="https://issues.apache.org/jira/secure/ShowAttachScreenshotFormAction!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="trigger-dialog issueaction-delete-all-attachments" href="https://issues.apache.org/jira/secure/DeleteAttachAction!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="" href="https://issues.apache.org/jira/secure/BulkCopyAttachments.jspa?parentIssueId=${issue.id}&amp;projectKey=${issue.project.key}&amp;returnUrl=/secure/issues"></a>
                                    <a class="" href="https://issues.apache.org/jira/secure/BulkMoveAttachments.jspa?parentIssueId=${issue.id}&amp;projectKey=${issue.project.key}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-vote-issue" href="https://issues.apache.org/jira/secure/VoteOrWatchIssue.jspa?atl_token=A5KQ-2QAV-T4JA-FDED_90536a15cd31c3389484dceed59b99b2b44c07e2_lout&amp;id={0}&amp;vote=vote&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-unvote-issue" href="https://issues.apache.org/jira/secure/VoteOrWatchIssue.jspa?atl_token=A5KQ-2QAV-T4JA-FDED_90536a15cd31c3389484dceed59b99b2b44c07e2_lout&amp;id={0}&amp;vote=unvote&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-view-voters" href="https://issues.apache.org/jira/secure/ViewVoters!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-watch-issue" href="https://issues.apache.org/jira/secure/VoteOrWatchIssue.jspa?atl_token=A5KQ-2QAV-T4JA-FDED_90536a15cd31c3389484dceed59b99b2b44c07e2_lout&amp;id={0}&amp;watch=watch&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-unwatch-issue" href="https://issues.apache.org/jira/secure/VoteOrWatchIssue.jspa?atl_token=A5KQ-2QAV-T4JA-FDED_90536a15cd31c3389484dceed59b99b2b44c07e2_lout&amp;id={0}&amp;watch=unwatch&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-manage-watchers" href="https://issues.apache.org/jira/secure/ManageWatchers!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-create-subtask" href="https://issues.apache.org/jira/secure/CreateSubTaskIssue!default.jspa?parentIssueId={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-subtask-to-issue" href="https://issues.apache.org/jira/secure/ConvertSubTask.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-issue-to-subtask" href="https://issues.apache.org/jira/secure/ConvertIssue.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="devstatus-cta-link" href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#devstatus.cta.createbranch&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-create-linked-issue" href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-move-issue" href="https://issues.apache.org/jira/secure/MoveIssue!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-move-subtask" href="https://issues.apache.org/jira/secure/MoveSubTaskChooseOperation!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-link-issue" href="https://issues.apache.org/jira/secure/LinkJiraIssue!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-clone-issue" href="https://issues.apache.org/jira/secure/CloneIssueDetails!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-edit-labels" href="https://issues.apache.org/jira/secure/EditLabels!default.jspa?id={0}&amp;returnUrl=/secure/issues" title=" ( Type &#39;l&#39; )"></a>
                                    <a class="" href="https://issues.apache.org/jira/secure/SelectUpdateIssueCommenterAction!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="" href="https://issues.apache.org/jira/secure/SelectUpdateIssueCommentTextAction!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="" href="https://issues.apache.org/jira/secure/SelectUpdateIssueCommentVisibilityAction!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="" href="https://issues.apache.org/jira/secure/SelectDeleteIssueCommentAction!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                                    <a class="issueaction-delete-issue" href="https://issues.apache.org/jira/secure/DeleteIssue!default.jspa?id={0}&amp;returnUrl=/secure/issues"></a>
                            </div>
        
        <div class="navigator-sidebar ui-sidebar-scrollable" id="navigator-sidebar" role="complementary" style="width: 200px;"><div class="ui-sidebar-content"><div class="filters-content"><div class="filter-title"><a href="https://issues.apache.org/jira/issues/?jql=" class="new-search aui-button" title="Create a new search filter" resolved="">New search</a><a class="aui-button aui-button-subtle ui-undock" href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#" original-title="Undock the filter panel so it is hidden when not being focused (Type &#39;[&#39;)" resolved=""><span class="aui-icon aui-icon-small aui-iconfont-chevron-double-left">Undock</span></a></div><ul class="filter-options"><li><a class="find-filters" href="https://issues.apache.org/jira/secure/ManageFilters.jspa?filterView=search">Find filters</a></li></ul><div class="filter-panel-wrapper" style="max-height: 533.6px;"><div class="filter-panel-system-container"><div class="aui-navgroup-vertical filter-panel-section"><h2 class="aui-nav-heading"><strong class="filter-title">Filters</strong></h2><div class="filter-content"><ul class="aui-nav saved-filter filter-list system-filters" resolved=""><li><a class="filter-link requires-login" href="https://issues.apache.org/jira/login.jsp?os_destination=%2Fissues%2F%3Ffilter%3D-1" data-id="-1" title="My open issues">My open issues</a></li><li><a class="filter-link requires-login" href="https://issues.apache.org/jira/login.jsp?os_destination=%2Fissues%2F%3Ffilter%3D-2" data-id="-2" title="Reported by me">Reported by me</a></li><li><a class="filter-link" href="https://issues.apache.org/jira/issues/?filter=-4" data-id="-4" title="All issues">All issues</a></li><li><a class="filter-link" href="https://issues.apache.org/jira/issues/?filter=-5" data-id="-5" title="Open issues">Open issues</a></li><li><a class="filter-link" href="https://issues.apache.org/jira/issues/?filter=-9" data-id="-9" title="Done issues">Done issues</a></li><li><a class="filter-link" href="https://issues.apache.org/jira/issues/?filter=-3" data-id="-3" title="Viewed recently">Viewed recently</a></li><li><a class="filter-link" href="https://issues.apache.org/jira/issues/?filter=-6" data-id="-6" title="Created recently">Created recently</a></li><li><a class="filter-link" href="https://issues.apache.org/jira/issues/?filter=-7" data-id="-7" title="Resolved recently">Resolved recently</a></li><li><a class="filter-link" href="https://issues.apache.org/jira/issues/?filter=-8" data-id="-8" title="Updated recently">Updated recently</a></li></ul></div></div></div><div class="filter-panel-favourites-container"><div class="aui-navgroup-vertical filter-panel-section"><h2 class="aui-nav-heading"><strong class="filter-title">Favourite Filters</strong></h2><div class="filter-content"><p class="filter-info favourite-filters">You must be <a class="login-link" href="https://issues.apache.org/jira/login.jsp?os_destination=%2Fbrowse%2FPARQUET-2159%3Fjql%3Dtext%2520~%2520%2522Vector%2520API%2522">logged in</a> to view favourite filters.</p></div></div></div></div></div></div><div class="ui-sidebar ui-draggable ui-draggable-handle" style="position: absolute; left: 200px;"></div></div>
        <script type="text/javascript">
            (function() {
                var navigatorSidebarElement = jQuery(".navigator-sidebar");
                if (JIRA.Issues.FilterPanelModel) {
                    navigatorSidebarElement.toggleClass("collapsed", !JIRA.Issues.FilterPanelModel.prototype.isExpanded())
                    if (JIRA.Issues.FilterPanelModel.prototype.isExpanded()) {
                        navigatorSidebarElement.css({ width: JIRA.Issues.FilterPanelModel.prototype.getWidth() });
                    }
                }
            })();
        </script>
        <main id="main" class="navigator-body" role="main">
            <div class="contained-content" style="height: calc(-98.4px + 100vh);">
                <div class="issue-search-header">
                    <header class="saved-search-selector">
                        <div class="saved-search-operations operations">
                            
                            <button class="aui-button aui-button-subtle header-views header-operations jira-aui-dropdown2-trigger" resolved="" original-title="" id="AJS_DROPDOWN__81" aria-controls="AJS_DROPDOWN__81_drop" aria-haspopup="true" aria-expanded="false"><span class="aui-icon aui-icon-small aui-iconfont-export"></span><span class="aui-button-label">Export</span></button>
                            <button class="aui-button aui-button-subtle header-tools header-operations jira-aui-dropdown2-trigger" resolved="" original-title="" id="AJS_DROPDOWN__79" aria-controls="AJS_DROPDOWN__79_drop" aria-haspopup="true" aria-expanded="false"><span class="aui-icon aui-icon-small aui-iconfont-configure"></span><span class="aui-button-label">Tools</span></button>

                                                            <section role="dialog" id="csv-export-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" hidden="">
                                    <header class="aui-dialog2-header">
                                        <h2 id="csv-export-dialog-header-all" class="aui-dialog2-header-main">Export - CSV (All fields)</h2>
                                        <h2 id="csv-export-dialog-header-current" class="aui-dialog2-header-main">Export - CSV (Current fields)</h2>
                                    </header>
                                    <div class="aui-dialog2-content">
                                        <form class="aui">
                                            <div class="field-group">
                                                <label for="csv-delimiter">Choose a delimiter</label>
                                                <aui-select id="csv-delimiter" name="delimiter" resolved="" tabindex="-1">
    <input type="text" class="text" autocomplete="off" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false" id="csv-delimiter-input" aria-controls="aui-uid-0" aria-activedescendant="null" readonly="">
    <select name="delimiter"><option selected="" value=",">Comma (,)</option></select>
    <datalist>
        <!-- content {"defaultContent":"","selector":"aui-option"} --><aui-option value="," selected="selected" resolved="">Comma (,)</aui-option><aui-option value=";" resolved="">Semicolon (;)</aui-option><aui-option value="|" resolved="">Vertical bar (|)</aui-option><aui-option value="^" resolved="">Caret (^)</aui-option><!-- /content -->
    </datalist>
    <button class="aui-button" role="button" tabindex="-1" type="button" resolved="" aria-controls="aui-uid-0"></button>
    <div class="aui-popover aui-layer" role="listbox" data-aui-alignment="bottom left" hidden="" id="aui-uid-0">
        <ul class="aui-optionlist" role="presentation"></ul>
    </div>
    <div class="aui-select-status assistive" aria-live="polite" role="status"></div>
</aui-select>
                                            </div>
                                        </form>
                                    </div>
                                    <footer class="aui-dialog2-footer">
                                        <div class="aui-dialog2-footer-actions">
                                            <button id="csv-export-dialog-export-button" class="aui-button aui-button-primary" resolved="">Export</button>
                                            <button id="csv-export-dialog-cancel-button" class="aui-button aui-button-link" resolved="">Cancel</button>
                                        </div>
                                    </footer>
                                </section>
                            
                            <div class="hidden operations-view-data">
                                <fieldset class="hidden parameters"><input type="hidden" id="jql" value="text ~ &quot;Vector API&quot;"></fieldset>
                            </div>
                        </div>
                        <span id="throbber-space" class="icon throbber"></span>
                        <div id="search-header-view"><div class="header-section-primary"><h1 class="search-title" title="Search">Search</h1><div class="filter-operations"><div class="filter-operation-item"><button class="aui-button save-as-new-filter" aria-disabled="false" original-title="" resolved="">Save as</button></div></div></div></div>
                    </header>

                    <form class="aui navigator-search query-component generic-styled"><div class="aui-group"><div class="aui-item search-wrap"><div class="search-container" data-mode="basic"><div class="search-field-container"><div class="search-criteria-container"><div class="search-criteria"><ul class="criteria-list"><li data-id="project" class="" original-title=""><div data-id="project" class="criteria-selector aui-button aui-button-subtle jira-aui-dropdown2-trigger" tabindex="0" resolved=""><div class="criteria-wrap"><span class="fieldLabel">Project:</span> All</div></div></li><li data-id="issuetype" class="" original-title=""><div data-id="issuetype" class="criteria-selector aui-button aui-button-subtle jira-aui-dropdown2-trigger" tabindex="0" resolved=""><div class="criteria-wrap"><span class="fieldLabel">Type:</span> All</div></div></li><li data-id="status" class="" original-title=""><div data-id="status" class="criteria-selector aui-button aui-button-subtle jira-aui-dropdown2-trigger" tabindex="0" resolved=""><div class="criteria-wrap"><span class="fieldLabel">Status:</span> All</div></div></li><li data-id="assignee" class="" original-title=""><div data-id="assignee" class="criteria-selector aui-button aui-button-subtle jira-aui-dropdown2-trigger" tabindex="0" resolved=""><div class="criteria-wrap"><span class="fieldLabel">Assignee:</span> All</div></div></li><li class="text-query"><div class="text-query-container"><input class="search-entry text medium-field ajs-dirty-warning-exempt" aria-label="Contains text" id="searcher-query" type="text" name="text" placeholder="Contains text"></div></li><li class="criteria-actions"><button type="button" class="add-criteria aui-button aui-button-subtle jira-aui-dropdown2-trigger" original-title="Add more fields to search with" style="display: inline-block;" resolved="">More</button></li><li><button class="aui-button aui-button-primary search-button" type="button" original-title="Search for issues" resolved="">Search</button></li></ul></div><div class="search-criteria-extended"><ul class="criteria-list"></ul></div></div></div><div class="search-options-container"><div class="mode-switcher"><a href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#" class="switcher-item active " data-id="basic" original-title="Switch to advanced search using JQL">Advanced</a><a href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#" class="switcher-item " data-id="advanced" title="Switch to basic search">Basic</a></div></div></div><div class="save-filter-controls"></div></div><div class="aui-item"><div class="view-config-wrap"><div class="aui-item column-picker-container"><div class="column-picker-trigger-container"><button class="aui-button column-picker-trigger jira-aui-dropdown2-trigger" title="Columns" resolved="">Columns</button></div></div><div class="aui-item view-selector" id="layout-switcher-toggle"><div class="aui-buttons"><button id="layout-switcher-button" aria-haspopup="true" class="aui-button aui-dropdown2-trigger" type="button" original-title="" resolved="" aria-controls="layout-switcher-options" aria-expanded="false"><span class="aui-icon aui-icon-small aui-iconfont-view-list">Switch search results view</span></button><!-- Dropdown --><div id="layout-switcher-options" class="aui-style-default aui-dropdown2 aui-layer" resolved="" tabindex="-1"><div class="aui-dropdown2-section"><ul><li class="aui-list-item layout-switcher-item"><a href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#" class="aui-list-item-link" data-layout-key="split-view"><span class="aui-icon aui-icon-small aui-iconfont-success"></span>Detail View</a></li><li class="aui-list-item layout-switcher-item"><a href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#" class="aui-list-item-link" data-layout-key="list-view"><span class="aui-icon aui-icon-small "></span>List View</a></li></ul></div></div></div></div></div></div></div><div class="notifications"></div></form>
                </div>

                <div class="navigator-group">
                                        <div class="results-panel navigator-item">
                        <div class="navigator-content" data-issue-table-model-state="{&quot;issueTable&quot;:{&quot;columnSortJql&quot;:{&quot;summary&quot;:&quot;text ~ \&quot;Vector API\&quot; ORDER BY summary ASC&quot;,&quot;issuetype&quot;:&quot;text ~ \&quot;Vector API\&quot; ORDER BY issuetype DESC&quot;,&quot;issuekey&quot;:&quot;text ~ \&quot;Vector API\&quot; ORDER BY key ASC&quot;,&quot;created&quot;:&quot;text ~ \&quot;Vector API\&quot; ORDER BY created DESC&quot;,&quot;customfield_12314020&quot;:&quot;text ~ \&quot;Vector API\&quot; ORDER BY cf[12314020] ASC&quot;,&quot;reporter&quot;:&quot;text ~ \&quot;Vector API\&quot; ORDER BY reporter ASC&quot;,&quot;priority&quot;:&quot;text ~ \&quot;Vector API\&quot; ORDER BY priority DESC&quot;,&quot;resolution&quot;:&quot;text ~ \&quot;Vector API\&quot; ORDER BY resolution ASC&quot;,&quot;duedate&quot;:&quot;text ~ \&quot;Vector API\&quot; ORDER BY due DESC&quot;,&quot;customfield_12310041&quot;:&quot;text ~ \&quot;Vector API\&quot; ORDER BY cf[12310041] ASC&quot;,&quot;assignee&quot;:&quot;text ~ \&quot;Vector API\&quot; ORDER BY assignee ASC&quot;,&quot;updated&quot;:&quot;text ~ \&quot;Vector API\&quot; ORDER BY updated DESC&quot;,&quot;status&quot;:&quot;text ~ \&quot;Vector API\&quot; ORDER BY status DESC&quot;},&quot;description&quot;:&quot;&quot;,&quot;displayed&quot;:50,&quot;end&quot;:100,&quot;issueIds&quot;:[12824081,13617724,12908653,13157394,13298177,13413019,13615636,12864461,13616820,13330244,13069817,13615635,13229756,13126888,13527412,13121388,13219536,12908654,13219535,13294285,13425972,13567258,13219539,13429602,13477130,13249674,13131146,13540804,12823102,13582450,12991606,13584011,13219526,13246779,13222807,13222770,13270021,13443702,13216501,13039914,13216500,13322453,13365092,13485682,13542728,13445501,13336947,13369672,13261658,13192282,13597998,13043718,13127461,12950972,13095093,13192422,12442157,12928109,13571318,12741822,13450244,13086947,13485206,13084392,13186784,13270528,12970438,21326,12831509,12861221,13120838,13477047,13347382,13111834,12850437,12754314,12472405,13242495,12537848,13476253,13084609,13190958,13594610,12389277,13446886,13364935,13304992,13268467,13341109,13082051,13253529,12367776,13298667,13248478,13194863,13410366,12314190,13253019,13251012,13378453,13266526,13395531,13358437,13231713,13365956,13230513,13450477,13112837,13259034,13278060,13244633,13251453,12974439,13229753,13402921,13335127,13266525,13386817,12927071,12741520,13392341,13423601,13117051,13226422,13375611,13425986,13253472,13426762,12973191,13410002,12844964,12963288,12944823,12828862,13033205,12962144,12956072,12959715,12839455,12963554,12403853,12919580,12920530,12954786,13353018,12831042,13135080,12824152,13278513,13420765,12957034,12911500,12701768,13264554,13434331,13282775,12776778,13061833,12826882,13293624,12442001,12962731,12830259,12658026,12782047,12955458,13425233,13217046,12585332,12955342,12415558,12960902,13043097,13409589,13081248,13104719,13448610,13269731,12657304,13103783,12935730,12943066,13198607,12751289,13394277,13147758,13552105,13089861,13231256,12679838,13402145,12920544,12947779,12994540,12820260,12960475,12902173,12659511,12953063,13044161,13086242,13104867,12524045,13234271,13123567,13050026,13058768,13540791,12469213,13142656,13183656,12963350,13536174,13560614,12860707,12861148,12860870,13072907,13059631,13159328,12953116,13084069,13185406,13384478,13205463,12948985,12961502,13315239,13058051,13375525,12955892,12939738,13100187,12960543,12819281,12873070,13350580,12843667,13056384,12956703,12971333,13592466,12399674,13337323,13086342,12855394,13535542,12836803,13072924,12962058,12841013,12896295,12896184,12909299,12682251,12548876,12969674,13215241,13348516,12768137,13056016,12589254,13248838,12441595,12982183,12971676,12752922,12960550,12852413,12725440,12846060,13117897,12775963,12996020,13187198,12721334,13034572,12325923,13360200,13027561,12960892,13477109,13540750,13040027,13426258,13434814,13299533,13001154,13088963,12942966,12929498,13423335,13447235,13318876,13472909,12895314,12851123,12685902,12895574,12975112,12971557,12739677,13112420,12948251,12962660,12902347,12903183,13091882,12844413,12916849,13139544,12971552,12972246,12772205,13020924,12380519,13117826,13082272,13001735,12949298,12970861,13374843,12862920,12855758,12971230,12426103,12956705,12895085,12896443,13158914,13378292,12971351,12934914,13347436,12783173,13612452,13563467,13304669,12744398,12753573,12970078,13186637,12427265,13246855,13595870,13107119,13085111,12861096,12861448,12484317,12329049,12670617,12535609,13315492,12905813,12972459,12506590,12705861,13107358,13169238,13583807,13577241,13589066,12971245,12827030,13165681,13088006,12757863,13256987,13235649,12956693,13468603,12461758,12896389,12895838,12896246,12951131,12888622,12895641,12896480,13374310,13343526,13164082,12504431,12492242,12943490,12965345,12435253,12943807,12864412,13528554,13007494,13264251,12946041,13075893,12895854,12448438,12962603,13265866,12944230,13294940,12903138,12818848,12854054,12753738,13021667,12586858,13073006,13099860,12896299,12938082,13487311,12773099,12901190,12901162,12783821,12873042,12895210,12895309,12862930,12895843,12895755,12895923,12837070,12904109,12856497,12888713,12896062,12863148,12895581,12895577,12896478,12896446,13033939,12639596,13059651,12857415,12863110,13330461,13087594,13087242,13088331,13025809,12971648,12967351,13273622,13223381,13077616,13450249,13160530,12513944,12860377,12861173,13406438,12873157,12895947,12854071,13517535,13302735,12961470,13156515,12903515,13431654,12914536,13111269,12649163,12726912,13048961,13135195,13073989,13432660,12467818,12971380,12970987,12972262,13034782,13086658,13082988,12998642,12906958,12901153,12901122,12845776,12896506,12667873,13069611,13156372,13024929,13081284,13087810,13070824,12661137,12389433,12856745,12895231,13085852,13240998,12901967,13399497,13290281,13542869,13424807,12902670,13354543,13351930,12440344,12895872,13092145,12948525,12888655,13580925,12776516,12754308,12403278,13087076,13087062,13087010,13086199,13082906,13085872,13073987,12861292,12861388,12896733,12905262,13211958,12610759,13449793,13291017,13550307,13243176,12444056,12972584,12959003,12964403,13069291,13255109,13389222,13100327,13276441,12754246,12825650,13543550,12717206,13044458,12910226,13418475,12956706,13075173,12386518,13598555,13085011,12534730,13605839,13039460,13104325,13008420,12850502,13107997,12903179,12758481,12856648,13168441,13420490,13499612,12873065,13082558,13079292,13186852,12824240,13255160,13042256,13082318,13086033,13082945,13086078,13081800,12902557,12445500,12829898,13044862,12977453,12952650,13106176,12775170,13130664,12857257,12556412,12510354,13129964,12884310,12966972,12834869,13083396,13067617,13565470,12908944,13204707,13322035,12855384,12773170,13100189,12754821,12932776,13075593,13084105,12859741,12496369,12860469,12948537,12658784,12925018,12333602,12955450,13094714,13183543,13468813,12648395,12956164,12348001,13260064,13221147,12724788,12841852,12835243,12853925,12727177,13362659,13079845,13006144,13084122,13082574,13083951,13085199,13084673,13071429,12901750,12831125,13019689,13074998,12966412,12782878,12988144,13134425,12754845,13024903,13086575,12733533,13172450,12574293,13076004,12855592,12962678,13067649,12959731,12370249,13362682,13359465,12774417,13154376,13039671,13190496,12858696,12716984,13075754,13359287,12692498,13086921,12971280,13069846,13203936,12438192,13104551,12957356,13155551,13160848,13161948,13164395,13180831,13139212,12920230,12835335,13083927,13251284,13083661,13076324,12699533,13067507,13080506,13080179,13078842,13078095,13078040,13078197,13082436,13081537,13081643,13081638,13081636,13083016,13081265,13080894,13289031,12906811,12895624,13426719,13056049,12923552,12951204,12586026,12767823,13348780,13056223,13446897,12937205,12441605,13121130,13073883,12845984,13080188,12901127,13267350,13135279,13269591,13074482,12582867,13079399,13069005,13398806,12961492,12708917,13032601,13082277,13472148,12855450,13373864,13059048,12826478,12827483,13079905,13079855,13078131,13082225,13082686,13081326,13083723,13073401,13074543,13407946,12783817,12907261,13133212,13150644,13192988,12732387,13253545,13449167,12727566,12979725,13234313,12971214,12977771,12973312,12685629,13590661,12628048,13125400,13393197,13583744,13485865,13476446,12432736,13344427,13013321,12960898,13406977,12708179,13396836,13173929,13138374,13133481,13377173,13255093,12835665,13118606,12958654,13081220,13199310,12838622,12901095,13118602,13262496,12359130,13599633,12346276,13077052,13100285,13269177,13285395,12578134,13124784,12599767,12911397,13139534,13013097,12966214,12969345,12852403,13604858,13594607,13326094,13119507,12841670,12662015,13486250,12688385,12970344,12719413,13058145,13279629,13033497,13042702,13016412,12971821,13267272,12901984,12545537,13026742,12378633,12844587,13079606,12896263,13243518,13004368,12902176,12894457,12852601,12916352,12684077,12705353,13012947,12923416,12668685,12910933,12841547,12512370,12457752,13059622,13061291,13059764,13059990,13059838,13064558,13060189,13060180,13060258,13060739,13060761,13031976,13183542,13182225,13143042,13047939,13577415,12646326,12669188,13539798,12653426,13169958,13117823,13033045,13511129,13548523,12852388,12923852,12782886,13074896,12949774,13337544,12409846,12787769,13348895,13060441,13059080,13057864,13081510,12401266,13120743,13104124,12859801,13161067,13171294,13081981,13059828,13287614,13427619,13450297,12527752,13182509,12755246,12610852,12960577,13088578,12378932,13047079,13060527,12999263,13056592,13059598,12965747,13060842,13059861,13060542,13111413,12831843,12637985,13266975,13084504,13079696,12674154,13093058,13161156,12998736,12836069,12698098,13251006,13173066,13233844,13010037,12861393,13109869,13119984,13366607,13295952,13087077,13267344,12446673,13549948,12864067,12852686,12760913,13137931,13083935,13513383,13262558,13057762,12598270,13141861,12954790,13292272,12414439,12414438,12962806,13091458,12841451,12758354,13543629,13317122,12993164,13124187,13079146,13042192,13422388,12759161,12888724,13073299,13113387,13083644,12640592,13475148,13107351,12858466,12433466,13047423,13078048,13179122,12835529,13219897,13009329,12953271,13002985,12992676,12920526,12842987,13393728,12747213,13179109,13071959,12834454,12747763,13285130,12787181,13159214,12917004,12920021,12844790,13192124,13087017,13026827,13160411],&quot;issueKeys&quot;:[&quot;CLOWNFISH-39&quot;,&quot;SYSTEMDS-3883&quot;,&quot;SPARK-11385&quot;,&quot;GEOMETRY-2&quot;,&quot;LUCENE-9322&quot;,&quot;SPARK-37431&quot;,&quot;SYSTEMDS-3856&quot;,&quot;SPARK-10631&quot;,&quot;SYSTEMDS-3874&quot;,&quot;SPARK-33040&quot;,&quot;SPARK-20632&quot;,&quot;SYSTEMDS-3855&quot;,&quot;ARROW-5207&quot;,&quot;ARROW-1946&quot;,&quot;SPARK-42696&quot;,&quot;ARROW-1867&quot;,&quot;IGNITE-11479&quot;,&quot;SPARK-11386&quot;,&quot;IGNITE-11478&quot;,&quot;PARQUET-1830&quot;,&quot;HADOOP-18103&quot;,&quot;HDFS-17371&quot;,&quot;IGNITE-11480&quot;,&quot;FLINK-26266&quot;,&quot;HADOOP-18407&quot;,&quot;ARROW-6175&quot;,&quot;SPARK-23085&quot;,&quot;SPARK-44116&quot;,&quot;HADOOP-11867&quot;,&quot;PARQUET-2498&quot;,&quot;BEAM-478&quot;,&quot;HADOOP-19211&quot;,&quot;IGNITE-11475&quot;,&quot;ARROW-6022&quot;,&quot;IGNITE-11581&quot;,&quot;FLINK-11978&quot;,&quot;ARROW-7232&quot;,&quot;HADOOP-18227&quot;,&quot;SPARK-26921&quot;,&quot;ARROW-524&quot;,&quot;SPARK-26920&quot;,&quot;FLINK-18919&quot;,&quot;LUCENE-9838&quot;,&quot;ARROW-17989&quot;,&quot;SOLR-16869&quot;,&quot;LUCENE-10577&quot;,&quot;LUCENE-9583&quot;,&quot;LUCENE-9905&quot;,&quot;LUCENE-9004&quot;,&quot;ARROW-3543&quot;,&quot;HIVE-28614&quot;,&quot;SYSTEMDS-1277&quot;,&quot;ARROW-1952&quot;,&quot;SPARK-13944&quot;,&quot;ARROW-1361&quot;,&quot;GEOMETRY-23&quot;,&quot;MAHOUT-211&quot;,&quot;PROTON-1092&quot;,&quot;HADOOP-19105&quot;,&quot;HIVE-8128&quot;,&quot;PARQUET-2159&quot;,&quot;SPARK-21404&quot;,&quot;HDDS-7298&quot;,&quot;DRILL-5657&quot;,&quot;GEOMETRY-20&quot;,&quot;ARROW-7254&quot;,&quot;SPARK-15364&quot;,&quot;JS1-466&quot;,&quot;SPARK-7768&quot;,&quot;SPARK-10413&quot;,&quot;PARQUET-1166&quot;,&quot;ORC-1251&quot;,&quot;GEOMETRY-111&quot;,&quot;SPARK-22346&quot;,&quot;HIVE-11417&quot;,&quot;PARQUET-131&quot;,&quot;LUCENE-2621&quot;,&quot;ARROW-5815&quot;,&quot;LUCENE-3684&quot;,&quot;PARQUET-2171&quot;,&quot;ARROW-1184&quot;,&quot;ARROW-3495&quot;,&quot;HADOOP-19303&quot;,&quot;MAHOUT-6&quot;,&quot;LUCENE-10592&quot;,&quot;LUCENE-9837&quot;,&quot;ARROW-8803&quot;,&quot;FLINK-14802&quot;,&quot;LUCENE-9614&quot;,&quot;SPARK-21190&quot;,&quot;ARROW-6375&quot;,&quot;LUCENE-868&quot;,&quot;HIVE-23215&quot;,&quot;ARROW-6112&quot;,&quot;CARBONDATA-3057&quot;,&quot;ARROW-14622&quot;,&quot;LUCENE-40&quot;,&quot;ARROW-6355&quot;,&quot;ARROW-6249&quot;,&quot;LUCENE-9959&quot;,&quot;ARROW-7073&quot;,&quot;SPARK-36529&quot;,&quot;ARROW-11616&quot;,&quot;ARROW-5264&quot;,&quot;LUCENE-9850&quot;,&quot;ARROW-5224&quot;,&quot;HADOOP-18296&quot;,&quot;HIVE-17928&quot;,&quot;ARROW-6707&quot;,&quot;ARROW-7513&quot;,&quot;ARROW-5929&quot;,&quot;ARROW-6289&quot;,&quot;SPARK-15687&quot;,&quot;ARROW-5206&quot;,&quot;YARN-10965&quot;,&quot;ARROW-10294&quot;,&quot;ARROW-7072&quot;,&quot;LUCENE-10016&quot;,&quot;SPARK-12626&quot;,&quot;LUCENE-5949&quot;,&quot;LUCENE-10040&quot;,&quot;LUCENE-10382&quot;,&quot;ARROW-1780&quot;,&quot;SPARK-27396&quot;,&quot;NUMBERS-156&quot;,&quot;HADOOP-18106&quot;,&quot;ARROW-6374&quot;,&quot;NETBEANS-6443&quot;,&quot;SPARK-15581&quot;,&quot;FLINK-24763&quot;,&quot;HIVE-11253&quot;,&quot;HIVE-13629&quot;,&quot;SPARK-13508&quot;,&quot;SPARK-7529&quot;,&quot;SPARK-19141&quot;,&quot;HIVE-13603&quot;,&quot;HIVE-13421&quot;,&quot;HIVE-13536&quot;,&quot;SPARK-8515&quot;,&quot;HIVE-13644&quot;,&quot;HIVE-48&quot;,&quot;SPARK-12173&quot;,&quot;HIVE-12634&quot;,&quot;HIVE-13390&quot;,&quot;LUCENE-9674&quot;,&quot;FLINK-2050&quot;,&quot;HIVE-18593&quot;,&quot;SPARK-7159&quot;,&quot;ARROW-7533&quot;,&quot;FLINK-25529&quot;,&quot;HIVE-13458&quot;,&quot;HIVE-12369&quot;,&quot;MAHOUT-1464&quot;,&quot;HIVE-22405&quot;,&quot;LUCENE-10471&quot;,&quot;ARROW-7740&quot;,&quot;DRILL-2288&quot;,&quot;HIVE-16387&quot;,&quot;FLINK-1966&quot;,&quot;ARROW-8199&quot;,&quot;ZOOKEEPER-600&quot;,&quot;HIVE-13617&quot;,&quot;SPARK-7671&quot;,&quot;MATH-1008&quot;,&quot;SPARK-6340&quot;,&quot;HIVE-13410&quot;,&quot;CASSANDRA-17314&quot;,&quot;KAFKA-7964&quot;,&quot;FLEX-24458&quot;,&quot;HDFS-10247&quot;,&quot;HAMA-162&quot;,&quot;SPARK-14814&quot;,&quot;HIVE-15919&quot;,&quot;FLINK-24726&quot;,&quot;HIVE-16924&quot;,&quot;SPARK-22115&quot;,&quot;ARROW-16754&quot;,&quot;PARQUET-1698&quot;,&quot;MATH-1004&quot;,&quot;ARROW-1588&quot;,&quot;HIVE-12977&quot;,&quot;HIVE-13149&quot;,&quot;MINIFICPP-676&quot;,&quot;SPARK-4127&quot;,&quot;DRILL-7986&quot;,&quot;ARROW-2351&quot;,&quot;IMPALA-12467&quot;,&quot;HIVE-17164&quot;,&quot;FELIX-6117&quot;,&quot;HIVE-5845&quot;,&quot;ARROW-14038&quot;,&quot;HIVE-12637&quot;,&quot;HIVE-13220&quot;,&quot;DRILL-4824&quot;,&quot;SPARK-6857&quot;,&quot;HIVE-13560&quot;,&quot;HIVE-12019&quot;,&quot;HIVE-4924&quot;,&quot;HIVE-13346&quot;,&quot;SPARK-19653&quot;,&quot;HIVE-17073&quot;,&quot;AVRO-2081&quot;,&quot;ODFTOOLKIT-116&quot;,&quot;DRILL-7268&quot;,&quot;HIVE-18246&quot;,&quot;SPARK-19899&quot;,&quot;SYSTEMDS-1434&quot;,&quot;SPARK-44112&quot;,&quot;MAPREDUCE-1938&quot;,&quot;HIVE-18866&quot;,&quot;MINIFICPP-602&quot;,&quot;HIVE-13632&quot;,&quot;HUDI-6211&quot;,&quot;HUDI-7173&quot;,&quot;HIVE-11696&quot;,&quot;HIVE-11712&quot;,&quot;HIVE-11705&quot;,&quot;ARROW-1047&quot;,&quot;HIVE-16310&quot;,&quot;PARQUET-1300&quot;,&quot;HIVE-13351&quot;,&quot;ARROW-1175&quot;,&quot;GEOMETRY-17&quot;,&quot;CASSANDRA-16750&quot;,&quot;SPARK-26413&quot;,&quot;HIVE-13264&quot;,&quot;HIVE-13588&quot;,&quot;GEOMETRY-100&quot;,&quot;HIVE-16275&quot;,&quot;FLINK-22501&quot;,&quot;HIVE-13418&quot;,&quot;HIVE-13068&quot;,&quot;ARROW-1474&quot;,&quot;HIVE-13566&quot;,&quot;FLINK-1844&quot;,&quot;HIVE-11848&quot;,&quot;SPARK-34020&quot;,&quot;HIVE-11212&quot;,&quot;HIVE-16222&quot;,&quot;HIVE-13445&quot;,&quot;HIVE-13797&quot;,&quot;ASTERIXDB-3503&quot;,&quot;MAHOUT-65&quot;,&quot;FLINK-19817&quot;,&quot;SPARK-21375&quot;,&quot;HIVE-11533&quot;,&quot;HADOOP-18737&quot;,&quot;HIVE-10975&quot;,&quot;SOLR-10700&quot;,&quot;HIVE-13598&quot;,&quot;HIVE-11132&quot;,&quot;HIVE-11959&quot;,&quot;HIVE-11946&quot;,&quot;FLINK-2948&quot;,&quot;COUCHDB-1948&quot;,&quot;LUCENE-3939&quot;,&quot;HIVE-13759&quot;,&quot;GEOMETRY-46&quot;,&quot;LUCENE-9652&quot;,&quot;SPARK-5288&quot;,&quot;HIVE-16207&quot;,&quot;FLEX-28387&quot;,&quot;ARROW-6133&quot;,&quot;MAHOUT-208&quot;,&quot;ASTERIXDB-1497&quot;,&quot;HIVE-13813&quot;,&quot;SPARK-4231&quot;,&quot;HIVE-13568&quot;,&quot;SPARK-9660&quot;,&quot;DELTASPIKE-656&quot;,&quot;HIVE-11306&quot;,&quot;YARN-7481&quot;,&quot;SPARK-5895&quot;,&quot;HDFS-10739&quot;,&quot;AVRO-2229&quot;,&quot;MAHOUT-1582&quot;,&quot;SPARK-19208&quot;,&quot;AXIS-2314&quot;,&quot;ARROW-11739&quot;,&quot;HIVE-15419&quot;,&quot;HIVE-13584&quot;,&quot;ARROW-17439&quot;,&quot;CASSANDRA-18613&quot;,&quot;HIVE-15801&quot;,&quot;ARROW-15534&quot;,&quot;ARROW-15983&quot;,&quot;ORC-620&quot;,&quot;SYSTEMDS-887&quot;,&quot;HIVE-17139&quot;,&quot;HIVE-13144&quot;,&quot;OAK-3865&quot;,&quot;ARROW-15361&quot;,&quot;HIVE-26270&quot;,&quot;FLINK-18682&quot;,&quot;DRILL-8268&quot;,&quot;HIVE-11916&quot;,&quot;HIVE-11440&quot;,&quot;HIVE-6090&quot;,&quot;HIVE-11919&quot;,&quot;HBASE-15945&quot;,&quot;HIVE-13808&quot;,&quot;HDFS-7018&quot;,&quot;ARROW-1741&quot;,&quot;HIVE-13240&quot;,&quot;HIVE-13615&quot;,&quot;HIVE-12029&quot;,&quot;HIVE-12063&quot;,&quot;HIVE-17230&quot;,&quot;SPARK-9003&quot;,&quot;SPARK-12040&quot;,&quot;NUMBERS-69&quot;,&quot;HIVE-13807&quot;,&quot;HIVE-13826&quot;,&quot;DRILL-2156&quot;,&quot;SPARK-18450&quot;,&quot;TUSCANY-1851&quot;,&quot;DRILL-5957&quot;,&quot;SPARK-21199&quot;,&quot;KARAF-4687&quot;,&quot;HIVE-13269&quot;,&quot;HIVE-13782&quot;,&quot;ARROW-12531&quot;,&quot;SPARK-10525&quot;,&quot;HIVE-11544&quot;,&quot;HIVE-13794&quot;,&quot;MAHOUT-121&quot;,&quot;HIVE-13447&quot;,&quot;HIVE-11901&quot;,&quot;HIVE-11964&quot;,&quot;SPARK-24258&quot;,&quot;DRILL-7926&quot;,&quot;HIVE-13798&quot;,&quot;HIVE-12959&quot;,&quot;SPARK-33882&quot;,&quot;FLINK-1745&quot;,&quot;SOLR-17710&quot;,&quot;DRILL-8474&quot;,&quot;SPARK-31704&quot;,&quot;SPARK-3702&quot;,&quot;SPARK-4285&quot;,&quot;HIVE-13767&quot;,&quot;ARROW-3283&quot;,&quot;HIVE-545&quot;,&quot;SPARK-28502&quot;,&quot;NIFI-13892&quot;,&quot;ORC-243&quot;,&quot;HIVE-17050&quot;,&quot;HIVE-11710&quot;,&quot;HIVE-11724&quot;,&quot;AMQCPP-115&quot;,&quot;WSS-33&quot;,&quot;MAHOUT-1343&quot;,&quot;MAHOUT-931&quot;,&quot;ARROW-9364&quot;,&quot;HIVE-12210&quot;,&quot;HIVE-13833&quot;,&quot;LUCENE-3084&quot;,&quot;MAHOUT-1500&quot;,&quot;DRILL-5847&quot;,&quot;ARROW-2764&quot;,&quot;FLINK-35698&quot;,&quot;HADOOP-19158&quot;,&quot;CASSJAVA-1&quot;,&quot;SPARK-15413&quot;,&quot;HIVE-10598&quot;,&quot;MATH-1464&quot;,&quot;HIVE-17116&quot;,&quot;SPARK-4611&quot;,&quot;ARROW-6574&quot;,&quot;SPARK-27842&quot;,&quot;HIVE-13444&quot;,&quot;PDFBOX-5466&quot;,&quot;LUCENE-2392&quot;,&quot;HIVE-11962&quot;,&quot;HIVE-11934&quot;,&quot;HIVE-11952&quot;,&quot;CASSANDRA-11368&quot;,&quot;HIVE-11883&quot;,&quot;HIVE-11926&quot;,&quot;HIVE-11970&quot;,&quot;ARROW-12503&quot;,&quot;SPARK-33622&quot;,&quot;SPARK-24467&quot;,&quot;MAHOUT-672&quot;,&quot;XMLCOMMONS-62&quot;,&quot;KUDU-388&quot;,&quot;HIVE-13696&quot;,&quot;MAPREDUCE-966&quot;,&quot;KUDU-737&quot;,&quot;HIVE-11835&quot;,&quot;HUDI-5936&quot;,&quot;GEODE-1936&quot;,&quot;ARROW-6984&quot;,&quot;SPARK-13610&quot;,&quot;HBASE-18136&quot;,&quot;HIVE-11937&quot;,&quot;STR-106&quot;,&quot;HIVE-13614&quot;,&quot;ARROW-7048&quot;,&quot;KUDU-1259&quot;,&quot;SPARK-31301&quot;,&quot;HIVE-12060&quot;,&quot;HIVE-10238&quot;,&quot;HIVE-11517&quot;,&quot;HIVE-8783&quot;,&quot;HIVE-15239&quot;,&quot;FLEX-25991&quot;,&quot;HIVE-16704&quot;,&quot;ARROW-1463&quot;,&quot;HIVE-11960&quot;,&quot;SPARK-13262&quot;,&quot;ARROW-18113&quot;,&quot;HIVE-9600&quot;,&quot;HIVE-11985&quot;,&quot;HIVE-11984&quot;,&quot;HIVE-10048&quot;,&quot;HIVE-11844&quot;,&quot;HIVE-11903&quot;,&quot;HIVE-11915&quot;,&quot;HIVE-11778&quot;,&quot;HIVE-11935&quot;,&quot;HIVE-11932&quot;,&quot;HIVE-11939&quot;,&quot;HIVE-10982&quot;,&quot;HIVE-12091&quot;,&quot;HIVE-11578&quot;,&quot;HIVE-11895&quot;,&quot;HIVE-11945&quot;,&quot;HIVE-11791&quot;,&quot;HIVE-11922&quot;,&quot;HIVE-11920&quot;,&quot;HIVE-11969&quot;,&quot;HIVE-11966&quot;,&quot;SPARK-19180&quot;,&quot;HIVE-4243&quot;,&quot;HIVE-16311&quot;,&quot;HIVE-11609&quot;,&quot;HIVE-11789&quot;,&quot;ARROW-10153&quot;,&quot;HIVE-17109&quot;,&quot;HIVE-17098&quot;,&quot;HIVE-17125&quot;,&quot;HIVE-15366&quot;,&quot;HIVE-13810&quot;,&quot;HORN-23&quot;,&quot;ARROW-7365&quot;,&quot;HIVE-21492&quot;,&quot;IGNITE-5418&quot;,&quot;SPARK-39480&quot;,&quot;SPARK-24322&quot;,&quot;LUCENE-3309&quot;,&quot;HIVE-11684&quot;,&quot;HIVE-11714&quot;,&quot;ARROW-14314&quot;,&quot;HIVE-11856&quot;,&quot;HIVE-11940&quot;,&quot;HIVE-11518&quot;,&quot;HIVE-26928&quot;,&quot;DRILL-7730&quot;,&quot;HIVE-13586&quot;,&quot;HIVE-19384&quot;,&quot;HIVE-12074&quot;,&quot;LUCENE-10453&quot;,&quot;HIVE-12469&quot;,&quot;ARROW-1710&quot;,&quot;MAHOUT-1227&quot;,&quot;AVRO-1541&quot;,&quot;DRILL-5324&quot;,&quot;CELIX-426&quot;,&quot;HIVE-16731&quot;,&quot;YUNIKORN-1107&quot;,&quot;LUCENE-2514&quot;,&quot;HIVE-13799&quot;,&quot;HIVE-13787&quot;,&quot;REEF-1404&quot;,&quot;SPARK-19217&quot;,&quot;HIVE-17079&quot;,&quot;HIVE-16979&quot;,&quot;SPARK-17163&quot;,&quot;HIVE-12229&quot;,&quot;HIVE-11982&quot;,&quot;HIVE-11980&quot;,&quot;HIVE-11287&quot;,&quot;HIVE-11971&quot;,&quot;MAHOUT-1330&quot;,&quot;DRILL-5480&quot;,&quot;LUCENE-8286&quot;,&quot;HIVE-15335&quot;,&quot;HIVE-16929&quot;,&quot;HIVE-17114&quot;,&quot;SPARK-20696&quot;,&quot;MATH-1013&quot;,&quot;MAHOUT-7&quot;,&quot;HIVE-11587&quot;,&quot;HDFS-9117&quot;,&quot;HIVE-17066&quot;,&quot;SPARK-28140&quot;,&quot;HIVE-12007&quot;,&quot;IOTDB-1626&quot;,&quot;FLINK-16485&quot;,&quot;FLINK-32566&quot;,&quot;SPARK-38028&quot;,&quot;LUCENE-6827&quot;,&quot;ORC-743&quot;,&quot;FLINK-20951&quot;,&quot;AVRO-190&quot;,&quot;ORC-29&quot;,&quot;HIVE-17240&quot;,&quot;HIVE-13248&quot;,&quot;SPARK-10706&quot;,&quot;PARQUET-2486&quot;,&quot;LUCENE-6271&quot;,&quot;MESOS-2063&quot;,&quot;LUCENE-1369&quot;,&quot;HIVE-17094&quot;,&quot;HIVE-17093&quot;,&quot;HIVE-17086&quot;,&quot;HIVE-17072&quot;,&quot;HIVE-16974&quot;,&quot;HIVE-17067&quot;,&quot;HIVE-16730&quot;,&quot;HIVE-11718&quot;,&quot;HIVE-11720&quot;,&quot;HIVE-11973&quot;,&quot;HIVE-12188&quot;,&quot;ARROW-4378&quot;,&quot;MATH-874&quot;,&quot;ARROW-16824&quot;,&quot;FLINK-16538&quot;,&quot;RANGER-4404&quot;,&quot;ARROW-5845&quot;,&quot;HIVE-1010&quot;,&quot;HIVE-13841&quot;,&quot;HIVE-13523&quot;,&quot;HIVE-13669&quot;,&quot;HIVE-16589&quot;,&quot;ARROW-6472&quot;,&quot;ARROW-13316&quot;,&quot;HIVE-17472&quot;,&quot;HIVE-22670&quot;,&quot;SPARK-4324&quot;,&quot;SPARK-7203&quot;,&quot;GEOMETRY-150&quot;,&quot;LUCENE-5713&quot;,&quot;HIVE-15987&quot;,&quot;SPARK-11497&quot;,&quot;DRILL-8085&quot;,&quot;HIVE-13448&quot;,&quot;LUCENE-7854&quot;,&quot;DERBY-3327&quot;,&quot;SPARK-50293&quot;,&quot;HIVE-17048&quot;,&quot;MAHOUT-923&quot;,&quot;KARAF-7940&quot;,&quot;HBASE-17576&quot;,&quot;HIVE-17580&quot;,&quot;SPARK-17716&quot;,&quot;HIVE-11423&quot;,&quot;OPENNLP-1144&quot;,&quot;HIVE-12062&quot;,&quot;LUCENE-6082&quot;,&quot;SPARK-10055&quot;,&quot;DRILL-6542&quot;,&quot;IOTDB-2246&quot;,&quot;HIVE-26713&quot;,&quot;HIVE-11847&quot;,&quot;HIVE-16960&quot;,&quot;HIVE-16885&quot;,&quot;GEOMETRY-21&quot;,&quot;HIVE-10495&quot;,&quot;OAK-8602&quot;,&quot;HIVE-15883&quot;,&quot;HIVE-16955&quot;,&quot;HIVE-17068&quot;,&quot;HIVE-16975&quot;,&quot;HIVE-17069&quot;,&quot;HIVE-16942&quot;,&quot;HIVE-12041&quot;,&quot;CASSANDRA-699&quot;,&quot;HIVE-10708&quot;,&quot;HIVE-15996&quot;,&quot;HIVE-13989&quot;,&quot;HIVE-13333&quot;,&quot;HIVE-17659&quot;,&quot;HIVE-9695&quot;,&quot;HIVE-18449&quot;,&quot;SPARK-10117&quot;,&quot;LUCENE-4069&quot;,&quot;MATH-592&quot;,&quot;ARROW-1983&quot;,&quot;HIVE-11880&quot;,&quot;HIVE-13728&quot;,&quot;MAHOUT-1722&quot;,&quot;HIVE-16989&quot;,&quot;ORC-184&quot;,&quot;KAFKA-16177&quot;,&quot;LUCENE-6868&quot;,&quot;GEOMETRY-30&quot;,&quot;ARROW-9693&quot;,&quot;HIVE-11529&quot;,&quot;NIFI-327&quot;,&quot;ARROW-1476&quot;,&quot;HIVE-8838&quot;,&quot;PARQUET-444&quot;,&quot;HIVE-16784&quot;,&quot;HIVE-17010&quot;,&quot;HIVE-11671&quot;,&quot;MAHOUT-588&quot;,&quot;HIVE-11689&quot;,&quot;HIVE-13249&quot;,&quot;LUCENE-5123&quot;,&quot;HIVE-12770&quot;,&quot;HTTPCLIENT-43&quot;,&quot;HIVE-13409&quot;,&quot;HIVE-17321&quot;,&quot;GEOMETRY-14&quot;,&quot;FLINK-28275&quot;,&quot;HIVE-4577&quot;,&quot;HIVE-13425&quot;,&quot;LUCENE-655&quot;,&quot;SPARK-29327&quot;,&quot;DRILL-7096&quot;,&quot;SPARK-2336&quot;,&quot;MESOS-2968&quot;,&quot;HIVE-10920&quot;,&quot;SPARK-9788&quot;,&quot;SPARK-2477&quot;,&quot;SPARK-34642&quot;,&quot;HIVE-16901&quot;,&quot;HIVE-14797&quot;,&quot;HIVE-17011&quot;,&quot;HIVE-16962&quot;,&quot;HIVE-17007&quot;,&quot;HIVE-17052&quot;,&quot;HIVE-17033&quot;,&quot;HIVE-16659&quot;,&quot;HIVE-12005&quot;,&quot;HIVE-10755&quot;,&quot;SPARK-18392&quot;,&quot;HIVE-16761&quot;,&quot;HIVE-13722&quot;,&quot;FLINK-1731&quot;,&quot;HIVE-14203&quot;,&quot;SPARK-23254&quot;,&quot;HIVE-8843&quot;,&quot;HIVE-15333&quot;,&quot;HIVE-17078&quot;,&quot;HIVE-7693&quot;,&quot;LUCENE-8403&quot;,&quot;FLEX-13424&quot;,&quot;HIVE-16793&quot;,&quot;SPARK-9883&quot;,&quot;HIVE-13616&quot;,&quot;HIVE-16559&quot;,&quot;SPARK-14707&quot;,&quot;HARMONY-3975&quot;,&quot;ARROW-11878&quot;,&quot;SSHD-1129&quot;,&quot;HIVE-9660&quot;,&quot;ZOOKEEPER-3024&quot;,&quot;SYSTEMDS-1224&quot;,&quot;ARROW-3478&quot;,&quot;HIVE-11642&quot;,&quot;SPARK-1945&quot;,&quot;HIVE-16785&quot;,&quot;FLINK-21397&quot;,&quot;PROTON-501&quot;,&quot;PARQUET-1057&quot;,&quot;SPARK-15414&quot;,&quot;ARROW-972&quot;,&quot;SPARK-26345&quot;,&quot;ZOOKEEPER-555&quot;,&quot;ARROW-1601&quot;,&quot;HIVE-13465&quot;,&quot;HIVE-19337&quot;,&quot;HIVE-19642&quot;,&quot;HIVE-19704&quot;,&quot;HIVE-19814&quot;,&quot;HIVE-20453&quot;,&quot;HIVE-18743&quot;,&quot;HIVE-12625&quot;,&quot;FLINK-2157&quot;,&quot;HIVE-17005&quot;,&quot;ARROW-6276&quot;,&quot;HIVE-17000&quot;,&quot;HIVE-16797&quot;,&quot;HIVE-6590&quot;,&quot;SPARK-20502&quot;,&quot;HIVE-16914&quot;,&quot;HIVE-16910&quot;,&quot;HIVE-16876&quot;,&quot;HIVE-16847&quot;,&quot;HIVE-16844&quot;,&quot;HIVE-16856&quot;,&quot;HIVE-16958&quot;,&quot;HIVE-16935&quot;,&quot;HIVE-16939&quot;,&quot;HIVE-16938&quot;,&quot;HIVE-16937&quot;,&quot;HIVE-16981&quot;,&quot;HIVE-16926&quot;,&quot;HIVE-16918&quot;,&quot;ARROW-7986&quot;,&quot;HIVE-12223&quot;,&quot;HIVE-11925&quot;,&quot;ARROW-15582&quot;,&quot;HIVE-16209&quot;,&quot;SPARK-12468&quot;,&quot;FLINK-3633&quot;,&quot;FLEX-25162&quot;,&quot;SPARK-5272&quot;,&quot;ARROW-11112&quot;,&quot;HIVE-16219&quot;,&quot;ARROW-16659&quot;,&quot;HIVE-13018&quot;,&quot;CASSANDRA-580&quot;,&quot;ARROW-1864&quot;,&quot;SAMOA-68&quot;,&quot;HIVE-11297&quot;,&quot;HIVE-16911&quot;,&quot;HIVE-11981&quot;,&quot;SPARK-29827&quot;,&quot;DRILL-6129&quot;,&quot;CXF-8162&quot;,&quot;HIVE-16750&quot;,&quot;FLEX-21993&quot;,&quot;HIVE-16888&quot;,&quot;HIVE-16582&quot;,&quot;AVRO-3194&quot;,&quot;HIVE-13587&quot;,&quot;LUCENE-5611&quot;,&quot;FLINK-5423&quot;,&quot;HIVE-16954&quot;,&quot;HIVE-26408&quot;,&quot;SPARK-9864&quot;,&quot;SPARK-35150&quot;,&quot;HIVE-16296&quot;,&quot;HIVE-10567&quot;,&quot;HIVE-10616&quot;,&quot;HIVE-16903&quot;,&quot;HIVE-16902&quot;,&quot;HIVE-16849&quot;,&quot;HIVE-16951&quot;,&quot;HIVE-16969&quot;,&quot;HIVE-16930&quot;,&quot;HIVE-17001&quot;,&quot;HIVE-16715&quot;,&quot;HIVE-16751&quot;,&quot;MATH-1634&quot;,&quot;SPARK-6442&quot;,&quot;HIVE-12237&quot;,&quot;ARROW-2019&quot;,&quot;ARROW-2411&quot;,&quot;HIVE-20782&quot;,&quot;SPARK-2885&quot;,&quot;ARROW-6377&quot;,&quot;CONNECTORS-1715&quot;,&quot;SPARK-2515&quot;,&quot;SINGA-198&quot;,&quot;ARROW-5377&quot;,&quot;HIVE-13792&quot;,&quot;SPARK-15886&quot;,&quot;HIVE-13874&quot;,&quot;HIVE-6060&quot;,&quot;AVRO-4049&quot;,&quot;LUCENE-4694&quot;,&quot;OPENNLP-1169&quot;,&quot;HIVE-25417&quot;,&quot;NIFI-13441&quot;,&quot;HUDI-5020&quot;,&quot;HOP-4121&quot;,&quot;LUCENE-1799&quot;,&quot;PROTON-2308&quot;,&quot;HDFS-11028&quot;,&quot;SPARK-14810&quot;,&quot;SPARK-37034&quot;,&quot;MATH-1116&quot;,&quot;LUCENE-10063&quot;,&quot;HIVE-20225&quot;,&quot;HIVE-18710&quot;,&quot;HIVE-18526&quot;,&quot;ARROW-12677&quot;,&quot;ARROW-6470&quot;,&quot;FLINK-2170&quot;,&quot;ARROW-1816&quot;,&quot;SPARK-14615&quot;,&quot;HIVE-16922&quot;,&quot;FLINK-10929&quot;,&quot;SPARK-8418&quot;,&quot;HIVE-11976&quot;,&quot;ARROW-1815&quot;,&quot;ARROW-6896&quot;,&quot;AXIS-2601&quot;,&quot;HADOOP-19344&quot;,&quot;TRINIDAD-542&quot;,&quot;HIVE-16821&quot;,&quot;HIVE-17466&quot;,&quot;SPARK-29952&quot;,&quot;IMPALA-9386&quot;,&quot;FLEX-17260&quot;,&quot;ARROW-1922&quot;,&quot;AVRO-1132&quot;,&quot;HIVE-12366&quot;,&quot;ARROW-2180&quot;,&quot;CARBONDATA-322&quot;,&quot;HIVE-13720&quot;,&quot;HIVE-13750&quot;,&quot;SPARK-9658&quot;,&quot;SPARK-50812&quot;,&quot;SPARK-49907&quot;,&quot;ARROW-9915&quot;,&quot;ARROW-1835&quot;,&quot;HIVE-11149&quot;,&quot;SAMZA-2&quot;,&quot;IMPALA-11662&quot;,&quot;LUCENE-5394&quot;,&quot;FLINK-3919&quot;,&quot;FLINK-243&quot;,&quot;PARQUET-918&quot;,&quot;HIVE-22731&quot;,&quot;ARROW-473&quot;,&quot;HIVE-15898&quot;,&quot;DRILL-4982&quot;,&quot;SPARK-15465&quot;,&quot;SPARK-29817&quot;,&quot;HIVE-12010&quot;,&quot;MATH-765&quot;,&quot;HIVE-15391&quot;,&quot;DERBY-3083&quot;,&quot;SPARK-9011&quot;,&quot;DRILL-5586&quot;,&quot;HIVE-11954&quot;,&quot;SPARK-28269&quot;,&quot;SYSTEMDS-909&quot;,&quot;HIVE-12021&quot;,&quot;MADLIB-376&quot;,&quot;HIVE-11489&quot;,&quot;HBASE-14887&quot;,&quot;MESOS-876&quot;,&quot;SPARK-359&quot;,&quot;HIVE-14988&quot;,&quot;SPARK-12449&quot;,&quot;LUCENE-5215&quot;,&quot;FLINK-2980&quot;,&quot;CONNECTORS-1219&quot;,&quot;HAMA-409&quot;,&quot;MAHOUT-319&quot;,&quot;HIVE-16308&quot;,&quot;HIVE-16366&quot;,&quot;HIVE-16316&quot;,&quot;HIVE-16326&quot;,&quot;HIVE-16319&quot;,&quot;HIVE-16465&quot;,&quot;HIVE-16329&quot;,&quot;HIVE-16328&quot;,&quot;HIVE-16333&quot;,&quot;HIVE-16346&quot;,&quot;HIVE-16348&quot;,&quot;HIVE-15538&quot;,&quot;GEOMETRY-13&quot;,&quot;ARROW-3151&quot;,&quot;HIVE-18885&quot;,&quot;HIVE-16100&quot;,&quot;SPARK-48019&quot;,&quot;HIVE-4512&quot;,&quot;HIVE-5308&quot;,&quot;HADOOP-18801&quot;,&quot;MAHOUT-1265&quot;,&quot;HIVE-20080&quot;,&quot;DRILL-5955&quot;,&quot;SPARK-19134&quot;,&quot;ARROW-18431&quot;,&quot;HIVE-27647&quot;,&quot;HIVE-11473&quot;,&quot;NIFI-1324&quot;,&quot;FLINK-1735&quot;,&quot;HIVE-16759&quot;,&quot;HIVE-13277&quot;,&quot;FLINK-19843&quot;,&quot;LUCENE-1476&quot;,&quot;SPARK-6683&quot;,&quot;PDFBOX-5069&quot;,&quot;HIVE-16336&quot;,&quot;HIVE-16297&quot;,&quot;HIVE-16266&quot;,&quot;HIVE-16934&quot;,&quot;ZOOKEEPER-107&quot;,&quot;HIVE-18147&quot;,&quot;HIVE-17576&quot;,&quot;HIVE-11678&quot;,&quot;FLINK-9407&quot;,&quot;ARROW-2828&quot;,&quot;HIVE-16947&quot;,&quot;HIVE-16318&quot;,&quot;DRILL-7606&quot;,&quot;ARROW-15635&quot;,&quot;JDO-816&quot;,&quot;MAHOUT-845&quot;,&quot;ARROW-3157&quot;,&quot;HIVE-8866&quot;,&quot;LUCENE-4466&quot;,&quot;HIVE-13572&quot;,&quot;HIVE-17131&quot;,&quot;DERBY-3085&quot;,&quot;HIVE-16061&quot;,&quot;HIVE-16340&quot;,&quot;HDFS-10787&quot;,&quot;HIVE-16231&quot;,&quot;HIVE-16307&quot;,&quot;SPARK-15194&quot;,&quot;HIVE-16349&quot;,&quot;HIVE-16321&quot;,&quot;HIVE-16341&quot;,&quot;ARROW-1712&quot;,&quot;HIVE-10785&quot;,&quot;MAHOUT-1168&quot;,&quot;SPARK-29797&quot;,&quot;HIVE-17019&quot;,&quot;HIVE-16892&quot;,&quot;HIVE-5563&quot;,&quot;HIVE-17265&quot;,&quot;GEOMETRY-7&quot;,&quot;FLINK-4438&quot;,&quot;STORM-855&quot;,&quot;MAHOUT-1427&quot;,&quot;DRILL-7350&quot;,&quot;HIVE-20207&quot;,&quot;HADOOP-16317&quot;,&quot;PARQUET-739&quot;,&quot;HIVE-11721&quot;,&quot;HIVE-17824&quot;,&quot;HIVE-18115&quot;,&quot;LUCENE-9855&quot;,&quot;HIVE-23133&quot;,&quot;HIVE-17095&quot;,&quot;SPARK-29823&quot;,&quot;PIVOT-393&quot;,&quot;HADOOP-18884&quot;,&quot;HIVE-11822&quot;,&quot;SPARK-9704&quot;,&quot;SPARK-4823&quot;,&quot;ARROW-2142&quot;,&quot;HIVE-17006&quot;,&quot;HUDI-5381&quot;,&quot;ARROW-6899&quot;,&quot;MESOS-7271&quot;,&quot;MATH-817&quot;,&quot;DRILL-6202&quot;,&quot;HIVE-13391&quot;,&quot;ARROW-8139&quot;,&quot;HAMA-149&quot;,&quot;HBASE-1193&quot;,&quot;SPARK-14938&quot;,&quot;SPARK-21591&quot;,&quot;HIVE-11144&quot;,&quot;FLINK-1293&quot;,&quot;GEOMETRY-160&quot;,&quot;FLINK-18615&quot;,&quot;SPARK-16765&quot;,&quot;LUCENE-8091&quot;,&quot;SPARK-21061&quot;,&quot;HIVE-15880&quot;,&quot;ARROW-15317&quot;,&quot;HIVE-9013&quot;,&quot;HIVE-11898&quot;,&quot;HIVE-16711&quot;,&quot;HIVE-17948&quot;,&quot;HIVE-16996&quot;,&quot;AMBARI-1778&quot;,&quot;SPARK-39979&quot;,&quot;DRILL-5846&quot;,&quot;HIVE-11634&quot;,&quot;MAHOUT-165&quot;,&quot;HIVE-16077&quot;,&quot;HIVE-16845&quot;,&quot;HIVE-20395&quot;,&quot;HIVE-10937&quot;,&quot;HBASE-22005&quot;,&quot;SYSTEMDS-1005&quot;,&quot;HIVE-13352&quot;,&quot;HIVE-14707&quot;,&quot;HADOOP-13428&quot;,&quot;HIVE-12631&quot;,&quot;DRILL-3462&quot;,&quot;PARQUET-2074&quot;,&quot;CB-7758&quot;,&quot;RNG-55&quot;,&quot;IGNITE-5216&quot;,&quot;FLINK-2131&quot;,&quot;FLINK-1159&quot;,&quot;NETBEANS-3876&quot;,&quot;HIVE-10171&quot;,&quot;HIVE-19529&quot;,&quot;HIVE-12542&quot;,&quot;HIVE-12616&quot;,&quot;HDFS-8766&quot;,&quot;DRILL-6801&quot;,&quot;HIVE-17087&quot;,&quot;HIVE-15396&quot;,&quot;HIVE-19606&quot;],&quot;jiraHasIssues&quot;:true,&quot;page&quot;:0,&quot;pageSize&quot;:50,&quot;startIndex&quot;:50,&quot;table&quot;:[{&quot;id&quot;:13597998,&quot;key&quot;:&quot;HIVE-28614&quot;,&quot;status&quot;:&quot;Open&quot;,&quot;summary&quot;:&quot;Rewrite the vectorization module using VectorAPI&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;General wishlist item.&quot;,&quot;name&quot;:&quot;Wish&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13043718,&quot;key&quot;:&quot;SYSTEMDS-1277&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;DataFrames With `mllib.Vector` Columns Are No Longer Converted to Matrices.&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A problem which impairs or prevents the functions of the product.&quot;,&quot;name&quot;:&quot;Bug&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13127461,&quot;key&quot;:&quot;ARROW-1952&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;[JS] 32b dense vector coercion&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A new feature of the product, which has yet to be developed.&quot;,&quot;name&quot;:&quot;New Feature&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12950972,&quot;key&quot;:&quot;SPARK-13944&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;Separate out local linear algebra as a standalone module without Spark dependency&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A new feature of the product, which has yet to be developed.&quot;,&quot;name&quot;:&quot;New Feature&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13095093,&quot;key&quot;:&quot;ARROW-1361&quot;,&quot;status&quot;:&quot;Open&quot;,&quot;summary&quot;:&quot;[Java] Add accessors to get type parameters from vector classes&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13192422,&quot;key&quot;:&quot;GEOMETRY-23&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;Remove Euclidean Point Classes&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12442157,&quot;key&quot;:&quot;MAHOUT-211&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;DenseMatrix.getRow() and getColumn() return deep copies of the data&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A problem which impairs or prevents the functions of the product.&quot;,&quot;name&quot;:&quot;Bug&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12928109,&quot;key&quot;:&quot;PROTON-1092&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;c++: improve proton::message API&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13571318,&quot;key&quot;:&quot;HADOOP-19105&quot;,&quot;status&quot;:&quot;Open&quot;,&quot;summary&quot;:&quot;S3A: Recover from Vector IO read failures&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;The sub-task of the issue&quot;,&quot;name&quot;:&quot;Sub-task&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12741822,&quot;key&quot;:&quot;HIVE-8128&quot;,&quot;status&quot;:&quot;Patch Available&quot;,&quot;summary&quot;:&quot;Improve Parquet Vectorization&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;The sub-task of the issue&quot;,&quot;name&quot;:&quot;Sub-task&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13450244,&quot;key&quot;:&quot;PARQUET-2159&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;Parquet bit-packing de/encode optimization&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13086947,&quot;key&quot;:&quot;SPARK-21404&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;Simple Vectorized Python UDFs using Arrow&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;The sub-task of the issue&quot;,&quot;name&quot;:&quot;Sub-task&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13485206,&quot;key&quot;:&quot;HDDS-7298&quot;,&quot;status&quot;:&quot;Open&quot;,&quot;summary&quot;:&quot;Ozone support for VectorIO APIs in Hadoop&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13084392,&quot;key&quot;:&quot;DRILL-5657&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;Implement size-aware result set loader&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13186784,&quot;key&quot;:&quot;GEOMETRY-20&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;Remove L1/LInf Vector Methods&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A task that needs to be done.&quot;,&quot;name&quot;:&quot;Task&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13270528,&quot;key&quot;:&quot;ARROW-7254&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;BaseVariableWidthVector#setSafe appears to make value offsets inconsistent&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A problem which impairs or prevents the functions of the product.&quot;,&quot;name&quot;:&quot;Bug&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12970438,&quot;key&quot;:&quot;SPARK-15364&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;Implement Python picklers for ml.Vector and ml.Matrix under spark.ml.python&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:21326,&quot;key&quot;:&quot;JS1-466&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;[FIX] Security Registry constraint cache fails to synchronize&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A problem which impairs or prevents the functions of the product.&quot;,&quot;name&quot;:&quot;Bug&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12831509,&quot;key&quot;:&quot;SPARK-7768&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;Make user-defined type (UDT) API public&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A new feature of the product, which has yet to be developed.&quot;,&quot;name&quot;:&quot;New Feature&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12861221,&quot;key&quot;:&quot;SPARK-10413&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;ML models should support prediction on single instances&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An overarching type made of sub-tasks&quot;,&quot;name&quot;:&quot;Umbrella&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21130&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13120838,&quot;key&quot;:&quot;PARQUET-1166&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;[API Proposal] Add GetRecordBatchReader in parquet/arrow/reader.h&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13477047,&quot;key&quot;:&quot;ORC-1251&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;Use Hadoop Vectored IO&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13347382,&quot;key&quot;:&quot;GEOMETRY-111&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;Metric interface instead of Point/Verctor interface [BREAKING CHANGE]&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A new feature of the product, which has yet to be developed.&quot;,&quot;name&quot;:&quot;New Feature&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13111834,&quot;key&quot;:&quot;SPARK-22346&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;Update VectorAssembler to work with Structured Streaming&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12850437,&quot;key&quot;:&quot;HIVE-11417&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;Create shims for the row by row read path that is backed by VectorizedRowBatch&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;The sub-task of the issue&quot;,&quot;name&quot;:&quot;Sub-task&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12754314,&quot;key&quot;:&quot;PARQUET-131&quot;,&quot;status&quot;:&quot;Open&quot;,&quot;summary&quot;:&quot;Vectorized Reader In Parquet&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12472405,&quot;key&quot;:&quot;LUCENE-2621&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;Extend Codec to handle also stored fields and term vectors&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13242495,&quot;key&quot;:&quot;ARROW-5815&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;[Java] Support swap functionality for fixed-width vectors&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A new feature of the product, which has yet to be developed.&quot;,&quot;name&quot;:&quot;New Feature&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12537848,&quot;key&quot;:&quot;LUCENE-3684&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;Add offsets to postings (D&amp;PEnum)&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13476253,&quot;key&quot;:&quot;PARQUET-2171&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;Implement vectored IO in parquet file format&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A new feature of the product, which has yet to be developed.&quot;,&quot;name&quot;:&quot;New Feature&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13084609,&quot;key&quot;:&quot;ARROW-1184&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;[Java] Dictionary.equals is not working correctly&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A problem which impairs or prevents the functions of the product.&quot;,&quot;name&quot;:&quot;Bug&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13190958,&quot;key&quot;:&quot;ARROW-3495&quot;,&quot;status&quot;:&quot;Open&quot;,&quot;summary&quot;:&quot;[Java] Optimize bit operations performance&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13594610,&quot;key&quot;:&quot;HADOOP-19303&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;VectorIO API to support releasing buffers on failure&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;The sub-task of the issue&quot;,&quot;name&quot;:&quot;Sub-task&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12389277,&quot;key&quot;:&quot;MAHOUT-6&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;Need a matrix implementation&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A new feature of the product, which has yet to be developed.&quot;,&quot;name&quot;:&quot;New Feature&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13446886,&quot;key&quot;:&quot;LUCENE-10592&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;Should we build HNSW graph on the fly during indexing&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13364935,&quot;key&quot;:&quot;LUCENE-9837&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;try to improve performance of VectorUtil.dotProduct&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13304992,&quot;key&quot;:&quot;ARROW-8803&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;[Java] Row count should be set before loading buffers in VectorLoader&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A problem which impairs or prevents the functions of the product.&quot;,&quot;name&quot;:&quot;Bug&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13268467,&quot;key&quot;:&quot;FLINK-14802&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;Multi vectorized read version support for hive orc read&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;The sub-task of the issue&quot;,&quot;name&quot;:&quot;Sub-task&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13341109,&quot;key&quot;:&quot;LUCENE-9614&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;Implement KNN Query&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A new feature of the product, which has yet to be developed.&quot;,&quot;name&quot;:&quot;New Feature&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13082051,&quot;key&quot;:&quot;SPARK-21190&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;SPIP: Vectorized UDFs in Python&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;The sub-task of the issue&quot;,&quot;name&quot;:&quot;Sub-task&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13253529,&quot;key&quot;:&quot;ARROW-6375&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;[C++] Extend ConversionTraits to allow efficiently appending list values in STL API&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12367776,&quot;key&quot;:&quot;LUCENE-868&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;Making Term Vectors more accessible&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A new feature of the product, which has yet to be developed.&quot;,&quot;name&quot;:&quot;New Feature&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13298667,&quot;key&quot;:&quot;HIVE-23215&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;Make FilterContext and MutableFilterContext interfaces&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A problem which impairs or prevents the functions of the product.&quot;,&quot;name&quot;:&quot;Bug&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13248478,&quot;key&quot;:&quot;ARROW-6112&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;[Java] Update APIs to support 64-bit address space&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13194863,&quot;key&quot;:&quot;CARBONDATA-3057&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;Implement Vectorized CarbonReader for SDK&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;The sub-task of the issue&quot;,&quot;name&quot;:&quot;Sub-task&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13410366,&quot;key&quot;:&quot;ARROW-14622&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;[C++] ASAN reports initialization-order-fiasco&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A problem which impairs or prevents the functions of the product.&quot;,&quot;name&quot;:&quot;Bug&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:12314190,&quot;key&quot;:&quot;LUCENE-40&quot;,&quot;status&quot;:&quot;Closed&quot;,&quot;summary&quot;:&quot;Removing a file from index does not remove all references to file.&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;A problem which impairs or prevents the functions of the product.&quot;,&quot;name&quot;:&quot;Bug&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13253019,&quot;key&quot;:&quot;ARROW-6355&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;[Java] Make range equal visitor reusable&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13251012,&quot;key&quot;:&quot;ARROW-6249&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;[Java] Remove useless class ByteArrayWrapper&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}},{&quot;id&quot;:13378453,&quot;key&quot;:&quot;LUCENE-9959&quot;,&quot;status&quot;:&quot;Resolved&quot;,&quot;summary&quot;:&quot;Can we remove threadlocals of stored fields and term vectors&quot;,&quot;type&quot;:{&quot;description&quot;:&quot;An improvement or enhancement to an existing feature or task.&quot;,&quot;name&quot;:&quot;Improvement&quot;,&quot;iconUrl&quot;:&quot;/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype&quot;}}],&quot;title&quot;:&quot;&quot;,&quot;total&quot;:3110,&quot;url&quot;:&quot;&quot;,&quot;sortBy&quot;:null,&quot;columns&quot;:[&quot;issuetype&quot;,&quot;customfield_12310041&quot;,&quot;issuekey&quot;,&quot;summary&quot;,&quot;assignee&quot;,&quot;reporter&quot;,&quot;priority&quot;,&quot;status&quot;,&quot;resolution&quot;,&quot;created&quot;,&quot;updated&quot;,&quot;duedate&quot;,&quot;customfield_12314020&quot;],&quot;columnConfig&quot;:&quot;USER&quot;},&quot;warnings&quot;:[]}" data-session-search-state="" data-selected-issue="{&quot;id&quot;:13450244,&quot;key&quot;:&quot;PARQUET-2159&quot;}"><div class="details-layout"><div><div class="aui-group split-view"><div class="aui-item list-results-panel" style="width: 320px;"><div><div class="simple-issue-list"><div class="list-panel" style="height: 467px;"><div class="list-ordering"><div class="order-by-container"><div class="order-by-fields"><a href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#" aria-haspopup="true" class="order-options aui-button aui-style-default jira-aui-dropdown2-trigger" title="Select the field that issues are ordered by." resolved=""><span>Order by</span></a></div><div class="order-by-direction"><a href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#" aria-haspopup="false" class="aui-button" aria-disabled="true" title="Order by" resolved=""><span class="aui-icon aui-icon-small aui-iconfont-new-arrow-up">Order by</span></a></div></div></div><div class="search-results"><div class="list-content"><ol class="issue-list"><li title="Rewrite the vectorization module using VectorAPI" data-key="HIVE-28614"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/HIVE-28614"><div><div><img height="16" width="16" alt="Wish" title="Wish - General wishlist item." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">HIVE-28614</span><span class="issue-link-summary">Rewrite the vectorization module using VectorAPI</span></div></div></a></li><li title="DataFrames With `mllib.Vector` Columns Are No Longer Converted to Matrices." data-key="SYSTEMDS-1277"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/SYSTEMDS-1277"><div><div><img height="16" width="16" alt="Bug" title="Bug - A problem which impairs or prevents the functions of the product." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(1)"></div><div class="issue-content-container"><span class="issue-link-key">SYSTEMDS-1277</span><span class="issue-link-summary">DataFrames With `mllib.Vector` Columns Are No Longer Converted to Matrices.</span></div></div></a></li><li title="[JS] 32b dense vector coercion" data-key="ARROW-1952"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/ARROW-1952"><div><div><img height="16" width="16" alt="New Feature" title="New Feature - A new feature of the product, which has yet to be developed." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(2)"></div><div class="issue-content-container"><span class="issue-link-key">ARROW-1952</span><span class="issue-link-summary">[JS] 32b dense vector coercion</span></div></div></a></li><li title="Separate out local linear algebra as a standalone module without Spark dependency" data-key="SPARK-13944"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/SPARK-13944"><div><div><img height="16" width="16" alt="New Feature" title="New Feature - A new feature of the product, which has yet to be developed." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(2)"></div><div class="issue-content-container"><span class="issue-link-key">SPARK-13944</span><span class="issue-link-summary">Separate out local linear algebra as a standalone module without Spark dependency</span></div></div></a></li><li title="[Java] Add accessors to get type parameters from vector classes" data-key="ARROW-1361"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/ARROW-1361"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">ARROW-1361</span><span class="issue-link-summary">[Java] Add accessors to get type parameters from vector classes</span></div></div></a></li><li title="Remove Euclidean Point Classes" data-key="GEOMETRY-23"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/GEOMETRY-23"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">GEOMETRY-23</span><span class="issue-link-summary">Remove Euclidean Point Classes</span></div></div></a></li><li title="DenseMatrix.getRow() and getColumn() return deep copies of the data" data-key="MAHOUT-211"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/MAHOUT-211"><div><div><img height="16" width="16" alt="Bug" title="Bug - A problem which impairs or prevents the functions of the product." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(1)"></div><div class="issue-content-container"><span class="issue-link-key">MAHOUT-211</span><span class="issue-link-summary">DenseMatrix.getRow() and getColumn() return deep copies of the data</span></div></div></a></li><li title="c++: improve proton::message API" data-key="PROTON-1092"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/PROTON-1092"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">PROTON-1092</span><span class="issue-link-summary">c++: improve proton::message API</span></div></div></a></li><li title="S3A: Recover from Vector IO read failures" data-key="HADOOP-19105"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/HADOOP-19105"><div><div><img height="16" width="16" alt="Sub-task" title="Sub-task - The sub-task of the issue" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(3)"></div><div class="issue-content-container"><span class="issue-link-key">HADOOP-19105</span><span class="issue-link-summary">S3A: Recover from Vector IO read failures</span></div></div></a></li><li title="Improve Parquet Vectorization" data-key="HIVE-8128"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/HIVE-8128"><div><div><img height="16" width="16" alt="Sub-task" title="Sub-task - The sub-task of the issue" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(3)"></div><div class="issue-content-container"><span class="issue-link-key">HIVE-8128</span><span class="issue-link-summary">Improve Parquet Vectorization</span></div></div></a></li><li title="Parquet bit-packing de/encode optimization" data-key="PARQUET-2159" class="focused"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/PARQUET-2159"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">PARQUET-2159</span><span class="issue-link-summary">Parquet bit-packing de/encode optimization</span></div></div></a></li><li title="Simple Vectorized Python UDFs using Arrow" data-key="SPARK-21404"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/SPARK-21404"><div><div><img height="16" width="16" alt="Sub-task" title="Sub-task - The sub-task of the issue" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(3)"></div><div class="issue-content-container"><span class="issue-link-key">SPARK-21404</span><span class="issue-link-summary">Simple Vectorized Python UDFs using Arrow</span></div></div></a></li><li title="Ozone support for VectorIO APIs in Hadoop" data-key="HDDS-7298"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/HDDS-7298"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">HDDS-7298</span><span class="issue-link-summary">Ozone support for VectorIO APIs in Hadoop</span></div></div></a></li><li title="Implement size-aware result set loader" data-key="DRILL-5657"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/DRILL-5657"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">DRILL-5657</span><span class="issue-link-summary">Implement size-aware result set loader</span></div></div></a></li><li title="Remove L1/LInf Vector Methods" data-key="GEOMETRY-20"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/GEOMETRY-20"><div><div><img height="16" width="16" alt="Task" title="Task - A task that needs to be done." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(4)"></div><div class="issue-content-container"><span class="issue-link-key">GEOMETRY-20</span><span class="issue-link-summary">Remove L1/LInf Vector Methods</span></div></div></a></li><li title="BaseVariableWidthVector#setSafe appears to make value offsets inconsistent" data-key="ARROW-7254"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/ARROW-7254"><div><div><img height="16" width="16" alt="Bug" title="Bug - A problem which impairs or prevents the functions of the product." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(1)"></div><div class="issue-content-container"><span class="issue-link-key">ARROW-7254</span><span class="issue-link-summary">BaseVariableWidthVector#setSafe appears to make value offsets inconsistent</span></div></div></a></li><li title="Implement Python picklers for ml.Vector and ml.Matrix under spark.ml.python" data-key="SPARK-15364"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/SPARK-15364"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">SPARK-15364</span><span class="issue-link-summary">Implement Python picklers for ml.Vector and ml.Matrix under spark.ml.python</span></div></div></a></li><li title="[FIX] Security Registry constraint cache fails to synchronize" data-key="JS1-466"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/JS1-466"><div><div><img height="16" width="16" alt="Bug" title="Bug - A problem which impairs or prevents the functions of the product." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(1)"></div><div class="issue-content-container"><span class="issue-link-key">JS1-466</span><span class="issue-link-summary">[FIX] Security Registry constraint cache fails to synchronize</span></div></div></a></li><li title="Make user-defined type (UDT) API public" data-key="SPARK-7768"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/SPARK-7768"><div><div><img height="16" width="16" alt="New Feature" title="New Feature - A new feature of the product, which has yet to be developed." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(2)"></div><div class="issue-content-container"><span class="issue-link-key">SPARK-7768</span><span class="issue-link-summary">Make user-defined type (UDT) API public</span></div></div></a></li><li title="ML models should support prediction on single instances" data-key="SPARK-10413"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/SPARK-10413"><div><div><img height="16" width="16" alt="Umbrella" title="Umbrella - An overarching type made of sub-tasks" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(5)"></div><div class="issue-content-container"><span class="issue-link-key">SPARK-10413</span><span class="issue-link-summary">ML models should support prediction on single instances</span></div></div></a></li><li title="[API Proposal] Add GetRecordBatchReader in parquet/arrow/reader.h" data-key="PARQUET-1166"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/PARQUET-1166"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">PARQUET-1166</span><span class="issue-link-summary">[API Proposal] Add GetRecordBatchReader in parquet/arrow/reader.h</span></div></div></a></li><li title="Use Hadoop Vectored IO" data-key="ORC-1251"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/ORC-1251"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">ORC-1251</span><span class="issue-link-summary">Use Hadoop Vectored IO</span></div></div></a></li><li title="Metric interface instead of Point/Verctor interface [BREAKING CHANGE]" data-key="GEOMETRY-111"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/GEOMETRY-111"><div><div><img height="16" width="16" alt="New Feature" title="New Feature - A new feature of the product, which has yet to be developed." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(2)"></div><div class="issue-content-container"><span class="issue-link-key">GEOMETRY-111</span><span class="issue-link-summary">Metric interface instead of Point/Verctor interface [BREAKING CHANGE]</span></div></div></a></li><li title="Update VectorAssembler to work with Structured Streaming" data-key="SPARK-22346"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/SPARK-22346"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">SPARK-22346</span><span class="issue-link-summary">Update VectorAssembler to work with Structured Streaming</span></div></div></a></li><li title="Create shims for the row by row read path that is backed by VectorizedRowBatch" data-key="HIVE-11417"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/HIVE-11417"><div><div><img height="16" width="16" alt="Sub-task" title="Sub-task - The sub-task of the issue" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(3)"></div><div class="issue-content-container"><span class="issue-link-key">HIVE-11417</span><span class="issue-link-summary">Create shims for the row by row read path that is backed by VectorizedRowBatch</span></div></div></a></li><li title="Vectorized Reader In Parquet" data-key="PARQUET-131"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/PARQUET-131"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">PARQUET-131</span><span class="issue-link-summary">Vectorized Reader In Parquet</span></div></div></a></li><li title="Extend Codec to handle also stored fields and term vectors" data-key="LUCENE-2621"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/LUCENE-2621"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">LUCENE-2621</span><span class="issue-link-summary">Extend Codec to handle also stored fields and term vectors</span></div></div></a></li><li title="[Java] Support swap functionality for fixed-width vectors" data-key="ARROW-5815"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/ARROW-5815"><div><div><img height="16" width="16" alt="New Feature" title="New Feature - A new feature of the product, which has yet to be developed." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(2)"></div><div class="issue-content-container"><span class="issue-link-key">ARROW-5815</span><span class="issue-link-summary">[Java] Support swap functionality for fixed-width vectors</span></div></div></a></li><li title="Add offsets to postings (D&amp;PEnum)" data-key="LUCENE-3684"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/LUCENE-3684"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">LUCENE-3684</span><span class="issue-link-summary">Add offsets to postings (D&amp;PEnum)</span></div></div></a></li><li title="Implement vectored IO in parquet file format" data-key="PARQUET-2171"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/PARQUET-2171"><div><div><img height="16" width="16" alt="New Feature" title="New Feature - A new feature of the product, which has yet to be developed." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(2)"></div><div class="issue-content-container"><span class="issue-link-key">PARQUET-2171</span><span class="issue-link-summary">Implement vectored IO in parquet file format</span></div></div></a></li><li title="[Java] Dictionary.equals is not working correctly" data-key="ARROW-1184"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/ARROW-1184"><div><div><img height="16" width="16" alt="Bug" title="Bug - A problem which impairs or prevents the functions of the product." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(1)"></div><div class="issue-content-container"><span class="issue-link-key">ARROW-1184</span><span class="issue-link-summary">[Java] Dictionary.equals is not working correctly</span></div></div></a></li><li title="[Java] Optimize bit operations performance" data-key="ARROW-3495"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/ARROW-3495"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">ARROW-3495</span><span class="issue-link-summary">[Java] Optimize bit operations performance</span></div></div></a></li><li title="VectorIO API to support releasing buffers on failure" data-key="HADOOP-19303"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/HADOOP-19303"><div><div><img height="16" width="16" alt="Sub-task" title="Sub-task - The sub-task of the issue" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(3)"></div><div class="issue-content-container"><span class="issue-link-key">HADOOP-19303</span><span class="issue-link-summary">VectorIO API to support releasing buffers on failure</span></div></div></a></li><li title="Need a matrix implementation" data-key="MAHOUT-6"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/MAHOUT-6"><div><div><img height="16" width="16" alt="New Feature" title="New Feature - A new feature of the product, which has yet to be developed." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(2)"></div><div class="issue-content-container"><span class="issue-link-key">MAHOUT-6</span><span class="issue-link-summary">Need a matrix implementation</span></div></div></a></li><li title="Should we build HNSW graph on the fly during indexing" data-key="LUCENE-10592"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/LUCENE-10592"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">LUCENE-10592</span><span class="issue-link-summary">Should we build HNSW graph on the fly during indexing</span></div></div></a></li><li title="try to improve performance of VectorUtil.dotProduct" data-key="LUCENE-9837"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/LUCENE-9837"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">LUCENE-9837</span><span class="issue-link-summary">try to improve performance of VectorUtil.dotProduct</span></div></div></a></li><li title="[Java] Row count should be set before loading buffers in VectorLoader" data-key="ARROW-8803"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/ARROW-8803"><div><div><img height="16" width="16" alt="Bug" title="Bug - A problem which impairs or prevents the functions of the product." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(1)"></div><div class="issue-content-container"><span class="issue-link-key">ARROW-8803</span><span class="issue-link-summary">[Java] Row count should be set before loading buffers in VectorLoader</span></div></div></a></li><li title="Multi vectorized read version support for hive orc read" data-key="FLINK-14802"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/FLINK-14802"><div><div><img height="16" width="16" alt="Sub-task" title="Sub-task - The sub-task of the issue" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(3)"></div><div class="issue-content-container"><span class="issue-link-key">FLINK-14802</span><span class="issue-link-summary">Multi vectorized read version support for hive orc read</span></div></div></a></li><li title="Implement KNN Query" data-key="LUCENE-9614"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/LUCENE-9614"><div><div><img height="16" width="16" alt="New Feature" title="New Feature - A new feature of the product, which has yet to be developed." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(2)"></div><div class="issue-content-container"><span class="issue-link-key">LUCENE-9614</span><span class="issue-link-summary">Implement KNN Query</span></div></div></a></li><li title="SPIP: Vectorized UDFs in Python" data-key="SPARK-21190"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/SPARK-21190"><div><div><img height="16" width="16" alt="Sub-task" title="Sub-task - The sub-task of the issue" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(3)"></div><div class="issue-content-container"><span class="issue-link-key">SPARK-21190</span><span class="issue-link-summary">SPIP: Vectorized UDFs in Python</span></div></div></a></li><li title="[C++] Extend ConversionTraits to allow efficiently appending list values in STL API" data-key="ARROW-6375"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/ARROW-6375"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">ARROW-6375</span><span class="issue-link-summary">[C++] Extend ConversionTraits to allow efficiently appending list values in STL API</span></div></div></a></li><li title="Making Term Vectors more accessible" data-key="LUCENE-868"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/LUCENE-868"><div><div><img height="16" width="16" alt="New Feature" title="New Feature - A new feature of the product, which has yet to be developed." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(2)"></div><div class="issue-content-container"><span class="issue-link-key">LUCENE-868</span><span class="issue-link-summary">Making Term Vectors more accessible</span></div></div></a></li><li title="Make FilterContext and MutableFilterContext interfaces" data-key="HIVE-23215"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/HIVE-23215"><div><div><img height="16" width="16" alt="Bug" title="Bug - A problem which impairs or prevents the functions of the product." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(1)"></div><div class="issue-content-container"><span class="issue-link-key">HIVE-23215</span><span class="issue-link-summary">Make FilterContext and MutableFilterContext interfaces</span></div></div></a></li><li title="[Java] Update APIs to support 64-bit address space" data-key="ARROW-6112"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/ARROW-6112"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">ARROW-6112</span><span class="issue-link-summary">[Java] Update APIs to support 64-bit address space</span></div></div></a></li><li title="Implement Vectorized CarbonReader for SDK" data-key="CARBONDATA-3057"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/CARBONDATA-3057"><div><div><img height="16" width="16" alt="Sub-task" title="Sub-task - The sub-task of the issue" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(3)"></div><div class="issue-content-container"><span class="issue-link-key">CARBONDATA-3057</span><span class="issue-link-summary">Implement Vectorized CarbonReader for SDK</span></div></div></a></li><li title="[C++] ASAN reports initialization-order-fiasco" data-key="ARROW-14622"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/ARROW-14622"><div><div><img height="16" width="16" alt="Bug" title="Bug - A problem which impairs or prevents the functions of the product." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(1)"></div><div class="issue-content-container"><span class="issue-link-key">ARROW-14622</span><span class="issue-link-summary">[C++] ASAN reports initialization-order-fiasco</span></div></div></a></li><li title="Removing a file from index does not remove all references to file." data-key="LUCENE-40"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/LUCENE-40"><div><div><img height="16" width="16" alt="Bug" title="Bug - A problem which impairs or prevents the functions of the product." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(1)"></div><div class="issue-content-container"><span class="issue-link-key">LUCENE-40</span><span class="issue-link-summary">Removing a file from index does not remove all references to file.</span></div></div></a></li><li title="[Java] Make range equal visitor reusable" data-key="ARROW-6355"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/ARROW-6355"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">ARROW-6355</span><span class="issue-link-summary">[Java] Make range equal visitor reusable</span></div></div></a></li><li title="[Java] Remove useless class ByteArrayWrapper" data-key="ARROW-6249"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/ARROW-6249"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">ARROW-6249</span><span class="issue-link-summary">[Java] Remove useless class ByteArrayWrapper</span></div></div></a></li><li title="Can we remove threadlocals of stored fields and term vectors" data-key="LUCENE-9959"><a class="splitview-issue-link" href="https://issues.apache.org/jira/browse/LUCENE-9959"><div><div><img height="16" width="16" alt="Improvement" title="Improvement - An improvement or enhancement to an existing feature or task." src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar"></div><div class="issue-content-container"><span class="issue-link-key">LUCENE-9959</span><span class="issue-link-summary">Can we remove threadlocals of stored fields and term vectors</span></div></div></a></li></ol></div></div></div><div class="end-of-stable-message-container"></div><div class="inline-issue-create-container"></div><div class="aui-group pagination-view count-pagination"><div class="refresh-container aui-item"><a href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#" class="aui-button aui-button-subtle refresh-table" title="Refresh results" resolved=""><span class="aui-icon aui-icon-small aui-iconfont-refresh-small">Refresh results</span></a></div><div class="pagination-container aui-item"><nav role="navigation" aria-label="Search pagination"><div class="pagination" data-displayable-total="1000"><a href="https://issues.apache.org/jira/issues/?jql=text+~+%22Vector+API%22&amp;startIndex=0" data-start-index="0" class="nav-previous" title="Go to page 1 of 20"><span class="aui-icon aui-icon-small aui-iconfont-chevron-left">&lt;&lt; Previous</span></a> <a href="https://issues.apache.org/jira/issues/?jql=text+~+%22Vector+API%22&amp;startIndex=0" data-page="1" data-start-index="0" title="Issues 1 - 50">1</a> <strong title="Issues 51 - 100">2</strong> <a href="https://issues.apache.org/jira/issues/?jql=text+~+%22Vector+API%22&amp;startIndex=100" data-page="3" data-start-index="100" title="Issues 101 - 150">3</a> <a href="https://issues.apache.org/jira/issues/?jql=text+~+%22Vector+API%22&amp;startIndex=150" data-page="4" data-start-index="150" title="Issues 151 - 200">4</a> <a href="https://issues.apache.org/jira/issues/?jql=text+~+%22Vector+API%22&amp;startIndex=200" data-page="5" data-start-index="200" title="Issues 201 - 250">5</a><a href="https://issues.apache.org/jira/issues/?jql=text+~+%22Vector+API%22&amp;startIndex=100" data-start-index="100" class="nav-next" title="Go to page 3 of 20"><span class="aui-icon aui-icon-small aui-iconfont-chevron-right">Next &gt;&gt;</span></a></div></nav></div></div></div></div><div class="ui-sidebar ui-draggable ui-draggable-handle" style="top: 225px; left: 520px; height: 519px;"></div></div><div class="aui-item detail-panel" style="height: 517px;"><div class="issue-container" tabindex="-1"><div id="issue-content" class="issue-edit-form"><header id="stalker" class="issue-header js-stalker"><div class="issue-header-content"><div class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-image"><span id="12315521" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: &#39;Parquet&#39;" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/projectavatar"></span></span></div><div class="aui-page-header-main"><ol class="aui-nav aui-nav-breadcrumbs" resolved=""><li><a id="project-name-val" href="https://issues.apache.org/jira/browse/PARQUET">Parquet</a></li><li><a class="issue-link" data-issue-key="PARQUET-2159" href="https://issues.apache.org/jira/browse/PARQUET-2159" id="key-val" rel="13450244">PARQUET-2159</a></li></ol><h1 id="summary-val">Parquet bit-packing de/encode optimization</h1></div><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></div><div class="command-bar"><div><div class="ops-cont"><div class="ops-menus aui-toolbar2"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><div id="opsbar-ops-login-lnk_container" class="aui-buttons pluggable-ops"><a id="ops-login-lnk" title="Log In" class="aui-button toolbar-trigger" href="https://issues.apache.org/jira/login.jsp?os_destination=%2Fbrowse%2FPARQUET-2159%3Fjql%3Dtext%2520~%2520%2522Vector%2520API%2522" style="display: none;" resolved=""><span class="trigger-label">Log In</span></a></div></div><div class="aui-toolbar2-secondary"><div id="opsbar-jira.issue.tools" class="aui-buttons pluggable-ops"><a href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#" id="viewissue-export" aria-haspopup="true" class="aui-button  aui-dropdown2-trigger" data-aui-alignment-container=".command-bar" original-title="Export this issue in another format" resolved="" aria-controls="viewissue-export_drop" aria-expanded="false"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a></div></div></div></div><aui-dropdown-menu id="viewissue-export_drop" resolved="" role="menu" class="aui-dropdown2 aui-layer" tabindex="-1"><ul><aui-item-link href="/jira/si/jira.issueviews:issue-xml/PARQUET-2159/PARQUET-2159.xml" id="jira.issueviews:issue-xml" resolved=""><a role="menuitem" tabindex="-1" href="https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PARQUET-2159/PARQUET-2159.xml"><!-- content {"defaultContent":"","selector":null} --><span class="trigger-label">XML</span><!-- /content --></a></aui-item-link><aui-item-link href="/jira/si/jira.issueviews:issue-word/PARQUET-2159/PARQUET-2159.doc" id="jira.issueviews:issue-word" resolved=""><a role="menuitem" tabindex="-1" href="https://issues.apache.org/jira/si/jira.issueviews:issue-word/PARQUET-2159/PARQUET-2159.doc"><!-- content {"defaultContent":"","selector":null} --><span class="trigger-label">Word</span><!-- /content --></a></aui-item-link><aui-item-link href="/jira/si/jira.issueviews:issue-html/PARQUET-2159/PARQUET-2159.html" id="jira.issueviews:issue-html" resolved=""><a role="menuitem" tabindex="-1" href="https://issues.apache.org/jira/si/jira.issueviews:issue-html/PARQUET-2159/PARQUET-2159.html"><!-- content {"defaultContent":"","selector":null} --><span class="trigger-label">Printable</span><!-- /content --></a></aui-item-link><aui-item-link href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/PARQUET-2159/PARQUET-2159.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json" resolved=""><a role="menuitem" tabindex="-1" href="https://issues.apache.org/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/PARQUET-2159/PARQUET-2159.json"><!-- content {"defaultContent":"","selector":null} --><span class="trigger-label">JSON</span><!-- /content --></a></aui-item-link></ul></aui-dropdown-menu></div></div></div></div></header><div class="issue-body-content"><div class="aui-group issue-body"><div class="aui-item issue-main-column"><div id="details-module" class="module toggle-wrap"><div id="details-module_heading" class="mod-header"><button class="aui-button toggle-title" aria-label="Details" aria-controls="details-module" aria-expanded="true" resolved=""><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"><g fill="none" fill-rule="evenodd"><path d="M3.29175 4.793c-.389.392-.389 1.027 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955c.388-.392.388-1.027 0-1.419-.389-.392-1.018-.392-1.406 0l-2.298 2.317-2.307-2.327c-.194-.195-.449-.293-.703-.293-.255 0-.51.098-.703.293z" fill="#344563"></path></g></svg></button><h4 class="toggle-title" id="details-module-label">Details</h4><ul class="ops"></ul></div><div class="mod-content">










<ul id="issuedetails" class="property-list two-cols">
                
<li class="item">
    <div class="wrap">
        <strong class="name" title="Type">
            <label for="issuetype">Type:</label>
        </strong>
        <span id="type-val" class="value">
                        <img alt="" height="16" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar" title="Improvement - An improvement or enhancement to an existing feature or task." width="16"> Improvement
        </span>
    </div>
</li>                    <li class="item item-right">
    <div class="wrap">
        <strong class="name" title="Status">Status:</strong>
            <span id="status-val" class="value">
                                <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="&lt;span class=&quot;jira-issue-status-tooltip-title&quot;&gt;Resolved&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;jira-issue-status-tooltip-desc&quot;&gt;A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.&lt;/span&gt;">Resolved</span>            </span>
            </div>
</li>
    
                        <li class="item new">
    <div class="wrap">
        <strong class="name" title="Priority">
            <label for="priority-field">Priority:</label>
        </strong>
        <span id="priority-val" class="value">
                                        <img alt="" height="16" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/major.svg" title="Major - Major loss of function." width="16">  Major                     </span>
    </div>
</li>                                
<li class="item item-right">
    <div class="wrap">
        <strong class="name" title="Resolution">Resolution:</strong>
        <span id="resolution-val" class="value resolved">
                             Fixed
                    </span>
    </div>
</li>                                

<li class="item">
    <div class="wrap">
        <strong class="name" title="Affects Version/s">
            <label for="versions-textarea">Affects Version/s:</label>
        </strong>
        <span id="versions-val" class="value">
                                        <span class="shorten" id="versions-field" resolved="" style="height: auto;">
                                            <span title="1.13.0 ">1.13.0</span>                                    </span>
                    </span>
    </div>
</li>                                
<li class="item item-right">
    <div class="wrap">
        <strong class="name" title="Fix Version/s">
            <label for="fixVersions">
                Fix Version/s:
            </label>
        </strong>
        <span id="fixfor-val" class="value">
                                        <span class="shorten" id="fixVersions-field" resolved="" style="height: auto;">
                                            <a href="https://issues.apache.org/jira/issues/?jql=project+%3D+PARQUET+AND+fixVersion+%3D+1.13.0" title="1.13.0 ">1.13.0</a>                                    </span>
                    </span>
    </div>
</li>                                

<li class="item">
    <div class="wrap">
        <strong class="name" title="Component/s">
           <label for="components">Component/s:</label>
        </strong>
        <span id="components-val" class="value">
                                        <span class="shorten" id="components-field" resolved="" style="height: auto;">
                                            <a href="https://issues.apache.org/jira/issues/?jql=project+%3D+PARQUET+AND+component+%3D+parquet-mr" title="parquet-mr ">parquet-mr</a>                                    </span>
                    </span>
    </div>
</li>                                    


<li class="item full-width">
    <div class="wrap" id="wrap-labels">
        <strong class="name" title="Labels">
            <label for="labels-textarea">Labels:</label>
        </strong>
                <div class="labels-wrap value">
            <span class="labels" id="labels-13450244-value">None</span>
            </div>
    </div>
</li>            </ul>

</div></div><div id="descriptionmodule" class="module toggle-wrap"><div id="descriptionmodule_heading" class="mod-header"><button class="aui-button toggle-title" aria-label="Description" aria-controls="descriptionmodule" aria-expanded="true" resolved=""><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"><g fill="none" fill-rule="evenodd"><path d="M3.29175 4.793c-.389.392-.389 1.027 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955c.388-.392.388-1.027 0-1.419-.389-.392-1.018-.392-1.406 0l-2.298 2.317-2.307-2.327c-.194-.195-.449-.293-.703-.293-.255 0-.51.098-.703.293z" fill="#344563"></path></g></svg></button><h4 class="toggle-title" id="descriptionmodule-label">Description</h4><ul class="ops"></ul></div><div class="mod-content"><div id="description-val" class="field-ignore-highlight">
    <div class="user-content-block">
                    <p>Current Spark use Parquet-mr as parquet reader/writer library, but the built-in bit-packing en/decode is not efficient enough.&nbsp;</p>

<p>Our optimization for Parquet bit-packing en/decode with jdk.incubator.vector in Open JDK18 brings prominent performance improvement.</p>

<p>Due to Vector API is added to OpenJDK since 16, So this optimization request JDK16 or higher.</p>

<p><b>Below are our test results</b></p>

<p>Functional test is based on open-source parquet-mr Bit-pack decoding function:&nbsp;<b><em>public final void unpack8Values(final byte[] in, final int inPos, final int[] out, final int outPos)</em></b>&nbsp;__</p>

<p>compared with our implementation with vector API&nbsp;<b><em>public final void unpack8Values_vec(final byte[] in, final int inPos, final int[] out, final int outPos)</em></b></p>

<p>We tested 10 pairs (open source parquet bit unpacking vs ours optimized vectorized SIMD implementation) decode function with bit width={1,2,3,4,5,6,7,8,9,10}, below are test results:</p>

<p><span class="image-wrap" style=""><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/image-2022-06-15-22-56-08-396.png" height="223" width="437" style="border: 0px solid black"></span></p>

<p>We integrated our bit-packing decode implementation into parquet-mr, tested the parquet batch reader ability from Spark VectorizedParquetRecordReader which get parquet column data by the batch way. We construct parquet file with different row count and column count, the column data type is Int32, the maximum int value is 127 which satisfies bit pack encode with bit width=7,&nbsp;&nbsp; the count of the row is from 10k to 100 million and the count of the column is from 1 to 4.</p>

<p><span class="image-wrap" style=""><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/image-2022-06-15-22-57-15-964.png" height="229" width="453" style="border: 0px solid black"></span></p>

<p><span class="image-wrap" style=""><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/image-2022-06-15-22-58-01-442.png" height="217" width="439" style="border: 0px solid black"></span></p>

<p><span class="image-wrap" style=""><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/image-2022-06-15-22-58-40-704.png" height="208" width="415" style="border: 0px solid black"></span></p>
            </div>
</div>
</div></div><div id="dnd-metadata" class="module toggle-wrap"><div id="dnd-metadata_heading" class="mod-header"><button class="aui-button toggle-title" aria-label="Attachments" aria-controls="dnd-metadata" aria-expanded="true" resolved=""><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"><g fill="none" fill-rule="evenodd"><path d="M3.29175 4.793c-.389.392-.389 1.027 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955c.388-.392.388-1.027 0-1.419-.389-.392-1.018-.392-1.406 0l-2.298 2.317-2.307-2.327c-.194-.195-.449-.293-.703-.293-.255 0-.51.098-.703.293z" fill="#344563"></path></g></svg></button><h4 class="toggle-title" id="dnd-metadata-label">Attachments</h4><ul class="ops"></ul></div><div class="mod-content"><div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div></div></div><div id="attachmentmodule" class="module toggle-wrap"><div id="attachmentmodule_heading" class="mod-header"><button class="aui-button toggle-title" aria-label="Attachments" aria-controls="attachmentmodule" aria-expanded="true" resolved=""><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"><g fill="none" fill-rule="evenodd"><path d="M3.29175 4.793c-.389.392-.389 1.027 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955c.388-.392.388-1.027 0-1.419-.389-.392-1.018-.392-1.406 0l-2.298 2.317-2.307-2.327c-.194-.195-.449-.293-.703-.293-.255 0-.51.098-.703.293z" fill="#344563"></path></g></svg></button><h4 class="toggle-title" id="attachmentmodule-label">Attachments</h4><ul class="ops"><li class="drop"><div class="aui-dd-parent"><button class="aui-button aui-button-compact aui-button-subtle js-default-dropdown" title="Options" aria-label="Attachments panel options" resolved="" id="AJS_DROPDOWN__593" aria-controls="AJS_DROPDOWN__593_drop" aria-haspopup="true" aria-expanded="false"><span class="aui-icon aui-icon-small aui-iconfont-more">Options</span></button><div class="aui-dropdown-content aui-list"><ul id="attachment-sorting-options" class="aui-list-section aui-first"><li class="aui-list-item"><a id="attachment-sort-key-name" href="https://issues.apache.org/jira/browse/PARQUET-2159?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li><li class="aui-list-item"><a id="attachment-sort-key-date" href="https://issues.apache.org/jira/browse/PARQUET-2159?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li></ul><ul id="attachment-sorting-order-options" class="aui-list-section aui-last"><li class="aui-list-item"><a id="attachment-sort-direction-asc" href="https://issues.apache.org/jira/browse/PARQUET-2159?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li><li class="aui-list-item"><a id="attachment-sort-direction-desc" href="https://issues.apache.org/jira/browse/PARQUET-2159?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li></ul></div></div></li></ul></div><div class="mod-content"><ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc"><li class="attachment-content js-file-attachment" data-attachment-id="13045135" data-issue-id="13450244" data-attachment-type="image" data-attachment-thumbnail="false" resolved=""><div class="attachment-thumb"><a href="https://issues.apache.org/jira/secure/attachment/13045135/image-2022-06-15-22-56-08-396.png" draggable="true" data-downloadurl="image/png:image-2022-06-15-22-56-08-396.png:https://issues.apache.org/jira/secure/attachment/13045135/image-2022-06-15-22-56-08-396.png" file-preview-id="13045135" file-preview-title="image-2022-06-15-22-56-08-396.png" file-preview-type="image" resolved=""><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-image" title="PNG File"></span></a></div><dl><dt class="attachment-title"><a href="https://issues.apache.org/jira/secure/attachment/13045135/image-2022-06-15-22-56-08-396.png" title="Latest  15/Jun/22 14:56 - Fang-Xie" draggable="true" data-downloadurl="image/png:image-2022-06-15-22-56-08-396.png:https://issues.apache.org/jira/secure/attachment/13045135/image-2022-06-15-22-56-08-396.png" file-preview-id="13045135" file-preview-title="image-2022-06-15-22-56-08-396.png" file-preview-type="image" resolved="">image-2022-06-15-22-56-08-396.png</a></dt><dd class="attachment-delete"><span class="icon"></span></dd><dd class="attachment-date"><time class="livestamp" datetime="2022-06-15T14:56:09.614Z">15/Jun/22 14:56</time></dd><dd class="attachment-size">62 kB</dd><dd class="attachment-author">Fang-Xie</dd></dl></li><li class="attachment-content js-file-attachment" data-attachment-id="13045136" data-issue-id="13450244" data-attachment-type="image" data-attachment-thumbnail="false" resolved=""><div class="attachment-thumb"><a href="https://issues.apache.org/jira/secure/attachment/13045136/image-2022-06-15-22-57-15-964.png" draggable="true" data-downloadurl="image/png:image-2022-06-15-22-57-15-964.png:https://issues.apache.org/jira/secure/attachment/13045136/image-2022-06-15-22-57-15-964.png" file-preview-id="13045136" file-preview-title="image-2022-06-15-22-57-15-964.png" file-preview-type="image" resolved=""><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-image" title="PNG File"></span></a></div><dl><dt class="attachment-title"><a href="https://issues.apache.org/jira/secure/attachment/13045136/image-2022-06-15-22-57-15-964.png" title="Latest  15/Jun/22 14:57 - Fang-Xie" draggable="true" data-downloadurl="image/png:image-2022-06-15-22-57-15-964.png:https://issues.apache.org/jira/secure/attachment/13045136/image-2022-06-15-22-57-15-964.png" file-preview-id="13045136" file-preview-title="image-2022-06-15-22-57-15-964.png" file-preview-type="image" resolved="">image-2022-06-15-22-57-15-964.png</a></dt><dd class="attachment-delete"><span class="icon"></span></dd><dd class="attachment-date"><time class="livestamp" datetime="2022-06-15T14:57:18.051Z">15/Jun/22 14:57</time></dd><dd class="attachment-size">63 kB</dd><dd class="attachment-author">Fang-Xie</dd></dl></li><li class="attachment-content js-file-attachment" data-attachment-id="13045137" data-issue-id="13450244" data-attachment-type="image" data-attachment-thumbnail="false" resolved=""><div class="attachment-thumb"><a href="https://issues.apache.org/jira/secure/attachment/13045137/image-2022-06-15-22-58-01-442.png" draggable="true" data-downloadurl="image/png:image-2022-06-15-22-58-01-442.png:https://issues.apache.org/jira/secure/attachment/13045137/image-2022-06-15-22-58-01-442.png" file-preview-id="13045137" file-preview-title="image-2022-06-15-22-58-01-442.png" file-preview-type="image" resolved=""><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-image" title="PNG File"></span></a></div><dl><dt class="attachment-title"><a href="https://issues.apache.org/jira/secure/attachment/13045137/image-2022-06-15-22-58-01-442.png" title="Latest  15/Jun/22 14:58 - Fang-Xie" draggable="true" data-downloadurl="image/png:image-2022-06-15-22-58-01-442.png:https://issues.apache.org/jira/secure/attachment/13045137/image-2022-06-15-22-58-01-442.png" file-preview-id="13045137" file-preview-title="image-2022-06-15-22-58-01-442.png" file-preview-type="image" resolved="">image-2022-06-15-22-58-01-442.png</a></dt><dd class="attachment-delete"><span class="icon"></span></dd><dd class="attachment-date"><time class="livestamp" datetime="2022-06-15T14:58:03.570Z">15/Jun/22 14:58</time></dd><dd class="attachment-size">63 kB</dd><dd class="attachment-author">Fang-Xie</dd></dl></li><li class="attachment-content js-file-attachment" data-attachment-id="13045138" data-issue-id="13450244" data-attachment-type="image" data-attachment-thumbnail="false" resolved=""><div class="attachment-thumb"><a href="https://issues.apache.org/jira/secure/attachment/13045138/image-2022-06-15-22-58-40-704.png" draggable="true" data-downloadurl="image/png:image-2022-06-15-22-58-40-704.png:https://issues.apache.org/jira/secure/attachment/13045138/image-2022-06-15-22-58-40-704.png" file-preview-id="13045138" file-preview-title="image-2022-06-15-22-58-40-704.png" file-preview-type="image" resolved=""><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-image" title="PNG File"></span></a></div><dl><dt class="attachment-title"><a href="https://issues.apache.org/jira/secure/attachment/13045138/image-2022-06-15-22-58-40-704.png" title="Latest  15/Jun/22 14:58 - Fang-Xie" draggable="true" data-downloadurl="image/png:image-2022-06-15-22-58-40-704.png:https://issues.apache.org/jira/secure/attachment/13045138/image-2022-06-15-22-58-40-704.png" file-preview-id="13045138" file-preview-title="image-2022-06-15-22-58-40-704.png" file-preview-type="image" resolved="">image-2022-06-15-22-58-40-704.png</a></dt><dd class="attachment-delete"><span class="icon"></span></dd><dd class="attachment-date"><time class="livestamp" datetime="2022-06-15T14:58:41.723Z">15/Jun/22 14:58</time></dd><dd class="attachment-size">65 kB</dd><dd class="attachment-author">Fang-Xie</dd></dl></li></ol></div></div><div id="linkingmodule" class="module toggle-wrap"><div id="linkingmodule_heading" class="mod-header"><button class="aui-button toggle-title" aria-label="Issue Links" aria-controls="linkingmodule" aria-expanded="true" resolved=""><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"><g fill="none" fill-rule="evenodd"><path d="M3.29175 4.793c-.389.392-.389 1.027 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955c.388-.392.388-1.027 0-1.419-.389-.392-1.018-.392-1.406 0l-2.298 2.317-2.307-2.327c-.194-.195-.449-.293-.703-.293-.255 0-.51.098-.703.293z" fill="#344563"></path></g></svg></button><h4 class="toggle-title" id="linkingmodule-label">Issue Links</h4><ul class="ops"></ul></div><div class="mod-content">






<div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png" resolved="">
                <dl class="links-list ">
            <dt title="is a parent of">is a parent of</dt>
                            <dd id="internal-13557428_12310460">
                    <div class="link-content">
                                                    



<p>
            <img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task.">
        <span title="PARQUET-2375: Extend vectorized bit unpacking benchmark for various bit sizes.">
        <a href="https://issues.apache.org/jira/browse/PARQUET-2375" data-issue-key="PARQUET-2375" class="issue-link link-title resolution">PARQUET-2375</a>
        <span class="link-summary">Extend vectorized bit unpacking benchmark for various bit sizes.</span>
    </span>
</p>
<ul class="link-snapshot">
        <li class="priority">        <img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present.">
    </li>
                <li class="status">
                        <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="&lt;span class=&quot;jira-issue-status-tooltip-title&quot;&gt;Resolved&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;jira-issue-status-tooltip-desc&quot;&gt;A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.&lt;/span&gt;">Resolved</span>
                    </li>
    </ul>
                                            </div>
                                    </dd>
                    </dl>
        </div>
</div></div><div id="view-subtasks" class="module toggle-wrap"><div id="view-subtasks_heading" class="mod-header"><button class="aui-button toggle-title" aria-label="Sub-Tasks" aria-controls="view-subtasks" aria-expanded="true" resolved=""><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"><g fill="none" fill-rule="evenodd"><path d="M3.29175 4.793c-.389.392-.389 1.027 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955c.388-.392.388-1.027 0-1.419-.389-.392-1.018-.392-1.406 0l-2.298 2.317-2.307-2.327c-.194-.195-.449-.293-.703-.293-.255 0-.51.098-.703.293z" fill="#344563"></path></g></svg></button><h4 class="toggle-title" id="view-subtasks-label">Sub-Tasks</h4><ul class="ops"><li class="drop"><div class="aui-dd-parent"><button class="aui-button aui-button-compact aui-button-subtle js-default-dropdown" title="Options" aria-label="Attachments panel options" resolved="" id="AJS_DROPDOWN__594" aria-controls="AJS_DROPDOWN__594_drop" aria-haspopup="true" aria-expanded="false"><span class="aui-icon aui-icon-small aui-iconfont-more">Options</span></button><div class="aui-dropdown-content aui-list"><ul id="subtask-view-options" class="aui-list-section aui-first aui-last"><li class="aui-list-item"><a id="subtasks-show-all" href="https://issues.apache.org/jira/browse/PARQUET-2159?subTaskView=all#issuetable" class="aui-list-checked aui-checked aui-list-item-link" title="Show All"><span>Show All</span></a></li><li class="aui-list-item"><a id="subtasks-show-open" href="https://issues.apache.org/jira/browse/PARQUET-2159?subTaskView=unresolved#issuetable" class="aui-list-checked aui-list-item-link" title="Show Open"><span>Show Open</span></a></li><li class="aui-list-item"><a id="subtasks-bulk-operation" href="https://issues.apache.org/jira/issue/bulkedit/BulkEdit1!default.jspa?reset=true&amp;searchParent=PARQUET-2159" class="aui-list-checked aui-list-item-link" title="Bulk operation"><span>Bulk operation</span></a></li><li class="aui-list-item"><a id="subtasks-open-issue-navigator" href="https://issues.apache.org/jira/issues/?jql=parent%3DPARQUET-2159" class="aui-list-checked aui-list-item-link" title="Open issue navigator"><span>Open issue navigator</span></a></li></ul></div></div></li></ul></div><div class="mod-content"><div class="mod-content intform subtask-table-container">
                


                            <issuetable-web-component data-content="subtasks" resolved="">
                <table id="issuetable">
            

                <tbody><tr id="issuerow13521889" rel="13521889" data-issuekey="PARQUET-2234" class="issuerow">
                                            <td class="stsequence"><div rel="0">1.</div>
</td>
                                            <td class="stsummary"><a class="issue-link" data-issue-key="PARQUET-2234" href="https://issues.apache.org/jira/browse/PARQUET-2234">Parquet java vector decode optimization for Big Endian</a></td>
                                            <td class="issuetype">    <a class="issue-link" data-issue-key="PARQUET-2234" href="https://issues.apache.org/jira/browse/PARQUET-2234">
            <img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(3)" height="16" width="16" border="0" align="absmiddle" alt="Sub-task" title="Sub-task - The sub-task of the issue">
        </a>
</td>
                                            <td class="status">
                <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="&lt;span class=&quot;jira-issue-status-tooltip-title&quot;&gt;Open&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;jira-issue-status-tooltip-desc&quot;&gt;The issue is open and ready for the assignee to start work on it.&lt;/span&gt;">Open</span>    </td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                    </tr>


                <tr id="issuerow13521890" rel="13521890" data-issuekey="PARQUET-2235" class="issuerow">
                                            <td class="stsequence"><div rel="1">2.</div>
</td>
                                            <td class="stsummary"><a class="issue-link" data-issue-key="PARQUET-2235" href="https://issues.apache.org/jira/browse/PARQUET-2235">Parquet java vector decode optimization Long for Big Endian</a></td>
                                            <td class="issuetype">    <a class="issue-link" data-issue-key="PARQUET-2235" href="https://issues.apache.org/jira/browse/PARQUET-2235">
            <img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(3)" height="16" width="16" border="0" align="absmiddle" alt="Sub-task" title="Sub-task - The sub-task of the issue">
        </a>
</td>
                                            <td class="status">
                <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="&lt;span class=&quot;jira-issue-status-tooltip-title&quot;&gt;Open&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;jira-issue-status-tooltip-desc&quot;&gt;The issue is open and ready for the assignee to start work on it.&lt;/span&gt;">Open</span>    </td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                    </tr>


                <tr id="issuerow13521891" rel="13521891" data-issuekey="PARQUET-2236" class="issuerow">
                                            <td class="stsequence"><div rel="2">3.</div>
</td>
                                            <td class="stsummary"><a class="issue-link" data-issue-key="PARQUET-2236" href="https://issues.apache.org/jira/browse/PARQUET-2236">Parquet java vector decode optimization Long for Little Endian</a></td>
                                            <td class="issuetype">    <a class="issue-link" data-issue-key="PARQUET-2236" href="https://issues.apache.org/jira/browse/PARQUET-2236">
            <img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/viewavatar(3)" height="16" width="16" border="0" align="absmiddle" alt="Sub-task" title="Sub-task - The sub-task of the issue">
        </a>
</td>
                                            <td class="status">
                <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="&lt;span class=&quot;jira-issue-status-tooltip-title&quot;&gt;Open&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;jira-issue-status-tooltip-desc&quot;&gt;The issue is open and ready for the assignee to start work on it.&lt;/span&gt;">Open</span>    </td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                    </tr>
                </tbody>
    </table>
    </issuetable-web-component>
    <div class="end-of-stable-message"></div>
            
    </div>
</div></div><div id="activitymodule" class="module toggle-wrap"><div id="activitymodule_heading" class="mod-header"><button class="aui-button toggle-title" aria-label="Activity" aria-controls="activitymodule" aria-expanded="true" resolved=""><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"><g fill="none" fill-rule="evenodd"><path d="M3.29175 4.793c-.389.392-.389 1.027 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955c.388-.392.388-1.027 0-1.419-.389-.392-1.018-.392-1.406 0l-2.298 2.317-2.307-2.327c-.194-.195-.449-.293-.703-.293-.255 0-.51.098-.703.293z" fill="#344563"></path></g></svg></button><h4 class="toggle-title" id="activitymodule-label">Activity</h4><ul class="ops"></ul></div><div class="mod-content">










    <div class="tabwrap aui-tabs horizontal-tabs aui-tabs-disabled">

        <ul id="issue-tabs" class="tabs-menu">
                                
            <li class="menu-item " id="all-tabpanel" data-id="all-tabpanel" data-key="com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel" data-label="All" data-href="/jira/browse/PARQUET-2159?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel">
                                    <a id="all-tabpanel" href="https://issues.apache.org/jira/browse/PARQUET-2159?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel" class="ajax-activity-content">All</a>
                            </li>
                                
            <li class="menu-item  active-tab active " id="comment-tabpanel" data-id="comment-tabpanel" data-key="com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel" data-label="Comments" data-href="/jira/browse/PARQUET-2159?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel">
                                    <a tabindex="0">Comments</a>
                            </li>
                                
            <li class="menu-item " id="worklog-tabpanel" data-id="worklog-tabpanel" data-key="com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel" data-label="Work Log" data-href="/jira/browse/PARQUET-2159?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel">
                                    <a id="worklog-tabpanel" href="https://issues.apache.org/jira/browse/PARQUET-2159?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel" class="ajax-activity-content">Work Log</a>
                            </li>
                                
            <li class="menu-item " id="changehistory-tabpanel" data-id="changehistory-tabpanel" data-key="com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel" data-label="History" data-href="/jira/browse/PARQUET-2159?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel">
                                    <a id="changehistory-tabpanel" href="https://issues.apache.org/jira/browse/PARQUET-2159?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel" class="ajax-activity-content">History</a>
                            </li>
                                
            <li class="menu-item " id="activity-stream-issue-tab" data-id="activity-stream-issue-tab" data-key="com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab" data-label="Activity" data-href="/jira/browse/PARQUET-2159?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab">
                                    <a id="activity-stream-issue-tab" href="https://issues.apache.org/jira/browse/PARQUET-2159?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab" class="ajax-activity-content">Activity</a>
                            </li>
                                
            <li class="menu-item " id="transitions-summary-tabpanel" data-id="transitions-summary-tabpanel" data-key="com.googlecode.jira-suite-utilities:transitions-summary-tabpanel" data-label="Transitions" data-href="/jira/browse/PARQUET-2159?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel">
                                    <a id="transitions-summary-tabpanel" href="https://issues.apache.org/jira/browse/PARQUET-2159?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel" class="ajax-activity-content">Transitions</a>
                            </li>
                </ul>

                    <div class="sortwrap">
                                    <a class="issue-activity-sort-link ajax-activity-content" rel="nofollow" data-tab-sort="" data-order="desc" href="https://issues.apache.org/jira/browse/PARQUET-2159?actionOrder=desc" title="Ascending order - Click to sort in descending order">
                        <span class="aui-icon aui-icon-small aui-iconfont-up">Ascending order - Click to sort in descending order</span>
                    </a>
                            </div>
                        <div class="tabs-pane active-pane"></div>
    </div>
    <div class="issuePanelWrapper">
        <div class="issuePanelProgress"></div>
        <div class="issuePanelContainer" id="issue_actions_container">
                                                


<div id="comment-17554652" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="theosib-amazon" id="commentauthor_17554652_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=theosib-amazon"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar" alt="theosib-amazon"></span></span> Timothy Miller</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17554652&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17554652" class="commentdate_17554652_verbose subText comment-created-date-link"><span class="date user-tz" title="15/Jun/22 15:10"><time class="livestamp" datetime="2022-06-15T15:10:10+0000">15/Jun/22 15:10</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>Could you add a link to the PR, please?</p> </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="theosib-amazon" id="commentauthor_17554652_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=theosib-amazon"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar" alt="theosib-amazon"></span></span> Timothy Miller</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17554652&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17554652" class="commentdate_17554652_concise subText comment-created-date-link"><span class="date user-tz" title="15/Jun/22 15:10"><time class="livestamp" datetime="2022-06-15T15:10:10+0000">15/Jun/22 15:10</time></span></a>                    Could you add a link to the PR, please?              </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17555081" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="Fang-Xie" id="commentauthor_17555081_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Fang-Xie"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="Fang-Xie"></span></span> Fang-Xie</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17555081&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17555081" class="commentdate_17555081_verbose subText comment-created-date-link"><span class="date user-tz" title="16/Jun/22 13:15"><time class="livestamp" datetime="2022-06-16T13:15:12+0000">16/Jun/22 13:15</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>Thanks <a href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=theosib-amazon" class="user-hover" rel="theosib-amazon">theosib-amazon</a>, these improvements depend on Vector API in JDK 16 or higher version, how do we consider about JDK version issue?&nbsp;</p> </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="Fang-Xie" id="commentauthor_17555081_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Fang-Xie"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="Fang-Xie"></span></span> Fang-Xie</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17555081&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17555081" class="commentdate_17555081_concise subText comment-created-date-link"><span class="date user-tz" title="16/Jun/22 13:15"><time class="livestamp" datetime="2022-06-16T13:15:12+0000">16/Jun/22 13:15</time></span></a>                    Thanks  theosib-amazon , these improvements depend on Vector API in JDK 16 or higher version, how do we consider about JDK version issue?&nbsp;              </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17555099" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="theosib-amazon" id="commentauthor_17555099_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=theosib-amazon"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar" alt="theosib-amazon"></span></span> Timothy Miller</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17555099&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17555099" class="commentdate_17555099_verbose subText comment-created-date-link"><span class="date user-tz" title="16/Jun/22 14:17"><time class="livestamp" datetime="2022-06-16T14:17:39+0000">16/Jun/22 14:17</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>I frequently wish Java had a preprocessor like C++ that would solve your problem. Currently, we have to build ParquetMR with Java 8, and plenty of things that depend on it (like Trino and Presto) use Java 11 at the latest. There are some solutions involving runtime loading of class files (e.g. <a href="https://stackoverflow.com/questions/4526113/java-conditional-compilation-how-to-prevent-code-chunks-from-being-compiled)," class="external-link" target="_blank" rel="nofollow noopener">https://stackoverflow.com/questions/4526113/java-conditional-compilation-how-to-prevent-code-chunks-from-being-compiled),</a> but there's already enough weirdness in the ParquetMR build process (e.g. compile-time generated code that makes debugging a huge pain) that I hesitate to suggest making it even more challenging.</p>

<p>Where actually is the code coming from that you're working on? Is it part of ParquetMR or some other library? I seem to recall that when debugging Trino, the code you're working on has to go through the decompiler in IntelliJ. So if it's already external in some way, then it probably wouldn't hurt to make it just a bit more dynamic, where ParquetMR loads different versions of the bit-packing library depending on the Java version.</p> </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="theosib-amazon" id="commentauthor_17555099_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=theosib-amazon"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar" alt="theosib-amazon"></span></span> Timothy Miller</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17555099&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17555099" class="commentdate_17555099_concise subText comment-created-date-link"><span class="date user-tz" title="16/Jun/22 14:17"><time class="livestamp" datetime="2022-06-16T14:17:39+0000">16/Jun/22 14:17</time></span></a>                    I frequently wish Java had a preprocessor like C++ that would solve your problem. Currently, we have to build ParquetMR with Java 8, and plenty of things that depend on it (like Trino and Presto) use Java 11 at the latest. There are some solutions involving runtime loading of class files (e.g.  https://stackoverflow.com/questions/4526113/java-conditional-compilation-how-to-prevent-code-chunks-from-being-compiled),  but there's already enough weirdness in the ParquetMR build process (e.g. compile-time generated code that makes debugging a huge pain) that I hesitate to suggest making it even more challenging. 

 Where actually is the code coming from that you're working on? Is it part of ParquetMR or some other library? I seem to recall that when debugging Trino, the code you're working on has to go through the decompiler in IntelliJ. So if it's already external in some way, then it probably wouldn't hurt to make it just a bit more dynamic, where ParquetMR loads different versions of the bit-packing library depending on the Java version.              </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17555116" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
                                            
    
                

    <a class="user-hover user-avatar" rel="Fang-Xie" id="commentauthor_17555116_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Fang-Xie"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="Fang-Xie"></span></span> Fang-Xie</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17555116&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17555116" class="commentdate_17555116_verbose subText comment-created-date-link"><span class="date user-tz" title="16/Jun/22 14:57"><time class="livestamp" datetime="2022-06-16T14:57:21+0000">16/Jun/22 14:57</time></span></a>   - <span class="subText update-info" title="Fang-Xie - 16/Jun/22 15:14">edited</span> </div>
        </div>
        <div class="action-body flooded"><p>We implemented Parquet bit packing en/decode using JDK Vector API which can get benefits from SIMD instruction, refer to <a href="https://openjdk.org/jeps/417" class="external-link" target="_blank" rel="nofollow noopener">https://openjdk.org/jeps/417</a></p>

<p>&nbsp;The original bit-packing code is generated from <a href="https://github.com/apache/parquet-mr/blob/master/parquet-generator/src/main/java/org/apache/parquet/encoding/bitpacking/ByteBasedBitPackingGenerator.java" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/blob/master/parquet-generator/src/main/java/org/apache/parquet/encoding/bitpacking/ByteBasedBitPackingGenerator.java</a></p>

<p>via maven build. We reimplemented bit-pack functions</p>

<p>but it had to compile and run under JDK 16 or higher (needs Vector APIs), So not sure we can contribute code to Parquet community.</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p> </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
                                            
    
                

    <a class="user-hover user-avatar" rel="Fang-Xie" id="commentauthor_17555116_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Fang-Xie"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="Fang-Xie"></span></span> Fang-Xie</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17555116&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17555116" class="commentdate_17555116_concise subText comment-created-date-link"><span class="date user-tz" title="16/Jun/22 14:57"><time class="livestamp" datetime="2022-06-16T14:57:21+0000">16/Jun/22 14:57</time></span></a>   - <span class="subText update-info" title="Fang-Xie - 16/Jun/22 15:14">edited</span>                   We implemented Parquet bit packing en/decode using JDK Vector API which can get benefits from SIMD instruction, refer to  https://openjdk.org/jeps/417  

 &nbsp;The original bit-packing code is generated from  https://github.com/apache/parquet-mr/blob/master/parquet-generator/src/main/java/org/apache/parquet/encoding/bitpacking/ByteBasedBitPackingGenerator.java  

 via maven build. We reimplemented bit-pack functions 

 but it had to compile and run under JDK 16 or higher (needs Vector APIs), So not sure we can contribute code to Parquet community. 

 &nbsp; 

 &nbsp; 

 &nbsp;              </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17555142" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="theosib-amazon" id="commentauthor_17555142_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=theosib-amazon"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar" alt="theosib-amazon"></span></span> Timothy Miller</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17555142&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17555142" class="commentdate_17555142_verbose subText comment-created-date-link"><span class="date user-tz" title="16/Jun/22 15:29"><time class="livestamp" datetime="2022-06-16T15:29:17+0000">16/Jun/22 15:29</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>If this is already being generated at runtime, then it sounds to me like you might be able to generate different things depending on the compiler's source version setting.</p> </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="theosib-amazon" id="commentauthor_17555142_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=theosib-amazon"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar" alt="theosib-amazon"></span></span> Timothy Miller</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17555142&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17555142" class="commentdate_17555142_concise subText comment-created-date-link"><span class="date user-tz" title="16/Jun/22 15:29"><time class="livestamp" datetime="2022-06-16T15:29:17+0000">16/Jun/22 15:29</time></span></a>                    If this is already being generated at runtime, then it sounds to me like you might be able to generate different things depending on the compiler's source version setting.              </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17622924" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="jiangjiguang0719" id="commentauthor_17622924_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jiangjiguang0719"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="jiangjiguang0719"></span></span> jiangjiguang0719</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17622924&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17622924" class="commentdate_17622924_verbose subText comment-created-date-link"><span class="date user-tz" title="24/Oct/22 02:47"><time class="livestamp" datetime="2022-10-24T02:47:11+0000">24/Oct/22 02:47</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p><a href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=theosib-amazon" class="user-hover" rel="theosib-amazon">theosib-amazon</a>&nbsp; As you mentioned above "compile-time generated code that makes debugging a huge pain".&nbsp; &nbsp;And current different computing engines support different java versions (e.g.&nbsp; presto supports java8,&nbsp; trino supports java17,&nbsp; spark supports java17 and flink supports java11), so I have two option suggestion:<br>
1、Upgrade parquet-mr to java17(java 17 is lts), and generate different things depending on the compiler's java source version setting.<br>
2、Create a new Java project as library to support java17 parquet bit-packing de/encode opt.&nbsp; without &nbsp;generating code.</p> </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="jiangjiguang0719" id="commentauthor_17622924_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jiangjiguang0719"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="jiangjiguang0719"></span></span> jiangjiguang0719</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17622924&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17622924" class="commentdate_17622924_concise subText comment-created-date-link"><span class="date user-tz" title="24/Oct/22 02:47"><time class="livestamp" datetime="2022-10-24T02:47:11+0000">24/Oct/22 02:47</time></span></a>                     theosib-amazon &nbsp; As you mentioned above "compile-time generated code that makes debugging a huge pain".&nbsp; &nbsp;And current different computing engines support different java versions (e.g.&nbsp; presto supports java8,&nbsp; trino supports java17,&nbsp; spark supports java17 and flink supports java11), so I have two option suggestion: 
1、Upgrade parquet-mr to java17(java 17 is lts), and generate different things depending on the compiler's java source version setting. 
2、Create a new Java project as library to support java17 parquet bit-packing de/encode opt.&nbsp; without &nbsp;generating code.              </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17634206" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17634206_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17634206&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17634206" class="commentdate_17634206_verbose subText comment-created-date-link"><span class="date user-tz" title="15/Nov/22 07:32"><time class="livestamp" datetime="2022-11-15T07:32:17+0000">15/Nov/22 07:32</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang opened a new pull request, #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011</a></p>

<p>   The PR includes 3 aspects：<br>
   1. Use java17 vector api to decode bit-packing ,  the performance gain is 4x ~ 8x according to the microbenchmark <br>
   2. Upgrade the project to java17 to support java vector api<br>
   3. Add ParquetReadRouter to compatible with different platform when computing engines(such as spark) read parquet.</p>

<ol>
	<li>
	<ol>
		<li>
		<ol>
			<li>Jira</li>
		</ol>
		</li>
	</ol>
	</li>
</ol>
<ul class="alternate" type="square">
	<li><a href="https://issues.apache.org/jira/projects/PARQUET/issues/PARQUET-2159?filter=allopenissues" class="external-link" rel="nofollow">https://issues.apache.org/jira/projects/PARQUET/issues/PARQUET-2159?filter=allopenissues</a></li>
</ul>


<ol>
	<li>
	<ol>
		<li>
		<ol>
			<li>Tests</li>
		</ol>
		</li>
	</ol>
	</li>
</ol>


<ul class="alternate" type="square">
	<li>Add unit tests org.apache.parquet.column.values.bitpacking.TestByteBitPackingVectorLE</li>
</ul>


<ol>
	<li>
	<ol>
		<li>
		<ol>
			<li>Commits</li>
		</ol>
		</li>
	</ol>
	</li>
</ol>


<ul class="alternate" type="square">
	<li>[ ] My commits all reference Jira issues in their subject lines. In addition, my commits follow the guidelines from "<span class="error">[How to write a good git commit message]</span>(<a href="http://chris.beams.io/posts/git-commit/" class="external-link" target="_blank" rel="nofollow noopener">http://chris.beams.io/posts/git-commit/</a>)":<br>
     1. Subject is separated from body by a blank line<br>
     1. Subject is limited to 50 characters (not including Jira issue reference)<br>
     1. Subject does not end with a period<br>
     1. Subject uses the imperative mood ("add", not "adding")<br>
     1. Body wraps at 72 characters<br>
     1. Body explains "what" and "why", not "how"</li>
</ul>


<ol>
	<li>
	<ol>
		<li>
		<ol>
			<li>Documentation</li>
		</ol>
		</li>
	</ol>
	</li>
</ol>
<ul class="alternate" type="square">
	<li>The PR adds maven profile vector to enable generate java17 vector bit-packing decode opt. code, and run junit tests: mvn clean install -P vector</li>
	<li>The PR needs Intel Ice Lake CPU to run junit tests</li>
	<li>The contributors are jiangjiguang  jiyu1021 guangzegu  Fang-Xie  , and co-contributor is  jatin-bhateja</li>
</ul>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17634206_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17634206&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17634206" class="commentdate_17634206_concise subText comment-created-date-link"><span class="date user-tz" title="15/Nov/22 07:32"><time class="livestamp" datetime="2022-11-15T07:32:17+0000">15/Nov/22 07:32</time></span></a>                    jiangjiguang opened a new pull request, #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011  

    The PR includes 3 aspects： 
   1. Use java17 vector api to decode bit-packing ,  the performance gain is 4x ~ 8x according to the microbenchmark  
   2. Upgrade the project to java17 to support java vector api 
   3. Add ParquetReadRouter to compatible with different platform when computing engines(such as spark) read parquet. 

 
	 
	 
		 
		 
			 Jira 
		 
		 
	 
	 
 
 
	  https://issues.apache.org/jira/projects/PARQUET/issues/PARQUET-2159?filter=allopenissues  
 


 
	 
	 
		 
		 
			 Tests 
		 
		 
	 
	 
 


 
	 Add unit tests org.apache.parquet.column.values.bitpacking.TestByteBitPackingVectorLE 
 


 
	 
	 
		 
		 
			 Commits 
		 
		 
	 
	 
 


 
	 [ ] My commits all reference Jira issues in their subject lines. In addition, my commits follow the guidelines from " [How to write a good git commit message] ( http://chris.beams.io/posts/git-commit/ )": 
     1. Subject is separated from body by a blank line 
     1. Subject is limited to 50 characters (not including Jira issue reference) 
     1. Subject does not end with a period 
     1. Subject uses the imperative mood ("add", not "adding") 
     1. Body wraps at 72 characters 
     1. Body explains "what" and "why", not "how" 
 


 
	 
	 
		 
		 
			 Documentation 
		 
		 
	 
	 
 
 
	 The PR adds maven profile vector to enable generate java17 vector bit-packing decode opt. code, and run junit tests: mvn clean install -P vector 
	 The PR needs Intel Ice Lake CPU to run junit tests 
	 The contributors are jiangjiguang  jiyu1021 guangzegu  Fang-Xie  , and co-contributor is  jatin-bhateja 
 



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17636280" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17636280_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17636280&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17636280" class="commentdate_17636280_verbose subText comment-created-date-link"><span class="date user-tz" title="20/Nov/22 11:02"><time class="livestamp" datetime="2022-11-20T11:02:20+0000">20/Nov/22 11:02</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1321101130" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1321101130</a></p>

<p>   @wangyum @gszadovszky This PR always fails to build, I do not know why.   Is the reason of failure "1 workflow awaiting approval" ? please help me, this is my first PR to parquet-mr community, thanks!</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17636280_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17636280&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17636280" class="commentdate_17636280_concise subText comment-created-date-link"><span class="date user-tz" title="20/Nov/22 11:02"><time class="livestamp" datetime="2022-11-20T11:02:20+0000">20/Nov/22 11:02</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1321101130  

    @wangyum @gszadovszky This PR always fails to build, I do not know why.   Is the reason of failure "1 workflow awaiting approval" ? please help me, this is my first PR to parquet-mr community, thanks! 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17638012" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638012_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638012&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638012" class="commentdate_17638012_verbose subText comment-created-date-link"><span class="date user-tz" title="24/Nov/22 00:56"><time class="livestamp" datetime="2022-11-24T00:56:29+0000">24/Nov/22 00:56</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1325814649" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1325814649</a></p>

<p>   @wangyum Could you review the PR ? thanks</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638012_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638012&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638012" class="commentdate_17638012_concise subText comment-created-date-link"><span class="date user-tz" title="24/Nov/22 00:56"><time class="livestamp" datetime="2022-11-24T00:56:29+0000">24/Nov/22 00:56</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1325814649  

    @wangyum Could you review the PR ? thanks 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17638161" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638161_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638161&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638161" class="commentdate_17638161_verbose subText comment-created-date-link"><span class="date user-tz" title="24/Nov/22 08:07"><time class="livestamp" datetime="2022-11-24T08:07:14+0000">24/Nov/22 08:07</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1326087771" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1326087771</a></p>

<p>   @jiangjiguang, Apache introduced a process to require approvals for test executions to keep resources under control. I've approved it so the tests are running. Not sure though when I will have time to properly review it.</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638161_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638161&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638161" class="commentdate_17638161_concise subText comment-created-date-link"><span class="date user-tz" title="24/Nov/22 08:07"><time class="livestamp" datetime="2022-11-24T08:07:14+0000">24/Nov/22 08:07</time></span></a>                    gszadovszky commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1326087771  

    @jiangjiguang, Apache introduced a process to require approvals for test executions to keep resources under control. I've approved it so the tests are running. Not sure though when I will have time to properly review it. 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17638249" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638249_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638249&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638249" class="commentdate_17638249_verbose subText comment-created-date-link"><span class="date user-tz" title="24/Nov/22 11:02"><time class="livestamp" datetime="2022-11-24T11:02:02+0000">24/Nov/22 11:02</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1326291164" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1326291164</a></p>

<p>   @gszadovszky I resubmitted the code， can you approve the workflow again ? </p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638249_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638249&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638249" class="commentdate_17638249_concise subText comment-created-date-link"><span class="date user-tz" title="24/Nov/22 11:02"><time class="livestamp" datetime="2022-11-24T11:02:02+0000">24/Nov/22 11:02</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1326291164  

    @gszadovszky I resubmitted the code， can you approve the workflow again ?  

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17638447" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638447_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638447&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638447" class="commentdate_17638447_verbose subText comment-created-date-link"><span class="date user-tz" title="25/Nov/22 01:28"><time class="livestamp" datetime="2022-11-25T01:28:10+0000">25/Nov/22 01:28</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1326934392" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1326934392</a></p>

<p>   @gszadovszky Could you review the PR ? thanks</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638447_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638447&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638447" class="commentdate_17638447_concise subText comment-created-date-link"><span class="date user-tz" title="25/Nov/22 01:28"><time class="livestamp" datetime="2022-11-25T01:28:10+0000">25/Nov/22 01:28</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1326934392  

    @gszadovszky Could you review the PR ? thanks 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17638569" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638569_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638569&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638569" class="commentdate_17638569_verbose subText comment-created-date-link"><span class="date user-tz" title="25/Nov/22 08:33"><time class="livestamp" datetime="2022-11-25T08:33:22+0000">25/Nov/22 08:33</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1327156483" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1327156483</a></p>

<p>   @jiangjiguang, however I agree on upgrading to newer java versions (and to have performance benefits like this one) it is not always an easy thing to do. For example our main historical user Hadoop is still on java 1.8 which means they would not be able to upgrade parquet after releasing this one. I think it worth a discussion on the dev list and maybe even a formal vote on it.</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638569_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638569&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638569" class="commentdate_17638569_concise subText comment-created-date-link"><span class="date user-tz" title="25/Nov/22 08:33"><time class="livestamp" datetime="2022-11-25T08:33:22+0000">25/Nov/22 08:33</time></span></a>                    gszadovszky commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1327156483  

    @jiangjiguang, however I agree on upgrading to newer java versions (and to have performance benefits like this one) it is not always an easy thing to do. For example our main historical user Hadoop is still on java 1.8 which means they would not be able to upgrade parquet after releasing this one. I think it worth a discussion on the dev list and maybe even a formal vote on it. 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17638640" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638640_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638640&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638640" class="commentdate_17638640_verbose subText comment-created-date-link"><span class="date user-tz" title="25/Nov/22 12:09"><time class="livestamp" datetime="2022-11-25T12:09:49+0000">25/Nov/22 12:09</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1327398085" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1327398085</a></p>

<p>   @gszadovszky I agree on it. As far as I know some products(such as hadoop presto flink ) are working towards upgrading to java17.  Spark already supports java17, trino requires a minimum java version is java17.0.3,  So I think parquet  should support java17 as soon as possible and be compatible with java8, because of java17 vector can bring 4x ~ 8x performance gain for parquet encode/decode. The PR uses "maven profile -P vector"  and  "code gen" to support java17 and is compatible with java8 </p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638640_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638640&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638640" class="commentdate_17638640_concise subText comment-created-date-link"><span class="date user-tz" title="25/Nov/22 12:09"><time class="livestamp" datetime="2022-11-25T12:09:49+0000">25/Nov/22 12:09</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1327398085  

    @gszadovszky I agree on it. As far as I know some products(such as hadoop presto flink ) are working towards upgrading to java17.  Spark already supports java17, trino requires a minimum java version is java17.0.3,  So I think parquet  should support java17 as soon as possible and be compatible with java8, because of java17 vector can bring 4x ~ 8x performance gain for parquet encode/decode. The PR uses "maven profile -P vector"  and  "code gen" to support java17 and is compatible with java8  

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17638664" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638664_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638664&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638664" class="commentdate_17638664_verbose subText comment-created-date-link"><span class="date user-tz" title="25/Nov/22 13:45"><time class="livestamp" datetime="2022-11-25T13:45:13+0000">25/Nov/22 13:45</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1327495379" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1327495379</a></p>

<p>   @jiangjiguang, </p>

<p>   What do you mean by this change is compatible with java8? The vectorized encoding/decoding requires java17 runtime, right? If yes, we will need to have a way release artifacts for java17 and keep java8 compatibility with others. We need to have an agreement (at community level) how we want to achieve this.</p>

<p>   By running through the change related to the compile it seems that if you have a jdk17 in the compile environment it will be compiled for a java17 runtime automatically. Since we do not have a specific environment for making a release (shame on us) it highly depends on the environment of the dev how creates the release. So, we shall either add a `release` configuration for `8` to the `jdk7` profile (if it makes sense) or do not have the `jdk17` profile activated automatically. Otherwise we might release artifacts that are not compatible &lt; java17.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17638664_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17638664&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17638664" class="commentdate_17638664_concise subText comment-created-date-link"><span class="date user-tz" title="25/Nov/22 13:45"><time class="livestamp" datetime="2022-11-25T13:45:13+0000">25/Nov/22 13:45</time></span></a>                    gszadovszky commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1327495379  

    @jiangjiguang,  

    What do you mean by this change is compatible with java8? The vectorized encoding/decoding requires java17 runtime, right? If yes, we will need to have a way release artifacts for java17 and keep java8 compatibility with others. We need to have an agreement (at community level) how we want to achieve this. 

    By running through the change related to the compile it seems that if you have a jdk17 in the compile environment it will be compiled for a java17 runtime automatically. Since we do not have a specific environment for making a release (shame on us) it highly depends on the environment of the dev how creates the release. So, we shall either add a `release` configuration for `8` to the `jdk7` profile (if it makes sense) or do not have the `jdk17` profile activated automatically. Otherwise we might release artifacts that are not compatible &lt; java17. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17639733" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17639733_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17639733&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17639733" class="commentdate_17639733_verbose subText comment-created-date-link"><span class="date user-tz" title="28/Nov/22 01:20"><time class="livestamp" datetime="2022-11-28T01:20:36+0000">28/Nov/22 01:20</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1328405659" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1328405659</a></p>

<p>   &gt; @gszadovszky That what I said supports java17 and is compatible with java8 depends on compile environment. Can you start a discussion on how to support java17 ?</p>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17639733_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17639733&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17639733" class="commentdate_17639733_concise subText comment-created-date-link"><span class="date user-tz" title="28/Nov/22 01:20"><time class="livestamp" datetime="2022-11-28T01:20:36+0000">28/Nov/22 01:20</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1328405659  

    &gt; @gszadovszky That what I said supports java17 and is compatible with java8 depends on compile environment. Can you start a discussion on how to support java17 ? 



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17639878" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17639878_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17639878&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17639878" class="commentdate_17639878_verbose subText comment-created-date-link"><span class="date user-tz" title="28/Nov/22 08:43"><time class="livestamp" datetime="2022-11-28T08:43:28+0000">28/Nov/22 08:43</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1328723973" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1328723973</a></p>

<p>   @jiangjiguang,</p>

<p>   With you current implementation if parquet-mr is compiled with jdk17 than it will not be compatible with java8 while any jdk under 17 will generate a code compatible with java8 since `release` is set to 8. My problem is this exact behaviour. I would suggest keep generating java8 compatible artifacts with using any versions of jdks (including 17) by default and let it compile for java17 (and the vectorized stuff) when specific profile is activated manually.</p>

<p>   About starting the discussion about java17 compatibility. I am currently not really active in the community and not even following the dev list. Maybe, @shangxinli or @ggershinsky would like to drive this topic?</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17639878_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17639878&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17639878" class="commentdate_17639878_concise subText comment-created-date-link"><span class="date user-tz" title="28/Nov/22 08:43"><time class="livestamp" datetime="2022-11-28T08:43:28+0000">28/Nov/22 08:43</time></span></a>                    gszadovszky commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1328723973  

    @jiangjiguang, 

    With you current implementation if parquet-mr is compiled with jdk17 than it will not be compatible with java8 while any jdk under 17 will generate a code compatible with java8 since `release` is set to 8. My problem is this exact behaviour. I would suggest keep generating java8 compatible artifacts with using any versions of jdks (including 17) by default and let it compile for java17 (and the vectorized stuff) when specific profile is activated manually. 

    About starting the discussion about java17 compatibility. I am currently not really active in the community and not even following the dev list. Maybe, @shangxinli or @ggershinsky would like to drive this topic? 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17642884" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17642884_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17642884&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17642884" class="commentdate_17642884_verbose subText comment-created-date-link"><span class="date user-tz" title="03/Dec/22 18:10"><time class="livestamp" datetime="2022-12-03T18:10:33+0000">03/Dec/22 18:10</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>shangxinli commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1336210632" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1336210632</a></p>

<p>   Thank @gszadovszky a lot for helping with this PR! </p>

<p>   +1 for what @gszadovszky said. The mainstream runtime JDK is still 1.8. Parquet is one of the underlying building blocks for many big data applications.  The bare minimum, for now, is to keep java8 compatible. Otherwise forcing applications to upgrade to jdk17 because of Parquet is disruptive and impacts adoptions. </p>

<p>   @jiangjiguang, I am very happy to see you have this PR to help the Parquet community.  Would you mind starting an email discussion to dev@parquet.apache.org for this topic? </p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17642884_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17642884&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17642884" class="commentdate_17642884_concise subText comment-created-date-link"><span class="date user-tz" title="03/Dec/22 18:10"><time class="livestamp" datetime="2022-12-03T18:10:33+0000">03/Dec/22 18:10</time></span></a>                    shangxinli commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1336210632  

    Thank @gszadovszky a lot for helping with this PR!  

    +1 for what @gszadovszky said. The mainstream runtime JDK is still 1.8. Parquet is one of the underlying building blocks for many big data applications.  The bare minimum, for now, is to keep java8 compatible. Otherwise forcing applications to upgrade to jdk17 because of Parquet is disruptive and impacts adoptions.  

    @jiangjiguang, I am very happy to see you have this PR to help the Parquet community.  Would you mind starting an email discussion to dev@parquet.apache.org for this topic?  

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17643728" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17643728_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17643728&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17643728" class="commentdate_17643728_verbose subText comment-created-date-link"><span class="date user-tz" title="06/Dec/22 08:54"><time class="livestamp" datetime="2022-12-06T08:54:29+0000">06/Dec/22 08:54</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1040642048" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1040642048</a></p>


<p>##########<br>
parquet-generator/src/main/resources/ByteBitPackingVectorLE:<br>
##########<br>
@@ -0,0 +1,3215 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;</p>

<p>Review Comment:<br>
   Should we add a comment here to let reader know this is an auto-generated source file and should not edit it directly? Just in case.</p>



<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/bitpacking/ByteBasedBitPackingVectorGenerator.java:<br>
##########<br>
@@ -0,0 +1,63 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.bitpacking;<br>
+<br>
+import java.io.*;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.</p>

<p>Review Comment:<br>
   Why is this intentional?</p>



<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,64 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+<br>
+public class ParquetReadRouter {</p>

<p>Review Comment:<br>
   It seems that this class is not used anywhere.</p>



<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/GeneratorVector.java:<br>
##########<br>
@@ -0,0 +1,31 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding;<br>
+<br>
+import org.apache.parquet.encoding.bitpacking.ByteBasedBitPackingVectorGenerator;<br>
+<br>
+/**<br>
+ * main class for code generation hook in build for encodings vector generation<br>
+ */<br>
+public class GeneratorVector {</p>

<p>Review Comment:<br>
   Should we add a separate package like `vectorbitpacking` and rename this class to `Generator` so that it is consistent with other Generators in the parquet-generator?</p>



<p>##########<br>
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java:<br>
##########<br>
@@ -105,4 +114,15 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu<br>
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos) </p>
{
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   }
<p>+<br>
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) </p>
{
+
+  }

<p>Review Comment:<br>
   Please add an empty line between method bodies.</p>



<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/GeneratorVector.java:<br>
##########<br>
@@ -0,0 +1,31 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding;<br>
+<br>
+import org.apache.parquet.encoding.bitpacking.ByteBasedBitPackingVectorGenerator;<br>
+<br>
+/**<br>
+ * main class for code generation hook in build for encodings vector generation<br>
+ */<br>
+public class GeneratorVector {<br>
+  public static void main(String[] args) throws Exception {<br>
+    Generator.main(args);</p>

<p>Review Comment:<br>
   Why mixing these two generators together? IMHO, making generators to do their jobs separately is less error-prone to users.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17643728_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17643728&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17643728" class="commentdate_17643728_concise subText comment-created-date-link"><span class="date user-tz" title="06/Dec/22 08:54"><time class="livestamp" datetime="2022-12-06T08:54:29+0000">06/Dec/22 08:54</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1040642048  


 ########## 
parquet-generator/src/main/resources/ByteBitPackingVectorLE: 
########## 
@@ -0,0 +1,3215 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 

 Review Comment: 
   Should we add a comment here to let reader know this is an auto-generated source file and should not edit it directly? Just in case. 



 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/bitpacking/ByteBasedBitPackingVectorGenerator.java: 
########## 
@@ -0,0 +1,63 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.bitpacking; 
+ 
+import java.io.*; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 

 Review Comment: 
   Why is this intentional? 



 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,64 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+ 
+public class ParquetReadRouter { 

 Review Comment: 
   It seems that this class is not used anywhere. 



 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/GeneratorVector.java: 
########## 
@@ -0,0 +1,31 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding; 
+ 
+import org.apache.parquet.encoding.bitpacking.ByteBasedBitPackingVectorGenerator; 
+ 
+/** 
+ * main class for code generation hook in build for encodings vector generation 
+ */ 
+public class GeneratorVector { 

 Review Comment: 
   Should we add a separate package like `vectorbitpacking` and rename this class to `Generator` so that it is consistent with other Generators in the parquet-generator? 



 ########## 
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java: 
########## 
@@ -105,4 +114,15 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu 
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos)  
{
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   }
 + 
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos)  
{
+
+  }

 Review Comment: 
   Please add an empty line between method bodies. 



 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/GeneratorVector.java: 
########## 
@@ -0,0 +1,31 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding; 
+ 
+import org.apache.parquet.encoding.bitpacking.ByteBasedBitPackingVectorGenerator; 
+ 
+/** 
+ * main class for code generation hook in build for encodings vector generation 
+ */ 
+public class GeneratorVector { 
+  public static void main(String[] args) throws Exception { 
+    Generator.main(args); 

 Review Comment: 
   Why mixing these two generators together? IMHO, making generators to do their jobs separately is less error-prone to users. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17645154" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17645154_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17645154&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17645154" class="commentdate_17645154_verbose subText comment-created-date-link"><span class="date user-tz" title="09/Dec/22 08:16"><time class="livestamp" datetime="2022-12-09T08:16:30+0000">09/Dec/22 08:16</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1044192235" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1044192235</a></p>


<p>##########<br>
parquet-generator/src/main/resources/ByteBitPackingVectorLE:<br>
##########<br>
@@ -0,0 +1,3215 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;</p>

<p>Review Comment:<br>
   Good idea!</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17645154_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17645154&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17645154" class="commentdate_17645154_concise subText comment-created-date-link"><span class="date user-tz" title="09/Dec/22 08:16"><time class="livestamp" datetime="2022-12-09T08:16:30+0000">09/Dec/22 08:16</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1044192235  


 ########## 
parquet-generator/src/main/resources/ByteBitPackingVectorLE: 
########## 
@@ -0,0 +1,3215 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 

 Review Comment: 
   Good idea! 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17645157" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17645157_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17645157&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17645157" class="commentdate_17645157_verbose subText comment-created-date-link"><span class="date user-tz" title="09/Dec/22 08:20"><time class="livestamp" datetime="2022-12-09T08:20:56+0000">09/Dec/22 08:20</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1044195380" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1044195380</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,64 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+<br>
+public class ParquetReadRouter {</p>

<p>Review Comment:<br>
   Yes, this class will be used for big data applications (spark flink ...) as they use now,  I will add some unit test.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17645157_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17645157&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17645157" class="commentdate_17645157_concise subText comment-created-date-link"><span class="date user-tz" title="09/Dec/22 08:20"><time class="livestamp" datetime="2022-12-09T08:20:56+0000">09/Dec/22 08:20</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1044195380  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,64 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+ 
+public class ParquetReadRouter { 

 Review Comment: 
   Yes, this class will be used for big data applications (spark flink ...) as they use now,  I will add some unit test. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17645160" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17645160_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17645160&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17645160" class="commentdate_17645160_verbose subText comment-created-date-link"><span class="date user-tz" title="09/Dec/22 08:26"><time class="livestamp" datetime="2022-12-09T08:26:41+0000">09/Dec/22 08:26</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1044199960" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1044199960</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/GeneratorVector.java:<br>
##########<br>
@@ -0,0 +1,31 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding;<br>
+<br>
+import org.apache.parquet.encoding.bitpacking.ByteBasedBitPackingVectorGenerator;<br>
+<br>
+/**<br>
+ * main class for code generation hook in build for encodings vector generation<br>
+ */<br>
+public class GeneratorVector {<br>
+  public static void main(String[] args) throws Exception {<br>
+    Generator.main(args);</p>

<p>Review Comment:<br>
   because bitpacking java17 vector decode depends on the current decode way, so I think it have to run Generator before GeneratorVector</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17645160_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17645160&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17645160" class="commentdate_17645160_concise subText comment-created-date-link"><span class="date user-tz" title="09/Dec/22 08:26"><time class="livestamp" datetime="2022-12-09T08:26:41+0000">09/Dec/22 08:26</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1044199960  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/GeneratorVector.java: 
########## 
@@ -0,0 +1,31 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding; 
+ 
+import org.apache.parquet.encoding.bitpacking.ByteBasedBitPackingVectorGenerator; 
+ 
+/** 
+ * main class for code generation hook in build for encodings vector generation 
+ */ 
+public class GeneratorVector { 
+  public static void main(String[] args) throws Exception { 
+    Generator.main(args); 

 Review Comment: 
   because bitpacking java17 vector decode depends on the current decode way, so I think it have to run Generator before GeneratorVector 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17646482" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17646482_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17646482&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17646482" class="commentdate_17646482_verbose subText comment-created-date-link"><span class="date user-tz" title="13/Dec/22 07:54"><time class="livestamp" datetime="2022-12-13T07:54:25+0000">13/Dec/22 07:54</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1046764737" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1046764737</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/bitpacking/ByteBasedBitPackingVectorGenerator.java:<br>
##########<br>
@@ -0,0 +1,63 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.bitpacking;<br>
+<br>
+import java.io.*;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.</p>

<p>Review Comment:<br>
   This class is used to generate ByteBitPackingVectorLE class, which unpackValues/packValues with java17 vector api.<br>
   If use  java17 vector api directly, errors will occur when compiling or developing with java8(&lt;java17).</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17646482_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17646482&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17646482" class="commentdate_17646482_concise subText comment-created-date-link"><span class="date user-tz" title="13/Dec/22 07:54"><time class="livestamp" datetime="2022-12-13T07:54:25+0000">13/Dec/22 07:54</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1046764737  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/bitpacking/ByteBasedBitPackingVectorGenerator.java: 
########## 
@@ -0,0 +1,63 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.bitpacking; 
+ 
+import java.io.*; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 

 Review Comment: 
   This class is used to generate ByteBitPackingVectorLE class, which unpackValues/packValues with java17 vector api. 
   If use  java17 vector api directly, errors will occur when compiling or developing with java8(&lt;java17). 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17646899" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17646899_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17646899&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17646899" class="commentdate_17646899_verbose subText comment-created-date-link"><span class="date user-tz" title="14/Dec/22 02:40"><time class="livestamp" datetime="2022-12-14T02:40:49+0000">14/Dec/22 02:40</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1350287549" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1350287549</a></p>

<p>   &gt; This work looks promising! It would be great if you can add some micro-benchmark to parquet-benchmarks.</p>

<p>   @wgtmac I have add the micro-benchmark to parquet-benchmarks, this is the result:</p>

<p>   !<span class="error">[image]</span>(<a href="https://user-images.githubusercontent.com/12368495/207491959-a1a22134-98fd-45f6-aa08-1934584e0fbb.png" class="external-link" target="_blank" rel="nofollow noopener">https://user-images.githubusercontent.com/12368495/207491959-a1a22134-98fd-45f6-aa08-1934584e0fbb.png</a>)</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17646899_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17646899&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17646899" class="commentdate_17646899_concise subText comment-created-date-link"><span class="date user-tz" title="14/Dec/22 02:40"><time class="livestamp" datetime="2022-12-14T02:40:49+0000">14/Dec/22 02:40</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1350287549  

    &gt; This work looks promising! It would be great if you can add some micro-benchmark to parquet-benchmarks. 

    @wgtmac I have add the micro-benchmark to parquet-benchmarks, this is the result: 

    ! [image] ( https://user-images.githubusercontent.com/12368495/207491959-a1a22134-98fd-45f6-aa08-1934584e0fbb.png ) 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17646941" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17646941_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17646941&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17646941" class="commentdate_17646941_verbose subText comment-created-date-link"><span class="date user-tz" title="14/Dec/22 05:49"><time class="livestamp" datetime="2022-12-14T05:49:22+0000">14/Dec/22 05:49</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jatin-bhateja commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1048036480" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1048036480</a></p>


<p>##########<br>
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java:<br>
##########<br>
@@ -105,4 +116,16 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu<br>
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos) </p>
{
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   }
<p>+<br>
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) {</p>

<p>Review Comment:<br>
   Please add appropriate comments over newly added definitions, like the ones over top over scalar routines.</p>



<p>##########<br>
parquet-generator/src/main/resources/ByteBitPackingVectorLE:<br>
##########<br>
@@ -0,0 +1,3218 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.*;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ * This is an auto-generated source file and should not edit it directly.<br>
+ */<br>
+public abstract class ByteBitPackingVectorLE {<br>
+  private static final BytePacker[] packers = new BytePacker<span class="error">[33]</span>;<br>
+<br>
+  static </p>
{
+    packers[0] = new Packer0();
+    packers[1] = new Packer1();
+    packers[2] = new Packer2();
+    packers[3] = new Packer3();
+    packers[4] = new Packer4();
+    packers[5] = new Packer5();
+    packers[6] = new Packer6();
+    packers[7] = new Packer7();
+    packers[8] = new Packer8();
+    packers[9] = new Packer9();
+    packers[10] = new Packer10();
+    packers[11] = new Packer11();
+    packers[12] = new Packer12();
+    packers[13] = new Packer13();
+    packers[14] = new Packer14();
+    packers[15] = new Packer15();
+    packers[16] = new Packer16();
+    packers[17] = new Packer17();
+    packers[18] = new Packer18();
+    packers[19] = new Packer19();
+    packers[20] = new Packer20();
+    packers[21] = new Packer21();
+    packers[22] = new Packer22();
+    packers[23] = new Packer23();
+    packers[24] = new Packer24();
+    packers[25] = new Packer25();
+    packers[26] = new Packer26();
+    packers[27] = new Packer27();
+    packers[28] = new Packer28();
+    packers[29] = new Packer29();
+    packers[30] = new Packer30();
+    packers[31] = new Packer31();
+    packers[32] = new Packer32();
+  }<br>
+<br>
+  public static final BytePackerFactory factory = new BytePackerFactory() {<br>
+    public BytePacker newBytePacker(int bitWidth) {
+      return packers[bitWidth];
+    }<br>
+  };<br>
+<br>
+  private static final class Packer0 extends BytePacker {<br>
+    private int unpackCount = 0;<br>
+<br>
+    private Packer0() {
+      super(0);
+    }<br>
+<br>
+    public int getUnpackCount() {
+      return unpackCount;
+    }<br>
+<br>
+    public final void pack8Values(final int[] in, final int inPos, final byte[] out, final int outPos) {
+    }<br>
+<br>
+    public final void pack32Values(final int[] in, final int inPos, final byte[] out, final int outPos) {+    }<br>
+<br>
+    public final void unpack8Values(final byte[] in, final int inPos, final int[] out, final int outPos) {
+    }<br>
+<br>
+    public final void unpack8Values(final ByteBuffer in, final int inPos, final int[] out, final int outPos) {+    }<br>
+<br>
+    public final void unpack32Values(final byte[] in, final int inPos, final int[] out, final int outPos) {
+    }<br>
+<br>
+    public final void unpack32Values(final ByteBuffer in, final int inPos, final int[] out, final int outPos) {+    }<br>
+<br>
+    public final void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) {
+    }<br>
+<br>
+    public final void unpackValuesVector(final ByteBuffer input, final int inPos, final int[] output, final int outPos) {<br>
<br>
Review Comment:<br>
   We also need to ensure that we invoke both scalar generators and vector generators for jdk17 profile. <br>
<br>
<br>
<br>
##########<br>
parquet-benchmarks/src/main/java/org/apache/parquet/benchmarks/ByteBitPackingVectorBenchmarks.java:<br>
##########<br>
@@ -0,0 +1,83 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.benchmarks;<br>
+<br>
+import org.apache.parquet.column.values.bitpacking.BytePacker;<br>
+import org.apache.parquet.column.values.bitpacking.Packer;<br>
+import org.openjdk.jmh.annotations.*;<br>
+<br>
+import java.util.concurrent.TimeUnit;<br>
+<br>
+/**<br>
+ * This class uses the java17 vector API, add VM options --add-modules=jdk.incubator.vector<br>
+ */<br>
+<br>
+@State(Scope.Benchmark)<br>
+@BenchmarkMode(Mode.AverageTime)<br>
+@Warmup(iterations = 1, batchSize = 100000)<br>
+@Measurement(iterations = 1, batchSize = 100000)<br>
+@OutputTimeUnit(TimeUnit.MILLISECONDS)<br>
+public class ByteBitPackingVectorBenchmarks {<br>
+<br>
+  /**<br>
+   * The range of bitWidth is 1 ~ 32, change it directly if test other bitWidth.<br>
+   */<br>
+  private static final int bitWidth = 7;<br>
+  private static final int outputValues = 1024;<br>
+  private final byte[] input = new byte<span class="error">[outputValues * bitWidth / 8]</span>;<br>
+  private final int[] output = new int<span class="error">[outputValues]</span>;<br>
+  private final int[] outputVector = new int<span class="error">[outputValues]</span>;<br>
+<br>
+  @Setup(Level.Trial)<br>
+  public void getInputBytes() {<br>
+    for (int i = 0; i &lt; input.length; i++) {
+      input[i] = (byte) i;
+    }<br>
+  }<br>
+<br>
+  @Benchmark<br>
+  public void testUnpack() {<br>
+    BytePacker bytePacker = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    for (int i = 0, j = 0; i &lt; input.length; i += bitWidth, j += 8) {
+      bytePacker.unpack8Values(input, i, output, j);
+    }<br>
+  }<br>
+<br>
+  @Benchmark<br>
+  public void testUnpackVector() {<br>
+    BytePacker bytePacker = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker bytePackerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
<br>
Review Comment:<br>
   As suggested in my following comments, it will be useful if we are able to access all the routines through one packer instance. <br>
<br>
<br>
<br>
##########<br>
parquet-generator/src/main/resources/ByteBitPackingVectorLE:<br>
##########<br>
@@ -0,0 +1,3218 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.*;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ * This is an auto-generated source file and should not edit it directly.<br>
+ */<br>
+public abstract class ByteBitPackingVectorLE {<br>
+  private static final BytePacker[] packers = new BytePacker<span class="error">[33]</span>;<br>
+<br>
+  static {+    packers[0] = new Packer0();+    packers[1] = new Packer1();+    packers[2] = new Packer2();+    packers[3] = new Packer3();+    packers[4] = new Packer4();+    packers[5] = new Packer5();+    packers[6] = new Packer6();+    packers[7] = new Packer7();+    packers[8] = new Packer8();+    packers[9] = new Packer9();+    packers[10] = new Packer10();+    packers[11] = new Packer11();+    packers[12] = new Packer12();+    packers[13] = new Packer13();+    packers[14] = new Packer14();+    packers[15] = new Packer15();+    packers[16] = new Packer16();+    packers[17] = new Packer17();+    packers[18] = new Packer18();+    packers[19] = new Packer19();+    packers[20] = new Packer20();+    packers[21] = new Packer21();+    packers[22] = new Packer22();+    packers[23] = new Packer23();+    packers[24] = new Packer24();+    packers[25] = new Packer25();+    packers[26] = new Packer26();+    packers[27] = new Packer27();+    packers[28] = new Packer28();+    packers[29] = new Packer29();+    packers[30] = new Packer30();+    packers[31] = new Packer31();+    packers[32] = new Packer32();+  }
<p>+<br>
+  public static final BytePackerFactory factory = new BytePackerFactory() {<br>
+    public BytePacker newBytePacker(int bitWidth) </p>
{
+      return packers[bitWidth];
+    }
<p>+  };<br>
+<br>
+  private static final class Packer0 extends BytePacker {<br>
+    private int unpackCount = 0;<br>
+<br>
+    private Packer0() </p>
{
+      super(0);
+    }
<p>+<br>
+    public int getUnpackCount() </p>
{
+      return unpackCount;
+    }
<p>+<br>
+    public final void pack8Values(final int[] in, final int inPos, final byte[] out, final int outPos) </p>
{
+    }<br>
+<br>
+    public final void pack32Values(final int[] in, final int inPos, final byte[] out, final int outPos) {+    }
<p>+<br>
+    public final void unpack8Values(final byte[] in, final int inPos, final int[] out, final int outPos) </p>
{
+    }<br>
+<br>
+    public final void unpack8Values(final ByteBuffer in, final int inPos, final int[] out, final int outPos) {+    }
<p>+<br>
+    public final void unpack32Values(final byte[] in, final int inPos, final int[] out, final int outPos) </p>
{
+    }<br>
+<br>
+    public final void unpack32Values(final ByteBuffer in, final int inPos, final int[] out, final int outPos) {+    }
<p>+<br>
+    public final void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) </p>
{
+    }
<p>+<br>
+    public final void unpackValuesVector(final ByteBuffer input, final int inPos, final int[] output, final int outPos) {</p>

<p>Review Comment:<br>
   All these empty definitions can be removed if we introduce a new class ByteVectorPacker which inherit from existing BytePacker.</p>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17646941_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17646941&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17646941" class="commentdate_17646941_concise subText comment-created-date-link"><span class="date user-tz" title="14/Dec/22 05:49"><time class="livestamp" datetime="2022-12-14T05:49:22+0000">14/Dec/22 05:49</time></span></a>                    jatin-bhateja commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1048036480  


 ########## 
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java: 
########## 
@@ -105,4 +116,16 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu 
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos)  
{
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   }
 + 
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) { 

 Review Comment: 
   Please add appropriate comments over newly added definitions, like the ones over top over scalar routines. 



 ########## 
parquet-generator/src/main/resources/ByteBitPackingVectorLE: 
########## 
@@ -0,0 +1,3218 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.*; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * This is an auto-generated source file and should not edit it directly. 
+ */ 
+public abstract class ByteBitPackingVectorLE { 
+  private static final BytePacker[] packers = new BytePacker [33] ; 
+ 
+  static  
{
+    packers[0] = new Packer0();
+    packers[1] = new Packer1();
+    packers[2] = new Packer2();
+    packers[3] = new Packer3();
+    packers[4] = new Packer4();
+    packers[5] = new Packer5();
+    packers[6] = new Packer6();
+    packers[7] = new Packer7();
+    packers[8] = new Packer8();
+    packers[9] = new Packer9();
+    packers[10] = new Packer10();
+    packers[11] = new Packer11();
+    packers[12] = new Packer12();
+    packers[13] = new Packer13();
+    packers[14] = new Packer14();
+    packers[15] = new Packer15();
+    packers[16] = new Packer16();
+    packers[17] = new Packer17();
+    packers[18] = new Packer18();
+    packers[19] = new Packer19();
+    packers[20] = new Packer20();
+    packers[21] = new Packer21();
+    packers[22] = new Packer22();
+    packers[23] = new Packer23();
+    packers[24] = new Packer24();
+    packers[25] = new Packer25();
+    packers[26] = new Packer26();
+    packers[27] = new Packer27();
+    packers[28] = new Packer28();
+    packers[29] = new Packer29();
+    packers[30] = new Packer30();
+    packers[31] = new Packer31();
+    packers[32] = new Packer32();
+  } 
+ 
+  public static final BytePackerFactory factory = new BytePackerFactory() { 
+    public BytePacker newBytePacker(int bitWidth) {
+      return packers[bitWidth];
+    } 
+  }; 
+ 
+  private static final class Packer0 extends BytePacker { 
+    private int unpackCount = 0; 
+ 
+    private Packer0() {
+      super(0);
+    } 
+ 
+    public int getUnpackCount() {
+      return unpackCount;
+    } 
+ 
+    public final void pack8Values(final int[] in, final int inPos, final byte[] out, final int outPos) {
+    } 
+ 
+    public final void pack32Values(final int[] in, final int inPos, final byte[] out, final int outPos) {+    } 
+ 
+    public final void unpack8Values(final byte[] in, final int inPos, final int[] out, final int outPos) {
+    } 
+ 
+    public final void unpack8Values(final ByteBuffer in, final int inPos, final int[] out, final int outPos) {+    } 
+ 
+    public final void unpack32Values(final byte[] in, final int inPos, final int[] out, final int outPos) {
+    } 
+ 
+    public final void unpack32Values(final ByteBuffer in, final int inPos, final int[] out, final int outPos) {+    } 
+ 
+    public final void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) {
+    } 
+ 
+    public final void unpackValuesVector(final ByteBuffer input, final int inPos, final int[] output, final int outPos) { 
 
Review Comment: 
   We also need to ensure that we invoke both scalar generators and vector generators for jdk17 profile.  
 
 
 
########## 
parquet-benchmarks/src/main/java/org/apache/parquet/benchmarks/ByteBitPackingVectorBenchmarks.java: 
########## 
@@ -0,0 +1,83 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.benchmarks; 
+ 
+import org.apache.parquet.column.values.bitpacking.BytePacker; 
+import org.apache.parquet.column.values.bitpacking.Packer; 
+import org.openjdk.jmh.annotations.*; 
+ 
+import java.util.concurrent.TimeUnit; 
+ 
+/** 
+ * This class uses the java17 vector API, add VM options --add-modules=jdk.incubator.vector 
+ */ 
+ 
+@State(Scope.Benchmark) 
+@BenchmarkMode(Mode.AverageTime) 
+@Warmup(iterations = 1, batchSize = 100000) 
+@Measurement(iterations = 1, batchSize = 100000) 
+@OutputTimeUnit(TimeUnit.MILLISECONDS) 
+public class ByteBitPackingVectorBenchmarks { 
+ 
+  /** 
+   * The range of bitWidth is 1 ~ 32, change it directly if test other bitWidth. 
+   */ 
+  private static final int bitWidth = 7; 
+  private static final int outputValues = 1024; 
+  private final byte[] input = new byte [outputValues * bitWidth / 8] ; 
+  private final int[] output = new int [outputValues] ; 
+  private final int[] outputVector = new int [outputValues] ; 
+ 
+  @Setup(Level.Trial) 
+  public void getInputBytes() { 
+    for (int i = 0; i &lt; input.length; i++) {
+      input[i] = (byte) i;
+    } 
+  } 
+ 
+  @Benchmark 
+  public void testUnpack() { 
+    BytePacker bytePacker = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    for (int i = 0, j = 0; i &lt; input.length; i += bitWidth, j += 8) {
+      bytePacker.unpack8Values(input, i, output, j);
+    } 
+  } 
+ 
+  @Benchmark 
+  public void testUnpackVector() { 
+    BytePacker bytePacker = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker bytePackerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
 
Review Comment: 
   As suggested in my following comments, it will be useful if we are able to access all the routines through one packer instance.  
 
 
 
########## 
parquet-generator/src/main/resources/ByteBitPackingVectorLE: 
########## 
@@ -0,0 +1,3218 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.*; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * This is an auto-generated source file and should not edit it directly. 
+ */ 
+public abstract class ByteBitPackingVectorLE { 
+  private static final BytePacker[] packers = new BytePacker [33] ; 
+ 
+  static {+    packers[0] = new Packer0();+    packers[1] = new Packer1();+    packers[2] = new Packer2();+    packers[3] = new Packer3();+    packers[4] = new Packer4();+    packers[5] = new Packer5();+    packers[6] = new Packer6();+    packers[7] = new Packer7();+    packers[8] = new Packer8();+    packers[9] = new Packer9();+    packers[10] = new Packer10();+    packers[11] = new Packer11();+    packers[12] = new Packer12();+    packers[13] = new Packer13();+    packers[14] = new Packer14();+    packers[15] = new Packer15();+    packers[16] = new Packer16();+    packers[17] = new Packer17();+    packers[18] = new Packer18();+    packers[19] = new Packer19();+    packers[20] = new Packer20();+    packers[21] = new Packer21();+    packers[22] = new Packer22();+    packers[23] = new Packer23();+    packers[24] = new Packer24();+    packers[25] = new Packer25();+    packers[26] = new Packer26();+    packers[27] = new Packer27();+    packers[28] = new Packer28();+    packers[29] = new Packer29();+    packers[30] = new Packer30();+    packers[31] = new Packer31();+    packers[32] = new Packer32();+  }
 + 
+  public static final BytePackerFactory factory = new BytePackerFactory() { 
+    public BytePacker newBytePacker(int bitWidth)  
{
+      return packers[bitWidth];
+    }
 +  }; 
+ 
+  private static final class Packer0 extends BytePacker { 
+    private int unpackCount = 0; 
+ 
+    private Packer0()  
{
+      super(0);
+    }
 + 
+    public int getUnpackCount()  
{
+      return unpackCount;
+    }
 + 
+    public final void pack8Values(final int[] in, final int inPos, final byte[] out, final int outPos)  
{
+    } 
+ 
+    public final void pack32Values(final int[] in, final int inPos, final byte[] out, final int outPos) {+    }
 + 
+    public final void unpack8Values(final byte[] in, final int inPos, final int[] out, final int outPos)  
{
+    } 
+ 
+    public final void unpack8Values(final ByteBuffer in, final int inPos, final int[] out, final int outPos) {+    }
 + 
+    public final void unpack32Values(final byte[] in, final int inPos, final int[] out, final int outPos)  
{
+    } 
+ 
+    public final void unpack32Values(final ByteBuffer in, final int inPos, final int[] out, final int outPos) {+    }
 + 
+    public final void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos)  
{
+    }
 + 
+    public final void unpackValuesVector(final ByteBuffer input, final int inPos, final int[] output, final int outPos) { 

 Review Comment: 
   All these empty definitions can be removed if we introduce a new class ByteVectorPacker which inherit from existing BytePacker. 



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17646943" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17646943_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17646943&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17646943" class="commentdate_17646943_verbose subText comment-created-date-link"><span class="date user-tz" title="14/Dec/22 05:50"><time class="livestamp" datetime="2022-12-14T05:50:32+0000">14/Dec/22 05:50</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jatin-bhateja commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1048036480" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1048036480</a></p>


<p>##########<br>
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java:<br>
##########<br>
@@ -105,4 +116,16 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu<br>
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos) </p>
{
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   }
<p>+<br>
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) {</p>

<p>Review Comment:<br>
   Please add appropriate comments over newly added definitions, like the ones over top of scalar routines.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17646943_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17646943&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17646943" class="commentdate_17646943_concise subText comment-created-date-link"><span class="date user-tz" title="14/Dec/22 05:50"><time class="livestamp" datetime="2022-12-14T05:50:32+0000">14/Dec/22 05:50</time></span></a>                    jatin-bhateja commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1048036480  


 ########## 
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java: 
########## 
@@ -105,4 +116,16 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu 
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos)  
{
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   }
 + 
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) { 

 Review Comment: 
   Please add appropriate comments over newly added definitions, like the ones over top of scalar routines. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17647028" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17647028_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17647028&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17647028" class="commentdate_17647028_verbose subText comment-created-date-link"><span class="date user-tz" title="14/Dec/22 10:21"><time class="livestamp" datetime="2022-12-14T10:21:29+0000">14/Dec/22 10:21</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1350805103" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1350805103</a></p>

<p>   @wgtmac  I have resubmitted the PR, can you review it again ?</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17647028_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17647028&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17647028" class="commentdate_17647028_concise subText comment-created-date-link"><span class="date user-tz" title="14/Dec/22 10:21"><time class="livestamp" datetime="2022-12-14T10:21:29+0000">14/Dec/22 10:21</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1350805103  

    @wgtmac  I have resubmitted the PR, can you review it again ? 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17679821" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17679821_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17679821&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17679821" class="commentdate_17679821_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Jan/23 14:30"><time class="livestamp" datetime="2023-01-23T14:30:01+0000">23/Jan/23 14:30</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1400441832" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1400441832</a></p>

<p>   &gt; Thank @gszadovszky a lot for helping with this PR!<br>
   &gt; <br>
   &gt; +1 for what @gszadovszky said. The mainstream runtime JDK is still 1.8. Parquet is one of the underlying building blocks for many big data applications. The bare minimum, for now, is to keep java8 compatible. Otherwise forcing applications to upgrade to jdk17 because of Parquet is disruptive and impacts adoptions.<br>
   &gt; <br>
   &gt; @jiangjiguang, I am very happy to see you have this PR to help the Parquet community. Would you mind starting an email discussion to <span class="error">[dev@parquet.apache.org]</span>(<span class="nobr"><a href="mailto:dev@parquet.apache.org" class="external-link" target="_blank" rel="nofollow noopener">dev@parquet.apache.org<sup><img class="rendericon" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/mail_small.gif" height="12" width="13" align="absmiddle" alt="" border="0"></sup></a></span>) for this topic?<br>
   &gt; <br>
   &gt; cc @ggershinsky @wgtmac</p>

<p>   @shangxinli </p>

<p>   &gt; </p>

<p>   @gszadovszky @shangxinli @wgtmac I have started the discussion about how to upgrade java17 over a month, but nobody involved!  So I have updated the PR, it does not  involve how to upgrade java17.<br>
   The default compilation is java8<br>
   Just add maven build parameters  -P java17-target -P vector and get the expected jars  when people want to use java17 vector to speed up parquet decode</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17679821_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17679821&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17679821" class="commentdate_17679821_concise subText comment-created-date-link"><span class="date user-tz" title="23/Jan/23 14:30"><time class="livestamp" datetime="2023-01-23T14:30:01+0000">23/Jan/23 14:30</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1400441832  

    &gt; Thank @gszadovszky a lot for helping with this PR! 
   &gt;  
   &gt; +1 for what @gszadovszky said. The mainstream runtime JDK is still 1.8. Parquet is one of the underlying building blocks for many big data applications. The bare minimum, for now, is to keep java8 compatible. Otherwise forcing applications to upgrade to jdk17 because of Parquet is disruptive and impacts adoptions. 
   &gt;  
   &gt; @jiangjiguang, I am very happy to see you have this PR to help the Parquet community. Would you mind starting an email discussion to  [dev@parquet.apache.org] (  dev@parquet.apache.org     ) for this topic? 
   &gt;  
   &gt; cc @ggershinsky @wgtmac 

    @shangxinli  

    &gt;  

    @gszadovszky @shangxinli @wgtmac I have started the discussion about how to upgrade java17 over a month, but nobody involved!  So I have updated the PR, it does not  involve how to upgrade java17. 
   The default compilation is java8 
   Just add maven build parameters  -P java17-target -P vector and get the expected jars  when people want to use java17 vector to speed up parquet decode 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17680762" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17680762_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17680762&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17680762" class="commentdate_17680762_verbose subText comment-created-date-link"><span class="date user-tz" title="25/Jan/23 19:29"><time class="livestamp" datetime="2023-01-25T19:29:57+0000">25/Jan/23 19:29</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1404125417" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1404125417</a></p>

<p>   Sorry for the bad experience, @jiangjiguang. Unfortunately, I don't have too much time for the parquet community.<br>
   @wgtmac, @jatin-bhateja, since you were the ones who actively reviewed this PR I would like to ask for your approvals. I won't have time to properly review this but I am happy to push it if you agree.</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17680762_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17680762&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17680762" class="commentdate_17680762_concise subText comment-created-date-link"><span class="date user-tz" title="25/Jan/23 19:29"><time class="livestamp" datetime="2023-01-25T19:29:57+0000">25/Jan/23 19:29</time></span></a>                    gszadovszky commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1404125417  

    Sorry for the bad experience, @jiangjiguang. Unfortunately, I don't have too much time for the parquet community. 
   @wgtmac, @jatin-bhateja, since you were the ones who actively reviewed this PR I would like to ask for your approvals. I won't have time to properly review this but I am happy to push it if you agree. 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17680786" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17680786_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17680786&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17680786" class="commentdate_17680786_verbose subText comment-created-date-link"><span class="date user-tz" title="25/Jan/23 20:03"><time class="livestamp" datetime="2023-01-25T20:03:32+0000">25/Jan/23 20:03</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1404160615" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1404160615</a></p>

<p>   @jiangjiguang, please check test failures.</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17680786_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17680786&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17680786" class="commentdate_17680786_concise subText comment-created-date-link"><span class="date user-tz" title="25/Jan/23 20:03"><time class="livestamp" datetime="2023-01-25T20:03:32+0000">25/Jan/23 20:03</time></span></a>                    gszadovszky commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1404160615  

    @jiangjiguang, please check test failures. 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681529" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681529_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681529&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681529" class="commentdate_17681529_verbose subText comment-created-date-link"><span class="date user-tz" title="28/Jan/23 07:05"><time class="livestamp" datetime="2023-01-28T07:05:42+0000">28/Jan/23 07:05</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407314603" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407314603</a></p>

<p>   &gt; @jiangjiguang, please check test failures.</p>

<p>   @gszadovszky </p>

<p>   &gt; @jiangjiguang, please check test failures.</p>

<p>   @gszadovszky Thank you for your attention about the PR, I have fixed it and the test successes.</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681529_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681529&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681529" class="commentdate_17681529_concise subText comment-created-date-link"><span class="date user-tz" title="28/Jan/23 07:05"><time class="livestamp" datetime="2023-01-28T07:05:42+0000">28/Jan/23 07:05</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407314603  

    &gt; @jiangjiguang, please check test failures. 

    @gszadovszky  

    &gt; @jiangjiguang, please check test failures. 

    @gszadovszky Thank you for your attention about the PR, I have fixed it and the test successes. 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681533" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681533_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681533&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681533" class="commentdate_17681533_verbose subText comment-created-date-link"><span class="date user-tz" title="28/Jan/23 07:30"><time class="livestamp" datetime="2023-01-28T07:30:22+0000">28/Jan/23 07:30</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089666125" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089666125</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,132 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * This is a utils class which is used for big data applications(such as Spark Flink).</p>

<p>Review Comment:<br>
   ```suggestion</p>
<ul>
	<li>Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
   ```</li>
</ul>




<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,132 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * This is a utils class which is used for big data applications(such as Spark Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static volatile Boolean vector;<br>
+<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    if (supportVector()) </p>
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    } else {<br>
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);<br>
<br>
Review Comment:<br>
   ```suggestion<br>
         readBatch(bitWidth, in, currentCount, currentBuffer);<br>
   ```<br>
<br>
<br>
<br>
##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,132 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * This is a utils class which is used for big data applications(such as Spark Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static volatile Boolean vector;<br>
+<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    if (supportVector()) {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
<p> else </p>
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    }<br>
+  }<br>
+<br>
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / 8;<br>
+<br>
+    // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+    int totalByteCountVector = totalByteCount - 64;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) {
+        packerVector.unpackValuesVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }<br>
+      // If the remaining bytes size &lt;= 64, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) {
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }<br>
+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) {
+        packerVector.unpackValuesVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) {
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }<br>
+    }<br>
+  }<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) {
+      // values are bit packed 8 at a time, so reading bitWidth will always work
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += 8;
+    }<br>
+  }<br>
+<br>
+  public static Boolean supportVector() {<br>
+    if (vector != null) {
+      return vector;
+    }<br>
+    synchronized (ParquetReadRouter.class) {<br>
+      if (vector == null) {<br>
+        synchronized (ParquetReadRouter.class) {<br>
+          vector = avx512Flag();<br>
<br>
Review Comment:<br>
   I assume the java vector api is agnostic to specific instruction set. So this function name is a little bit misleading to me since it binds the vector to AVX-512. Better to organize the code to be more extensible for other instruction sets.<br>
<br>
<br>
<br>
##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,132 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * This is a utils class which is used for big data applications(such as Spark Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static volatile Boolean vector;<br>
+<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    if (supportVector()) {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
<p> else </p>
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    }<br>
+  }<br>
+<br>
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / 8;<br>
+<br>
+    // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+    int totalByteCountVector = totalByteCount - 64;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) {
+        packerVector.unpackValuesVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }<br>
+      // If the remaining bytes size &lt;= 64, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) {
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }<br>
+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) {
+        packerVector.unpackValuesVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) {
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }<br>
+    }<br>
+  }<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) {
+      // values are bit packed 8 at a time, so reading bitWidth will always work
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += 8;
+    }<br>
+  }<br>
+<br>
+  public static Boolean supportVector() {<br>
+    if (vector != null) {
+      return vector;
+    }<br>
+    synchronized (ParquetReadRouter.class) {<br>
+      if (vector == null) {<br>
+        synchronized (ParquetReadRouter.class) {
+          vector = avx512Flag();
+        }<br>
+      }<br>
+    }<br>
+    return vector;<br>
+  }<br>
+<br>
+  private static boolean avx512Flag() {<br>
<br>
Review Comment:<br>
   Looks like these routines will be executed every time once `supportVector()` is called.<br>
<br>
<br>
<br>
##########<br>
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java:<br>
##########<br>
@@ -105,4 +116,26 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu<br>
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos) {
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   }<br>
+<br>
+  /**<br>
+   * unpack bitWidth bytes from input at inPos into {unpackCount} values in output at outPos using Java Vector API.<br>
+   * @param input the input bytes<br>
+   * @param inPos where to read from in input<br>
+   * @param output the output values<br>
+   * @param outPos where to write to in output<br>
+   */<br>
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) {
+
+  }<br>
+<br>
+  /**<br>
+   * unpack bitWidth bytes from input at inPos into {unpackCount} values in output at outPos using Java Vector API.<br>
+   * @param input the input bytes<br>
+   * @param inPos where to read from in input<br>
+   * @param output the output values<br>
+   * @param outPos where to write to in output<br>
+   */<br>
+  public void unpackValuesVector(final ByteBuffer input, final int inPos, final int[] output, final int outPos) {<br>
+<br>
<br>
Review Comment:<br>
   It is better to throw here and above?<br>
<br>
<br>
<br>
##########<br>
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java:<br>
##########<br>
@@ -105,4 +116,26 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu<br>
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos) {     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);   }<br>
+<br>
+  /**<br>
+   * unpack bitWidth bytes from input at inPos into {unpackCount} values in output at outPos using Java Vector API.<br>
+   * @param input the input bytes<br>
+   * @param inPos where to read from in input<br>
+   * @param output the output values<br>
+   * @param outPos where to write to in output<br>
+   */<br>
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) {<br>
<br>
Review Comment:<br>
   Do we have a standard norm to define a function when it leverages the Vector API? Does it sound good to rename it to `unpackValuesUsingVector` or `vectorUnpackValues`? The current name is misleading.<br>
<br>
<br>
<br>
##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGeneratorVector.java:<br>
##########<br>
@@ -0,0 +1,63 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.*;<br>
<br>
Review Comment:<br>
   Please do not use `*` in the import.<br>
<br>
<br>
<br>
##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,132 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * This is a utils class which is used for big data applications(such as Spark Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static volatile Boolean vector;<br>
+<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    if (supportVector()) {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
<p> else </p>
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    }<br>
+  }<br>
+<br>
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / 8;<br>
+<br>
+    // register of avx512 are 512 bits, and can load up to 64 bytes<br>
<br>
Review Comment:<br>
   Can we make 64 bytes to be an input parameter? My intention is not to fix it so we can support other instruction sets as well. In my experience, sometimes AVX2 outperforms AVX512 in certain workloads, especially for bitpacking.<br>
<br>
<br>
<br>
##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,132 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * This is a utils class which is used for big data applications(such as Spark Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static volatile Boolean vector;<br>
+<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    if (supportVector()) {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
<p> else </p>
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    }<br>
+  }<br>
+<br>
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / 8;<br>
+<br>
+    // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+    int totalByteCountVector = totalByteCount - 64;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) {
+        packerVector.unpackValuesVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }<br>
+      // If the remaining bytes size &lt;= 64, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) {
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }<br>
+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) {
+        packerVector.unpackValuesVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) {
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }<br>
+    }<br>
+  }<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) {
+      // values are bit packed 8 at a time, so reading bitWidth will always work
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += 8;
+    }<br>
+  }<br>
+<br>
+  public static Boolean supportVector() {<br>
+    if (vector != null) {
+      return vector;
+    }<br>
+    synchronized (ParquetReadRouter.class) {<br>
+      if (vector == null) {<br>
+        synchronized (ParquetReadRouter.class) {
+          vector = avx512Flag();
+        }<br>
+      }<br>
+    }<br>
+    return vector;<br>
+  }<br>
+<br>
+  private static boolean avx512Flag() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) {
+        return false;
+      }<br>
+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) {
+            continue;
+          }<br>
+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) {
+            return true;
+          }<br>
+        }<br>
+      }<br>
+    } catch (Exception ex) {<br>
+      LOG.warn("Not getting CPU info error");<br>
<br>
Review Comment:<br>
   ```suggestion<br>
         LOG.warn("Failed to gett CPU info");<br>
   ```<br>
<br>
<br>
<br>
##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,132 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * This is a utils class which is used for big data applications(such as Spark Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static volatile Boolean vector;<br>
+<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    if (supportVector()) {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
<p> else </p>
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth;</p>

<p>Review Comment:<br>
   Avoid magic numbers like 8 and 64 and declare them as constants.</p>



<p>##########<br>
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java:<br>
##########<br>
@@ -31,6 +31,13 @@ public abstract class BytePacker {</p>

<p>   private final int bitWidth;</p>

<p>+  /**<br>
+   * unpack the output int values at a time.</p>

<p>Review Comment:<br>
   ```suggestion</p>
<ul>
	<li>Number of integer values to be unpacked at a time.<br>
   ```</li>
</ul>




<p>##########<br>
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/Packer.java:<br>
##########<br>
@@ -101,6 +121,10 @@ private static Object getStaticField(String className, String fieldName) {<br>
    */<br>
   public abstract BytePacker newBytePacker(int width);</p>

<p>+  public BytePacker newBytePackerVector(int width) {<br>
+    throw new RuntimeException("This function must be implemented by subclasses!");</p>

<p>Review Comment:<br>
   ```suggestion<br>
       throw new RuntimeException("newBytePackerVector must be implemented by subclasses!");<br>
   ```</p>



<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGeneratorVector.java:<br>
##########<br>
@@ -0,0 +1,63 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.*;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGeneratorVector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPackingVector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPackingVectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception {<br>
+    String basePath = args<span class="error">[0]</span>;<br>
+    //TODO: Int for Big Endian</p>

<p>Review Comment:<br>
   Would you mind opening the JIRAs to break down the work for better tracking?</p>



<p>##########<br>
pom.xml:<br>
##########<br>
@@ -659,5 +666,74 @@<br>
         &lt;/plugins&gt;<br>
       &lt;/build&gt;<br>
     &lt;/profile&gt;<br>
+<br>
+    &lt;profile&gt;<br>
+      &lt;id&gt;java17-target&lt;/id&gt;<br>
+      &lt;build&gt;<br>
+        &lt;plugins&gt;<br>
+          &lt;plugin&gt;<br>
+            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br>
+            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;<br>
+            &lt;configuration&gt;<br>
+              &lt;release&gt;17&lt;/release&gt;<br>
+              &lt;compilerArgs combine.children="append"&gt;<br>
+                &lt;compilerArg&gt;${extraJavaVectorTestArgs}&lt;/compilerArg&gt;<br>
+              &lt;/compilerArgs&gt;<br>
+            &lt;/configuration&gt;<br>
+          &lt;/plugin&gt;<br>
+<br>
+          &lt;plugin&gt;<br>
+            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br>
+            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;<br>
+            &lt;configuration&gt;<br>
+              &lt;argLine&gt;${surefire.argLine} ${extraJavaTestArgs} ${extraJavaVectorTestArgs}&lt;/argLine&gt;<br>
+              &lt;systemPropertyVariables&gt;</p>

<p>Review Comment:<br>
   Why are these needed?</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681533_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681533&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681533" class="commentdate_17681533_concise subText comment-created-date-link"><span class="date user-tz" title="28/Jan/23 07:30"><time class="livestamp" datetime="2023-01-28T07:30:22+0000">28/Jan/23 07:30</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089666125  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,132 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * This is a utils class which is used for big data applications(such as Spark Flink). 

 Review Comment: 
   ```suggestion 
 
	 Utility class for big data applications (such as Apache Spark and Apache Flink). 
   ``` 
 




 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,132 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * This is a utils class which is used for big data applications(such as Spark Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static volatile Boolean vector; 
+ 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    if (supportVector())  
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    } else { 
+      readBatchVector(bitWidth, in, currentCount, currentBuffer); 
 
Review Comment: 
   ```suggestion 
         readBatch(bitWidth, in, currentCount, currentBuffer); 
   ``` 
 
 
 
########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,132 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * This is a utils class which is used for big data applications(such as Spark Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static volatile Boolean vector; 
+ 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    if (supportVector()) {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
  else  
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    } 
+  } 
+ 
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / 8; 
+ 
+    // register of avx512 are 512 bits, and can load up to 64 bytes 
+    int totalByteCountVector = totalByteCount - 64; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) {
+        packerVector.unpackValuesVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      } 
+      // If the remaining bytes size &lt;= 64, the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) {
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      } 
+    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) {
+        packerVector.unpackValuesVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      } 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) {
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      } 
+    } 
+  } 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount) {
+      // values are bit packed 8 at a time, so reading bitWidth will always work
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += 8;
+    } 
+  } 
+ 
+  public static Boolean supportVector() { 
+    if (vector != null) {
+      return vector;
+    } 
+    synchronized (ParquetReadRouter.class) { 
+      if (vector == null) { 
+        synchronized (ParquetReadRouter.class) { 
+          vector = avx512Flag(); 
 
Review Comment: 
   I assume the java vector api is agnostic to specific instruction set. So this function name is a little bit misleading to me since it binds the vector to AVX-512. Better to organize the code to be more extensible for other instruction sets. 
 
 
 
########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,132 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * This is a utils class which is used for big data applications(such as Spark Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static volatile Boolean vector; 
+ 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    if (supportVector()) {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
  else  
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    } 
+  } 
+ 
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / 8; 
+ 
+    // register of avx512 are 512 bits, and can load up to 64 bytes 
+    int totalByteCountVector = totalByteCount - 64; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) {
+        packerVector.unpackValuesVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      } 
+      // If the remaining bytes size &lt;= 64, the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) {
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      } 
+    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) {
+        packerVector.unpackValuesVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      } 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) {
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      } 
+    } 
+  } 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount) {
+      // values are bit packed 8 at a time, so reading bitWidth will always work
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += 8;
+    } 
+  } 
+ 
+  public static Boolean supportVector() { 
+    if (vector != null) {
+      return vector;
+    } 
+    synchronized (ParquetReadRouter.class) { 
+      if (vector == null) { 
+        synchronized (ParquetReadRouter.class) {
+          vector = avx512Flag();
+        } 
+      } 
+    } 
+    return vector; 
+  } 
+ 
+  private static boolean avx512Flag() { 
 
Review Comment: 
   Looks like these routines will be executed every time once `supportVector()` is called. 
 
 
 
########## 
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java: 
########## 
@@ -105,4 +116,26 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu 
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos) {
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   } 
+ 
+  /** 
+   * unpack bitWidth bytes from input at inPos into {unpackCount} values in output at outPos using Java Vector API. 
+   * @param input the input bytes 
+   * @param inPos where to read from in input 
+   * @param output the output values 
+   * @param outPos where to write to in output 
+   */ 
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) {
+
+  } 
+ 
+  /** 
+   * unpack bitWidth bytes from input at inPos into {unpackCount} values in output at outPos using Java Vector API. 
+   * @param input the input bytes 
+   * @param inPos where to read from in input 
+   * @param output the output values 
+   * @param outPos where to write to in output 
+   */ 
+  public void unpackValuesVector(final ByteBuffer input, final int inPos, final int[] output, final int outPos) { 
+ 
 
Review Comment: 
   It is better to throw here and above? 
 
 
 
########## 
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java: 
########## 
@@ -105,4 +116,26 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu 
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos) {     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);   } 
+ 
+  /** 
+   * unpack bitWidth bytes from input at inPos into {unpackCount} values in output at outPos using Java Vector API. 
+   * @param input the input bytes 
+   * @param inPos where to read from in input 
+   * @param output the output values 
+   * @param outPos where to write to in output 
+   */ 
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) { 
 
Review Comment: 
   Do we have a standard norm to define a function when it leverages the Vector API? Does it sound good to rename it to `unpackValuesUsingVector` or `vectorUnpackValues`? The current name is misleading. 
 
 
 
########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGeneratorVector.java: 
########## 
@@ -0,0 +1,63 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.*; 
 
Review Comment: 
   Please do not use `*` in the import. 
 
 
 
########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,132 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * This is a utils class which is used for big data applications(such as Spark Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static volatile Boolean vector; 
+ 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    if (supportVector()) {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
  else  
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    } 
+  } 
+ 
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / 8; 
+ 
+    // register of avx512 are 512 bits, and can load up to 64 bytes 
 
Review Comment: 
   Can we make 64 bytes to be an input parameter? My intention is not to fix it so we can support other instruction sets as well. In my experience, sometimes AVX2 outperforms AVX512 in certain workloads, especially for bitpacking. 
 
 
 
########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,132 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * This is a utils class which is used for big data applications(such as Spark Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static volatile Boolean vector; 
+ 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    if (supportVector()) {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
  else  
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    } 
+  } 
+ 
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / 8; 
+ 
+    // register of avx512 are 512 bits, and can load up to 64 bytes 
+    int totalByteCountVector = totalByteCount - 64; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) {
+        packerVector.unpackValuesVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      } 
+      // If the remaining bytes size &lt;= 64, the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) {
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      } 
+    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) {
+        packerVector.unpackValuesVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      } 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) {
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      } 
+    } 
+  } 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount) {
+      // values are bit packed 8 at a time, so reading bitWidth will always work
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += 8;
+    } 
+  } 
+ 
+  public static Boolean supportVector() { 
+    if (vector != null) {
+      return vector;
+    } 
+    synchronized (ParquetReadRouter.class) { 
+      if (vector == null) { 
+        synchronized (ParquetReadRouter.class) {
+          vector = avx512Flag();
+        } 
+      } 
+    } 
+    return vector; 
+  } 
+ 
+  private static boolean avx512Flag() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux")) {
+        return false;
+      } 
+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0) {
+            continue;
+          } 
+          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) {
+            return true;
+          } 
+        } 
+      } 
+    } catch (Exception ex) { 
+      LOG.warn("Not getting CPU info error"); 
 
Review Comment: 
   ```suggestion 
         LOG.warn("Failed to gett CPU info"); 
   ``` 
 
 
 
########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,132 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * This is a utils class which is used for big data applications(such as Spark Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static volatile Boolean vector; 
+ 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    if (supportVector()) {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
  else  
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth; 

 Review Comment: 
   Avoid magic numbers like 8 and 64 and declare them as constants. 



 ########## 
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java: 
########## 
@@ -31,6 +31,13 @@ public abstract class BytePacker { 

    private final int bitWidth; 

 +  /** 
+   * unpack the output int values at a time. 

 Review Comment: 
   ```suggestion 
 
	 Number of integer values to be unpacked at a time. 
   ``` 
 




 ########## 
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/Packer.java: 
########## 
@@ -101,6 +121,10 @@ private static Object getStaticField(String className, String fieldName) { 
    */ 
   public abstract BytePacker newBytePacker(int width); 

 +  public BytePacker newBytePackerVector(int width) { 
+    throw new RuntimeException("This function must be implemented by subclasses!"); 

 Review Comment: 
   ```suggestion 
       throw new RuntimeException("newBytePackerVector must be implemented by subclasses!"); 
   ``` 



 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGeneratorVector.java: 
########## 
@@ -0,0 +1,63 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.*; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGeneratorVector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPackingVector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPackingVectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception { 
+    String basePath = args [0] ; 
+    //TODO: Int for Big Endian 

 Review Comment: 
   Would you mind opening the JIRAs to break down the work for better tracking? 



 ########## 
pom.xml: 
########## 
@@ -659,5 +666,74 @@ 
         &lt;/plugins&gt; 
       &lt;/build&gt; 
     &lt;/profile&gt; 
+ 
+    &lt;profile&gt; 
+      &lt;id&gt;java17-target&lt;/id&gt; 
+      &lt;build&gt; 
+        &lt;plugins&gt; 
+          &lt;plugin&gt; 
+            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; 
+            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; 
+            &lt;configuration&gt; 
+              &lt;release&gt;17&lt;/release&gt; 
+              &lt;compilerArgs combine.children="append"&gt; 
+                &lt;compilerArg&gt;${extraJavaVectorTestArgs}&lt;/compilerArg&gt; 
+              &lt;/compilerArgs&gt; 
+            &lt;/configuration&gt; 
+          &lt;/plugin&gt; 
+ 
+          &lt;plugin&gt; 
+            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; 
+            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt; 
+            &lt;configuration&gt; 
+              &lt;argLine&gt;${surefire.argLine} ${extraJavaTestArgs} ${extraJavaVectorTestArgs}&lt;/argLine&gt; 
+              &lt;systemPropertyVariables&gt; 

 Review Comment: 
   Why are these needed? 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681543" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681543_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681543&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681543" class="commentdate_17681543_verbose subText comment-created-date-link"><span class="date user-tz" title="28/Jan/23 08:57"><time class="livestamp" datetime="2023-01-28T08:57:38+0000">28/Jan/23 08:57</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407344417" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407344417</a></p>

<p>   &gt; Sorry for the delay. I have left some comments and the implementation is overall looking good. Thanks @jiangjiguang for your effort!<br>
   &gt; <br>
   &gt; My main concern is the extensibility to support other instruction sets. In addition, it seems to me that the java vector api is still incubating. As I am not a java expert, do we have the risk of unstable API?</p>

<p>   @wgtmac Jatin is a java expert， @jatin-bhateja Can you help give an answer? thanks.</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681543_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681543&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681543" class="commentdate_17681543_concise subText comment-created-date-link"><span class="date user-tz" title="28/Jan/23 08:57"><time class="livestamp" datetime="2023-01-28T08:57:38+0000">28/Jan/23 08:57</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407344417  

    &gt; Sorry for the delay. I have left some comments and the implementation is overall looking good. Thanks @jiangjiguang for your effort! 
   &gt;  
   &gt; My main concern is the extensibility to support other instruction sets. In addition, it seems to me that the java vector api is still incubating. As I am not a java expert, do we have the risk of unstable API? 

    @wgtmac Jatin is a java expert， @jatin-bhateja Can you help give an answer? thanks. 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681550" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681550_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681550&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681550" class="commentdate_17681550_verbose subText comment-created-date-link"><span class="date user-tz" title="28/Jan/23 09:29"><time class="livestamp" datetime="2023-01-28T09:29:05+0000">28/Jan/23 09:29</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089699240" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089699240</a></p>


<p>##########<br>
pom.xml:<br>
##########<br>
@@ -659,5 +666,74 @@<br>
         &lt;/plugins&gt;<br>
       &lt;/build&gt;<br>
     &lt;/profile&gt;<br>
+<br>
+    &lt;profile&gt;<br>
+      &lt;id&gt;java17-target&lt;/id&gt;<br>
+      &lt;build&gt;<br>
+        &lt;plugins&gt;<br>
+          &lt;plugin&gt;<br>
+            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br>
+            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;<br>
+            &lt;configuration&gt;<br>
+              &lt;release&gt;17&lt;/release&gt;<br>
+              &lt;compilerArgs combine.children="append"&gt;<br>
+                &lt;compilerArg&gt;${extraJavaVectorTestArgs}&lt;/compilerArg&gt;<br>
+              &lt;/compilerArgs&gt;<br>
+            &lt;/configuration&gt;<br>
+          &lt;/plugin&gt;<br>
+<br>
+          &lt;plugin&gt;<br>
+            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br>
+            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;<br>
+            &lt;configuration&gt;<br>
+              &lt;argLine&gt;${surefire.argLine} ${extraJavaTestArgs} ${extraJavaVectorTestArgs}&lt;/argLine&gt;<br>
+              &lt;systemPropertyVariables&gt;</p>

<p>Review Comment:<br>
   extraJavaVectorTestArgs is only for Java17 Vector module, I have rename it to extraJavaVectorArgs, and move it to profile vector</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681550_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681550&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681550" class="commentdate_17681550_concise subText comment-created-date-link"><span class="date user-tz" title="28/Jan/23 09:29"><time class="livestamp" datetime="2023-01-28T09:29:05+0000">28/Jan/23 09:29</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089699240  


 ########## 
pom.xml: 
########## 
@@ -659,5 +666,74 @@ 
         &lt;/plugins&gt; 
       &lt;/build&gt; 
     &lt;/profile&gt; 
+ 
+    &lt;profile&gt; 
+      &lt;id&gt;java17-target&lt;/id&gt; 
+      &lt;build&gt; 
+        &lt;plugins&gt; 
+          &lt;plugin&gt; 
+            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; 
+            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; 
+            &lt;configuration&gt; 
+              &lt;release&gt;17&lt;/release&gt; 
+              &lt;compilerArgs combine.children="append"&gt; 
+                &lt;compilerArg&gt;${extraJavaVectorTestArgs}&lt;/compilerArg&gt; 
+              &lt;/compilerArgs&gt; 
+            &lt;/configuration&gt; 
+          &lt;/plugin&gt; 
+ 
+          &lt;plugin&gt; 
+            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; 
+            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt; 
+            &lt;configuration&gt; 
+              &lt;argLine&gt;${surefire.argLine} ${extraJavaTestArgs} ${extraJavaVectorTestArgs}&lt;/argLine&gt; 
+              &lt;systemPropertyVariables&gt; 

 Review Comment: 
   extraJavaVectorTestArgs is only for Java17 Vector module, I have rename it to extraJavaVectorArgs, and move it to profile vector 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681551" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681551_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681551&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681551" class="commentdate_17681551_verbose subText comment-created-date-link"><span class="date user-tz" title="28/Jan/23 09:34"><time class="livestamp" datetime="2023-01-28T09:34:50+0000">28/Jan/23 09:34</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089700107" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089700107</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGeneratorVector.java:<br>
##########<br>
@@ -0,0 +1,63 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.*;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGeneratorVector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPackingVector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPackingVectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception {<br>
+    String basePath = args<span class="error">[0]</span>;<br>
+    //TODO: Int for Big Endian</p>

<p>Review Comment:<br>
   OK, I will create JIRAs to  break down the work.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681551_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681551&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681551" class="commentdate_17681551_concise subText comment-created-date-link"><span class="date user-tz" title="28/Jan/23 09:34"><time class="livestamp" datetime="2023-01-28T09:34:50+0000">28/Jan/23 09:34</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089700107  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGeneratorVector.java: 
########## 
@@ -0,0 +1,63 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.*; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGeneratorVector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPackingVector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPackingVectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception { 
+    String basePath = args [0] ; 
+    //TODO: Int for Big Endian 

 Review Comment: 
   OK, I will create JIRAs to  break down the work. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681552" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681552_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681552&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681552" class="commentdate_17681552_verbose subText comment-created-date-link"><span class="date user-tz" title="28/Jan/23 09:35"><time class="livestamp" datetime="2023-01-28T09:35:45+0000">28/Jan/23 09:35</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089700482" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089700482</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGeneratorVector.java:<br>
##########<br>
@@ -0,0 +1,63 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.*;</p>

<p>Review Comment:<br>
   OK, I will remote it next update</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681552_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681552&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681552" class="commentdate_17681552_concise subText comment-created-date-link"><span class="date user-tz" title="28/Jan/23 09:35"><time class="livestamp" datetime="2023-01-28T09:35:45+0000">28/Jan/23 09:35</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089700482  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGeneratorVector.java: 
########## 
@@ -0,0 +1,63 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.*; 

 Review Comment: 
   OK, I will remote it next update 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681661" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681661_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681661&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681661" class="commentdate_17681661_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 02:40"><time class="livestamp" datetime="2023-01-29T02:40:43+0000">29/Jan/23 02:40</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089852900" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089852900</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGeneratorVector.java:<br>
##########<br>
@@ -0,0 +1,63 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.*;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGeneratorVector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPackingVector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPackingVectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception {<br>
+    String basePath = args<span class="error">[0]</span>;<br>
+    //TODO: Int for Big Endian</p>

<p>Review Comment:<br>
   I have created 3 sub-tasks(including Int for Big Endian、Long for Big Endian、Long for Little Endian) with <a href="https://issues.apache.org/jira/browse/PARQUET-2159" class="external-link" rel="nofollow">https://issues.apache.org/jira/browse/PARQUET-2159</a></p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681661_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681661&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681661" class="commentdate_17681661_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 02:40"><time class="livestamp" datetime="2023-01-29T02:40:43+0000">29/Jan/23 02:40</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089852900  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGeneratorVector.java: 
########## 
@@ -0,0 +1,63 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.*; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGeneratorVector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPackingVector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPackingVectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception { 
+    String basePath = args [0] ; 
+    //TODO: Int for Big Endian 

 Review Comment: 
   I have created 3 sub-tasks(including Int for Big Endian、Long for Big Endian、Long for Little Endian) with  https://issues.apache.org/jira/browse/PARQUET-2159  


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681667" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681667_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681667&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681667" class="commentdate_17681667_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 03:33"><time class="livestamp" datetime="2023-01-29T03:33:37+0000">29/Jan/23 03:33</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089859139" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089859139</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,132 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * This is a utils class which is used for big data applications(such as Spark Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static volatile Boolean vector;<br>
+<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    if (supportVector()) </p>
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    } else {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
<p>+  }<br>
+<br>
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / 8;<br>
+<br>
+    // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+    int totalByteCountVector = totalByteCount - 64;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= 64, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      // values are bit packed 8 at a time, so reading bitWidth will always work
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += 8;
+    }
<p>+  }<br>
+<br>
+  public static Boolean supportVector() {<br>
+    if (vector != null) </p>
{
+      return vector;
+    }
<p>+    synchronized (ParquetReadRouter.class) {<br>
+      if (vector == null) {<br>
+        synchronized (ParquetReadRouter.class) {<br>
+          vector = avx512Flag();</p>

<p>Review Comment:<br>
   About "the java vector api is agnostic to specific instruction set." @jatin-bhateja Can you help with details ? thanks.<br>
   @wgtmac The PR using only avx512 vector to optimize parquet decode. so I have renamed related classes and methods to to be more extensible for other instruction sets(such as AVX2)</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681667_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681667&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681667" class="commentdate_17681667_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 03:33"><time class="livestamp" datetime="2023-01-29T03:33:37+0000">29/Jan/23 03:33</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089859139  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,132 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * This is a utils class which is used for big data applications(such as Spark Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static volatile Boolean vector; 
+ 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    if (supportVector())  
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    } else {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
 +  } 
+ 
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / 8; 
+ 
+    // register of avx512 are 512 bits, and can load up to 64 bytes 
+    int totalByteCountVector = totalByteCount - 64; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;= 64, the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      // values are bit packed 8 at a time, so reading bitWidth will always work
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += 8;
+    }
 +  } 
+ 
+  public static Boolean supportVector() { 
+    if (vector != null)  
{
+      return vector;
+    }
 +    synchronized (ParquetReadRouter.class) { 
+      if (vector == null) { 
+        synchronized (ParquetReadRouter.class) { 
+          vector = avx512Flag(); 

 Review Comment: 
   About "the java vector api is agnostic to specific instruction set." @jatin-bhateja Can you help with details ? thanks. 
   @wgtmac The PR using only avx512 vector to optimize parquet decode. so I have renamed related classes and methods to to be more extensible for other instruction sets(such as AVX2) 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681669" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681669_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681669&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681669" class="commentdate_17681669_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 03:35"><time class="livestamp" datetime="2023-01-29T03:35:48+0000">29/Jan/23 03:35</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089859296" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089859296</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,132 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * This is a utils class which is used for big data applications(such as Spark Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static volatile Boolean vector;<br>
+<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    if (supportVector()) </p>
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    } else {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
<p>+  }<br>
+<br>
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / 8;<br>
+<br>
+    // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+    int totalByteCountVector = totalByteCount - 64;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= 64, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      // values are bit packed 8 at a time, so reading bitWidth will always work
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += 8;
+    }
<p>+  }<br>
+<br>
+  public static Boolean supportVector() {<br>
+    if (vector != null) </p>
{
+      return vector;
+    }
<p>+    synchronized (ParquetReadRouter.class) {<br>
+      if (vector == null) {<br>
+        synchronized (ParquetReadRouter.class) </p>
{
+          vector = avx512Flag();
+        }
<p>+      }<br>
+    }<br>
+    return vector;<br>
+  }<br>
+<br>
+  private static boolean avx512Flag() {</p>

<p>Review Comment:<br>
   @wgtmac yes, I have added some comments to guide users how to use this class.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681669_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681669&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681669" class="commentdate_17681669_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 03:35"><time class="livestamp" datetime="2023-01-29T03:35:48+0000">29/Jan/23 03:35</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089859296  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,132 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * This is a utils class which is used for big data applications(such as Spark Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static volatile Boolean vector; 
+ 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    if (supportVector())  
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    } else {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
 +  } 
+ 
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / 8; 
+ 
+    // register of avx512 are 512 bits, and can load up to 64 bytes 
+    int totalByteCountVector = totalByteCount - 64; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;= 64, the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += 8)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      // values are bit packed 8 at a time, so reading bitWidth will always work
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += 8;
+    }
 +  } 
+ 
+  public static Boolean supportVector() { 
+    if (vector != null)  
{
+      return vector;
+    }
 +    synchronized (ParquetReadRouter.class) { 
+      if (vector == null) { 
+        synchronized (ParquetReadRouter.class)  
{
+          vector = avx512Flag();
+        }
 +      } 
+    } 
+    return vector; 
+  } 
+ 
+  private static boolean avx512Flag() { 

 Review Comment: 
   @wgtmac yes, I have added some comments to guide users how to use this class. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681670" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681670_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681670&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681670" class="commentdate_17681670_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 03:38"><time class="livestamp" datetime="2023-01-29T03:38:38+0000">29/Jan/23 03:38</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089859452" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089859452</a></p>


<p>##########<br>
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java:<br>
##########<br>
@@ -105,4 +116,26 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu<br>
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos) </p>
{
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   }
<p>+<br>
+  /**<br>
+   * unpack bitWidth bytes from input at inPos into </p>
{unpackCount}
<p> values in output at outPos using Java Vector API.<br>
+   * @param input the input bytes<br>
+   * @param inPos where to read from in input<br>
+   * @param output the output values<br>
+   * @param outPos where to write to in output<br>
+   */<br>
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) {</p>

<p>Review Comment:<br>
   @wgtmac I have reviewed the Java Vector Module name norm, and renamed related classed and methods, unpackValuesUsingVector looks good, so I used it.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681670_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681670&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681670" class="commentdate_17681670_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 03:38"><time class="livestamp" datetime="2023-01-29T03:38:38+0000">29/Jan/23 03:38</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089859452  


 ########## 
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java: 
########## 
@@ -105,4 +116,26 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu 
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos)  
{
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   }
 + 
+  /** 
+   * unpack bitWidth bytes from input at inPos into  
{unpackCount}
  values in output at outPos using Java Vector API. 
+   * @param input the input bytes 
+   * @param inPos where to read from in input 
+   * @param output the output values 
+   * @param outPos where to write to in output 
+   */ 
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) { 

 Review Comment: 
   @wgtmac I have reviewed the Java Vector Module name norm, and renamed related classed and methods, unpackValuesUsingVector looks good, so I used it. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681672" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681672_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681672&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681672" class="commentdate_17681672_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 03:57"><time class="livestamp" datetime="2023-01-29T03:57:15+0000">29/Jan/23 03:57</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089861017" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089861017</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,132 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * This is a utils class which is used for big data applications(such as Spark Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static volatile Boolean vector;<br>
+<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    if (supportVector()) </p>
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    } else {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
<p>+  }<br>
+<br>
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / 8;<br>
+<br>
+    // register of avx512 are 512 bits, and can load up to 64 bytes</p>

<p>Review Comment:<br>
   @wgtmac It is very difficult to make 64 bytes to be an input parameter.  The PR using only AVX512 Vector to optimize parquet decode. As you said, sometimes AVX2 outperforms better, but we should know the specific workloads for AVX2 so that we can make a choice to use AVX2 or AVX512. </p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681672_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681672&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681672" class="commentdate_17681672_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 03:57"><time class="livestamp" datetime="2023-01-29T03:57:15+0000">29/Jan/23 03:57</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089861017  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,132 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * This is a utils class which is used for big data applications(such as Spark Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static volatile Boolean vector; 
+ 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    if (supportVector())  
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    } else {+      readBatchVector(bitWidth, in, currentCount, currentBuffer);+    }
 +  } 
+ 
+  public static void readBatchVector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / 8 * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / 8; 
+ 
+    // register of avx512 are 512 bits, and can load up to 64 bytes 

 Review Comment: 
   @wgtmac It is very difficult to make 64 bytes to be an input parameter.  The PR using only AVX512 Vector to optimize parquet decode. As you said, sometimes AVX2 outperforms better, but we should know the specific workloads for AVX2 so that we can make a choice to use AVX2 or AVX512.  


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681674" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681674_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681674&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681674" class="commentdate_17681674_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 03:58"><time class="livestamp" datetime="2023-01-29T03:58:55+0000">29/Jan/23 03:58</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089861113" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089861113</a></p>


<p>##########<br>
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java:<br>
##########<br>
@@ -105,4 +116,26 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu<br>
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos) </p>
{
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   }
<p>+<br>
+  /**<br>
+   * unpack bitWidth bytes from input at inPos into </p>
{unpackCount} values in output at outPos using Java Vector API.<br>
+   * @param input the input bytes<br>
+   * @param inPos where to read from in input<br>
+   * @param output the output values<br>
+   * @param outPos where to write to in output<br>
+   */<br>
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) {
+
+  }<br>
+<br>
+  /**<br>
+   * unpack bitWidth bytes from input at inPos into {unpackCount}
<p> values in output at outPos using Java Vector API.<br>
+   * @param input the input bytes<br>
+   * @param inPos where to read from in input<br>
+   * @param output the output values<br>
+   * @param outPos where to write to in output<br>
+   */<br>
+  public void unpackValuesVector(final ByteBuffer input, final int inPos, final int[] output, final int outPos) {<br>
+</p>

<p>Review Comment:<br>
   @wgtmac I don't understand it, not throw exception here. Can you you describe in detail ？ thanks.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681674_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681674&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681674" class="commentdate_17681674_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 03:58"><time class="livestamp" datetime="2023-01-29T03:58:55+0000">29/Jan/23 03:58</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089861113  


 ########## 
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java: 
########## 
@@ -105,4 +116,26 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu 
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos)  
{
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   }
 + 
+  /** 
+   * unpack bitWidth bytes from input at inPos into  
{unpackCount} values in output at outPos using Java Vector API. 
+   * @param input the input bytes 
+   * @param inPos where to read from in input 
+   * @param output the output values 
+   * @param outPos where to write to in output 
+   */ 
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) {
+
+  } 
+ 
+  /** 
+   * unpack bitWidth bytes from input at inPos into {unpackCount}
  values in output at outPos using Java Vector API. 
+   * @param input the input bytes 
+   * @param inPos where to read from in input 
+   * @param output the output values 
+   * @param outPos where to write to in output 
+   */ 
+  public void unpackValuesVector(final ByteBuffer input, final int inPos, final int[] output, final int outPos) { 
+ 

 Review Comment: 
   @wgtmac I don't understand it, not throw exception here. Can you you describe in detail ？ thanks. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681675" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681675_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681675&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681675" class="commentdate_17681675_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 04:00"><time class="livestamp" datetime="2023-01-29T04:00:49+0000">29/Jan/23 04:00</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407554736" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407554736</a></p>

<p>   @wgtmac PTAK again  thanks.</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681675_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681675&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681675" class="commentdate_17681675_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 04:00"><time class="livestamp" datetime="2023-01-29T04:00:49+0000">29/Jan/23 04:00</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407554736  

    @wgtmac PTAK again  thanks. 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681684" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681684_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681684&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681684" class="commentdate_17681684_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 05:55"><time class="livestamp" datetime="2023-01-29T05:55:28+0000">29/Jan/23 05:55</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089859464" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089859464</a></p>


<p>##########<br>
parquet-benchmarks/src/main/java/org/apache/parquet/benchmarks/ByteBitPackingVectorBenchmarks.java:<br>
##########<br>
@@ -0,0 +1,83 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.benchmarks;<br>
+<br>
+import org.apache.parquet.column.values.bitpacking.BytePacker;<br>
+import org.apache.parquet.column.values.bitpacking.Packer;<br>
+import org.openjdk.jmh.annotations.*;</p>

<p>Review Comment:<br>
   Please fix the import.</p>



<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,141 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_512VECTOR = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int VALUES_PER_PACKED = 8;</p>

<p>Review Comment:<br>
   ```suggestion<br>
     private static final int NUM_VALUES_TO_PACK = 8;<br>
   ```</p>



<p>##########<br>
parquet-column/src/test/java/org/apache/parquet/column/values/bitpacking/TestParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,54 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.junit.Test;<br>
+<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+<br>
+import static org.junit.Assert.assertArrayEquals;<br>
+<br>
+public class TestParquetReadRouter {<br>
+<br>
+  /**<br>
+   * The range of bitWidth is 1 ~ 32, change it directly if test other bitWidth.<br>
+   */<br>
+  private static final int bitWidth = 7;</p>

<p>Review Comment:<br>
   It would be good to add cases of different bit widths.</p>



<p>##########<br>
parquet-generator/src/main/resources/ByteBitPacking512VectorLE:<br>
##########<br>
@@ -0,0 +1,3095 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.ByteVector;<br>
+import jdk.incubator.vector.IntVector;<br>
+import jdk.incubator.vector.LongVector;<br>
+import jdk.incubator.vector.ShortVector;<br>
+import jdk.incubator.vector.Vector;<br>
+import jdk.incubator.vector.VectorMask;<br>
+import jdk.incubator.vector.VectorOperators;<br>
+import jdk.incubator.vector.VectorShuffle;<br>
+import jdk.incubator.vector.VectorSpecies;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ * This is an auto-generated source file and should not edit it directly.<br>
+ */<br>
+public abstract class ByteBitPacking512VectorLE {</p>

<p>Review Comment:<br>
   Should we remove this generated file from git? I assume it will be automatically created at maven build time, like other generators do.</p>



<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,141 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_512VECTOR = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int VALUES_PER_PACKED = 8;<br>
+<br>
+  private static volatile Boolean vector;</p>

<p>Review Comment:<br>
   Does it make sense to use an enum instead of boolean to represent longest available vector support? Something like this:<br>
   ```<br>
   enum VectorSupport </p>
{
     NONE,
     VECTOR_128,
     VECTOR_256,
     VECTOR_512
   }
<p>   ```<br>
   This makes it more extensible.</p>



<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,141 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_512VECTOR = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int VALUES_PER_PACKED = 8;<br>
+<br>
+  private static volatile Boolean vector;<br>
+<br>
+  // The is just a logical method, most call readBatchUsing512Vector or readBatch directly given that you should know your computer system</p>

<p>Review Comment:<br>
   ```suggestion<br>
     // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
   ```</p>



<p>##########<br>
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java:<br>
##########<br>
@@ -105,4 +116,26 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu<br>
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos) </p>
{
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   }
<p>+<br>
+  /**<br>
+   * unpack bitWidth bytes from input at inPos into </p>
{unpackCount} values in output at outPos using Java Vector API.<br>
+   * @param input the input bytes<br>
+   * @param inPos where to read from in input<br>
+   * @param output the output values<br>
+   * @param outPos where to write to in output<br>
+   */<br>
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) {
+
+  }<br>
+<br>
+  /**<br>
+   * unpack bitWidth bytes from input at inPos into {unpackCount}
<p> values in output at outPos using Java Vector API.<br>
+   * @param input the input bytes<br>
+   * @param inPos where to read from in input<br>
+   * @param output the output values<br>
+   * @param outPos where to write to in output<br>
+   */<br>
+  public void unpackValuesVector(final ByteBuffer input, final int inPos, final int[] output, final int outPos) {<br>
+</p>

<p>Review Comment:<br>
   I mean why is it an empty function? Shouldn't it throw an unimplemented exception?</p>



<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,141 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_512VECTOR = 64;</p>

<p>Review Comment:<br>
   ```suggestion<br>
     private static final int BYTES_PER_VECTOR_512 = 64;<br>
   ```</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681684_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681684&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681684" class="commentdate_17681684_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 05:55"><time class="livestamp" datetime="2023-01-29T05:55:28+0000">29/Jan/23 05:55</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089859464  


 ########## 
parquet-benchmarks/src/main/java/org/apache/parquet/benchmarks/ByteBitPackingVectorBenchmarks.java: 
########## 
@@ -0,0 +1,83 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.benchmarks; 
+ 
+import org.apache.parquet.column.values.bitpacking.BytePacker; 
+import org.apache.parquet.column.values.bitpacking.Packer; 
+import org.openjdk.jmh.annotations.*; 

 Review Comment: 
   Please fix the import. 



 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,141 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_512VECTOR = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int VALUES_PER_PACKED = 8; 

 Review Comment: 
   ```suggestion 
     private static final int NUM_VALUES_TO_PACK = 8; 
   ``` 



 ########## 
parquet-column/src/test/java/org/apache/parquet/column/values/bitpacking/TestParquetReadRouter.java: 
########## 
@@ -0,0 +1,54 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.junit.Test; 
+ 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+ 
+import static org.junit.Assert.assertArrayEquals; 
+ 
+public class TestParquetReadRouter { 
+ 
+  /** 
+   * The range of bitWidth is 1 ~ 32, change it directly if test other bitWidth. 
+   */ 
+  private static final int bitWidth = 7; 

 Review Comment: 
   It would be good to add cases of different bit widths. 



 ########## 
parquet-generator/src/main/resources/ByteBitPacking512VectorLE: 
########## 
@@ -0,0 +1,3095 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.ByteVector; 
+import jdk.incubator.vector.IntVector; 
+import jdk.incubator.vector.LongVector; 
+import jdk.incubator.vector.ShortVector; 
+import jdk.incubator.vector.Vector; 
+import jdk.incubator.vector.VectorMask; 
+import jdk.incubator.vector.VectorOperators; 
+import jdk.incubator.vector.VectorShuffle; 
+import jdk.incubator.vector.VectorSpecies; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * This is an auto-generated source file and should not edit it directly. 
+ */ 
+public abstract class ByteBitPacking512VectorLE { 

 Review Comment: 
   Should we remove this generated file from git? I assume it will be automatically created at maven build time, like other generators do. 



 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,141 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_512VECTOR = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int VALUES_PER_PACKED = 8; 
+ 
+  private static volatile Boolean vector; 

 Review Comment: 
   Does it make sense to use an enum instead of boolean to represent longest available vector support? Something like this: 
   ``` 
   enum VectorSupport  
{
     NONE,
     VECTOR_128,
     VECTOR_256,
     VECTOR_512
   }
    ``` 
   This makes it more extensible. 



 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,141 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_512VECTOR = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int VALUES_PER_PACKED = 8; 
+ 
+  private static volatile Boolean vector; 
+ 
+  // The is just a logical method, most call readBatchUsing512Vector or readBatch directly given that you should know your computer system 

 Review Comment: 
   ```suggestion 
     // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
   ``` 



 ########## 
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/BytePacker.java: 
########## 
@@ -105,4 +116,26 @@ public void unpack8Values(final byte[] input, final int inPos, final int[] outpu 
   public void unpack32Values(byte[] input, int inPos, int[] output, int outPos)  
{
     unpack32Values(ByteBuffer.wrap(input), inPos, output, outPos);
   }
 + 
+  /** 
+   * unpack bitWidth bytes from input at inPos into  
{unpackCount} values in output at outPos using Java Vector API. 
+   * @param input the input bytes 
+   * @param inPos where to read from in input 
+   * @param output the output values 
+   * @param outPos where to write to in output 
+   */ 
+  public void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) {
+
+  } 
+ 
+  /** 
+   * unpack bitWidth bytes from input at inPos into {unpackCount}
  values in output at outPos using Java Vector API. 
+   * @param input the input bytes 
+   * @param inPos where to read from in input 
+   * @param output the output values 
+   * @param outPos where to write to in output 
+   */ 
+  public void unpackValuesVector(final ByteBuffer input, final int inPos, final int[] output, final int outPos) { 
+ 

 Review Comment: 
   I mean why is it an empty function? Shouldn't it throw an unimplemented exception? 



 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,141 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_512VECTOR = 64; 

 Review Comment: 
   ```suggestion 
     private static final int BYTES_PER_VECTOR_512 = 64; 
   ``` 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681692" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681692_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681692&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681692" class="commentdate_17681692_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 07:29"><time class="livestamp" datetime="2023-01-29T07:29:44+0000">29/Jan/23 07:29</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089885328" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089885328</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,141 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_512VECTOR = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int VALUES_PER_PACKED = 8;<br>
+<br>
+  private static volatile Boolean vector;</p>

<p>Review Comment:<br>
   Good idea!</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681692_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681692&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681692" class="commentdate_17681692_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 07:29"><time class="livestamp" datetime="2023-01-29T07:29:44+0000">29/Jan/23 07:29</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089885328  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,141 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_512VECTOR = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int VALUES_PER_PACKED = 8; 
+ 
+  private static volatile Boolean vector; 

 Review Comment: 
   Good idea! 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681694" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681694_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681694&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681694" class="commentdate_17681694_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 08:05"><time class="livestamp" datetime="2023-01-29T08:05:21+0000">29/Jan/23 08:05</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089893184" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089893184</a></p>


<p>##########<br>
parquet-column/src/test/java/org/apache/parquet/column/values/bitpacking/TestParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,54 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.junit.Test;<br>
+<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+<br>
+import static org.junit.Assert.assertArrayEquals;<br>
+<br>
+public class TestParquetReadRouter {<br>
+<br>
+  /**<br>
+   * The range of bitWidth is 1 ~ 32, change it directly if test other bitWidth.<br>
+   */<br>
+  private static final int bitWidth = 7;</p>

<p>Review Comment:<br>
   Good idea!</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681694_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681694&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681694" class="commentdate_17681694_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 08:05"><time class="livestamp" datetime="2023-01-29T08:05:21+0000">29/Jan/23 08:05</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089893184  


 ########## 
parquet-column/src/test/java/org/apache/parquet/column/values/bitpacking/TestParquetReadRouter.java: 
########## 
@@ -0,0 +1,54 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.junit.Test; 
+ 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+ 
+import static org.junit.Assert.assertArrayEquals; 
+ 
+public class TestParquetReadRouter { 
+ 
+  /** 
+   * The range of bitWidth is 1 ~ 32, change it directly if test other bitWidth. 
+   */ 
+  private static final int bitWidth = 7; 

 Review Comment: 
   Good idea! 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681699" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681699_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681699&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681699" class="commentdate_17681699_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 08:54"><time class="livestamp" datetime="2023-01-29T08:54:05+0000">29/Jan/23 08:54</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089903619" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089903619</a></p>


<p>##########<br>
parquet-generator/src/main/resources/ByteBitPacking512VectorLE:<br>
##########<br>
@@ -0,0 +1,3095 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.ByteVector;<br>
+import jdk.incubator.vector.IntVector;<br>
+import jdk.incubator.vector.LongVector;<br>
+import jdk.incubator.vector.ShortVector;<br>
+import jdk.incubator.vector.Vector;<br>
+import jdk.incubator.vector.VectorMask;<br>
+import jdk.incubator.vector.VectorOperators;<br>
+import jdk.incubator.vector.VectorShuffle;<br>
+import jdk.incubator.vector.VectorSpecies;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ * This is an auto-generated source file and should not edit it directly.<br>
+ */<br>
+public abstract class ByteBitPacking512VectorLE {</p>

<p>Review Comment:<br>
       This is a good question! <br>
       Why I put the generated file in the resources directory? Due to use Java Vector, it needs rearrange/shuffle/lanewise operations, so it is difficult to create automatically ByteBitPacking512VectorLE like other generators do. On the contrary,  It is relatively simple to code directly instead of generating.<br>
       I think more important is the finished code than how that code was generated. <br>
       In fact, I've done part of the work to generate ByteBitPacking512VectorLE like other generators do. But is the generating valuable if it if it increases the workload ?<br>
   @wgtmac Do you think it is necessary to generate ByteBitPacking512VectorLE like other generators do ?  thanks.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681699_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681699&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681699" class="commentdate_17681699_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 08:54"><time class="livestamp" datetime="2023-01-29T08:54:05+0000">29/Jan/23 08:54</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089903619  


 ########## 
parquet-generator/src/main/resources/ByteBitPacking512VectorLE: 
########## 
@@ -0,0 +1,3095 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.ByteVector; 
+import jdk.incubator.vector.IntVector; 
+import jdk.incubator.vector.LongVector; 
+import jdk.incubator.vector.ShortVector; 
+import jdk.incubator.vector.Vector; 
+import jdk.incubator.vector.VectorMask; 
+import jdk.incubator.vector.VectorOperators; 
+import jdk.incubator.vector.VectorShuffle; 
+import jdk.incubator.vector.VectorSpecies; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * This is an auto-generated source file and should not edit it directly. 
+ */ 
+public abstract class ByteBitPacking512VectorLE { 

 Review Comment: 
       This is a good question!  
       Why I put the generated file in the resources directory? Due to use Java Vector, it needs rearrange/shuffle/lanewise operations, so it is difficult to create automatically ByteBitPacking512VectorLE like other generators do. On the contrary,  It is relatively simple to code directly instead of generating. 
       I think more important is the finished code than how that code was generated.  
       In fact, I've done part of the work to generate ByteBitPacking512VectorLE like other generators do. But is the generating valuable if it if it increases the workload ? 
   @wgtmac Do you think it is necessary to generate ByteBitPacking512VectorLE like other generators do ?  thanks. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681700" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681700_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681700&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681700" class="commentdate_17681700_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 08:56"><time class="livestamp" datetime="2023-01-29T08:56:49+0000">29/Jan/23 08:56</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407602919" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407602919</a></p>

<p>   @wgtmac PTAK again</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681700_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681700&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681700" class="commentdate_17681700_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 08:56"><time class="livestamp" datetime="2023-01-29T08:56:49+0000">29/Jan/23 08:56</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407602919  

    @wgtmac PTAK again 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681701" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681701_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681701&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681701" class="commentdate_17681701_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 09:04"><time class="livestamp" datetime="2023-01-29T09:04:55+0000">29/Jan/23 09:04</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089905196" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089905196</a></p>


<p>##########<br>
parquet-generator/src/main/resources/ByteBitPacking512VectorLE:<br>
##########<br>
@@ -0,0 +1,3095 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.ByteVector;<br>
+import jdk.incubator.vector.IntVector;<br>
+import jdk.incubator.vector.LongVector;<br>
+import jdk.incubator.vector.ShortVector;<br>
+import jdk.incubator.vector.Vector;<br>
+import jdk.incubator.vector.VectorMask;<br>
+import jdk.incubator.vector.VectorOperators;<br>
+import jdk.incubator.vector.VectorShuffle;<br>
+import jdk.incubator.vector.VectorSpecies;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ * This is an auto-generated source file and should not edit it directly.<br>
+ */<br>
+public abstract class ByteBitPacking512VectorLE {</p>

<p>Review Comment:<br>
   OK, I got your point now. Thanks!</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681701_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681701&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681701" class="commentdate_17681701_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 09:04"><time class="livestamp" datetime="2023-01-29T09:04:55+0000">29/Jan/23 09:04</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089905196  


 ########## 
parquet-generator/src/main/resources/ByteBitPacking512VectorLE: 
########## 
@@ -0,0 +1,3095 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.ByteVector; 
+import jdk.incubator.vector.IntVector; 
+import jdk.incubator.vector.LongVector; 
+import jdk.incubator.vector.ShortVector; 
+import jdk.incubator.vector.Vector; 
+import jdk.incubator.vector.VectorMask; 
+import jdk.incubator.vector.VectorOperators; 
+import jdk.incubator.vector.VectorShuffle; 
+import jdk.incubator.vector.VectorSpecies; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * This is an auto-generated source file and should not edit it directly. 
+ */ 
+public abstract class ByteBitPacking512VectorLE { 

 Review Comment: 
   OK, I got your point now. Thanks! 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681702" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681702_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681702&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681702" class="commentdate_17681702_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 09:06"><time class="livestamp" datetime="2023-01-29T09:06:55+0000">29/Jan/23 09:06</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407605213" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407605213</a></p>

<p>   &gt; @wgtmac PTAK again</p>

<p>   Generally this patch looks good to me now. Thanks @jiangjiguang for working on it!</p>

<p>   Could you approve the workflow and take another pass? @gszadovszky @shangxinli @ggershinsky </p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681702_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681702&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681702" class="commentdate_17681702_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 09:06"><time class="livestamp" datetime="2023-01-29T09:06:55+0000">29/Jan/23 09:06</time></span></a>                    wgtmac commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1407605213  

    &gt; @wgtmac PTAK again 

    Generally this patch looks good to me now. Thanks @jiangjiguang for working on it! 

    Could you approve the workflow and take another pass? @gszadovszky @shangxinli @ggershinsky  

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681703" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681703_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681703&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681703" class="commentdate_17681703_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 09:07"><time class="livestamp" datetime="2023-01-29T09:07:20+0000">29/Jan/23 09:07</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089903619" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089903619</a></p>


<p>##########<br>
parquet-generator/src/main/resources/ByteBitPacking512VectorLE:<br>
##########<br>
@@ -0,0 +1,3095 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.ByteVector;<br>
+import jdk.incubator.vector.IntVector;<br>
+import jdk.incubator.vector.LongVector;<br>
+import jdk.incubator.vector.ShortVector;<br>
+import jdk.incubator.vector.Vector;<br>
+import jdk.incubator.vector.VectorMask;<br>
+import jdk.incubator.vector.VectorOperators;<br>
+import jdk.incubator.vector.VectorShuffle;<br>
+import jdk.incubator.vector.VectorSpecies;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ * This is an auto-generated source file and should not edit it directly.<br>
+ */<br>
+public abstract class ByteBitPacking512VectorLE {</p>

<p>Review Comment:<br>
       This is a good question! <br>
       Why I put the generated file in the resources directory? Due to use Java Vector, it needs rearrange/shuffle/lanewise operations, so it is difficult to create automatically ByteBitPacking512VectorLE like other generators do. On the contrary,  It is relatively simple to code directly instead of generating.<br>
       I think more important is the finished code than how that code was generated. <br>
       In fact, I've done part of the work to generate ByteBitPacking512VectorLE like other generators do. But is the generating valuable it if it increases the workload ?<br>
   @wgtmac Do you think it is necessary to generate ByteBitPacking512VectorLE like other generators do ?  thanks.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681703_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681703&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681703" class="commentdate_17681703_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 09:07"><time class="livestamp" datetime="2023-01-29T09:07:20+0000">29/Jan/23 09:07</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089903619  


 ########## 
parquet-generator/src/main/resources/ByteBitPacking512VectorLE: 
########## 
@@ -0,0 +1,3095 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.ByteVector; 
+import jdk.incubator.vector.IntVector; 
+import jdk.incubator.vector.LongVector; 
+import jdk.incubator.vector.ShortVector; 
+import jdk.incubator.vector.Vector; 
+import jdk.incubator.vector.VectorMask; 
+import jdk.incubator.vector.VectorOperators; 
+import jdk.incubator.vector.VectorShuffle; 
+import jdk.incubator.vector.VectorSpecies; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * This is an auto-generated source file and should not edit it directly. 
+ */ 
+public abstract class ByteBitPacking512VectorLE { 

 Review Comment: 
       This is a good question!  
       Why I put the generated file in the resources directory? Due to use Java Vector, it needs rearrange/shuffle/lanewise operations, so it is difficult to create automatically ByteBitPacking512VectorLE like other generators do. On the contrary,  It is relatively simple to code directly instead of generating. 
       I think more important is the finished code than how that code was generated.  
       In fact, I've done part of the work to generate ByteBitPacking512VectorLE like other generators do. But is the generating valuable it if it increases the workload ? 
   @wgtmac Do you think it is necessary to generate ByteBitPacking512VectorLE like other generators do ?  thanks. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681704" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681704_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681704&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681704" class="commentdate_17681704_verbose subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 09:09"><time class="livestamp" datetime="2023-01-29T09:09:01+0000">29/Jan/23 09:09</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1089903619" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1089903619</a></p>


<p>##########<br>
parquet-generator/src/main/resources/ByteBitPacking512VectorLE:<br>
##########<br>
@@ -0,0 +1,3095 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.ByteVector;<br>
+import jdk.incubator.vector.IntVector;<br>
+import jdk.incubator.vector.LongVector;<br>
+import jdk.incubator.vector.ShortVector;<br>
+import jdk.incubator.vector.Vector;<br>
+import jdk.incubator.vector.VectorMask;<br>
+import jdk.incubator.vector.VectorOperators;<br>
+import jdk.incubator.vector.VectorShuffle;<br>
+import jdk.incubator.vector.VectorSpecies;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ * This is an auto-generated source file and should not edit it directly.<br>
+ */<br>
+public abstract class ByteBitPacking512VectorLE {</p>

<p>Review Comment:<br>
       This is a good question! <br>
       Why I put the generated file in the resources directory? Due to use Java Vector, it needs rearrange/shuffle/lanewise operations, so it is difficult to create automatically ByteBitPacking512VectorLE like other generators do. On the contrary,  It is relatively simple to code directly instead of generating.<br>
       I think more important is the finished code than how that code was generated. <br>
       In fact, I've done part of the work to generate ByteBitPacking512VectorLE like other generators do. But is the generating valuable if it increases the workload ?<br>
   @wgtmac Do you think it is necessary to generate ByteBitPacking512VectorLE like other generators do ?  thanks.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681704_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681704&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681704" class="commentdate_17681704_concise subText comment-created-date-link"><span class="date user-tz" title="29/Jan/23 09:09"><time class="livestamp" datetime="2023-01-29T09:09:01+0000">29/Jan/23 09:09</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1089903619  


 ########## 
parquet-generator/src/main/resources/ByteBitPacking512VectorLE: 
########## 
@@ -0,0 +1,3095 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.ByteVector; 
+import jdk.incubator.vector.IntVector; 
+import jdk.incubator.vector.LongVector; 
+import jdk.incubator.vector.ShortVector; 
+import jdk.incubator.vector.Vector; 
+import jdk.incubator.vector.VectorMask; 
+import jdk.incubator.vector.VectorOperators; 
+import jdk.incubator.vector.VectorShuffle; 
+import jdk.incubator.vector.VectorSpecies; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * This is an auto-generated source file and should not edit it directly. 
+ */ 
+public abstract class ByteBitPacking512VectorLE { 

 Review Comment: 
       This is a good question!  
       Why I put the generated file in the resources directory? Due to use Java Vector, it needs rearrange/shuffle/lanewise operations, so it is difficult to create automatically ByteBitPacking512VectorLE like other generators do. On the contrary,  It is relatively simple to code directly instead of generating. 
       I think more important is the finished code than how that code was generated.  
       In fact, I've done part of the work to generate ByteBitPacking512VectorLE like other generators do. But is the generating valuable if it increases the workload ? 
   @wgtmac Do you think it is necessary to generate ByteBitPacking512VectorLE like other generators do ?  thanks. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17681958" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681958_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681958&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681958" class="commentdate_17681958_verbose subText comment-created-date-link"><span class="date user-tz" title="30/Jan/23 08:45"><time class="livestamp" datetime="2023-01-30T08:45:19+0000">30/Jan/23 08:45</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jatin-bhateja commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1408198456" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1408198456</a></p>

<p>   &gt; &gt; Sorry for the delay. I have left some comments and the implementation is overall looking good. Thanks @jiangjiguang for your effort!<br>
   &gt; &gt; My main concern is the extensibility to support other instruction sets. In addition, it seems to me that the java vector api is still incubating. As I am not a java expert, do we have the risk of unstable API?<br>
   &gt; <br>
   &gt; @wgtmac Jatin is a java expert， @jatin-bhateja Can you help give an answer? thanks.</p>

<p>   Hi @wgtmac , our patch vectorizes unpacking algorithm for various decode bit sizes, entire new functionality is exposed through a plugin interface *<b>ParquetReadRouter</b>*, in order to prevent any performance regressions over other targets we have enabled the new functionality only for X86 targets with valid features, this limitation can be removed over time.</p>

<p>   VectorAPI made its appearance in JDK16 and has been maturing since then with each successive release. I do not have a firm timeline for you at this point on its incubation exit and being exposed as a preview feature.  Intent here is to enable parquet-mr community developers to make use of the plugin in parquet reader and provide us with early feedback, we are also in process of vectorizing packer algorithm.</p>

<p>   Being a large project we plan to do this incrementally, we seek your guidance here in pushing this patch through. </p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17681958_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17681958&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17681958" class="commentdate_17681958_concise subText comment-created-date-link"><span class="date user-tz" title="30/Jan/23 08:45"><time class="livestamp" datetime="2023-01-30T08:45:19+0000">30/Jan/23 08:45</time></span></a>                    jatin-bhateja commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1408198456  

    &gt; &gt; Sorry for the delay. I have left some comments and the implementation is overall looking good. Thanks @jiangjiguang for your effort! 
   &gt; &gt; My main concern is the extensibility to support other instruction sets. In addition, it seems to me that the java vector api is still incubating. As I am not a java expert, do we have the risk of unstable API? 
   &gt;  
   &gt; @wgtmac Jatin is a java expert， @jatin-bhateja Can you help give an answer? thanks. 

    Hi @wgtmac , our patch vectorizes unpacking algorithm for various decode bit sizes, entire new functionality is exposed through a plugin interface * ParquetReadRouter *, in order to prevent any performance regressions over other targets we have enabled the new functionality only for X86 targets with valid features, this limitation can be removed over time. 

    VectorAPI made its appearance in JDK16 and has been maturing since then with each successive release. I do not have a firm timeline for you at this point on its incubation exit and being exposed as a preview feature.  Intent here is to enable parquet-mr community developers to make use of the plugin in parquet reader and provide us with early feedback, we are also in process of vectorizing packer algorithm. 

    Being a large project we plan to do this incrementally, we seek your guidance here in pushing this patch through.  

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17682892" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17682892_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17682892&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17682892" class="commentdate_17682892_verbose subText comment-created-date-link"><span class="date user-tz" title="01/Feb/23 07:26"><time class="livestamp" datetime="2023-02-01T07:26:33+0000">01/Feb/23 07:26</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1092845969" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1092845969</a></p>


<p>##########<br>
parquet-generator/src/main/resources/ByteBitPacking512VectorLE:<br>
##########<br>
@@ -0,0 +1,3095 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.ByteVector;<br>
+import jdk.incubator.vector.IntVector;<br>
+import jdk.incubator.vector.LongVector;<br>
+import jdk.incubator.vector.ShortVector;<br>
+import jdk.incubator.vector.Vector;<br>
+import jdk.incubator.vector.VectorMask;<br>
+import jdk.incubator.vector.VectorOperators;<br>
+import jdk.incubator.vector.VectorShuffle;<br>
+import jdk.incubator.vector.VectorSpecies;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ * This is an auto-generated source file and should not edit it directly.<br>
+ */<br>
+public abstract class ByteBitPacking512VectorLE {</p>

<p>Review Comment:<br>
   Do you have any script to generate the code here? If true, it would be great to commit it as well.</p>



<p>##########<br>
parquet-benchmarks/src/main/java/org/apache/parquet/benchmarks/ByteBitPackingVectorBenchmarks.java:<br>
##########<br>
@@ -0,0 +1,83 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.benchmarks;<br>
+<br>
+import org.apache.parquet.column.values.bitpacking.BytePacker;<br>
+import org.apache.parquet.column.values.bitpacking.Packer;<br>
+import org.openjdk.jmh.annotations.*;<br>
+<br>
+import java.util.concurrent.TimeUnit;<br>
+<br>
+/**<br>
+ * This class uses the java17 vector API, add VM options --add-modules=jdk.incubator.vector<br>
+ */<br>
+<br>
+@State(Scope.Benchmark)<br>
+@BenchmarkMode(Mode.AverageTime)<br>
+@Warmup(iterations = 1, batchSize = 100000)<br>
+@Measurement(iterations = 1, batchSize = 100000)<br>
+@OutputTimeUnit(TimeUnit.MILLISECONDS)<br>
+public class ByteBitPackingVectorBenchmarks {<br>
+<br>
+  /**<br>
+   * The range of bitWidth is 1 ~ 32, change it directly if test other bitWidth.<br>
+   */<br>
+  private static final int bitWidth = 7;<br>
+  private static final int outputValues = 1024;<br>
+  private final byte[] input = new byte<span class="error">[outputValues * bitWidth / 8]</span>;<br>
+  private final int[] output = new int<span class="error">[outputValues]</span>;<br>
+  private final int[] outputVector = new int<span class="error">[outputValues]</span>;<br>
+<br>
+  @Setup(Level.Trial)<br>
+  public void getInputBytes() {<br>
+    for (int i = 0; i &lt; input.length; i++) </p>
{
+      input[i] = (byte) i;
+    }
<p>+  }<br>
+<br>
+  @Benchmark<br>
+  public void testUnpack() {<br>
+    BytePacker bytePacker = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    for (int i = 0, j = 0; i &lt; input.length; i += bitWidth, j += 8) </p>
{
+      bytePacker.unpack8Values(input, i, output, j);
+    }
<p>+  }<br>
+<br>
+  @Benchmark<br>
+  public void testUnpackVector() {<br>
+    BytePacker bytePacker = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker bytePackerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);</p>

<p>Review Comment:<br>
   Could you elaborate more? @jatin-bhateja </p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17682892_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17682892&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17682892" class="commentdate_17682892_concise subText comment-created-date-link"><span class="date user-tz" title="01/Feb/23 07:26"><time class="livestamp" datetime="2023-02-01T07:26:33+0000">01/Feb/23 07:26</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1092845969  


 ########## 
parquet-generator/src/main/resources/ByteBitPacking512VectorLE: 
########## 
@@ -0,0 +1,3095 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.ByteVector; 
+import jdk.incubator.vector.IntVector; 
+import jdk.incubator.vector.LongVector; 
+import jdk.incubator.vector.ShortVector; 
+import jdk.incubator.vector.Vector; 
+import jdk.incubator.vector.VectorMask; 
+import jdk.incubator.vector.VectorOperators; 
+import jdk.incubator.vector.VectorShuffle; 
+import jdk.incubator.vector.VectorSpecies; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * This is an auto-generated source file and should not edit it directly. 
+ */ 
+public abstract class ByteBitPacking512VectorLE { 

 Review Comment: 
   Do you have any script to generate the code here? If true, it would be great to commit it as well. 



 ########## 
parquet-benchmarks/src/main/java/org/apache/parquet/benchmarks/ByteBitPackingVectorBenchmarks.java: 
########## 
@@ -0,0 +1,83 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.benchmarks; 
+ 
+import org.apache.parquet.column.values.bitpacking.BytePacker; 
+import org.apache.parquet.column.values.bitpacking.Packer; 
+import org.openjdk.jmh.annotations.*; 
+ 
+import java.util.concurrent.TimeUnit; 
+ 
+/** 
+ * This class uses the java17 vector API, add VM options --add-modules=jdk.incubator.vector 
+ */ 
+ 
+@State(Scope.Benchmark) 
+@BenchmarkMode(Mode.AverageTime) 
+@Warmup(iterations = 1, batchSize = 100000) 
+@Measurement(iterations = 1, batchSize = 100000) 
+@OutputTimeUnit(TimeUnit.MILLISECONDS) 
+public class ByteBitPackingVectorBenchmarks { 
+ 
+  /** 
+   * The range of bitWidth is 1 ~ 32, change it directly if test other bitWidth. 
+   */ 
+  private static final int bitWidth = 7; 
+  private static final int outputValues = 1024; 
+  private final byte[] input = new byte [outputValues * bitWidth / 8] ; 
+  private final int[] output = new int [outputValues] ; 
+  private final int[] outputVector = new int [outputValues] ; 
+ 
+  @Setup(Level.Trial) 
+  public void getInputBytes() { 
+    for (int i = 0; i &lt; input.length; i++)  
{
+      input[i] = (byte) i;
+    }
 +  } 
+ 
+  @Benchmark 
+  public void testUnpack() { 
+    BytePacker bytePacker = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    for (int i = 0, j = 0; i &lt; input.length; i += bitWidth, j += 8)  
{
+      bytePacker.unpack8Values(input, i, output, j);
+    }
 +  } 
+ 
+  @Benchmark 
+  public void testUnpackVector() { 
+    BytePacker bytePacker = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker bytePackerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 

 Review Comment: 
   Could you elaborate more? @jatin-bhateja  


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17682895" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17682895_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17682895&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17682895" class="commentdate_17682895_verbose subText comment-created-date-link"><span class="date user-tz" title="01/Feb/23 07:29"><time class="livestamp" datetime="2023-02-01T07:29:49+0000">01/Feb/23 07:29</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1411584288" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1411584288</a></p>

<p>   &gt; &gt; &gt; Sorry for the delay. I have left some comments and the implementation is overall looking good. Thanks @jiangjiguang for your effort!<br>
   &gt; &gt; &gt; My main concern is the extensibility to support other instruction sets. In addition, it seems to me that the java vector api is still incubating. As I am not a java expert, do we have the risk of unstable API?<br>
   &gt; &gt; <br>
   &gt; &gt; <br>
   &gt; &gt; @wgtmac Jatin is a java expert， @jatin-bhateja Can you help give an answer? thanks.<br>
   &gt; <br>
   &gt; Hi @wgtmac , our patch vectorizes unpacking algorithm for various decode bit sizes, entire new functionality is exposed through a plugin interface *<b>ParquetReadRouter</b>*, in order to prevent any performance regressions over other targets we have enabled the new functionality only for X86 targets with valid features, this limitation can be removed over time.<br>
   &gt; <br>
   &gt; VectorAPI made its appearance in JDK16 and has been maturing since then with each successive release. I do not have a firm timeline for you at this point on its incubation exit and being exposed as a preview feature. Intent here is to enable parquet-mr community developers to make use of the plugin in parquet reader and provide us with early feedback, we are also in process of vectorizing packer algorithm.<br>
   &gt; <br>
   &gt; Being a large project we plan to do this incrementally, we seek your guidance in pushing this patch through either on master or a separate development branch.</p>

<p>   Thanks for your explanation @jatin-bhateja! </p>

<p>   So when vector API is finalized in the future java release, we may need to change the VM options to enable it accordingly.</p>

<p>   BTW, I may not be able to verify the generated code line by line. Please advice the best practice to test them according to your experience. Thanks @jatin-bhateja  </p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17682895_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17682895&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17682895" class="commentdate_17682895_concise subText comment-created-date-link"><span class="date user-tz" title="01/Feb/23 07:29"><time class="livestamp" datetime="2023-02-01T07:29:49+0000">01/Feb/23 07:29</time></span></a>                    wgtmac commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1411584288  

    &gt; &gt; &gt; Sorry for the delay. I have left some comments and the implementation is overall looking good. Thanks @jiangjiguang for your effort! 
   &gt; &gt; &gt; My main concern is the extensibility to support other instruction sets. In addition, it seems to me that the java vector api is still incubating. As I am not a java expert, do we have the risk of unstable API? 
   &gt; &gt;  
   &gt; &gt;  
   &gt; &gt; @wgtmac Jatin is a java expert， @jatin-bhateja Can you help give an answer? thanks. 
   &gt;  
   &gt; Hi @wgtmac , our patch vectorizes unpacking algorithm for various decode bit sizes, entire new functionality is exposed through a plugin interface * ParquetReadRouter *, in order to prevent any performance regressions over other targets we have enabled the new functionality only for X86 targets with valid features, this limitation can be removed over time. 
   &gt;  
   &gt; VectorAPI made its appearance in JDK16 and has been maturing since then with each successive release. I do not have a firm timeline for you at this point on its incubation exit and being exposed as a preview feature. Intent here is to enable parquet-mr community developers to make use of the plugin in parquet reader and provide us with early feedback, we are also in process of vectorizing packer algorithm. 
   &gt;  
   &gt; Being a large project we plan to do this incrementally, we seek your guidance in pushing this patch through either on master or a separate development branch. 

    Thanks for your explanation @jatin-bhateja!  

    So when vector API is finalized in the future java release, we may need to change the VM options to enable it accordingly. 

    BTW, I may not be able to verify the generated code line by line. Please advice the best practice to test them according to your experience. Thanks @jatin-bhateja   

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17683197" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17683197_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17683197&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17683197" class="commentdate_17683197_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Feb/23 02:32"><time class="livestamp" datetime="2023-02-02T02:32:29+0000">02/Feb/23 02:32</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1413064662" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1413064662</a></p>

<p>   &gt; </p>

<p>   @wgtmac I know your concern: <br>
    1. I will keep the content of the PR updated if needed when java changed.<br>
    2. I have coded a test to verify generated code, org.apache.parquet.column.values.bitpacking.TestByteBitPacking512VectorLE<br>
    3. I have finished the TPC-H integrated Testing with spark, maybe I can write a document to give best practice to test them</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17683197_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17683197&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17683197" class="commentdate_17683197_concise subText comment-created-date-link"><span class="date user-tz" title="02/Feb/23 02:32"><time class="livestamp" datetime="2023-02-02T02:32:29+0000">02/Feb/23 02:32</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1413064662  

    &gt;  

    @wgtmac I know your concern:  
    1. I will keep the content of the PR updated if needed when java changed. 
    2. I have coded a test to verify generated code, org.apache.parquet.column.values.bitpacking.TestByteBitPacking512VectorLE 
    3. I have finished the TPC-H integrated Testing with spark, maybe I can write a document to give best practice to test them 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17683215" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17683215_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17683215&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17683215" class="commentdate_17683215_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Feb/23 03:54"><time class="livestamp" datetime="2023-02-02T03:54:28+0000">02/Feb/23 03:54</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1093985661" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1093985661</a></p>


<p>##########<br>
parquet-generator/src/main/resources/ByteBitPacking512VectorLE:<br>
##########<br>
@@ -0,0 +1,3095 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.ByteVector;<br>
+import jdk.incubator.vector.IntVector;<br>
+import jdk.incubator.vector.LongVector;<br>
+import jdk.incubator.vector.ShortVector;<br>
+import jdk.incubator.vector.Vector;<br>
+import jdk.incubator.vector.VectorMask;<br>
+import jdk.incubator.vector.VectorOperators;<br>
+import jdk.incubator.vector.VectorShuffle;<br>
+import jdk.incubator.vector.VectorSpecies;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ * This is an auto-generated source file and should not edit it directly.<br>
+ */<br>
+public abstract class ByteBitPacking512VectorLE {</p>

<p>Review Comment:<br>
   @wgtmac I have the script, but it generate only the code partly. <br>
   It needs hard work and lots of time to complete the script(I don't think it is necessary). <br>
   In fact, the code is completed mostly by manually.<br>
   Should I commit the script which is partly completed ? </p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17683215_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17683215&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17683215" class="commentdate_17683215_concise subText comment-created-date-link"><span class="date user-tz" title="02/Feb/23 03:54"><time class="livestamp" datetime="2023-02-02T03:54:28+0000">02/Feb/23 03:54</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1093985661  


 ########## 
parquet-generator/src/main/resources/ByteBitPacking512VectorLE: 
########## 
@@ -0,0 +1,3095 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.ByteVector; 
+import jdk.incubator.vector.IntVector; 
+import jdk.incubator.vector.LongVector; 
+import jdk.incubator.vector.ShortVector; 
+import jdk.incubator.vector.Vector; 
+import jdk.incubator.vector.VectorMask; 
+import jdk.incubator.vector.VectorOperators; 
+import jdk.incubator.vector.VectorShuffle; 
+import jdk.incubator.vector.VectorSpecies; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * This is an auto-generated source file and should not edit it directly. 
+ */ 
+public abstract class ByteBitPacking512VectorLE { 

 Review Comment: 
   @wgtmac I have the script, but it generate only the code partly.  
   It needs hard work and lots of time to complete the script(I don't think it is necessary).  
   In fact, the code is completed mostly by manually. 
   Should I commit the script which is partly completed ?  


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17683228" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17683228_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17683228&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17683228" class="commentdate_17683228_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Feb/23 05:29"><time class="livestamp" datetime="2023-02-02T05:29:53+0000">02/Feb/23 05:29</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1094047290" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1094047290</a></p>


<p>##########<br>
parquet-generator/src/main/resources/ByteBitPacking512VectorLE:<br>
##########<br>
@@ -0,0 +1,3095 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.ByteVector;<br>
+import jdk.incubator.vector.IntVector;<br>
+import jdk.incubator.vector.LongVector;<br>
+import jdk.incubator.vector.ShortVector;<br>
+import jdk.incubator.vector.Vector;<br>
+import jdk.incubator.vector.VectorMask;<br>
+import jdk.incubator.vector.VectorOperators;<br>
+import jdk.incubator.vector.VectorShuffle;<br>
+import jdk.incubator.vector.VectorSpecies;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ * This is an auto-generated source file and should not edit it directly.<br>
+ */<br>
+public abstract class ByteBitPacking512VectorLE {</p>

<p>Review Comment:<br>
   In this case, the script is not necessary. Manual bit-unpacking code is error-prone, we really rely on the quality and coverage of test cases.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17683228_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17683228&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17683228" class="commentdate_17683228_concise subText comment-created-date-link"><span class="date user-tz" title="02/Feb/23 05:29"><time class="livestamp" datetime="2023-02-02T05:29:53+0000">02/Feb/23 05:29</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1094047290  


 ########## 
parquet-generator/src/main/resources/ByteBitPacking512VectorLE: 
########## 
@@ -0,0 +1,3095 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.ByteVector; 
+import jdk.incubator.vector.IntVector; 
+import jdk.incubator.vector.LongVector; 
+import jdk.incubator.vector.ShortVector; 
+import jdk.incubator.vector.Vector; 
+import jdk.incubator.vector.VectorMask; 
+import jdk.incubator.vector.VectorOperators; 
+import jdk.incubator.vector.VectorShuffle; 
+import jdk.incubator.vector.VectorSpecies; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * This is an auto-generated source file and should not edit it directly. 
+ */ 
+public abstract class ByteBitPacking512VectorLE { 

 Review Comment: 
   In this case, the script is not necessary. Manual bit-unpacking code is error-prone, we really rely on the quality and coverage of test cases. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17683229" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17683229_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17683229&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17683229" class="commentdate_17683229_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Feb/23 05:52"><time class="livestamp" datetime="2023-02-02T05:52:05+0000">02/Feb/23 05:52</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1094064182" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1094064182</a></p>


<p>##########<br>
parquet-generator/src/main/resources/ByteBitPacking512VectorLE:<br>
##########<br>
@@ -0,0 +1,3095 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.ByteVector;<br>
+import jdk.incubator.vector.IntVector;<br>
+import jdk.incubator.vector.LongVector;<br>
+import jdk.incubator.vector.ShortVector;<br>
+import jdk.incubator.vector.Vector;<br>
+import jdk.incubator.vector.VectorMask;<br>
+import jdk.incubator.vector.VectorOperators;<br>
+import jdk.incubator.vector.VectorShuffle;<br>
+import jdk.incubator.vector.VectorSpecies;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ * This is an auto-generated source file and should not edit it directly.<br>
+ */<br>
+public abstract class ByteBitPacking512VectorLE {</p>

<p>Review Comment:<br>
   &gt; In this case, the script is not necessary. Manual bit-unpacking code is error-prone, we really rely on the quality and coverage of test cases.</p>

<p>   @wgtmac  I strongly agree with you, so I try my best to cover all aspects(different aspects from bitWidth 1 to 32) in class TestByteBitPacking512VectorLE. Besides, I have done the TPC-H testing, and compared the query result with before optimization. In short, I have done more work to ensure the code quality.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17683229_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17683229&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17683229" class="commentdate_17683229_concise subText comment-created-date-link"><span class="date user-tz" title="02/Feb/23 05:52"><time class="livestamp" datetime="2023-02-02T05:52:05+0000">02/Feb/23 05:52</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1094064182  


 ########## 
parquet-generator/src/main/resources/ByteBitPacking512VectorLE: 
########## 
@@ -0,0 +1,3095 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.ByteVector; 
+import jdk.incubator.vector.IntVector; 
+import jdk.incubator.vector.LongVector; 
+import jdk.incubator.vector.ShortVector; 
+import jdk.incubator.vector.Vector; 
+import jdk.incubator.vector.VectorMask; 
+import jdk.incubator.vector.VectorOperators; 
+import jdk.incubator.vector.VectorShuffle; 
+import jdk.incubator.vector.VectorSpecies; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * This is an auto-generated source file and should not edit it directly. 
+ */ 
+public abstract class ByteBitPacking512VectorLE { 

 Review Comment: 
   &gt; In this case, the script is not necessary. Manual bit-unpacking code is error-prone, we really rely on the quality and coverage of test cases. 

    @wgtmac  I strongly agree with you, so I try my best to cover all aspects(different aspects from bitWidth 1 to 32) in class TestByteBitPacking512VectorLE. Besides, I have done the TPC-H testing, and compared the query result with before optimization. In short, I have done more work to ensure the code quality. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17684186" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17684186_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17684186&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17684186" class="commentdate_17684186_verbose subText comment-created-date-link"><span class="date user-tz" title="04/Feb/23 16:01"><time class="livestamp" datetime="2023-02-04T16:01:32+0000">04/Feb/23 16:01</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jatin-bhateja commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1096553161" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1096553161</a></p>


<p>##########<br>
parquet-benchmarks/src/main/java/org/apache/parquet/benchmarks/ByteBitPackingVectorBenchmarks.java:<br>
##########<br>
@@ -0,0 +1,83 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.benchmarks;<br>
+<br>
+import org.apache.parquet.column.values.bitpacking.BytePacker;<br>
+import org.apache.parquet.column.values.bitpacking.Packer;<br>
+import org.openjdk.jmh.annotations.*;<br>
+<br>
+import java.util.concurrent.TimeUnit;<br>
+<br>
+/**<br>
+ * This class uses the java17 vector API, add VM options --add-modules=jdk.incubator.vector<br>
+ */<br>
+<br>
+@State(Scope.Benchmark)<br>
+@BenchmarkMode(Mode.AverageTime)<br>
+@Warmup(iterations = 1, batchSize = 100000)<br>
+@Measurement(iterations = 1, batchSize = 100000)<br>
+@OutputTimeUnit(TimeUnit.MILLISECONDS)<br>
+public class ByteBitPackingVectorBenchmarks {<br>
+<br>
+  /**<br>
+   * The range of bitWidth is 1 ~ 32, change it directly if test other bitWidth.<br>
+   */<br>
+  private static final int bitWidth = 7;<br>
+  private static final int outputValues = 1024;<br>
+  private final byte[] input = new byte<span class="error">[outputValues * bitWidth / 8]</span>;<br>
+  private final int[] output = new int<span class="error">[outputValues]</span>;<br>
+  private final int[] outputVector = new int<span class="error">[outputValues]</span>;<br>
+<br>
+  @Setup(Level.Trial)<br>
+  public void getInputBytes() {<br>
+    for (int i = 0; i &lt; input.length; i++) </p>
{
+      input[i] = (byte) i;
+    }
<p>+  }<br>
+<br>
+  @Benchmark<br>
+  public void testUnpack() {<br>
+    BytePacker bytePacker = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    for (int i = 0, j = 0; i &lt; input.length; i += bitWidth, j += 8) </p>
{
+      bytePacker.unpack8Values(input, i, output, j);
+    }
<p>+  }<br>
+<br>
+  @Benchmark<br>
+  public void testUnpackVector() {<br>
+    BytePacker bytePacker = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker bytePackerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);</p>

<p>Review Comment:<br>
   &gt; Could you elaborate more? @jatin-bhateja</p>

<p>   Idea was to emit scalar routines also in vector packer so that user can access both scalar and vector routines through one vector packer instance. <br>
   But this can be addressed later since currently scalar packer routines are generated at build time and vector packer routines are hand crafted. Existing scalar packer are nested static final classes which makes extending them difficult.</p>



<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * This is a utils class which is used for big data applications(such as Spark Flink)<br>
+ *<br>
+ * - For Intel CPU, Flags avx512vbmi &amp;&amp; avx512_vbmi2 can have better performance gains<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static volatile Boolean vector;<br>
+<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    if (supportVector()) </p>
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    }
<p> else {<br>
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);</p>

<p>Review Comment:<br>
   Else block should have call to readBatch method.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17684186_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17684186&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17684186" class="commentdate_17684186_concise subText comment-created-date-link"><span class="date user-tz" title="04/Feb/23 16:01"><time class="livestamp" datetime="2023-02-04T16:01:32+0000">04/Feb/23 16:01</time></span></a>                    jatin-bhateja commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1096553161  


 ########## 
parquet-benchmarks/src/main/java/org/apache/parquet/benchmarks/ByteBitPackingVectorBenchmarks.java: 
########## 
@@ -0,0 +1,83 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.benchmarks; 
+ 
+import org.apache.parquet.column.values.bitpacking.BytePacker; 
+import org.apache.parquet.column.values.bitpacking.Packer; 
+import org.openjdk.jmh.annotations.*; 
+ 
+import java.util.concurrent.TimeUnit; 
+ 
+/** 
+ * This class uses the java17 vector API, add VM options --add-modules=jdk.incubator.vector 
+ */ 
+ 
+@State(Scope.Benchmark) 
+@BenchmarkMode(Mode.AverageTime) 
+@Warmup(iterations = 1, batchSize = 100000) 
+@Measurement(iterations = 1, batchSize = 100000) 
+@OutputTimeUnit(TimeUnit.MILLISECONDS) 
+public class ByteBitPackingVectorBenchmarks { 
+ 
+  /** 
+   * The range of bitWidth is 1 ~ 32, change it directly if test other bitWidth. 
+   */ 
+  private static final int bitWidth = 7; 
+  private static final int outputValues = 1024; 
+  private final byte[] input = new byte [outputValues * bitWidth / 8] ; 
+  private final int[] output = new int [outputValues] ; 
+  private final int[] outputVector = new int [outputValues] ; 
+ 
+  @Setup(Level.Trial) 
+  public void getInputBytes() { 
+    for (int i = 0; i &lt; input.length; i++)  
{
+      input[i] = (byte) i;
+    }
 +  } 
+ 
+  @Benchmark 
+  public void testUnpack() { 
+    BytePacker bytePacker = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    for (int i = 0, j = 0; i &lt; input.length; i += bitWidth, j += 8)  
{
+      bytePacker.unpack8Values(input, i, output, j);
+    }
 +  } 
+ 
+  @Benchmark 
+  public void testUnpackVector() { 
+    BytePacker bytePacker = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker bytePackerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 

 Review Comment: 
   &gt; Could you elaborate more? @jatin-bhateja 

    Idea was to emit scalar routines also in vector packer so that user can access both scalar and vector routines through one vector packer instance.  
   But this can be addressed later since currently scalar packer routines are generated at build time and vector packer routines are hand crafted. Existing scalar packer are nested static final classes which makes extending them difficult. 



 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * This is a utils class which is used for big data applications(such as Spark Flink) 
+ * 
+ * - For Intel CPU, Flags avx512vbmi &amp;&amp; avx512_vbmi2 can have better performance gains 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static volatile Boolean vector; 
+ 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    if (supportVector())  
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    }
  else { 
+      readBatchVector(bitWidth, in, currentCount, currentBuffer); 

 Review Comment: 
   Else block should have call to readBatch method. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17684188" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17684188_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17684188&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17684188" class="commentdate_17684188_verbose subText comment-created-date-link"><span class="date user-tz" title="04/Feb/23 16:28"><time class="livestamp" datetime="2023-02-04T16:28:20+0000">04/Feb/23 16:28</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jatin-bhateja commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1048037258" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1048037258</a></p>


<p>##########<br>
parquet-generator/src/main/resources/ByteBitPackingVectorLE:<br>
##########<br>
@@ -0,0 +1,3218 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.*;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ * This is an auto-generated source file and should not edit it directly.<br>
+ */<br>
+public abstract class ByteBitPackingVectorLE {<br>
+  private static final BytePacker[] packers = new BytePacker<span class="error">[33]</span>;<br>
+<br>
+  static </p>
{
+    packers[0] = new Packer0();
+    packers[1] = new Packer1();
+    packers[2] = new Packer2();
+    packers[3] = new Packer3();
+    packers[4] = new Packer4();
+    packers[5] = new Packer5();
+    packers[6] = new Packer6();
+    packers[7] = new Packer7();
+    packers[8] = new Packer8();
+    packers[9] = new Packer9();
+    packers[10] = new Packer10();
+    packers[11] = new Packer11();
+    packers[12] = new Packer12();
+    packers[13] = new Packer13();
+    packers[14] = new Packer14();
+    packers[15] = new Packer15();
+    packers[16] = new Packer16();
+    packers[17] = new Packer17();
+    packers[18] = new Packer18();
+    packers[19] = new Packer19();
+    packers[20] = new Packer20();
+    packers[21] = new Packer21();
+    packers[22] = new Packer22();
+    packers[23] = new Packer23();
+    packers[24] = new Packer24();
+    packers[25] = new Packer25();
+    packers[26] = new Packer26();
+    packers[27] = new Packer27();
+    packers[28] = new Packer28();
+    packers[29] = new Packer29();
+    packers[30] = new Packer30();
+    packers[31] = new Packer31();
+    packers[32] = new Packer32();
+  }
<p>+<br>
+  public static final BytePackerFactory factory = new BytePackerFactory() {<br>
+    public BytePacker newBytePacker(int bitWidth) </p>
{
+      return packers[bitWidth];
+    }
<p>+  };<br>
+<br>
+  private static final class Packer0 extends BytePacker {<br>
+    private int unpackCount = 0;<br>
+<br>
+    private Packer0() </p>
{
+      super(0);
+    }
<p>+<br>
+    public int getUnpackCount() </p>
{
+      return unpackCount;
+    }
<p>+<br>
+    public final void pack8Values(final int[] in, final int inPos, final byte[] out, final int outPos) </p>
{
+    }<br>
+<br>
+    public final void pack32Values(final int[] in, final int inPos, final byte[] out, final int outPos) {+    }
<p>+<br>
+    public final void unpack8Values(final byte[] in, final int inPos, final int[] out, final int outPos) </p>
{
+    }<br>
+<br>
+    public final void unpack8Values(final ByteBuffer in, final int inPos, final int[] out, final int outPos) {+    }
<p>+<br>
+    public final void unpack32Values(final byte[] in, final int inPos, final int[] out, final int outPos) </p>
{
+    }<br>
+<br>
+    public final void unpack32Values(final ByteBuffer in, final int inPos, final int[] out, final int outPos) {+    }
<p>+<br>
+    public final void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos) </p>
{
+    }
<p>+<br>
+    public final void unpackValuesVector(final ByteBuffer input, final int inPos, final int[] output, final int outPos) {</p>

<p>Review Comment:<br>
   All these empty definitions can be removed if we introduce a new class ByteVectorPacker which inherit from existing BytePacker.</p>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17684188_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17684188&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17684188" class="commentdate_17684188_concise subText comment-created-date-link"><span class="date user-tz" title="04/Feb/23 16:28"><time class="livestamp" datetime="2023-02-04T16:28:20+0000">04/Feb/23 16:28</time></span></a>                    jatin-bhateja commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1048037258  


 ########## 
parquet-generator/src/main/resources/ByteBitPackingVectorLE: 
########## 
@@ -0,0 +1,3218 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.*; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * This is an auto-generated source file and should not edit it directly. 
+ */ 
+public abstract class ByteBitPackingVectorLE { 
+  private static final BytePacker[] packers = new BytePacker [33] ; 
+ 
+  static  
{
+    packers[0] = new Packer0();
+    packers[1] = new Packer1();
+    packers[2] = new Packer2();
+    packers[3] = new Packer3();
+    packers[4] = new Packer4();
+    packers[5] = new Packer5();
+    packers[6] = new Packer6();
+    packers[7] = new Packer7();
+    packers[8] = new Packer8();
+    packers[9] = new Packer9();
+    packers[10] = new Packer10();
+    packers[11] = new Packer11();
+    packers[12] = new Packer12();
+    packers[13] = new Packer13();
+    packers[14] = new Packer14();
+    packers[15] = new Packer15();
+    packers[16] = new Packer16();
+    packers[17] = new Packer17();
+    packers[18] = new Packer18();
+    packers[19] = new Packer19();
+    packers[20] = new Packer20();
+    packers[21] = new Packer21();
+    packers[22] = new Packer22();
+    packers[23] = new Packer23();
+    packers[24] = new Packer24();
+    packers[25] = new Packer25();
+    packers[26] = new Packer26();
+    packers[27] = new Packer27();
+    packers[28] = new Packer28();
+    packers[29] = new Packer29();
+    packers[30] = new Packer30();
+    packers[31] = new Packer31();
+    packers[32] = new Packer32();
+  }
 + 
+  public static final BytePackerFactory factory = new BytePackerFactory() { 
+    public BytePacker newBytePacker(int bitWidth)  
{
+      return packers[bitWidth];
+    }
 +  }; 
+ 
+  private static final class Packer0 extends BytePacker { 
+    private int unpackCount = 0; 
+ 
+    private Packer0()  
{
+      super(0);
+    }
 + 
+    public int getUnpackCount()  
{
+      return unpackCount;
+    }
 + 
+    public final void pack8Values(final int[] in, final int inPos, final byte[] out, final int outPos)  
{
+    } 
+ 
+    public final void pack32Values(final int[] in, final int inPos, final byte[] out, final int outPos) {+    }
 + 
+    public final void unpack8Values(final byte[] in, final int inPos, final int[] out, final int outPos)  
{
+    } 
+ 
+    public final void unpack8Values(final ByteBuffer in, final int inPos, final int[] out, final int outPos) {+    }
 + 
+    public final void unpack32Values(final byte[] in, final int inPos, final int[] out, final int outPos)  
{
+    } 
+ 
+    public final void unpack32Values(final ByteBuffer in, final int inPos, final int[] out, final int outPos) {+    }
 + 
+    public final void unpackValuesVector(final byte[] input, final int inPos, final int[] output, final int outPos)  
{
+    }
 + 
+    public final void unpackValuesVector(final ByteBuffer input, final int inPos, final int[] output, final int outPos) { 

 Review Comment: 
   All these empty definitions can be removed if we introduce a new class ByteVectorPacker which inherit from existing BytePacker. 



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17684539" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17684539_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17684539&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17684539" class="commentdate_17684539_verbose subText comment-created-date-link"><span class="date user-tz" title="06/Feb/23 09:34"><time class="livestamp" datetime="2023-02-06T09:34:29+0000">06/Feb/23 09:34</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1418781509" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1418781509</a></p>

<p>   @wgtmac I added doc about how big data applications use Java Vector API</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17684539_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17684539&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17684539" class="commentdate_17684539_concise subText comment-created-date-link"><span class="date user-tz" title="06/Feb/23 09:34"><time class="livestamp" datetime="2023-02-06T09:34:29+0000">06/Feb/23 09:34</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1418781509  

    @wgtmac I added doc about how big data applications use Java Vector API 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17684756" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17684756_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17684756&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17684756" class="commentdate_17684756_verbose subText comment-created-date-link"><span class="date user-tz" title="06/Feb/23 15:28"><time class="livestamp" datetime="2023-02-06T15:28:11+0000">06/Feb/23 15:28</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1097538545" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1097538545</a></p>


<p>##########<br>
README.md:<br>
##########<br>
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here</p>
<ul>
	<li>Column stats</li>
	<li>Delta encoding</li>
	<li>Index pages<br>
+* Java Vector API support<br>
+<br>
+## Java Vector API support</li>
</ul>


<p>Review Comment:<br>
   @dongjoon-hyun @sunchao Could you please take a look and advise if it is possible to integrate it with Apache Spark? Thanks!</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17684756_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17684756&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17684756" class="commentdate_17684756_concise subText comment-created-date-link"><span class="date user-tz" title="06/Feb/23 15:28"><time class="livestamp" datetime="2023-02-06T15:28:11+0000">06/Feb/23 15:28</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1097538545  


 ########## 
README.md: 
########## 
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here 
 
	 Column stats 
	 Delta encoding 
	 Index pages 
+* Java Vector API support 
+ 
+## Java Vector API support 
 


 Review Comment: 
   @dongjoon-hyun @sunchao Could you please take a look and advise if it is possible to integrate it with Apache Spark? Thanks! 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17684922" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17684922_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17684922&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17684922" class="commentdate_17684922_verbose subText comment-created-date-link"><span class="date user-tz" title="06/Feb/23 20:16"><time class="livestamp" datetime="2023-02-06T20:16:42+0000">06/Feb/23 20:16</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>sunchao commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1097875149" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1097875149</a></p>


<p>##########<br>
README.md:<br>
##########<br>
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here</p>
<ul>
	<li>Column stats</li>
	<li>Delta encoding</li>
	<li>Index pages<br>
+* Java Vector API support<br>
+<br>
+## Java Vector API support</li>
</ul>


<p>Review Comment:<br>
   It should be possible but we need to make sure it is backward compatible since Spark also compiles with older JDK versions like JDK8.</p>

<p>   You can take a look at <a href="https://github.com/apache/spark/pull/30810" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/spark/pull/30810</a> which does something similar.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17684922_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17684922&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17684922" class="commentdate_17684922_concise subText comment-created-date-link"><span class="date user-tz" title="06/Feb/23 20:16"><time class="livestamp" datetime="2023-02-06T20:16:42+0000">06/Feb/23 20:16</time></span></a>                    sunchao commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1097875149  


 ########## 
README.md: 
########## 
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here 
 
	 Column stats 
	 Delta encoding 
	 Index pages 
+* Java Vector API support 
+ 
+## Java Vector API support 
 


 Review Comment: 
   It should be possible but we need to make sure it is backward compatible since Spark also compiles with older JDK versions like JDK8. 

    You can take a look at  https://github.com/apache/spark/pull/30810  which does something similar. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17684935" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17684935_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17684935&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17684935" class="commentdate_17684935_verbose subText comment-created-date-link"><span class="date user-tz" title="06/Feb/23 20:46"><time class="livestamp" datetime="2023-02-06T20:46:10+0000">06/Feb/23 20:46</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>dongjoon-hyun commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1097900504" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1097900504</a></p>


<p>##########<br>
README.md:<br>
##########<br>
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here</p>
<ul>
	<li>Column stats</li>
	<li>Delta encoding</li>
	<li>Index pages<br>
+* Java Vector API support<br>
+<br>
+## Java Vector API support</li>
</ul>


<p>Review Comment:<br>
   Ya, +1 for @sunchao 's comment. Actually, that's the big hurdle in the Apache Spark codebase. It was tricky even ML-part change. Given that Parquet is in `SQL` part, I'm not sure how much we are able to isolate this, @wgtmac .</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17684935_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17684935&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17684935" class="commentdate_17684935_concise subText comment-created-date-link"><span class="date user-tz" title="06/Feb/23 20:46"><time class="livestamp" datetime="2023-02-06T20:46:10+0000">06/Feb/23 20:46</time></span></a>                    dongjoon-hyun commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1097900504  


 ########## 
README.md: 
########## 
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here 
 
	 Column stats 
	 Delta encoding 
	 Index pages 
+* Java Vector API support 
+ 
+## Java Vector API support 
 


 Review Comment: 
   Ya, +1 for @sunchao 's comment. Actually, that's the big hurdle in the Apache Spark codebase. It was tricky even ML-part change. Given that Parquet is in `SQL` part, I'm not sure how much we are able to isolate this, @wgtmac . 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17685075" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17685075_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17685075&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17685075" class="commentdate_17685075_verbose subText comment-created-date-link"><span class="date user-tz" title="07/Feb/23 06:46"><time class="livestamp" datetime="2023-02-07T06:46:10+0000">07/Feb/23 06:46</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1098236516" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1098236516</a></p>


<p>##########<br>
README.md:<br>
##########<br>
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here</p>
<ul>
	<li>Column stats</li>
	<li>Delta encoding</li>
	<li>Index pages<br>
+* Java Vector API support<br>
+<br>
+## Java Vector API support</li>
</ul>


<p>Review Comment:<br>
   @wgtmac @sunchao @dongjoon-hyun   Yes, I have integrated it with Apache Spark, and finished TPC-H testing. Because of Parquet ByteBitPacking512VectorLE class only will be loaded when used, we can add configuration such as "spark.sql.parquet.vector.enable", if false, any java vector api will not load, so it is backward compatible with older JDK versions like JDK8.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17685075_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17685075&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17685075" class="commentdate_17685075_concise subText comment-created-date-link"><span class="date user-tz" title="07/Feb/23 06:46"><time class="livestamp" datetime="2023-02-07T06:46:10+0000">07/Feb/23 06:46</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1098236516  


 ########## 
README.md: 
########## 
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here 
 
	 Column stats 
	 Delta encoding 
	 Index pages 
+* Java Vector API support 
+ 
+## Java Vector API support 
 


 Review Comment: 
   @wgtmac @sunchao @dongjoon-hyun   Yes, I have integrated it with Apache Spark, and finished TPC-H testing. Because of Parquet ByteBitPacking512VectorLE class only will be loaded when used, we can add configuration such as "spark.sql.parquet.vector.enable", if false, any java vector api will not load, so it is backward compatible with older JDK versions like JDK8. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17685077" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17685077_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17685077&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17685077" class="commentdate_17685077_verbose subText comment-created-date-link"><span class="date user-tz" title="07/Feb/23 06:51"><time class="livestamp" datetime="2023-02-07T06:51:10+0000">07/Feb/23 06:51</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1098239530" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1098239530</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * This is a utils class which is used for big data applications(such as Spark Flink)<br>
+ *<br>
+ * - For Intel CPU, Flags avx512vbmi &amp;&amp; avx512_vbmi2 can have better performance gains<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static volatile Boolean vector;<br>
+<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    if (supportVector()) </p>
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    }
<p> else {<br>
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);</p>

<p>Review Comment:<br>
   @jatin-bhateja please task the updated code</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17685077_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17685077&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17685077" class="commentdate_17685077_concise subText comment-created-date-link"><span class="date user-tz" title="07/Feb/23 06:51"><time class="livestamp" datetime="2023-02-07T06:51:10+0000">07/Feb/23 06:51</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1098239530  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * This is a utils class which is used for big data applications(such as Spark Flink) 
+ * 
+ * - For Intel CPU, Flags avx512vbmi &amp;&amp; avx512_vbmi2 can have better performance gains 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static volatile Boolean vector; 
+ 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    if (supportVector())  
{
+      readBatchVector(bitWidth, in, currentCount, currentBuffer);
+    }
  else { 
+      readBatchVector(bitWidth, in, currentCount, currentBuffer); 

 Review Comment: 
   @jatin-bhateja please task the updated code 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17685617" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17685617_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17685617&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17685617" class="commentdate_17685617_verbose subText comment-created-date-link"><span class="date user-tz" title="08/Feb/23 00:04"><time class="livestamp" datetime="2023-02-08T00:04:40+0000">08/Feb/23 00:04</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>sunchao commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1099446478" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1099446478</a></p>


<p>##########<br>
README.md:<br>
##########<br>
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here</p>
<ul>
	<li>Column stats</li>
	<li>Delta encoding</li>
	<li>Index pages<br>
+* Java Vector API support<br>
+<br>
+## Java Vector API support</li>
</ul>


<p>Review Comment:<br>
   @jiangjiguang sounds good, could you share the TPC-H benchmark results too?</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17685617_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17685617&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17685617" class="commentdate_17685617_concise subText comment-created-date-link"><span class="date user-tz" title="08/Feb/23 00:04"><time class="livestamp" datetime="2023-02-08T00:04:40+0000">08/Feb/23 00:04</time></span></a>                    sunchao commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1099446478  


 ########## 
README.md: 
########## 
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here 
 
	 Column stats 
	 Delta encoding 
	 Index pages 
+* Java Vector API support 
+ 
+## Java Vector API support 
 


 Review Comment: 
   @jiangjiguang sounds good, could you share the TPC-H benchmark results too? 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17685656" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17685656_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17685656&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17685656" class="commentdate_17685656_verbose subText comment-created-date-link"><span class="date user-tz" title="08/Feb/23 03:02"><time class="livestamp" datetime="2023-02-08T03:02:06+0000">08/Feb/23 03:02</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>WangYuxing0924 commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1099601047" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1099601047</a></p>


<p>##########<br>
README.md:<br>
##########<br>
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here</p>
<ul>
	<li>Column stats</li>
	<li>Delta encoding</li>
	<li>Index pages<br>
+* Java Vector API support<br>
+<br>
+## Java Vector API support</li>
</ul>


<p>Review Comment:<br>
   @sunchao , <span class="error">[here]</span>(<a href="https://issues.apache.org/jira/projects/PARQUET/issues/PARQUET-2159" class="external-link" rel="nofollow">https://issues.apache.org/jira/projects/PARQUET/issues/PARQUET-2159</a>) shows the micro-benchmark of bitpack function and test report from Spark vectorizedparquetRecordReader (scan operatories). Most tpch queries are join-related operatories so the hotspot lies in the join/shuffle stage. bitpack optimization would be beneficial for SQL filter query</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17685656_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17685656&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17685656" class="commentdate_17685656_concise subText comment-created-date-link"><span class="date user-tz" title="08/Feb/23 03:02"><time class="livestamp" datetime="2023-02-08T03:02:06+0000">08/Feb/23 03:02</time></span></a>                    WangYuxing0924 commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1099601047  


 ########## 
README.md: 
########## 
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here 
 
	 Column stats 
	 Delta encoding 
	 Index pages 
+* Java Vector API support 
+ 
+## Java Vector API support 
 


 Review Comment: 
   @sunchao ,  [here] ( https://issues.apache.org/jira/projects/PARQUET/issues/PARQUET-2159 ) shows the micro-benchmark of bitpack function and test report from Spark vectorizedparquetRecordReader (scan operatories). Most tpch queries are join-related operatories so the hotspot lies in the join/shuffle stage. bitpack optimization would be beneficial for SQL filter query 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17685657" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17685657_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17685657&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17685657" class="commentdate_17685657_verbose subText comment-created-date-link"><span class="date user-tz" title="08/Feb/23 03:04"><time class="livestamp" datetime="2023-02-08T03:04:11+0000">08/Feb/23 03:04</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>Fang-Xie commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1099602361" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1099602361</a></p>


<p>##########<br>
README.md:<br>
##########<br>
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here</p>
<ul>
	<li>Column stats</li>
	<li>Delta encoding</li>
	<li>Index pages<br>
+* Java Vector API support<br>
+<br>
+## Java Vector API support</li>
</ul>


<p>Review Comment:<br>
   @sunchao , <span class="error">[here]</span>(<a href="https://issues.apache.org/jira/projects/PARQUET/issues/PARQUET-2159" class="external-link" rel="nofollow">https://issues.apache.org/jira/projects/PARQUET/issues/PARQUET-2159</a>) shows the micro-benchmark of bitpack function and test report from Spark vectorizedparquetRecordReader (scan operatories). Most tpch queries are join-related operatories so the hotspot lies in the join/shuffle stage. bitpack optimization would be beneficial for SQL filter query</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17685657_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17685657&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17685657" class="commentdate_17685657_concise subText comment-created-date-link"><span class="date user-tz" title="08/Feb/23 03:04"><time class="livestamp" datetime="2023-02-08T03:04:11+0000">08/Feb/23 03:04</time></span></a>                    Fang-Xie commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1099602361  


 ########## 
README.md: 
########## 
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here 
 
	 Column stats 
	 Delta encoding 
	 Index pages 
+* Java Vector API support 
+ 
+## Java Vector API support 
 


 Review Comment: 
   @sunchao ,  [here] ( https://issues.apache.org/jira/projects/PARQUET/issues/PARQUET-2159 ) shows the micro-benchmark of bitpack function and test report from Spark vectorizedparquetRecordReader (scan operatories). Most tpch queries are join-related operatories so the hotspot lies in the join/shuffle stage. bitpack optimization would be beneficial for SQL filter query 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17685675" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17685675_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17685675&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17685675" class="commentdate_17685675_verbose subText comment-created-date-link"><span class="date user-tz" title="08/Feb/23 04:09"><time class="livestamp" datetime="2023-02-08T04:09:51+0000">08/Feb/23 04:09</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>sunchao commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1099630871" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1099630871</a></p>


<p>##########<br>
README.md:<br>
##########<br>
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here</p>
<ul>
	<li>Column stats</li>
	<li>Delta encoding</li>
	<li>Index pages<br>
+* Java Vector API support<br>
+<br>
+## Java Vector API support</li>
</ul>


<p>Review Comment:<br>
   Ah thanks! this looks promising and looking forward to the Spark PR!</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17685675_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17685675&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17685675" class="commentdate_17685675_concise subText comment-created-date-link"><span class="date user-tz" title="08/Feb/23 04:09"><time class="livestamp" datetime="2023-02-08T04:09:51+0000">08/Feb/23 04:09</time></span></a>                    sunchao commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1099630871  


 ########## 
README.md: 
########## 
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here 
 
	 Column stats 
	 Delta encoding 
	 Index pages 
+* Java Vector API support 
+ 
+## Java Vector API support 
 


 Review Comment: 
   Ah thanks! this looks promising and looking forward to the Spark PR! 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17687672" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17687672_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17687672&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17687672" class="commentdate_17687672_verbose subText comment-created-date-link"><span class="date user-tz" title="13/Feb/23 02:30"><time class="livestamp" datetime="2023-02-13T02:30:59+0000">13/Feb/23 02:30</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1427240074" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1427240074</a></p>

<p>   &gt; &gt; @wgtmac PTAK again<br>
   &gt; <br>
   &gt; Generally this patch looks good to me now. Thanks @jiangjiguang for working on it!<br>
   &gt; <br>
   &gt; Could you approve the workflow and take another pass? @gszadovszky @shangxinli @ggershinsky</p>

<p>   @gszadovszky @shangxinli @ggershinsky Can you take a look the pr ? thanks</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17687672_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17687672&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17687672" class="commentdate_17687672_concise subText comment-created-date-link"><span class="date user-tz" title="13/Feb/23 02:30"><time class="livestamp" datetime="2023-02-13T02:30:59+0000">13/Feb/23 02:30</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1427240074  

    &gt; &gt; @wgtmac PTAK again 
   &gt;  
   &gt; Generally this patch looks good to me now. Thanks @jiangjiguang for working on it! 
   &gt;  
   &gt; Could you approve the workflow and take another pass? @gszadovszky @shangxinli @ggershinsky 

    @gszadovszky @shangxinli @ggershinsky Can you take a look the pr ? thanks 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17689115" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17689115_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17689115&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17689115" class="commentdate_17689115_verbose subText comment-created-date-link"><span class="date user-tz" title="15/Feb/23 13:13"><time class="livestamp" datetime="2023-02-15T13:13:43+0000">15/Feb/23 13:13</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1107005376" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1107005376</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception {<br>
+    String basePath = args<span class="error">[0]</span>;<br>
+    //TODO: Int for Big Endian<br>
+    //generateScheme(false, true, basePath);<br>
+<br>
+    // Int for Little Endian<br>
+    generateScheme(false, false, basePath);<br>
+<br>
+    //TODO: Long for Big Endian<br>
+    //generateScheme(true, true, basePath);<br>
+<br>
+    //TODO: Long for Little Endian<br>
+    //generateScheme(true, false, basePath);</p>

<p>Review Comment:<br>
   When do we want to implement these TODOs? If it is not for an already upcoming change to address, I would suggest having more detailed descriptions here. Why do we need these? In what circumstances would it couse issues if we do not implement them?</p>



<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */</p>

<p>Review Comment:<br>
   Is this comment still stands? I cannot find the generated file checked in. BTW, I don't think it is a good practice to check in generated files. It is better to automatically generate them in `generate-sources` phase and then compile them with the other source files.</p>



<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   It looks like quite hacky. Doesn't the vector API support this somehow?</p>



<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   I do not really get how this generation works. Some description would be great.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17689115_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17689115&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17689115" class="commentdate_17689115_concise subText comment-created-date-link"><span class="date user-tz" title="15/Feb/23 13:13"><time class="livestamp" datetime="2023-02-15T13:13:43+0000">15/Feb/23 13:13</time></span></a>                    gszadovszky commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1107005376  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception { 
+    String basePath = args [0] ; 
+    //TODO: Int for Big Endian 
+    //generateScheme(false, true, basePath); 
+ 
+    // Int for Little Endian 
+    generateScheme(false, false, basePath); 
+ 
+    //TODO: Long for Big Endian 
+    //generateScheme(true, true, basePath); 
+ 
+    //TODO: Long for Little Endian 
+    //generateScheme(true, false, basePath); 

 Review Comment: 
   When do we want to implement these TODOs? If it is not for an already upcoming change to address, I would suggest having more detailed descriptions here. Why do we need these? In what circumstances would it couse issues if we do not implement them? 



 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 

 Review Comment: 
   Is this comment still stands? I cannot find the generated file checked in. BTW, I don't think it is a good practice to check in generated files. It is better to automatically generate them in `generate-sources` phase and then compile them with the other source files. 



 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   It looks like quite hacky. Doesn't the vector API support this somehow? 



 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   I do not really get how this generation works. Some description would be great. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17690164" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17690164_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17690164&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17690164" class="commentdate_17690164_verbose subText comment-created-date-link"><span class="date user-tz" title="17/Feb/23 06:03"><time class="livestamp" datetime="2023-02-17T06:03:54+0000">17/Feb/23 06:03</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1109339286" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1109339286</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception {<br>
+    String basePath = args<span class="error">[0]</span>;<br>
+    //TODO: Int for Big Endian<br>
+    //generateScheme(false, true, basePath);<br>
+<br>
+    // Int for Little Endian<br>
+    generateScheme(false, false, basePath);<br>
+<br>
+    //TODO: Long for Big Endian<br>
+    //generateScheme(true, true, basePath);<br>
+<br>
+    //TODO: Long for Little Endian<br>
+    //generateScheme(true, false, basePath);</p>

<p>Review Comment:<br>
   @gszadovszky As far as I know, most JVM depends on Little Endian, I haven't see that JVM depends on Big Endian, So I only finished the code of Little Endian. "Long for Little Endian" affects on parquet page v2 version, I have finished the code, I will submit it to parquet-mr community after this PR. </p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17690164_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17690164&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17690164" class="commentdate_17690164_concise subText comment-created-date-link"><span class="date user-tz" title="17/Feb/23 06:03"><time class="livestamp" datetime="2023-02-17T06:03:54+0000">17/Feb/23 06:03</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1109339286  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception { 
+    String basePath = args [0] ; 
+    //TODO: Int for Big Endian 
+    //generateScheme(false, true, basePath); 
+ 
+    // Int for Little Endian 
+    generateScheme(false, false, basePath); 
+ 
+    //TODO: Long for Big Endian 
+    //generateScheme(true, true, basePath); 
+ 
+    //TODO: Long for Little Endian 
+    //generateScheme(true, false, basePath); 

 Review Comment: 
   @gszadovszky As far as I know, most JVM depends on Little Endian, I haven't see that JVM depends on Big Endian, So I only finished the code of Little Endian. "Long for Little Endian" affects on parquet page v2 version, I have finished the code, I will submit it to parquet-mr community after this PR.  


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17690168" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17690168_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17690168&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17690168" class="commentdate_17690168_verbose subText comment-created-date-link"><span class="date user-tz" title="17/Feb/23 06:07"><time class="livestamp" datetime="2023-02-17T06:07:29+0000">17/Feb/23 06:07</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1109339286" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1109339286</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception {<br>
+    String basePath = args<span class="error">[0]</span>;<br>
+    //TODO: Int for Big Endian<br>
+    //generateScheme(false, true, basePath);<br>
+<br>
+    // Int for Little Endian<br>
+    generateScheme(false, false, basePath);<br>
+<br>
+    //TODO: Long for Big Endian<br>
+    //generateScheme(true, true, basePath);<br>
+<br>
+    //TODO: Long for Little Endian<br>
+    //generateScheme(true, false, basePath);</p>

<p>Review Comment:<br>
   @gszadovszky As far as I know, most JVM depends on Little Endian, I haven't see that JVM depends on Big Endian, So I only finished the code of Little Endian. "Long for Little Endian" affects on parquet page v2 version, I have finished the code, I will submit it to parquet-mr community after this PR. <br>
   Indeed, it has no side effects(can't benefit from Java Vector API) if we do not implement them, </p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17690168_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17690168&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17690168" class="commentdate_17690168_concise subText comment-created-date-link"><span class="date user-tz" title="17/Feb/23 06:07"><time class="livestamp" datetime="2023-02-17T06:07:29+0000">17/Feb/23 06:07</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1109339286  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception { 
+    String basePath = args [0] ; 
+    //TODO: Int for Big Endian 
+    //generateScheme(false, true, basePath); 
+ 
+    // Int for Little Endian 
+    generateScheme(false, false, basePath); 
+ 
+    //TODO: Long for Big Endian 
+    //generateScheme(true, true, basePath); 
+ 
+    //TODO: Long for Little Endian 
+    //generateScheme(true, false, basePath); 

 Review Comment: 
   @gszadovszky As far as I know, most JVM depends on Little Endian, I haven't see that JVM depends on Big Endian, So I only finished the code of Little Endian. "Long for Little Endian" affects on parquet page v2 version, I have finished the code, I will submit it to parquet-mr community after this PR.  
   Indeed, it has no side effects(can't benefit from Java Vector API) if we do not implement them,  


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17690170" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17690170_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17690170&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17690170" class="commentdate_17690170_verbose subText comment-created-date-link"><span class="date user-tz" title="17/Feb/23 06:16"><time class="livestamp" datetime="2023-02-17T06:16:15+0000">17/Feb/23 06:16</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1109345316" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1109345316</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   @gszadovszky avx512vbmi and avx512_vbmi2 are CPU Flags which contains some instruction set. The code of this PR  has used the instruction set. Without them, we cannot get benefit from Java Vector API.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17690170_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17690170&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17690170" class="commentdate_17690170_concise subText comment-created-date-link"><span class="date user-tz" title="17/Feb/23 06:16"><time class="livestamp" datetime="2023-02-17T06:16:15+0000">17/Feb/23 06:16</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1109345316  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   @gszadovszky avx512vbmi and avx512_vbmi2 are CPU Flags which contains some instruction set. The code of this PR  has used the instruction set. Without them, we cannot get benefit from Java Vector API. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17690176" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17690176_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17690176&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17690176" class="commentdate_17690176_verbose subText comment-created-date-link"><span class="date user-tz" title="17/Feb/23 06:48"><time class="livestamp" datetime="2023-02-17T06:48:13+0000">17/Feb/23 06:48</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1109362203" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1109362203</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */</p>

<p>Review Comment:<br>
   @gszadovszky  I have changed the comments.<br>
   Due to use Java Vector API, it needs rearrange/shuffle/lanewise operations, so it is very difficult to create automatically ByteBitPacking512VectorLE like other generators do. On the contrary,  It is relatively simple to code directly instead of generating.<br>
   I think more important is the finished code than how that code was generated. <br>
   Besides, the class is a plugin based on java17 to make it compatible with java8</p>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17690176_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17690176&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17690176" class="commentdate_17690176_concise subText comment-created-date-link"><span class="date user-tz" title="17/Feb/23 06:48"><time class="livestamp" datetime="2023-02-17T06:48:13+0000">17/Feb/23 06:48</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1109362203  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 

 Review Comment: 
   @gszadovszky  I have changed the comments. 
   Due to use Java Vector API, it needs rearrange/shuffle/lanewise operations, so it is very difficult to create automatically ByteBitPacking512VectorLE like other generators do. On the contrary,  It is relatively simple to code directly instead of generating. 
   I think more important is the finished code than how that code was generated.  
   Besides, the class is a plugin based on java17 to make it compatible with java8 



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17690182" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17690182_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17690182&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17690182" class="commentdate_17690182_verbose subText comment-created-date-link"><span class="date user-tz" title="17/Feb/23 06:57"><time class="livestamp" datetime="2023-02-17T06:57:04+0000">17/Feb/23 06:57</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1109367368" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1109367368</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   @gszadovszky I have added the maven profile named vector, when execute mvn clean package -P vector, the class will be run and reads ByteBitPacking512VectorLE file to generate ByteBitPacking512VectorLE.java</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17690182_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17690182&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17690182" class="commentdate_17690182_concise subText comment-created-date-link"><span class="date user-tz" title="17/Feb/23 06:57"><time class="livestamp" datetime="2023-02-17T06:57:04+0000">17/Feb/23 06:57</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1109367368  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   @gszadovszky I have added the maven profile named vector, when execute mvn clean package -P vector, the class will be run and reads ByteBitPacking512VectorLE file to generate ByteBitPacking512VectorLE.java 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17691538" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17691538_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17691538&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17691538" class="commentdate_17691538_verbose subText comment-created-date-link"><span class="date user-tz" title="21/Feb/23 11:47"><time class="livestamp" datetime="2023-02-21T11:47:38+0000">21/Feb/23 11:47</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1112946589" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1112946589</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   @jiangjiguang, I understand how it works. What I would have expected from the Vector API is to implement some help to check on the CPU flags.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17691538_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17691538&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17691538" class="commentdate_17691538_concise subText comment-created-date-link"><span class="date user-tz" title="21/Feb/23 11:47"><time class="livestamp" datetime="2023-02-21T11:47:38+0000">21/Feb/23 11:47</time></span></a>                    gszadovszky commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1112946589  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   @jiangjiguang, I understand how it works. What I would have expected from the Vector API is to implement some help to check on the CPU flags. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17691588" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17691588_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17691588&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17691588" class="commentdate_17691588_verbose subText comment-created-date-link"><span class="date user-tz" title="21/Feb/23 12:58"><time class="livestamp" datetime="2023-02-21T12:58:29+0000">21/Feb/23 12:58</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1113017123" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1113017123</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   So by generating this class simply copies the file form `resources` to a source dir under the name of `.java`. Why do we need code generation then?</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17691588_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17691588&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17691588" class="commentdate_17691588_concise subText comment-created-date-link"><span class="date user-tz" title="21/Feb/23 12:58"><time class="livestamp" datetime="2023-02-21T12:58:29+0000">21/Feb/23 12:58</time></span></a>                    gszadovszky commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1113017123  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   So by generating this class simply copies the file form `resources` to a source dir under the name of `.java`. Why do we need code generation then? 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17691589" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17691589_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17691589&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17691589" class="commentdate_17691589_verbose subText comment-created-date-link"><span class="date user-tz" title="21/Feb/23 13:00"><time class="livestamp" datetime="2023-02-21T13:00:19+0000">21/Feb/23 13:00</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1113018967" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1113018967</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception {<br>
+    String basePath = args<span class="error">[0]</span>;<br>
+    //TODO: Int for Big Endian<br>
+    //generateScheme(false, true, basePath);<br>
+<br>
+    // Int for Little Endian<br>
+    generateScheme(false, false, basePath);<br>
+<br>
+    //TODO: Long for Big Endian<br>
+    //generateScheme(true, true, basePath);<br>
+<br>
+    //TODO: Long for Little Endian<br>
+    //generateScheme(true, false, basePath);</p>

<p>Review Comment:<br>
   Let's clean up the TODOs in the next PR then. TODOs in the code in their own mean nothing. Nobody will pick them up to fix them. We either remove the TODOs or at least create a jira for them.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17691589_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17691589&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17691589" class="commentdate_17691589_concise subText comment-created-date-link"><span class="date user-tz" title="21/Feb/23 13:00"><time class="livestamp" datetime="2023-02-21T13:00:19+0000">21/Feb/23 13:00</time></span></a>                    gszadovszky commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1113018967  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception { 
+    String basePath = args [0] ; 
+    //TODO: Int for Big Endian 
+    //generateScheme(false, true, basePath); 
+ 
+    // Int for Little Endian 
+    generateScheme(false, false, basePath); 
+ 
+    //TODO: Long for Big Endian 
+    //generateScheme(true, true, basePath); 
+ 
+    //TODO: Long for Little Endian 
+    //generateScheme(true, false, basePath); 

 Review Comment: 
   Let's clean up the TODOs in the next PR then. TODOs in the code in their own mean nothing. Nobody will pick them up to fix them. We either remove the TODOs or at least create a jira for them. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17691590" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17691590_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17691590&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17691590" class="commentdate_17691590_verbose subText comment-created-date-link"><span class="date user-tz" title="21/Feb/23 13:01"><time class="livestamp" datetime="2023-02-21T13:01:15+0000">21/Feb/23 13:01</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1113019945" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1113019945</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */</p>

<p>Review Comment:<br>
   But if this code is written by hand (which is completely find) why don't we check it in instead of having the generator thing?</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17691590_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17691590&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17691590" class="commentdate_17691590_concise subText comment-created-date-link"><span class="date user-tz" title="21/Feb/23 13:01"><time class="livestamp" datetime="2023-02-21T13:01:15+0000">21/Feb/23 13:01</time></span></a>                    gszadovszky commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1113019945  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 

 Review Comment: 
   But if this code is written by hand (which is completely find) why don't we check it in instead of having the generator thing? 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692059" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692059_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692059&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692059" class="commentdate_17692059_verbose subText comment-created-date-link"><span class="date user-tz" title="22/Feb/23 09:34"><time class="livestamp" datetime="2023-02-22T09:34:37+0000">22/Feb/23 09:34</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1114063818" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1114063818</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   &gt; So by generating this class simply copies the file form `resources` to a source dir under the name of `.java`. Why do we need code generation then?</p>

<p>   I guess the reason is that it does not compile without java17.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692059_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692059&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692059" class="commentdate_17692059_concise subText comment-created-date-link"><span class="date user-tz" title="22/Feb/23 09:34"><time class="livestamp" datetime="2023-02-22T09:34:37+0000">22/Feb/23 09:34</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1114063818  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   &gt; So by generating this class simply copies the file form `resources` to a source dir under the name of `.java`. Why do we need code generation then? 

    I guess the reason is that it does not compile without java17. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692061" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692061_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692061&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692061" class="commentdate_17692061_verbose subText comment-created-date-link"><span class="date user-tz" title="22/Feb/23 09:35"><time class="livestamp" datetime="2023-02-22T09:35:32+0000">22/Feb/23 09:35</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1114064922" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1114064922</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   +1 for the request for official support to reduce maintenance burden.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692061_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692061&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692061" class="commentdate_17692061_concise subText comment-created-date-link"><span class="date user-tz" title="22/Feb/23 09:35"><time class="livestamp" datetime="2023-02-22T09:35:32+0000">22/Feb/23 09:35</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1114064922  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   +1 for the request for official support to reduce maintenance burden. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692131" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692131_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692131&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692131" class="commentdate_17692131_verbose subText comment-created-date-link"><span class="date user-tz" title="22/Feb/23 11:10"><time class="livestamp" datetime="2023-02-22T11:10:29+0000">22/Feb/23 11:10</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1114179342" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1114179342</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   I would suggest to have a separate source directory for java17 that gets "activated" only in case of the related profile is activated. This generator solution is misleading to me.</p>

<p>   To keep this part of code clean I would also suggest to include java17 and the related class compile/unit test execution in the github actions so they would be executed on the PRs. (The only difference remains is we won't ship these in our releases.)</p>

<p>   What do you think, @wgtmac, @jiangjiguang?</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692131_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692131&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692131" class="commentdate_17692131_concise subText comment-created-date-link"><span class="date user-tz" title="22/Feb/23 11:10"><time class="livestamp" datetime="2023-02-22T11:10:29+0000">22/Feb/23 11:10</time></span></a>                    gszadovszky commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1114179342  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   I would suggest to have a separate source directory for java17 that gets "activated" only in case of the related profile is activated. This generator solution is misleading to me. 

    To keep this part of code clean I would also suggest to include java17 and the related class compile/unit test execution in the github actions so they would be executed on the PRs. (The only difference remains is we won't ship these in our releases.) 

    What do you think, @wgtmac, @jiangjiguang? 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692151" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692151_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692151&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692151" class="commentdate_17692151_verbose subText comment-created-date-link"><span class="date user-tz" title="22/Feb/23 11:53"><time class="livestamp" datetime="2023-02-22T11:53:24+0000">22/Feb/23 11:53</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1114220877" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1114220877</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   +1 for @gszadovszky </p>

<p>   The core idea is to isolate the new feature as an individual unit and minimize the burden of future maintenance.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692151_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692151&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692151" class="commentdate_17692151_concise subText comment-created-date-link"><span class="date user-tz" title="22/Feb/23 11:53"><time class="livestamp" datetime="2023-02-22T11:53:24+0000">22/Feb/23 11:53</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1114220877  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   +1 for @gszadovszky  

    The core idea is to isolate the new feature as an individual unit and minimize the burden of future maintenance. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692425" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692425_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692425&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692425" class="commentdate_17692425_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 00:49"><time class="livestamp" datetime="2023-02-23T00:49:20+0000">23/Feb/23 00:49</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1115144554" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1115144554</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   @jatin-bhateja Can you help give an answer ? thanks</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692425_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692425&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692425" class="commentdate_17692425_concise subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 00:49"><time class="livestamp" datetime="2023-02-23T00:49:20+0000">23/Feb/23 00:49</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1115144554  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   @jatin-bhateja Can you help give an answer ? thanks 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692485" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692485_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692485&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692485" class="commentdate_17692485_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 04:40"><time class="livestamp" datetime="2023-02-23T04:40:42+0000">23/Feb/23 04:40</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jatin-bhateja commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1115229390" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1115229390</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   &gt; @jiangjiguang, I understand how it works. What I would have expected from the Vector API is to implement some help to check on the CPU flags.</p>

<p>   Hi @gszadovszky , vector APIs are just in time compiled into efficient instruction sequence, this instruction sequence can vary based on CPU features set of the target platform,  by introducing additional feature checks for vectorized unpacking we are trying to prevent any perf degradations over non-X86 platforms, over the time these features checks may be relaxed once we quantify the performance improvements on other targets.</p>

<p>   One can use JVM option -XX:+PrintIntrinsics to determine if  VectorAPI used in the source is intrinsified for a particular target. </p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692485_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692485&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692485" class="commentdate_17692485_concise subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 04:40"><time class="livestamp" datetime="2023-02-23T04:40:42+0000">23/Feb/23 04:40</time></span></a>                    jatin-bhateja commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1115229390  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   &gt; @jiangjiguang, I understand how it works. What I would have expected from the Vector API is to implement some help to check on the CPU flags. 

    Hi @gszadovszky , vector APIs are just in time compiled into efficient instruction sequence, this instruction sequence can vary based on CPU features set of the target platform,  by introducing additional feature checks for vectorized unpacking we are trying to prevent any perf degradations over non-X86 platforms, over the time these features checks may be relaxed once we quantify the performance improvements on other targets. 

    One can use JVM option -XX:+PrintIntrinsics to determine if  VectorAPI used in the source is intrinsified for a particular target.  


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692488" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692488_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692488&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692488" class="commentdate_17692488_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 04:42"><time class="livestamp" datetime="2023-02-23T04:42:28+0000">23/Feb/23 04:42</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jatin-bhateja commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1115229390" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1115229390</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   &gt; @jiangjiguang, I understand how it works. What I would have expected from the Vector API is to implement some help to check on the CPU flags.</p>

<p>   Hi @gszadovszky , vector APIs are just in time compiled into efficient instruction sequence, this instruction sequence can vary based on CPU features set of the target platform,  by introducing additional feature checks for vectorized unpacking we are trying to prevent any perf degradations over non-X86 platforms, over the time these features checks may be relaxed once we quantify the performance improvements on other targets.</p>

<p>   One can use JVM option -XX:+PrintIntrinsics to determine if  VectorAPIs used in the source is intrinsified for a particular target. </p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692488_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692488&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692488" class="commentdate_17692488_concise subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 04:42"><time class="livestamp" datetime="2023-02-23T04:42:28+0000">23/Feb/23 04:42</time></span></a>                    jatin-bhateja commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1115229390  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   &gt; @jiangjiguang, I understand how it works. What I would have expected from the Vector API is to implement some help to check on the CPU flags. 

    Hi @gszadovszky , vector APIs are just in time compiled into efficient instruction sequence, this instruction sequence can vary based on CPU features set of the target platform,  by introducing additional feature checks for vectorized unpacking we are trying to prevent any perf degradations over non-X86 platforms, over the time these features checks may be relaxed once we quantify the performance improvements on other targets. 

    One can use JVM option -XX:+PrintIntrinsics to determine if  VectorAPIs used in the source is intrinsified for a particular target.  


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692538" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692538_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692538&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692538" class="commentdate_17692538_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 07:34"><time class="livestamp" datetime="2023-02-23T07:34:23+0000">23/Feb/23 07:34</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1115317241" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1115317241</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   @gszadovszky @wgtmac  I add a new module named parquet-encoding-vector on directory plugins, the new module implements all code about Vector. I think it can keep code clean about java17 and  related class compile/unit test execution.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692538_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692538&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692538" class="commentdate_17692538_concise subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 07:34"><time class="livestamp" datetime="2023-02-23T07:34:23+0000">23/Feb/23 07:34</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1115317241  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   @gszadovszky @wgtmac  I add a new module named parquet-encoding-vector on directory plugins, the new module implements all code about Vector. I think it can keep code clean about java17 and  related class compile/unit test execution. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692545" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692545_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692545&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692545" class="commentdate_17692545_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 07:50"><time class="livestamp" datetime="2023-02-23T07:50:00+0000">23/Feb/23 07:50</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1115327777" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1115327777</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   @jatin-bhateja, thanks for the explanation. This is fine to check CPU flags. I was wondering, though if there is an existing 3rd party implementation to check things like that so we don't take the burden of maintaining this code.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692545_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692545&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692545" class="commentdate_17692545_concise subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 07:50"><time class="livestamp" datetime="2023-02-23T07:50:00+0000">23/Feb/23 07:50</time></span></a>                    gszadovszky commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1115327777  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   @jatin-bhateja, thanks for the explanation. This is fine to check CPU flags. I was wondering, though if there is an existing 3rd party implementation to check things like that so we don't take the burden of maintaining this code. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692597" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692597_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692597&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692597" class="commentdate_17692597_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 09:17"><time class="livestamp" datetime="2023-02-23T09:17:21+0000">23/Feb/23 09:17</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jatin-bhateja commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1115408615" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1115408615</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   &gt;  I was wondering, though if there is an existing 3rd party implementation to check things like that</p>

<p>   Hi @gszadovszky , Any implementation using VectorAPI will need some fine tuning since algorithm may not be performant if any API does not get intrinsified for a specified target.</p>

<p>   &gt;  burden of maintaining this code.</p>

<p>   I am not aware of any 3rd party java based library which vectorizes parquet-mr bit packing.  Intel has also contributed a VectorAPI base version of <span class="error">[PForR Java library]</span>(<a href="https://github.com/lemire/JavaFastPFOR/pull/51" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/lemire/JavaFastPFOR/pull/51</a>) which does integral bit packing which is other encoding scheme being used in parquet-mr but its a different format.</p>

<p>   !<span class="error">[PFOR_VS_PARQUET_FORMAT]</span>(<a href="https://user-images.githubusercontent.com/59989778/220858640-26c07f03-9415-4152-834e-1bc90f02c554.png" class="external-link" target="_blank" rel="nofollow noopener">https://user-images.githubusercontent.com/59989778/220858640-26c07f03-9415-4152-834e-1bc90f02c554.png</a>)</p>




 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692597_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692597&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692597" class="commentdate_17692597_concise subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 09:17"><time class="livestamp" datetime="2023-02-23T09:17:21+0000">23/Feb/23 09:17</time></span></a>                    jatin-bhateja commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1115408615  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   &gt;  I was wondering, though if there is an existing 3rd party implementation to check things like that 

    Hi @gszadovszky , Any implementation using VectorAPI will need some fine tuning since algorithm may not be performant if any API does not get intrinsified for a specified target. 

    &gt;  burden of maintaining this code. 

    I am not aware of any 3rd party java based library which vectorizes parquet-mr bit packing.  Intel has also contributed a VectorAPI base version of  [PForR Java library] ( https://github.com/lemire/JavaFastPFOR/pull/51 ) which does integral bit packing which is other encoding scheme being used in parquet-mr but its a different format. 

    ! [PFOR_VS_PARQUET_FORMAT] ( https://user-images.githubusercontent.com/59989778/220858640-26c07f03-9415-4152-834e-1bc90f02c554.png ) 




             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692604" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692604_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692604&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692604" class="commentdate_17692604_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 09:36"><time class="livestamp" datetime="2023-02-23T09:36:28+0000">23/Feb/23 09:36</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1115429762" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1115429762</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   Sorry, @jatin-bhateja, I was misleading. I was talking about this very code about checking the CPU flags not the whole vectorization. I accept we need to check the CPU flags. I only think that the way we are doing is quite low level. It might be implemented already by a 3rd party that might support other OS etc.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692604_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692604&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692604" class="commentdate_17692604_concise subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 09:36"><time class="livestamp" datetime="2023-02-23T09:36:28+0000">23/Feb/23 09:36</time></span></a>                    gszadovszky commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1115429762  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   Sorry, @jatin-bhateja, I was misleading. I was talking about this very code about checking the CPU flags not the whole vectorization. I accept we need to check the CPU flags. I only think that the way we are doing is quite low level. It might be implemented already by a 3rd party that might support other OS etc. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692606" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692606_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692606&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692606" class="commentdate_17692606_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 09:41"><time class="livestamp" datetime="2023-02-23T09:41:28+0000">23/Feb/23 09:41</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jatin-bhateja commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1115435366" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1115435366</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   @jiangjiguang , can you please respond to @gszadovszky  query.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692606_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692606&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692606" class="commentdate_17692606_concise subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 09:41"><time class="livestamp" datetime="2023-02-23T09:41:28+0000">23/Feb/23 09:41</time></span></a>                    jatin-bhateja commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1115435366  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   @jiangjiguang , can you please respond to @gszadovszky  query. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692614" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692614_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692614&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692614" class="commentdate_17692614_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 10:14"><time class="livestamp" datetime="2023-02-23T10:14:51+0000">23/Feb/23 10:14</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1115471862" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1115471862</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   @gszadovszky Even though the java vector API can check the CPU Flags(low level check), but if users use java vector api on computer which dose not contain avx512vbmi &amp;&amp; avx512_vbmi2, the java vector API how to do ?  throw exception?  fall back ?  </p>

<p>   Besides,  the CPU Flags are becoming more and more,  and  Java vector api is also increasing. maybe Java vector api dose not know which CPU Flags  the users need. <br>
   I think  users should have already known their computer(including CPU Flags). They can decide whether to  enable parquet java17 vector optimization. </p>

<p>   For example, velox(<a href="https://github.com/facebookincubator/velox" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/facebookincubator/velox</a>) shows only what CPU Flags needed.<br>
   &lt;img width="1085" alt="image" src="https://user-images.githubusercontent.com/12368495/220878686-53b6eec5-89e9-4958-8802-ff5fd97076bd.png"&gt;</p>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692614_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692614&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692614" class="commentdate_17692614_concise subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 10:14"><time class="livestamp" datetime="2023-02-23T10:14:51+0000">23/Feb/23 10:14</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1115471862  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   @gszadovszky Even though the java vector API can check the CPU Flags(low level check), but if users use java vector api on computer which dose not contain avx512vbmi &amp;&amp; avx512_vbmi2, the java vector API how to do ?  throw exception?  fall back ?   

    Besides,  the CPU Flags are becoming more and more,  and  Java vector api is also increasing. maybe Java vector api dose not know which CPU Flags  the users need.  
   I think  users should have already known their computer(including CPU Flags). They can decide whether to  enable parquet java17 vector optimization.  

    For example, velox( https://github.com/facebookincubator/velox ) shows only what CPU Flags needed. 
   &lt;img width="1085" alt="image" src="https://user-images.githubusercontent.com/12368495/220878686-53b6eec5-89e9-4958-8802-ff5fd97076bd.png"&gt; 



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692616" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692616_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692616&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692616" class="commentdate_17692616_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 10:17"><time class="livestamp" datetime="2023-02-23T10:17:26+0000">23/Feb/23 10:17</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1115471862" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1115471862</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   @gszadovszky Even though the java vector API can check the CPU Flags(low level check), but if users use java vector api on computer which dose not contain avx512vbmi &amp;&amp; avx512_vbmi2, the java vector API how to do ?  throw exception?  fall back ?  </p>

<p>   Besides,  the CPU Flags are becoming more and more,  and  Java vector api is also increasing. maybe Java vector api dose not know which CPU Flags  the users need. <br>
   I think  users should have already known their computer(including CPU Flags). They can decide whether to  enable parquet java17 vector optimization. We only need show what CPU Flags needed in README.md</p>

<p>   For example, velox(<a href="https://github.com/facebookincubator/velox" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/facebookincubator/velox</a>) shows only what CPU Flags needed.<br>
   !<span class="error">[image]</span>(<a href="https://user-images.githubusercontent.com/12368495/220878861-a760cea7-1c67-46a3-8700-1e4ce9ee8224.png" class="external-link" target="_blank" rel="nofollow noopener">https://user-images.githubusercontent.com/12368495/220878861-a760cea7-1c67-46a3-8700-1e4ce9ee8224.png</a>)</p>




 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692616_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692616&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692616" class="commentdate_17692616_concise subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 10:17"><time class="livestamp" datetime="2023-02-23T10:17:26+0000">23/Feb/23 10:17</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1115471862  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   @gszadovszky Even though the java vector API can check the CPU Flags(low level check), but if users use java vector api on computer which dose not contain avx512vbmi &amp;&amp; avx512_vbmi2, the java vector API how to do ?  throw exception?  fall back ?   

    Besides,  the CPU Flags are becoming more and more,  and  Java vector api is also increasing. maybe Java vector api dose not know which CPU Flags  the users need.  
   I think  users should have already known their computer(including CPU Flags). They can decide whether to  enable parquet java17 vector optimization. We only need show what CPU Flags needed in README.md 

    For example, velox( https://github.com/facebookincubator/velox ) shows only what CPU Flags needed. 
   ! [image] ( https://user-images.githubusercontent.com/12368495/220878861-a760cea7-1c67-46a3-8700-1e4ce9ee8224.png ) 




             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692642" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692642_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692642&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692642" class="commentdate_17692642_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 12:13"><time class="livestamp" datetime="2023-02-23T12:13:46+0000">23/Feb/23 12:13</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1115317241" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1115317241</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   @gszadovszky @wgtmac  I add a new module named parquet-encoding-vector on directory plugins, the new module implements all code about Vector. I think it can keep code clean about java17 and  related class compile/unit test execution</p>

<p>   Let name "the new module" option2, and  "the code I realized before" option1:<br>
   option2's features are:<br>
   1、the vector code is isolate, an individual unit and minimize the burden of future maintenance.<br>
   2、users have to add manully &lt;module&gt;plugins/parquet-encoding-vector&lt;/module&gt; in parent pom.xml to enable java17 vector optimization</p>

<p>   option1's features are:<br>
   1、the vector code is not isolate<br>
   2、users have to maven parameters -P java17-target -P vector on command Line to enable java17 vector optimization</p>

<p>   I think option2 is better </p>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692642_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692642&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692642" class="commentdate_17692642_concise subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 12:13"><time class="livestamp" datetime="2023-02-23T12:13:46+0000">23/Feb/23 12:13</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1115317241  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   @gszadovszky @wgtmac  I add a new module named parquet-encoding-vector on directory plugins, the new module implements all code about Vector. I think it can keep code clean about java17 and  related class compile/unit test execution 

    Let name "the new module" option2, and  "the code I realized before" option1: 
   option2's features are: 
   1、the vector code is isolate, an individual unit and minimize the burden of future maintenance. 
   2、users have to add manully &lt;module&gt;plugins/parquet-encoding-vector&lt;/module&gt; in parent pom.xml to enable java17 vector optimization 

    option1's features are: 
   1、the vector code is not isolate 
   2、users have to maven parameters -P java17-target -P vector on command Line to enable java17 vector optimization 

    I think option2 is better  



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692644" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692644_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692644&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692644" class="commentdate_17692644_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 12:22"><time class="livestamp" datetime="2023-02-23T12:22:02+0000">23/Feb/23 12:22</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1115317241" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1115317241</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   @gszadovszky @wgtmac  I add a new module named parquet-encoding-vector on directory plugins, the new module implements all code about Vector. I think it can keep code clean about java17 and  related class compile/unit test execution</p>

<p>   Let name currently code "the new module" option2, and  "the code I realized before" option1:<br>
   option2's features are:<br>
   1、the vector code is isolate, an individual unit and minimize the burden of future maintenance.<br>
   2、users have to add manully &lt;module&gt;plugins/parquet-encoding-vector&lt;/module&gt; in parent pom.xml to enable java17 vector optimization</p>

<p>   option1's features are:<br>
   1、the vector code is not isolate<br>
   2、users have to maven parameters -P java17-target -P vector on command Line to enable java17 vector optimization</p>

<p>   I think option2 is better </p>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692644_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692644&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692644" class="commentdate_17692644_concise subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 12:22"><time class="livestamp" datetime="2023-02-23T12:22:02+0000">23/Feb/23 12:22</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1115317241  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   @gszadovszky @wgtmac  I add a new module named parquet-encoding-vector on directory plugins, the new module implements all code about Vector. I think it can keep code clean about java17 and  related class compile/unit test execution 

    Let name currently code "the new module" option2, and  "the code I realized before" option1: 
   option2's features are: 
   1、the vector code is isolate, an individual unit and minimize the burden of future maintenance. 
   2、users have to add manully &lt;module&gt;plugins/parquet-encoding-vector&lt;/module&gt; in parent pom.xml to enable java17 vector optimization 

    option1's features are: 
   1、the vector code is not isolate 
   2、users have to maven parameters -P java17-target -P vector on command Line to enable java17 vector optimization 

    I think option2 is better  



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692819" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692819_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692819&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692819" class="commentdate_17692819_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 18:05"><time class="livestamp" datetime="2023-02-23T18:05:45+0000">23/Feb/23 18:05</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jatin-bhateja commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1115408615" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1115408615</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   &gt;  I was wondering, though if there is an existing 3rd party implementation to check things like that</p>

<p>   Hi @gszadovszky , Any implementation using VectorAPI will need some fine tuning since algorithm may not be performant if any API does not get intrinsified for a specified target.</p>

<p>   &gt;  burden of maintaining this code.</p>

<p>   I am not aware of any 3rd party java based library which vectorizes parquet-mr bit packing.  Intel has also contributed a VectorAPI based version of <span class="error">[PForR Java library]</span>(<a href="https://github.com/lemire/JavaFastPFOR/pull/51" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/lemire/JavaFastPFOR/pull/51</a>) which does integral bit packing which is other encoding scheme being used in parquet-mr but its a different format.</p>

<p>   !<span class="error">[PFOR_VS_PARQUET_FORMAT]</span>(<a href="https://user-images.githubusercontent.com/59989778/220858640-26c07f03-9415-4152-834e-1bc90f02c554.png" class="external-link" target="_blank" rel="nofollow noopener">https://user-images.githubusercontent.com/59989778/220858640-26c07f03-9415-4152-834e-1bc90f02c554.png</a>)</p>




 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692819_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692819&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692819" class="commentdate_17692819_concise subText comment-created-date-link"><span class="date user-tz" title="23/Feb/23 18:05"><time class="livestamp" datetime="2023-02-23T18:05:45+0000">23/Feb/23 18:05</time></span></a>                    jatin-bhateja commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1115408615  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   &gt;  I was wondering, though if there is an existing 3rd party implementation to check things like that 

    Hi @gszadovszky , Any implementation using VectorAPI will need some fine tuning since algorithm may not be performant if any API does not get intrinsified for a specified target. 

    &gt;  burden of maintaining this code. 

    I am not aware of any 3rd party java based library which vectorizes parquet-mr bit packing.  Intel has also contributed a VectorAPI based version of  [PForR Java library] ( https://github.com/lemire/JavaFastPFOR/pull/51 ) which does integral bit packing which is other encoding scheme being used in parquet-mr but its a different format. 

    ! [PFOR_VS_PARQUET_FORMAT] ( https://user-images.githubusercontent.com/59989778/220858640-26c07f03-9415-4152-834e-1bc90f02c554.png ) 




             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692968" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692968_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692968&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692968" class="commentdate_17692968_verbose subText comment-created-date-link"><span class="date user-tz" title="24/Feb/23 01:59"><time class="livestamp" datetime="2023-02-24T01:59:50+0000">24/Feb/23 01:59</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1116420531" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1116420531</a></p>


<p>##########<br>
pom.xml:<br>
##########<br>
@@ -151,6 +151,9 @@<br>
     &lt;module&gt;parquet-scala&lt;/module&gt;<br>
     &lt;module&gt;parquet-thrift&lt;/module&gt;<br>
     &lt;module&gt;parquet-hadoop-bundle&lt;/module&gt;<br>
+    &lt;!--<br>
+    &lt;module&gt;plugins/parquet-encoding-vector&lt;/module&gt;</p>

<p>Review Comment:<br>
   This means user has to remove the comment to enable it which seems not very friendly. We can use `&lt;profile&gt;` to enable module optionally.</p>



<p>##########<br>
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/Packer.java:<br>
##########<br>
@@ -86,6 +105,7 @@ private static Object getStaticField(String className, String fieldName) {<br>
   static IntPackerFactory leIntPackerFactory = getIntPackerFactory("LemireBitPackingLE");<br>
   static BytePackerFactory beBytePackerFactory = getBytePackerFactory("ByteBitPackingBE");<br>
   static BytePackerFactory leBytePackerFactory = getBytePackerFactory("ByteBitPackingLE");<br>
+  static BytePackerFactory leBytePacker512VectorFactory = null;</p>

<p>Review Comment:<br>
   Please add a comment to explain leBytePacker512VectorFactory will be initialized lazily.</p>



<p>##########<br>
plugins/parquet-encoding-vector/pom.xml:<br>
##########<br>
@@ -0,0 +1,131 @@<br>
+&lt;!--<br>
+  ~ Licensed to the Apache Software Foundation (ASF) under one<br>
+  ~ or more contributor license agreements.  See the NOTICE file<br>
+  ~ distributed with this work for additional information<br>
+  ~ regarding copyright ownership.  The ASF licenses this file<br>
+  ~ to you under the Apache License, Version 2.0 (the<br>
+  ~ "License"); you may not use this file except in compliance<br>
+  ~ with the License.  You may obtain a copy of the License at<br>
+  ~<br>
+  ~   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+  ~<br>
+  ~ Unless required by applicable law or agreed to in writing,<br>
+  ~ software distributed under the License is distributed on an<br>
+  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+  ~ KIND, either express or implied.  See the License for the<br>
+  ~ specific language governing permissions and limitations<br>
+  ~ under the License.<br>
+  --&gt;<br>
+&lt;project xmlns="http://maven.apache.org/POM/4.0.0"<br>
+         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br>
+         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 <a href="http://maven.apache.org/xsd/maven-4.0.0.xsd" class="external-link" target="_blank" rel="nofollow noopener">http://maven.apache.org/xsd/maven-4.0.0.xsd</a>"&gt;<br>
+  &lt;parent&gt;<br>
+    &lt;groupId&gt;org.apache.parquet&lt;/groupId&gt;<br>
+    &lt;artifactId&gt;parquet&lt;/artifactId&gt;<br>
+    &lt;version&gt;1.13.0-SNAPSHOT&lt;/version&gt;<br>
+    &lt;relativePath&gt;../../pom.xml&lt;/relativePath&gt;<br>
+  &lt;/parent&gt;<br>
+<br>
+  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;<br>
+<br>
+  &lt;artifactId&gt;parquet-encoding-vector&lt;/artifactId&gt;<br>
+  &lt;packaging&gt;jar&lt;/packaging&gt;<br>
+<br>
+  &lt;name&gt;Apache Parquet Encodings Vector&lt;/name&gt;<br>
+  &lt;url&gt;<a href="https://parquet.apache.org/" class="external-link" target="_blank" rel="nofollow noopener">https://parquet.apache.org</a>&lt;/url&gt;<br>
+<br>
+  &lt;properties&gt;<br>
+    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;</p>

<p>Review Comment:<br>
   If we add a new profile in the root pom file, then we can set compiler version there and avoid hardcode here.</p>



<p>##########<br>
README.md:<br>
##########<br>
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here</p>
<ul>
	<li>Column stats</li>
	<li>Delta encoding</li>
	<li>Index pages<br>
+* Java Vector API support<br>
+<br>
+## Java Vector API support<br>
+Parquet-MR has supported Java Vector API to speed up reading, to enable the function:<br>
<ins>* Java 17</ins>, 64-bit<br>
+* For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains(ICE Lake or newer processor).<br>
+* mvn clean package -P java17-target -P vector</li>
</ul>


<p>Review Comment:<br>
   Please update the document to reflect the latest change.</p>



<p>##########<br>
parquet-benchmarks/src/main/java/org/apache/parquet/benchmarks/ByteBitPackingVectorBenchmarks.java:<br>
##########<br>
@@ -0,0 +1,92 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.benchmarks;<br>
+<br>
+import org.apache.parquet.column.values.bitpacking.BytePacker;<br>
+import org.apache.parquet.column.values.bitpacking.Packer;<br>
+import org.openjdk.jmh.annotations.Benchmark;<br>
+import org.openjdk.jmh.annotations.BenchmarkMode;<br>
+import org.openjdk.jmh.annotations.Level;<br>
+import org.openjdk.jmh.annotations.Measurement;<br>
+import org.openjdk.jmh.annotations.Mode;<br>
+import org.openjdk.jmh.annotations.OutputTimeUnit;<br>
+import org.openjdk.jmh.annotations.Scope;<br>
+import org.openjdk.jmh.annotations.Setup;<br>
+import org.openjdk.jmh.annotations.State;<br>
+import org.openjdk.jmh.annotations.Warmup;<br>
+<br>
+import java.util.concurrent.TimeUnit;<br>
+<br>
+/**<br>
+ * This class uses the java17 vector API, add VM options --add-modules=jdk.incubator.vector<br>
+ */<br>
+<br>
+@State(Scope.Benchmark)<br>
+@BenchmarkMode(Mode.AverageTime)<br>
+@Warmup(iterations = 1, batchSize = 100000)<br>
+@Measurement(iterations = 1, batchSize = 100000)<br>
+@OutputTimeUnit(TimeUnit.MILLISECONDS)<br>
+public class ByteBitPackingVectorBenchmarks {</p>

<p>Review Comment:<br>
   If the parquet-encoding-vector does not build, what will happen to this file? Does it fail?</p>



<p>##########<br>
plugins/parquet-encoding-vector/src/main/java/org/apache/parquet/column/values/bitpacking/ByteBitPacking512VectorLE.java:<br>
##########<br>
@@ -0,0 +1,3010 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.ByteVector;<br>
+import jdk.incubator.vector.IntVector;<br>
+import jdk.incubator.vector.LongVector;<br>
+import jdk.incubator.vector.ShortVector;<br>
+import jdk.incubator.vector.Vector;<br>
+import jdk.incubator.vector.VectorMask;<br>
+import jdk.incubator.vector.VectorOperators;<br>
+import jdk.incubator.vector.VectorShuffle;<br>
+import jdk.incubator.vector.VectorSpecies;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ *</p>

<p>Review Comment:<br>
   Remove it or add something?</p>



<p>##########<br>
plugins/parquet-encoding-vector/src/main/java/org/apache/parquet/column/values/bitpacking/VectorSupport.java:<br>
##########<br>
@@ -0,0 +1,27 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+/**<br>
+ * Vector bits which has be supported</p>

<p>Review Comment:<br>
   ```suggestion</p>
<ul>
	<li>Supported bit widths to use Vector API.<br>
   ```</li>
</ul>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692968_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692968&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692968" class="commentdate_17692968_concise subText comment-created-date-link"><span class="date user-tz" title="24/Feb/23 01:59"><time class="livestamp" datetime="2023-02-24T01:59:50+0000">24/Feb/23 01:59</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1116420531  


 ########## 
pom.xml: 
########## 
@@ -151,6 +151,9 @@ 
     &lt;module&gt;parquet-scala&lt;/module&gt; 
     &lt;module&gt;parquet-thrift&lt;/module&gt; 
     &lt;module&gt;parquet-hadoop-bundle&lt;/module&gt; 
+    &lt;!-- 
+    &lt;module&gt;plugins/parquet-encoding-vector&lt;/module&gt; 

 Review Comment: 
   This means user has to remove the comment to enable it which seems not very friendly. We can use `&lt;profile&gt;` to enable module optionally. 



 ########## 
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/Packer.java: 
########## 
@@ -86,6 +105,7 @@ private static Object getStaticField(String className, String fieldName) { 
   static IntPackerFactory leIntPackerFactory = getIntPackerFactory("LemireBitPackingLE"); 
   static BytePackerFactory beBytePackerFactory = getBytePackerFactory("ByteBitPackingBE"); 
   static BytePackerFactory leBytePackerFactory = getBytePackerFactory("ByteBitPackingLE"); 
+  static BytePackerFactory leBytePacker512VectorFactory = null; 

 Review Comment: 
   Please add a comment to explain leBytePacker512VectorFactory will be initialized lazily. 



 ########## 
plugins/parquet-encoding-vector/pom.xml: 
########## 
@@ -0,0 +1,131 @@ 
+&lt;!-- 
+  ~ Licensed to the Apache Software Foundation (ASF) under one 
+  ~ or more contributor license agreements.  See the NOTICE file 
+  ~ distributed with this work for additional information 
+  ~ regarding copyright ownership.  The ASF licenses this file 
+  ~ to you under the Apache License, Version 2.0 (the 
+  ~ "License"); you may not use this file except in compliance 
+  ~ with the License.  You may obtain a copy of the License at 
+  ~ 
+  ~    http://www.apache.org/licenses/LICENSE-2.0  
+  ~ 
+  ~ Unless required by applicable law or agreed to in writing, 
+  ~ software distributed under the License is distributed on an 
+  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+  ~ KIND, either express or implied.  See the License for the 
+  ~ specific language governing permissions and limitations 
+  ~ under the License. 
+  --&gt; 
+&lt;project xmlns="http://maven.apache.org/POM/4.0.0" 
+         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
+         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0  http://maven.apache.org/xsd/maven-4.0.0.xsd "&gt; 
+  &lt;parent&gt; 
+    &lt;groupId&gt;org.apache.parquet&lt;/groupId&gt; 
+    &lt;artifactId&gt;parquet&lt;/artifactId&gt; 
+    &lt;version&gt;1.13.0-SNAPSHOT&lt;/version&gt; 
+    &lt;relativePath&gt;../../pom.xml&lt;/relativePath&gt; 
+  &lt;/parent&gt; 
+ 
+  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; 
+ 
+  &lt;artifactId&gt;parquet-encoding-vector&lt;/artifactId&gt; 
+  &lt;packaging&gt;jar&lt;/packaging&gt; 
+ 
+  &lt;name&gt;Apache Parquet Encodings Vector&lt;/name&gt; 
+  &lt;url&gt; https://parquet.apache.org &lt;/url&gt; 
+ 
+  &lt;properties&gt; 
+    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt; 

 Review Comment: 
   If we add a new profile in the root pom file, then we can set compiler version there and avoid hardcode here. 



 ########## 
README.md: 
########## 
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here 
 
	 Column stats 
	 Delta encoding 
	 Index pages 
+* Java Vector API support 
+ 
+## Java Vector API support 
+Parquet-MR has supported Java Vector API to speed up reading, to enable the function: 
 * Java 17 , 64-bit 
+* For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains(ICE Lake or newer processor). 
+* mvn clean package -P java17-target -P vector 
 


 Review Comment: 
   Please update the document to reflect the latest change. 



 ########## 
parquet-benchmarks/src/main/java/org/apache/parquet/benchmarks/ByteBitPackingVectorBenchmarks.java: 
########## 
@@ -0,0 +1,92 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.benchmarks; 
+ 
+import org.apache.parquet.column.values.bitpacking.BytePacker; 
+import org.apache.parquet.column.values.bitpacking.Packer; 
+import org.openjdk.jmh.annotations.Benchmark; 
+import org.openjdk.jmh.annotations.BenchmarkMode; 
+import org.openjdk.jmh.annotations.Level; 
+import org.openjdk.jmh.annotations.Measurement; 
+import org.openjdk.jmh.annotations.Mode; 
+import org.openjdk.jmh.annotations.OutputTimeUnit; 
+import org.openjdk.jmh.annotations.Scope; 
+import org.openjdk.jmh.annotations.Setup; 
+import org.openjdk.jmh.annotations.State; 
+import org.openjdk.jmh.annotations.Warmup; 
+ 
+import java.util.concurrent.TimeUnit; 
+ 
+/** 
+ * This class uses the java17 vector API, add VM options --add-modules=jdk.incubator.vector 
+ */ 
+ 
+@State(Scope.Benchmark) 
+@BenchmarkMode(Mode.AverageTime) 
+@Warmup(iterations = 1, batchSize = 100000) 
+@Measurement(iterations = 1, batchSize = 100000) 
+@OutputTimeUnit(TimeUnit.MILLISECONDS) 
+public class ByteBitPackingVectorBenchmarks { 

 Review Comment: 
   If the parquet-encoding-vector does not build, what will happen to this file? Does it fail? 



 ########## 
plugins/parquet-encoding-vector/src/main/java/org/apache/parquet/column/values/bitpacking/ByteBitPacking512VectorLE.java: 
########## 
@@ -0,0 +1,3010 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.ByteVector; 
+import jdk.incubator.vector.IntVector; 
+import jdk.incubator.vector.LongVector; 
+import jdk.incubator.vector.ShortVector; 
+import jdk.incubator.vector.Vector; 
+import jdk.incubator.vector.VectorMask; 
+import jdk.incubator.vector.VectorOperators; 
+import jdk.incubator.vector.VectorShuffle; 
+import jdk.incubator.vector.VectorSpecies; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * 

 Review Comment: 
   Remove it or add something? 



 ########## 
plugins/parquet-encoding-vector/src/main/java/org/apache/parquet/column/values/bitpacking/VectorSupport.java: 
########## 
@@ -0,0 +1,27 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+/** 
+ * Vector bits which has be supported 

 Review Comment: 
   ```suggestion 
 
	 Supported bit widths to use Vector API. 
   ``` 
 



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17692970" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692970_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692970&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692970" class="commentdate_17692970_verbose subText comment-created-date-link"><span class="date user-tz" title="24/Feb/23 02:03"><time class="livestamp" datetime="2023-02-24T02:03:25+0000">24/Feb/23 02:03</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1116427502" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1116427502</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   +1 for the option 2. But why not enable it by a new profile?</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17692970_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17692970&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17692970" class="commentdate_17692970_concise subText comment-created-date-link"><span class="date user-tz" title="24/Feb/23 02:03"><time class="livestamp" datetime="2023-02-24T02:03:25+0000">24/Feb/23 02:03</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1116427502  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   +1 for the option 2. But why not enable it by a new profile? 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17693084" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693084_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693084&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693084" class="commentdate_17693084_verbose subText comment-created-date-link"><span class="date user-tz" title="24/Feb/23 08:59"><time class="livestamp" datetime="2023-02-24T08:59:55+0000">24/Feb/23 08:59</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1116689274" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1116689274</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   I agree with @wgtmac. Option 2 with maven profile support seems the best way to go.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693084_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693084&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693084" class="commentdate_17693084_concise subText comment-created-date-link"><span class="date user-tz" title="24/Feb/23 08:59"><time class="livestamp" datetime="2023-02-24T08:59:55+0000">24/Feb/23 08:59</time></span></a>                    gszadovszky commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1116689274  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   I agree with @wgtmac. Option 2 with maven profile support seems the best way to go. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17693087" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693087_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693087&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693087" class="commentdate_17693087_verbose subText comment-created-date-link"><span class="date user-tz" title="24/Feb/23 09:05"><time class="livestamp" datetime="2023-02-24T09:05:19+0000">24/Feb/23 09:05</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1116694655" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1116694655</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   @jiangjiguang, I understand and do accept to check the CPU flags here. My concern is only about the actual implementation that we are reading `/proc/cpuinfo` directly. If there is a 3rd party library that implements the extraction of the CPU flags in a nicer way (platform independent etc.) it would be better to use it. If there is no such library available for java then I am fine going forward with this approach.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693087_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693087&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693087" class="commentdate_17693087_concise subText comment-created-date-link"><span class="date user-tz" title="24/Feb/23 09:05"><time class="livestamp" datetime="2023-02-24T09:05:19+0000">24/Feb/23 09:05</time></span></a>                    gszadovszky commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1116694655  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   @jiangjiguang, I understand and do accept to check the CPU flags here. My concern is only about the actual implementation that we are reading `/proc/cpuinfo` directly. If there is a 3rd party library that implements the extraction of the CPU flags in a nicer way (platform independent etc.) it would be better to use it. If there is no such library available for java then I am fine going forward with this approach. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17693626" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693626_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693626&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693626" class="commentdate_17693626_verbose subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 11:46"><time class="livestamp" datetime="2023-02-26T11:46:10+0000">26/Feb/23 11:46</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1118069968" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1118069968</a></p>


<p>##########<br>
README.md:<br>
##########<br>
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here</p>
<ul>
	<li>Column stats</li>
	<li>Delta encoding</li>
	<li>Index pages<br>
+* Java Vector API support<br>
+<br>
+## Java Vector API support<br>
+Parquet-MR has supported Java Vector API to speed up reading, to enable the function:<br>
<ins>* Java 17</ins>, 64-bit<br>
+* For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains(ICE Lake or newer processor).<br>
+* mvn clean package -P java17-target -P vector</li>
</ul>


<p>Review Comment:<br>
   I have updated the document</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693626_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693626&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693626" class="commentdate_17693626_concise subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 11:46"><time class="livestamp" datetime="2023-02-26T11:46:10+0000">26/Feb/23 11:46</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1118069968  


 ########## 
README.md: 
########## 
@@ -83,6 +83,16 @@ Parquet is a very active project, and new features are being added quickly. Here 
 
	 Column stats 
	 Delta encoding 
	 Index pages 
+* Java Vector API support 
+ 
+## Java Vector API support 
+Parquet-MR has supported Java Vector API to speed up reading, to enable the function: 
 * Java 17 , 64-bit 
+* For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains(ICE Lake or newer processor). 
+* mvn clean package -P java17-target -P vector 
 


 Review Comment: 
   I have updated the document 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17693627" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693627_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693627&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693627" class="commentdate_17693627_verbose subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 11:46"><time class="livestamp" datetime="2023-02-26T11:46:35+0000">26/Feb/23 11:46</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1118070050" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1118070050</a></p>


<p>##########<br>
plugins/parquet-encoding-vector/src/main/java/org/apache/parquet/column/values/bitpacking/ByteBitPacking512VectorLE.java:<br>
##########<br>
@@ -0,0 +1,3010 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import jdk.incubator.vector.ByteVector;<br>
+import jdk.incubator.vector.IntVector;<br>
+import jdk.incubator.vector.LongVector;<br>
+import jdk.incubator.vector.ShortVector;<br>
+import jdk.incubator.vector.Vector;<br>
+import jdk.incubator.vector.VectorMask;<br>
+import jdk.incubator.vector.VectorOperators;<br>
+import jdk.incubator.vector.VectorShuffle;<br>
+import jdk.incubator.vector.VectorSpecies;<br>
+<br>
+import java.nio.ByteBuffer;<br>
+<br>
+/**<br>
+ *</p>

<p>Review Comment:<br>
   I have added comments</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693627_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693627&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693627" class="commentdate_17693627_concise subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 11:46"><time class="livestamp" datetime="2023-02-26T11:46:35+0000">26/Feb/23 11:46</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1118070050  


 ########## 
plugins/parquet-encoding-vector/src/main/java/org/apache/parquet/column/values/bitpacking/ByteBitPacking512VectorLE.java: 
########## 
@@ -0,0 +1,3010 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import jdk.incubator.vector.ByteVector; 
+import jdk.incubator.vector.IntVector; 
+import jdk.incubator.vector.LongVector; 
+import jdk.incubator.vector.ShortVector; 
+import jdk.incubator.vector.Vector; 
+import jdk.incubator.vector.VectorMask; 
+import jdk.incubator.vector.VectorOperators; 
+import jdk.incubator.vector.VectorShuffle; 
+import jdk.incubator.vector.VectorSpecies; 
+ 
+import java.nio.ByteBuffer; 
+ 
+/** 
+ * 

 Review Comment: 
   I have added comments 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17693628" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693628_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693628&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693628" class="commentdate_17693628_verbose subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 11:47"><time class="livestamp" datetime="2023-02-26T11:47:20+0000">26/Feb/23 11:47</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1118070147" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1118070147</a></p>


<p>##########<br>
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/Packer.java:<br>
##########<br>
@@ -86,6 +105,7 @@ private static Object getStaticField(String className, String fieldName) {<br>
   static IntPackerFactory leIntPackerFactory = getIntPackerFactory("LemireBitPackingLE");<br>
   static BytePackerFactory beBytePackerFactory = getBytePackerFactory("ByteBitPackingBE");<br>
   static BytePackerFactory leBytePackerFactory = getBytePackerFactory("ByteBitPackingLE");<br>
+  static BytePackerFactory leBytePacker512VectorFactory = null;</p>

<p>Review Comment:<br>
   I have added some comments</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693628_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693628&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693628" class="commentdate_17693628_concise subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 11:47"><time class="livestamp" datetime="2023-02-26T11:47:20+0000">26/Feb/23 11:47</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1118070147  


 ########## 
parquet-encoding/src/main/java/org/apache/parquet/column/values/bitpacking/Packer.java: 
########## 
@@ -86,6 +105,7 @@ private static Object getStaticField(String className, String fieldName) { 
   static IntPackerFactory leIntPackerFactory = getIntPackerFactory("LemireBitPackingLE"); 
   static BytePackerFactory beBytePackerFactory = getBytePackerFactory("ByteBitPackingBE"); 
   static BytePackerFactory leBytePackerFactory = getBytePackerFactory("ByteBitPackingLE"); 
+  static BytePackerFactory leBytePacker512VectorFactory = null; 

 Review Comment: 
   I have added some comments 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17693630" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693630_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693630&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693630" class="commentdate_17693630_verbose subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 11:53"><time class="livestamp" datetime="2023-02-26T11:53:36+0000">26/Feb/23 11:53</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1118070969" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1118070969</a></p>


<p>##########<br>
parquet-benchmarks/src/main/java/org/apache/parquet/benchmarks/ByteBitPackingVectorBenchmarks.java:<br>
##########<br>
@@ -0,0 +1,92 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.benchmarks;<br>
+<br>
+import org.apache.parquet.column.values.bitpacking.BytePacker;<br>
+import org.apache.parquet.column.values.bitpacking.Packer;<br>
+import org.openjdk.jmh.annotations.Benchmark;<br>
+import org.openjdk.jmh.annotations.BenchmarkMode;<br>
+import org.openjdk.jmh.annotations.Level;<br>
+import org.openjdk.jmh.annotations.Measurement;<br>
+import org.openjdk.jmh.annotations.Mode;<br>
+import org.openjdk.jmh.annotations.OutputTimeUnit;<br>
+import org.openjdk.jmh.annotations.Scope;<br>
+import org.openjdk.jmh.annotations.Setup;<br>
+import org.openjdk.jmh.annotations.State;<br>
+import org.openjdk.jmh.annotations.Warmup;<br>
+<br>
+import java.util.concurrent.TimeUnit;<br>
+<br>
+/**<br>
+ * This class uses the java17 vector API, add VM options --add-modules=jdk.incubator.vector<br>
+ */<br>
+<br>
+@State(Scope.Benchmark)<br>
+@BenchmarkMode(Mode.AverageTime)<br>
+@Warmup(iterations = 1, batchSize = 100000)<br>
+@Measurement(iterations = 1, batchSize = 100000)<br>
+@OutputTimeUnit(TimeUnit.MILLISECONDS)<br>
+public class ByteBitPackingVectorBenchmarks {</p>

<p>Review Comment:<br>
   Yes, it will fail, so I new a new module plugins/parquet-plugins-benchmarks  and put the class into the module.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693630_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693630&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693630" class="commentdate_17693630_concise subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 11:53"><time class="livestamp" datetime="2023-02-26T11:53:36+0000">26/Feb/23 11:53</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1118070969  


 ########## 
parquet-benchmarks/src/main/java/org/apache/parquet/benchmarks/ByteBitPackingVectorBenchmarks.java: 
########## 
@@ -0,0 +1,92 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.benchmarks; 
+ 
+import org.apache.parquet.column.values.bitpacking.BytePacker; 
+import org.apache.parquet.column.values.bitpacking.Packer; 
+import org.openjdk.jmh.annotations.Benchmark; 
+import org.openjdk.jmh.annotations.BenchmarkMode; 
+import org.openjdk.jmh.annotations.Level; 
+import org.openjdk.jmh.annotations.Measurement; 
+import org.openjdk.jmh.annotations.Mode; 
+import org.openjdk.jmh.annotations.OutputTimeUnit; 
+import org.openjdk.jmh.annotations.Scope; 
+import org.openjdk.jmh.annotations.Setup; 
+import org.openjdk.jmh.annotations.State; 
+import org.openjdk.jmh.annotations.Warmup; 
+ 
+import java.util.concurrent.TimeUnit; 
+ 
+/** 
+ * This class uses the java17 vector API, add VM options --add-modules=jdk.incubator.vector 
+ */ 
+ 
+@State(Scope.Benchmark) 
+@BenchmarkMode(Mode.AverageTime) 
+@Warmup(iterations = 1, batchSize = 100000) 
+@Measurement(iterations = 1, batchSize = 100000) 
+@OutputTimeUnit(TimeUnit.MILLISECONDS) 
+public class ByteBitPackingVectorBenchmarks { 

 Review Comment: 
   Yes, it will fail, so I new a new module plugins/parquet-plugins-benchmarks  and put the class into the module. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17693633" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693633_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693633&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693633" class="commentdate_17693633_verbose subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 12:05"><time class="livestamp" datetime="2023-02-26T12:05:32+0000">26/Feb/23 12:05</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1118072844" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1118072844</a></p>


<p>##########<br>
plugins/parquet-encoding-vector/pom.xml:<br>
##########<br>
@@ -0,0 +1,131 @@<br>
+&lt;!--<br>
+  ~ Licensed to the Apache Software Foundation (ASF) under one<br>
+  ~ or more contributor license agreements.  See the NOTICE file<br>
+  ~ distributed with this work for additional information<br>
+  ~ regarding copyright ownership.  The ASF licenses this file<br>
+  ~ to you under the Apache License, Version 2.0 (the<br>
+  ~ "License"); you may not use this file except in compliance<br>
+  ~ with the License.  You may obtain a copy of the License at<br>
+  ~<br>
+  ~   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+  ~<br>
+  ~ Unless required by applicable law or agreed to in writing,<br>
+  ~ software distributed under the License is distributed on an<br>
+  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+  ~ KIND, either express or implied.  See the License for the<br>
+  ~ specific language governing permissions and limitations<br>
+  ~ under the License.<br>
+  --&gt;<br>
+&lt;project xmlns="http://maven.apache.org/POM/4.0.0"<br>
+         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br>
+         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 <a href="http://maven.apache.org/xsd/maven-4.0.0.xsd" class="external-link" target="_blank" rel="nofollow noopener">http://maven.apache.org/xsd/maven-4.0.0.xsd</a>"&gt;<br>
+  &lt;parent&gt;<br>
+    &lt;groupId&gt;org.apache.parquet&lt;/groupId&gt;<br>
+    &lt;artifactId&gt;parquet&lt;/artifactId&gt;<br>
+    &lt;version&gt;1.13.0-SNAPSHOT&lt;/version&gt;<br>
+    &lt;relativePath&gt;../../pom.xml&lt;/relativePath&gt;<br>
+  &lt;/parent&gt;<br>
+<br>
+  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;<br>
+<br>
+  &lt;artifactId&gt;parquet-encoding-vector&lt;/artifactId&gt;<br>
+  &lt;packaging&gt;jar&lt;/packaging&gt;<br>
+<br>
+  &lt;name&gt;Apache Parquet Encodings Vector&lt;/name&gt;<br>
+  &lt;url&gt;<a href="https://parquet.apache.org/" class="external-link" target="_blank" rel="nofollow noopener">https://parquet.apache.org</a>&lt;/url&gt;<br>
+<br>
+  &lt;properties&gt;<br>
+    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;</p>

<p>Review Comment:<br>
   I have removed the property  and use &lt;release&gt;17&lt;/release&gt; like parent pom.xml<br>
   plugins/parquet-encoding-vector is independent and it needs some configurations(such as extraJavaVectorArgs), but other modules will not need, so I think it is best placed in its own module</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693633_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693633&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693633" class="commentdate_17693633_concise subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 12:05"><time class="livestamp" datetime="2023-02-26T12:05:32+0000">26/Feb/23 12:05</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1118072844  


 ########## 
plugins/parquet-encoding-vector/pom.xml: 
########## 
@@ -0,0 +1,131 @@ 
+&lt;!-- 
+  ~ Licensed to the Apache Software Foundation (ASF) under one 
+  ~ or more contributor license agreements.  See the NOTICE file 
+  ~ distributed with this work for additional information 
+  ~ regarding copyright ownership.  The ASF licenses this file 
+  ~ to you under the Apache License, Version 2.0 (the 
+  ~ "License"); you may not use this file except in compliance 
+  ~ with the License.  You may obtain a copy of the License at 
+  ~ 
+  ~    http://www.apache.org/licenses/LICENSE-2.0  
+  ~ 
+  ~ Unless required by applicable law or agreed to in writing, 
+  ~ software distributed under the License is distributed on an 
+  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+  ~ KIND, either express or implied.  See the License for the 
+  ~ specific language governing permissions and limitations 
+  ~ under the License. 
+  --&gt; 
+&lt;project xmlns="http://maven.apache.org/POM/4.0.0" 
+         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
+         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0  http://maven.apache.org/xsd/maven-4.0.0.xsd "&gt; 
+  &lt;parent&gt; 
+    &lt;groupId&gt;org.apache.parquet&lt;/groupId&gt; 
+    &lt;artifactId&gt;parquet&lt;/artifactId&gt; 
+    &lt;version&gt;1.13.0-SNAPSHOT&lt;/version&gt; 
+    &lt;relativePath&gt;../../pom.xml&lt;/relativePath&gt; 
+  &lt;/parent&gt; 
+ 
+  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; 
+ 
+  &lt;artifactId&gt;parquet-encoding-vector&lt;/artifactId&gt; 
+  &lt;packaging&gt;jar&lt;/packaging&gt; 
+ 
+  &lt;name&gt;Apache Parquet Encodings Vector&lt;/name&gt; 
+  &lt;url&gt; https://parquet.apache.org &lt;/url&gt; 
+ 
+  &lt;properties&gt; 
+    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt; 

 Review Comment: 
   I have removed the property  and use &lt;release&gt;17&lt;/release&gt; like parent pom.xml 
   plugins/parquet-encoding-vector is independent and it needs some configurations(such as extraJavaVectorArgs), but other modules will not need, so I think it is best placed in its own module 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17693634" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693634_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693634&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693634" class="commentdate_17693634_verbose subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 12:07"><time class="livestamp" datetime="2023-02-26T12:07:07+0000">26/Feb/23 12:07</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1118073030" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1118073030</a></p>


<p>##########<br>
pom.xml:<br>
##########<br>
@@ -151,6 +151,9 @@<br>
     &lt;module&gt;parquet-scala&lt;/module&gt;<br>
     &lt;module&gt;parquet-thrift&lt;/module&gt;<br>
     &lt;module&gt;parquet-hadoop-bundle&lt;/module&gt;<br>
+    &lt;!--<br>
+    &lt;module&gt;plugins/parquet-encoding-vector&lt;/module&gt;</p>

<p>Review Comment:<br>
   I have removed it, user need go in plugins/parquet-encoding-vector and build with maven</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693634_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693634&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693634" class="commentdate_17693634_concise subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 12:07"><time class="livestamp" datetime="2023-02-26T12:07:07+0000">26/Feb/23 12:07</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1118073030  


 ########## 
pom.xml: 
########## 
@@ -151,6 +151,9 @@ 
     &lt;module&gt;parquet-scala&lt;/module&gt; 
     &lt;module&gt;parquet-thrift&lt;/module&gt; 
     &lt;module&gt;parquet-hadoop-bundle&lt;/module&gt; 
+    &lt;!-- 
+    &lt;module&gt;plugins/parquet-encoding-vector&lt;/module&gt; 

 Review Comment: 
   I have removed it, user need go in plugins/parquet-encoding-vector and build with maven 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17693635" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693635_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693635&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693635" class="commentdate_17693635_verbose subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 12:13"><time class="livestamp" datetime="2023-02-26T12:13:52+0000">26/Feb/23 12:13</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1118074070" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1118074070</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   @gszadovszky @wgtmac I agree with you, but I can't solve how to exclude a module(parquet-encoding-vector) in the profile by default.<br>
   In fact, The current solution is also simply and user only go to the plugins/parquet-encoding-vector and build with maven</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693635_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693635&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693635" class="commentdate_17693635_concise subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 12:13"><time class="livestamp" datetime="2023-02-26T12:13:52+0000">26/Feb/23 12:13</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1118074070  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   @gszadovszky @wgtmac I agree with you, but I can't solve how to exclude a module(parquet-encoding-vector) in the profile by default. 
   In fact, The current solution is also simply and user only go to the plugins/parquet-encoding-vector and build with maven 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17693636" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693636_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693636&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693636" class="commentdate_17693636_verbose subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 12:15"><time class="livestamp" datetime="2023-02-26T12:15:38+0000">26/Feb/23 12:15</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1118074325" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1118074325</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */</p>

<p>Review Comment:<br>
   I have checked it in instead of having the generator thing</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693636_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693636&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693636" class="commentdate_17693636_concise subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 12:15"><time class="livestamp" datetime="2023-02-26T12:15:38+0000">26/Feb/23 12:15</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1118074325  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 

 Review Comment: 
   I have checked it in instead of having the generator thing 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17693637" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693637_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693637&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693637" class="commentdate_17693637_verbose subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 12:22"><time class="livestamp" datetime="2023-02-26T12:22:39+0000">26/Feb/23 12:22</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1118075418" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1118075418</a></p>


<p>##########<br>
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,133 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.EOFException;<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+import java.nio.charset.StandardCharsets;<br>
+import java.nio.file.Files;<br>
+import java.nio.file.Paths;<br>
+import java.util.Arrays;<br>
+import java.util.List;<br>
+import java.util.Set;<br>
+import java.util.stream.Collectors;<br>
+<br>
+/**<br>
+ * Utility class for big data applications (such as Apache Spark and Apache Flink).<br>
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains.<br>
+ */<br>
+public class ParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class);<br>
+<br>
+  private static final int BITS_PER_BYTE = 8;<br>
+<br>
+  // register of avx512 are 512 bits, and can load up to 64 bytes<br>
+  private static final int BYTES_PER_VECTOR_512 = 64;<br>
+<br>
+  // values are bit packed 8 at a time, so reading bitWidth will always work<br>
+  private static final int NUM_VALUES_TO_PACK = 8;<br>
+<br>
+  private static final VectorSupport vectorSupport;<br>
+<br>
+  static </p>
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
<p>+<br>
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it.<br>
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    switch (vectorSupport) </p>
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
<p>+  }<br>
+<br>
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth);<br>
+    int valueIndex = 0;<br>
+    int byteIndex = 0;<br>
+    int unpackCount = packerVector.getUnpackCount();<br>
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth;<br>
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE;<br>
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512;<br>
+    ByteBuffer buffer = in.slice(totalByteCount);<br>
+    if (buffer.hasArray()) {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      // If the remaining bytes size &lt;= </p>
{BYTES_PER_512VECTOR}
<p>, the remaining bytes are unpacked by packer<br>
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    } else {<br>
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount) </p>
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK) </p>
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
<p>+    }<br>
+  }<br>
+<br>
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags<br>
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException {<br>
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth);<br>
+    int valueIndex = 0;<br>
+    while (valueIndex &lt; currentCount) </p>
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
<p>+  }<br>
+<br>
+  private static VectorSupport getSupportVectorFromCPUFlags() {<br>
+    try {<br>
+      String os = System.getProperty("os.name");<br>
+      if (os == null || !os.toLowerCase().startsWith("linux")) </p>
{
+        return VectorSupport.NONE;
+      }
<p>+      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8);<br>
+      for (String line : allLines) {<br>
+        if (line != null &amp;&amp; line.startsWith("flags")) {<br>
+          int index = line.indexOf(":");<br>
+          if (index &lt; 0) </p>
{
+            continue;
+          }
<p>+          line = line.substring(index + 1);<br>
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet());<br>
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2")) </p>
{
+            return VectorSupport.VECTOR_512;
+          }
<p>+        }<br>
+      }</p>

<p>Review Comment:<br>
   @gszadovszky I got it. As far as I know, there is no such library available for java. I think we can try to achieve implement a library like that with JNI in the future. But there is no time line. If I have finished it, I will update here.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693637_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693637&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693637" class="commentdate_17693637_concise subText comment-created-date-link"><span class="date user-tz" title="26/Feb/23 12:22"><time class="livestamp" datetime="2023-02-26T12:22:39+0000">26/Feb/23 12:22</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1118075418  


 ########## 
parquet-column/src/main/java/org/apache/parquet/column/values/bitpacking/ParquetReadRouter.java: 
########## 
@@ -0,0 +1,133 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.EOFException; 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+import java.nio.charset.StandardCharsets; 
+import java.nio.file.Files; 
+import java.nio.file.Paths; 
+import java.util.Arrays; 
+import java.util.List; 
+import java.util.Set; 
+import java.util.stream.Collectors; 
+ 
+/** 
+ * Utility class for big data applications (such as Apache Spark and Apache Flink). 
+ * For Intel CPU, Flags containing avx512vbmi and avx512_vbmi2 can have better performance gains. 
+ */ 
+public class ParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(ParquetReadRouter.class); 
+ 
+  private static final int BITS_PER_BYTE = 8; 
+ 
+  // register of avx512 are 512 bits, and can load up to 64 bytes 
+  private static final int BYTES_PER_VECTOR_512 = 64; 
+ 
+  // values are bit packed 8 at a time, so reading bitWidth will always work 
+  private static final int NUM_VALUES_TO_PACK = 8; 
+ 
+  private static final VectorSupport vectorSupport; 
+ 
+  static  
{
+    vectorSupport = getSupportVectorFromCPUFlags();
+  }
 + 
+  // Dispatches to use vector when available. Directly call readBatchUsing512Vector() if you are sure about it. 
+  public static void read(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    switch (vectorSupport)  
{
+      case VECTOR_512:
+        readBatchUsing512Vector(bitWidth, in, currentCount, currentBuffer);
+        break;
+      default:
+        readBatch(bitWidth, in, currentCount, currentBuffer);
+    }
 +  } 
+ 
+  // Call the method directly if your computer system contains avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatchUsing512Vector(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws IOException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    BytePacker packerVector = Packer.LITTLE_ENDIAN.newBytePackerVector(bitWidth); 
+    int valueIndex = 0; 
+    int byteIndex = 0; 
+    int unpackCount = packerVector.getUnpackCount(); 
+    int inputByteCountPerVector = packerVector.getUnpackCount() / BITS_PER_BYTE * bitWidth; 
+    int totalByteCount = currentCount * bitWidth / BITS_PER_BYTE; 
+    int totalByteCountVector = totalByteCount - BYTES_PER_VECTOR_512; 
+    ByteBuffer buffer = in.slice(totalByteCount); 
+    if (buffer.hasArray()) { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      // If the remaining bytes size &lt;=  
{BYTES_PER_512VECTOR}
 , the remaining bytes are unpacked by packer 
+      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer.array(), buffer.arrayOffset() + buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } else { 
+      for (; byteIndex &lt; totalByteCountVector; byteIndex += inputByteCountPerVector, valueIndex += unpackCount)  
{
+        packerVector.unpackValuesUsingVector(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +      for (; byteIndex &lt; totalByteCount; byteIndex += bitWidth, valueIndex += NUM_VALUES_TO_PACK)  
{
+        packer.unpack8Values(buffer, buffer.position() + byteIndex, currentBuffer, valueIndex);
+      }
 +    } 
+  } 
+ 
+  // Call the method directly if your computer system doesn't contain avx512vbmi and avx512_vbmi2 CPU Flags 
+  public static void readBatch(int bitWidth, ByteBufferInputStream in, int currentCount, int[] currentBuffer) throws EOFException { 
+    BytePacker packer = Packer.LITTLE_ENDIAN.newBytePacker(bitWidth); 
+    int valueIndex = 0; 
+    while (valueIndex &lt; currentCount)  
{
+      ByteBuffer buffer = in.slice(bitWidth);
+      packer.unpack8Values(buffer, buffer.position(), currentBuffer, valueIndex);
+      valueIndex += NUM_VALUES_TO_PACK;
+    }
 +  } 
+ 
+  private static VectorSupport getSupportVectorFromCPUFlags() { 
+    try { 
+      String os = System.getProperty("os.name"); 
+      if (os == null || !os.toLowerCase().startsWith("linux"))  
{
+        return VectorSupport.NONE;
+      }
 +      List&lt;String&gt; allLines = Files.readAllLines(Paths.get("/proc/cpuinfo"), StandardCharsets.UTF_8); 
+      for (String line : allLines) { 
+        if (line != null &amp;&amp; line.startsWith("flags")) { 
+          int index = line.indexOf(":"); 
+          if (index &lt; 0)  
{
+            continue;
+          }
 +          line = line.substring(index + 1); 
+          Set&lt;String&gt; flagsSet = Arrays.stream(line.split(" ")).collect(Collectors.toSet()); 
+          if (flagsSet.contains("avx512vbmi") &amp;&amp; flagsSet.contains("avx512_vbmi2"))  
{
+            return VectorSupport.VECTOR_512;
+          }
 +        } 
+      } 

 Review Comment: 
   @gszadovszky I got it. As far as I know, there is no such library available for java. I think we can try to achieve implement a library like that with JNI in the future. But there is no time line. If I have finished it, I will update here. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17693804" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693804_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693804&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693804" class="commentdate_17693804_verbose subText comment-created-date-link"><span class="date user-tz" title="27/Feb/23 06:09"><time class="livestamp" datetime="2023-02-27T06:09:41+0000">27/Feb/23 06:09</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1118319141" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1118319141</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   Not sure whether this answer works in this case: <a href="https://stackoverflow.com/a/13383092" class="external-link" target="_blank" rel="nofollow noopener">https://stackoverflow.com/a/13383092</a></p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693804_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693804&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693804" class="commentdate_17693804_concise subText comment-created-date-link"><span class="date user-tz" title="27/Feb/23 06:09"><time class="livestamp" datetime="2023-02-27T06:09:41+0000">27/Feb/23 06:09</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1118319141  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   Not sure whether this answer works in this case:  https://stackoverflow.com/a/13383092  


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17693993" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693993_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693993&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693993" class="commentdate_17693993_verbose subText comment-created-date-link"><span class="date user-tz" title="27/Feb/23 12:19"><time class="livestamp" datetime="2023-02-27T12:19:25+0000">27/Feb/23 12:19</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1118663395" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1118663395</a></p>


<p>##########<br>
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java:<br>
##########<br>
@@ -0,0 +1,67 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.encoding.vectorbitpacking;<br>
+<br>
+import java.io.File;<br>
+import java.io.FileOutputStream;<br>
+import java.io.IOException;<br>
+import java.io.InputStream;<br>
+import java.io.OutputStream;<br>
+<br>
+/**<br>
+ * This class generates vector bit packers that pack the most significant bit first.<br>
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result.<br>
+ */<br>
+public class BitPackingGenerator512Vector {<br>
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector";<br>
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong";<br>
+<br>
+  public static void main(String[] args) throws Exception </p>
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
<p>+<br>
+  private static void generateScheme(boolean isLong, boolean msbFirst,</p>

<p>Review Comment:<br>
   @wgtmac It makes sense. I have added profile plugins.  mvn clean package -P plugins  to enable this feature. </p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17693993_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17693993&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17693993" class="commentdate_17693993_concise subText comment-created-date-link"><span class="date user-tz" title="27/Feb/23 12:19"><time class="livestamp" datetime="2023-02-27T12:19:25+0000">27/Feb/23 12:19</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1118663395  


 ########## 
parquet-generator/src/main/java/org/apache/parquet/encoding/vectorbitpacking/BitPackingGenerator512Vector.java: 
########## 
@@ -0,0 +1,67 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.encoding.vectorbitpacking; 
+ 
+import java.io.File; 
+import java.io.FileOutputStream; 
+import java.io.IOException; 
+import java.io.InputStream; 
+import java.io.OutputStream; 
+ 
+/** 
+ * This class generates vector bit packers that pack the most significant bit first. 
+ * The result of the generation is checked in. To regenerate the code run this class and check in the result. 
+ */ 
+public class BitPackingGenerator512Vector { 
+  private static final String CLASS_NAME_PREFIX_FOR_INT = "ByteBitPacking512Vector"; 
+  private static final String CLASS_NAME_PREFIX_FOR_LONG = "ByteBitPacking512VectorForLong"; 
+ 
+  public static void main(String[] args) throws Exception  
{
+    String basePath = args[0];
+    //TODO: Int for Big Endian
+    //generateScheme(false, true, basePath);
+
+    // Int for Little Endian
+    generateScheme(false, false, basePath);
+
+    //TODO: Long for Big Endian
+    //generateScheme(true, true, basePath);
+
+    //TODO: Long for Little Endian
+    //generateScheme(true, false, basePath);
+  }
 + 
+  private static void generateScheme(boolean isLong, boolean msbFirst, 

 Review Comment: 
   @wgtmac It makes sense. I have added profile plugins.  mvn clean package -P plugins  to enable this feature.  


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694249" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694249_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694249&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694249" class="commentdate_17694249_verbose subText comment-created-date-link"><span class="date user-tz" title="28/Feb/23 01:20"><time class="livestamp" datetime="2023-02-28T01:20:33+0000">28/Feb/23 01:20</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1119478321" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1119478321</a></p>


<p>##########<br>
pom.xml:<br>
##########<br>
@@ -659,5 +662,13 @@<br>
         &lt;/plugins&gt;<br>
       &lt;/build&gt;<br>
     &lt;/profile&gt;<br>
+<br>
+    &lt;profile&gt;<br>
+      &lt;id&gt;plugins&lt;/id&gt;</p>

<p>Review Comment:<br>
   `plugins` is a little bit generic to me. Rename it to `encoding-plugin` or `vector-plugins`? Any suggestion?  @gszadovszky </p>

<p>   In addition, please rename `plugins` folder to `parquet-plugins` to follow naming of other sub-directories.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694249_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694249&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694249" class="commentdate_17694249_concise subText comment-created-date-link"><span class="date user-tz" title="28/Feb/23 01:20"><time class="livestamp" datetime="2023-02-28T01:20:33+0000">28/Feb/23 01:20</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1119478321  


 ########## 
pom.xml: 
########## 
@@ -659,5 +662,13 @@ 
         &lt;/plugins&gt; 
       &lt;/build&gt; 
     &lt;/profile&gt; 
+ 
+    &lt;profile&gt; 
+      &lt;id&gt;plugins&lt;/id&gt; 

 Review Comment: 
   `plugins` is a little bit generic to me. Rename it to `encoding-plugin` or `vector-plugins`? Any suggestion?  @gszadovszky  

    In addition, please rename `plugins` folder to `parquet-plugins` to follow naming of other sub-directories. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694253" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694253_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694253&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694253" class="commentdate_17694253_verbose subText comment-created-date-link"><span class="date user-tz" title="28/Feb/23 01:47"><time class="livestamp" datetime="2023-02-28T01:47:35+0000">28/Feb/23 01:47</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1119492456" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1119492456</a></p>


<p>##########<br>
pom.xml:<br>
##########<br>
@@ -659,5 +662,13 @@<br>
         &lt;/plugins&gt;<br>
       &lt;/build&gt;<br>
     &lt;/profile&gt;<br>
+<br>
+    &lt;profile&gt;<br>
+      &lt;id&gt;plugins&lt;/id&gt;</p>

<p>Review Comment:<br>
   @wgtmac  @gszadovszky  vector-plugins +1, and it can show the feature of this PR. <br>
    I have renamed plugins to parquet-plugins.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694253_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694253&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694253" class="commentdate_17694253_concise subText comment-created-date-link"><span class="date user-tz" title="28/Feb/23 01:47"><time class="livestamp" datetime="2023-02-28T01:47:35+0000">28/Feb/23 01:47</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1119492456  


 ########## 
pom.xml: 
########## 
@@ -659,5 +662,13 @@ 
         &lt;/plugins&gt; 
       &lt;/build&gt; 
     &lt;/profile&gt; 
+ 
+    &lt;profile&gt; 
+      &lt;id&gt;plugins&lt;/id&gt; 

 Review Comment: 
   @wgtmac  @gszadovszky  vector-plugins +1, and it can show the feature of this PR.  
    I have renamed plugins to parquet-plugins. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694331" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694331_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694331&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694331" class="commentdate_17694331_verbose subText comment-created-date-link"><span class="date user-tz" title="28/Feb/23 06:06"><time class="livestamp" datetime="2023-02-28T06:06:45+0000">28/Feb/23 06:06</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1119607355" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1119607355</a></p>


<p>##########<br>
README.md:<br>
##########<br>
@@ -83,6 +83,20 @@ Parquet is a very active project, and new features are being added quickly. Here</p>
<ul>
	<li>Column stats</li>
	<li>Delta encoding</li>
	<li>Index pages<br>
+* Java Vector API support<br>
+<br>
+## Java Vector API support<br>
+Parquet-MR has supported Java Vector API to speed up reading, to enable this feature:</li>
</ul>


<p>Review Comment:<br>
   It might worth mentioning that it is an experimental feature/ongoing development. Also that it is currently not part of the parquet distribution (release).</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694331_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694331&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694331" class="commentdate_17694331_concise subText comment-created-date-link"><span class="date user-tz" title="28/Feb/23 06:06"><time class="livestamp" datetime="2023-02-28T06:06:45+0000">28/Feb/23 06:06</time></span></a>                    gszadovszky commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1119607355  


 ########## 
README.md: 
########## 
@@ -83,6 +83,20 @@ Parquet is a very active project, and new features are being added quickly. Here 
 
	 Column stats 
	 Delta encoding 
	 Index pages 
+* Java Vector API support 
+ 
+## Java Vector API support 
+Parquet-MR has supported Java Vector API to speed up reading, to enable this feature: 
 


 Review Comment: 
   It might worth mentioning that it is an experimental feature/ongoing development. Also that it is currently not part of the parquet distribution (release). 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694542" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694542_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694542&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694542" class="commentdate_17694542_verbose subText comment-created-date-link"><span class="date user-tz" title="28/Feb/23 13:32"><time class="livestamp" datetime="2023-02-28T13:32:26+0000">28/Feb/23 13:32</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1120068917" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1120068917</a></p>


<p>##########<br>
README.md:<br>
##########<br>
@@ -83,6 +83,20 @@ Parquet is a very active project, and new features are being added quickly. Here</p>
<ul>
	<li>Column stats</li>
	<li>Delta encoding</li>
	<li>Index pages<br>
+* Java Vector API support<br>
+<br>
+## Java Vector API support<br>
+Parquet-MR has supported Java Vector API to speed up reading, to enable this feature:</li>
</ul>


<p>Review Comment:<br>
   I have added the experimental flag</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694542_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694542&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694542" class="commentdate_17694542_concise subText comment-created-date-link"><span class="date user-tz" title="28/Feb/23 13:32"><time class="livestamp" datetime="2023-02-28T13:32:26+0000">28/Feb/23 13:32</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1120068917  


 ########## 
README.md: 
########## 
@@ -83,6 +83,20 @@ Parquet is a very active project, and new features are being added quickly. Here 
 
	 Column stats 
	 Delta encoding 
	 Index pages 
+* Java Vector API support 
+ 
+## Java Vector API support 
+Parquet-MR has supported Java Vector API to speed up reading, to enable this feature: 
 


 Review Comment: 
   I have added the experimental flag 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694545" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694545_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694545&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694545" class="commentdate_17694545_verbose subText comment-created-date-link"><span class="date user-tz" title="28/Feb/23 13:37"><time class="livestamp" datetime="2023-02-28T13:37:59+0000">28/Feb/23 13:37</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1448194127" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1448194127</a></p>

<p>   &gt; <br>
   @gszadovszky @wgtmac  This feature need avx512vbmi and avx512_vbmi2 instruction set, so it needs github action runners with intel ice lake. I do not know how to select runners with Intel Ice Lake ? So I have submitted the help (<a href="https://github.com/actions/runner/issues/2467" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/actions/runner/issues/2467</a>).</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694545_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694545&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694545" class="commentdate_17694545_concise subText comment-created-date-link"><span class="date user-tz" title="28/Feb/23 13:37"><time class="livestamp" datetime="2023-02-28T13:37:59+0000">28/Feb/23 13:37</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1448194127  

    &gt;  
   @gszadovszky @wgtmac  This feature need avx512vbmi and avx512_vbmi2 instruction set, so it needs github action runners with intel ice lake. I do not know how to select runners with Intel Ice Lake ? So I have submitted the help ( https://github.com/actions/runner/issues/2467 ). 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694848" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694848_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694848&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694848" class="commentdate_17694848_verbose subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:13"><time class="livestamp" datetime="2023-03-01T05:13:34+0000">01/Mar/23 05:13</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449362200" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449362200</a></p>

<p>   &gt; &gt; <br>
   &gt; <br>
   &gt; @gszadovszky @wgtmac This feature need avx512vbmi and avx512_vbmi2 instruction set, so it needs github action runners with intel ice lake. I do not know how to select runners with Intel Ice Lake ? So I have submitted the help (<a href="https://issues.apache.org/jira/browse/PARQUET-2159?jql=text%20~%20%22Vector%20API%22#2467" target="_blank" rel="noopener">actions/runner#2467</a>(<a href="https://github.com/actions/runner/issues/2467" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/actions/runner/issues/2467</a>)).</p>

<p>   @gszadovszky  @wgtmac </p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694848_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694848&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694848" class="commentdate_17694848_concise subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:13"><time class="livestamp" datetime="2023-03-01T05:13:34+0000">01/Mar/23 05:13</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449362200  

    &gt; &gt;  
   &gt;  
   &gt; @gszadovszky @wgtmac This feature need avx512vbmi and avx512_vbmi2 instruction set, so it needs github action runners with intel ice lake. I do not know how to select runners with Intel Ice Lake ? So I have submitted the help ( actions/runner#2467 ( https://github.com/actions/runner/issues/2467 )). 

    @gszadovszky  @wgtmac  

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694849" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694849_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694849&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694849" class="commentdate_17694849_verbose subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:13"><time class="livestamp" datetime="2023-03-01T05:13:35+0000">01/Mar/23 05:13</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang closed pull request #1011: <a href="https://issues.apache.org/jira/browse/PARQUET-2159" title="Parquet bit-packing de/encode optimization" class="issue-link" data-issue-key="PARQUET-2159"><del>PARQUET-2159</del></a>: java17 vector parquet bit-packing decode optimization<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011</a></p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694849_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694849&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694849" class="commentdate_17694849_concise subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:13"><time class="livestamp" datetime="2023-03-01T05:13:35+0000">01/Mar/23 05:13</time></span></a>                    jiangjiguang closed pull request #1011:   PARQUET-2159  : java17 vector parquet bit-packing decode optimization 
URL:  https://github.com/apache/parquet-mr/pull/1011  

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694850" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694850_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694850&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694850" class="commentdate_17694850_verbose subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:14"><time class="livestamp" datetime="2023-03-01T05:14:59+0000">01/Mar/23 05:14</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449363247" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449363247</a></p>

<p>   @gszadovszky @wgtmac  I have added a new workflow named Vector-plugins, can you run it ? </p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694850_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694850&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694850" class="commentdate_17694850_concise subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:14"><time class="livestamp" datetime="2023-03-01T05:14:59+0000">01/Mar/23 05:14</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449363247  

    @gszadovszky @wgtmac  I have added a new workflow named Vector-plugins, can you run it ?  

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694852" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694852_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694852&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694852" class="commentdate_17694852_verbose subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:17"><time class="livestamp" datetime="2023-03-01T05:17:50+0000">01/Mar/23 05:17</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449365344" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449365344</a></p>

<p>   &gt; @gszadovszky @wgtmac I have added a new workflow named Vector-plugins, can you run it ?</p>

<p>   It seems that this PR is closed. Could you please reopen it and see if it can run automatically?</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694852_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694852&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694852" class="commentdate_17694852_concise subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:17"><time class="livestamp" datetime="2023-03-01T05:17:50+0000">01/Mar/23 05:17</time></span></a>                    wgtmac commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449365344  

    &gt; @gszadovszky @wgtmac I have added a new workflow named Vector-plugins, can you run it ? 

    It seems that this PR is closed. Could you please reopen it and see if it can run automatically? 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694853" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694853_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694853&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694853" class="commentdate_17694853_verbose subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:35"><time class="livestamp" datetime="2023-03-01T05:35:05+0000">01/Mar/23 05:35</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang opened a new pull request, #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011</a></p>

<p>   The PR includes 3 aspects：<br>
   1. Use java17 vector api to decode bit-packing ,  the performance gain is 4x ~ 8x according to the microbenchmark <br>
   2. Upgrade the project to java17 to support java vector api<br>
   3. Add ParquetReadRouter to compatible with different platform when computing engines(such as spark) read parquet.</p>

<ol>
	<li>
	<ol>
		<li>
		<ol>
			<li>Jira</li>
		</ol>
		</li>
	</ol>
	</li>
</ol>
<ul class="alternate" type="square">
	<li><a href="https://issues.apache.org/jira/projects/PARQUET/issues/PARQUET-2159?filter=allopenissues" class="external-link" rel="nofollow">https://issues.apache.org/jira/projects/PARQUET/issues/PARQUET-2159?filter=allopenissues</a></li>
</ul>


<ol>
	<li>
	<ol>
		<li>
		<ol>
			<li>Tests</li>
		</ol>
		</li>
	</ol>
	</li>
</ol>


<ul class="alternate" type="square">
	<li>Add unit tests org.apache.parquet.column.values.bitpacking.TestByteBitPackingVectorLE</li>
</ul>


<ol>
	<li>
	<ol>
		<li>
		<ol>
			<li>Commits</li>
		</ol>
		</li>
	</ol>
	</li>
</ol>


<ul class="alternate" type="square">
	<li>[ ] My commits all reference Jira issues in their subject lines. In addition, my commits follow the guidelines from "<span class="error">[How to write a good git commit message]</span>(<a href="http://chris.beams.io/posts/git-commit/" class="external-link" target="_blank" rel="nofollow noopener">http://chris.beams.io/posts/git-commit/</a>)":<br>
     1. Subject is separated from body by a blank line<br>
     1. Subject is limited to 50 characters (not including Jira issue reference)<br>
     1. Subject does not end with a period<br>
     1. Subject uses the imperative mood ("add", not "adding")<br>
     1. Body wraps at 72 characters<br>
     1. Body explains "what" and "why", not "how"</li>
</ul>


<ol>
	<li>
	<ol>
		<li>
		<ol>
			<li>Documentation</li>
		</ol>
		</li>
	</ol>
	</li>
</ol>
<ul class="alternate" type="square">
	<li>The PR adds maven profile vector to enable generate java17 vector bit-packing decode opt. code, and run junit tests: mvn clean install -P vector</li>
	<li>The PR needs Intel Ice Lake CPU to run junit tests</li>
	<li>The contributors are jiangjiguang  jiyu1021 guangzegu  Fang-Xie  , and co-contributor is  jatin-bhateja</li>
</ul>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694853_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694853&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694853" class="commentdate_17694853_concise subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:35"><time class="livestamp" datetime="2023-03-01T05:35:05+0000">01/Mar/23 05:35</time></span></a>                    jiangjiguang opened a new pull request, #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011  

    The PR includes 3 aspects： 
   1. Use java17 vector api to decode bit-packing ,  the performance gain is 4x ~ 8x according to the microbenchmark  
   2. Upgrade the project to java17 to support java vector api 
   3. Add ParquetReadRouter to compatible with different platform when computing engines(such as spark) read parquet. 

 
	 
	 
		 
		 
			 Jira 
		 
		 
	 
	 
 
 
	  https://issues.apache.org/jira/projects/PARQUET/issues/PARQUET-2159?filter=allopenissues  
 


 
	 
	 
		 
		 
			 Tests 
		 
		 
	 
	 
 


 
	 Add unit tests org.apache.parquet.column.values.bitpacking.TestByteBitPackingVectorLE 
 


 
	 
	 
		 
		 
			 Commits 
		 
		 
	 
	 
 


 
	 [ ] My commits all reference Jira issues in their subject lines. In addition, my commits follow the guidelines from " [How to write a good git commit message] ( http://chris.beams.io/posts/git-commit/ )": 
     1. Subject is separated from body by a blank line 
     1. Subject is limited to 50 characters (not including Jira issue reference) 
     1. Subject does not end with a period 
     1. Subject uses the imperative mood ("add", not "adding") 
     1. Body wraps at 72 characters 
     1. Body explains "what" and "why", not "how" 
 


 
	 
	 
		 
		 
			 Documentation 
		 
		 
	 
	 
 
 
	 The PR adds maven profile vector to enable generate java17 vector bit-packing decode opt. code, and run junit tests: mvn clean install -P vector 
	 The PR needs Intel Ice Lake CPU to run junit tests 
	 The contributors are jiangjiguang  jiyu1021 guangzegu  Fang-Xie  , and co-contributor is  jatin-bhateja 
 



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694855" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694855_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694855&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694855" class="commentdate_17694855_verbose subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:37"><time class="livestamp" datetime="2023-03-01T05:37:42+0000">01/Mar/23 05:37</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449379971" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449379971</a></p>

<p>   &gt; &gt; @gszadovszky @wgtmac I have added a new workflow named Vector-plugins, can you run it ?<br>
   &gt; <br>
   &gt; It seems that this PR is closed. Could you please reopen it and see if it can run automatically?</p>

<p>   @wgtmac sorry, may be my wrong click, I have reopened it</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694855_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694855&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694855" class="commentdate_17694855_concise subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:37"><time class="livestamp" datetime="2023-03-01T05:37:42+0000">01/Mar/23 05:37</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449379971  

    &gt; &gt; @gszadovszky @wgtmac I have added a new workflow named Vector-plugins, can you run it ? 
   &gt;  
   &gt; It seems that this PR is closed. Could you please reopen it and see if it can run automatically? 

    @wgtmac sorry, may be my wrong click, I have reopened it 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694856" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694856_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694856&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694856" class="commentdate_17694856_verbose subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:39"><time class="livestamp" datetime="2023-03-01T05:39:19+0000">01/Mar/23 05:39</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449381064" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449381064</a></p>

<p>   &gt; @wgtmac sorry, may be my wrong click, I have reopened it</p>

<p>   NP. Seems it is running. <a href="https://github.com/apache/parquet-mr/actions/runs/4300429406/jobs/7496638049" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/actions/runs/4300429406/jobs/7496638049</a></p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694856_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694856&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694856" class="commentdate_17694856_concise subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 05:39"><time class="livestamp" datetime="2023-03-01T05:39:19+0000">01/Mar/23 05:39</time></span></a>                    wgtmac commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1449381064  

    &gt; @wgtmac sorry, may be my wrong click, I have reopened it 

    NP. Seems it is running.  https://github.com/apache/parquet-mr/actions/runs/4300429406/jobs/7496638049  

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694874" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694874_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694874&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694874" class="commentdate_17694874_verbose subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 06:40"><time class="livestamp" datetime="2023-03-01T06:40:29+0000">01/Mar/23 06:40</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1121218282" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1121218282</a></p>


<p>##########<br>
.github/workflows/vector-plugins.yml:<br>
##########<br>
@@ -0,0 +1,56 @@<br>
+# Licensed to the Apache Software Foundation (ASF) under one<br>
+# or more contributor license agreements.  See the NOTICE file<br>
+# distributed with this work for additional information<br>
+# regarding copyright ownership.  The ASF licenses this file<br>
+# to you under the Apache License, Version 2.0 (the<br>
+# "License"); you may not use this file except in compliance<br>
+# with the License.  You may obtain a copy of the License at<br>
+#<br>
+#   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+#<br>
+# Unless required by applicable law or agreed to in writing,<br>
+# software distributed under the License is distributed on an<br>
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+# KIND, either express or implied.  See the License for the<br>
+# specific language governing permissions and limitations<br>
+# under the License.<br>
+<br>
+name: Vector-plugins<br>
+<br>
+on: <span class="error">[push, pull_request]</span><br>
+<br>
+jobs:<br>
+  build:<br>
+<br>
+    runs-on: ubuntu-latest<br>
+    strategy:<br>
+      fail-fast: false<br>
+      matrix:<br>
+        java: [ '17' ]<br>
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ]</p>

<p>Review Comment:<br>
   To reduce some resource consumption, `uncompressed` seems enough.</p>



<p>##########<br>
.github/workflows/vector-plugins.yml:<br>
##########<br>
@@ -0,0 +1,56 @@<br>
+# Licensed to the Apache Software Foundation (ASF) under one<br>
+# or more contributor license agreements.  See the NOTICE file<br>
+# distributed with this work for additional information<br>
+# regarding copyright ownership.  The ASF licenses this file<br>
+# to you under the Apache License, Version 2.0 (the<br>
+# "License"); you may not use this file except in compliance<br>
+# with the License.  You may obtain a copy of the License at<br>
+#<br>
+#   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+#<br>
+# Unless required by applicable law or agreed to in writing,<br>
+# software distributed under the License is distributed on an<br>
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+# KIND, either express or implied.  See the License for the<br>
+# specific language governing permissions and limitations<br>
+# under the License.<br>
+<br>
+name: Vector-plugins<br>
+<br>
+on: <span class="error">[push, pull_request]</span><br>
+<br>
+jobs:<br>
+  build:<br>
+<br>
+    runs-on: ubuntu-latest<br>
+    strategy:<br>
+      fail-fast: false<br>
+      matrix:<br>
+        java: [ '17' ]<br>
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ]<br>
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }}<br>
+<br>
+    steps:<br>
+      - uses: actions/checkout@master<br>
+      - name: Set up JDK ${{ matrix.java }}<br>
+        uses: actions/setup-java@v1<br>
+        with:<br>
+          java-version: ${{ matrix.java }}<br>
+      - name: before_install<br>
+        env:<br>
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF<br>
+        run: |<br>
+          bash dev/ci-before_install.sh<br>
+      - name: install<br>
+        run: |<br>
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout)<br>
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS"<br>
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift</p>

<p>Review Comment:<br>
   Why is `-pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift` required here?</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694874_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694874&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694874" class="commentdate_17694874_concise subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 06:40"><time class="livestamp" datetime="2023-03-01T06:40:29+0000">01/Mar/23 06:40</time></span></a>                    wgtmac commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1121218282  


 ########## 
.github/workflows/vector-plugins.yml: 
########## 
@@ -0,0 +1,56 @@ 
+# Licensed to the Apache Software Foundation (ASF) under one 
+# or more contributor license agreements.  See the NOTICE file 
+# distributed with this work for additional information 
+# regarding copyright ownership.  The ASF licenses this file 
+# to you under the Apache License, Version 2.0 (the 
+# "License"); you may not use this file except in compliance 
+# with the License.  You may obtain a copy of the License at 
+# 
+#    http://www.apache.org/licenses/LICENSE-2.0  
+# 
+# Unless required by applicable law or agreed to in writing, 
+# software distributed under the License is distributed on an 
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+# KIND, either express or implied.  See the License for the 
+# specific language governing permissions and limitations 
+# under the License. 
+ 
+name: Vector-plugins 
+ 
+on:  [push, pull_request]  
+ 
+jobs: 
+  build: 
+ 
+    runs-on: ubuntu-latest 
+    strategy: 
+      fail-fast: false 
+      matrix: 
+        java: [ '17' ] 
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ] 

 Review Comment: 
   To reduce some resource consumption, `uncompressed` seems enough. 



 ########## 
.github/workflows/vector-plugins.yml: 
########## 
@@ -0,0 +1,56 @@ 
+# Licensed to the Apache Software Foundation (ASF) under one 
+# or more contributor license agreements.  See the NOTICE file 
+# distributed with this work for additional information 
+# regarding copyright ownership.  The ASF licenses this file 
+# to you under the Apache License, Version 2.0 (the 
+# "License"); you may not use this file except in compliance 
+# with the License.  You may obtain a copy of the License at 
+# 
+#    http://www.apache.org/licenses/LICENSE-2.0  
+# 
+# Unless required by applicable law or agreed to in writing, 
+# software distributed under the License is distributed on an 
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+# KIND, either express or implied.  See the License for the 
+# specific language governing permissions and limitations 
+# under the License. 
+ 
+name: Vector-plugins 
+ 
+on:  [push, pull_request]  
+ 
+jobs: 
+  build: 
+ 
+    runs-on: ubuntu-latest 
+    strategy: 
+      fail-fast: false 
+      matrix: 
+        java: [ '17' ] 
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ] 
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }} 
+ 
+    steps: 
+      - uses: actions/checkout@master 
+      - name: Set up JDK ${{ matrix.java }} 
+        uses: actions/setup-java@v1 
+        with: 
+          java-version: ${{ matrix.java }} 
+      - name: before_install 
+        env: 
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF 
+        run: | 
+          bash dev/ci-before_install.sh 
+      - name: install 
+        run: | 
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout) 
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS" 
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift 

 Review Comment: 
   Why is `-pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift` required here? 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694876" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694876_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694876&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694876" class="commentdate_17694876_verbose subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 06:45"><time class="livestamp" datetime="2023-03-01T06:45:59+0000">01/Mar/23 06:45</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226362" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226362</a></p>


<p>##########<br>
.github/workflows/vector-plugins.yml:<br>
##########<br>
@@ -0,0 +1,56 @@<br>
+# Licensed to the Apache Software Foundation (ASF) under one<br>
+# or more contributor license agreements.  See the NOTICE file<br>
+# distributed with this work for additional information<br>
+# regarding copyright ownership.  The ASF licenses this file<br>
+# to you under the Apache License, Version 2.0 (the<br>
+# "License"); you may not use this file except in compliance<br>
+# with the License.  You may obtain a copy of the License at<br>
+#<br>
+#   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+#<br>
+# Unless required by applicable law or agreed to in writing,<br>
+# software distributed under the License is distributed on an<br>
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+# KIND, either express or implied.  See the License for the<br>
+# specific language governing permissions and limitations<br>
+# under the License.<br>
+<br>
+name: Vector-plugins<br>
+<br>
+on: <span class="error">[push, pull_request]</span><br>
+<br>
+jobs:<br>
+  build:<br>
+<br>
+    runs-on: ubuntu-latest<br>
+    strategy:<br>
+      fail-fast: false<br>
+      matrix:<br>
+        java: [ '17' ]<br>
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ]<br>
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }}<br>
+<br>
+    steps:<br>
+      - uses: actions/checkout@master<br>
+      - name: Set up JDK ${{ matrix.java }}<br>
+        uses: actions/setup-java@v1<br>
+        with:<br>
+          java-version: ${{ matrix.java }}<br>
+      - name: before_install<br>
+        env:<br>
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF<br>
+        run: |<br>
+          bash dev/ci-before_install.sh<br>
+      - name: install<br>
+        run: |<br>
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout)<br>
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS"<br>
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift</p>

<p>Review Comment:<br>
   because they have been run in the Test workflow. I think vector-plugins should run only the module associated with it</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694876_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694876&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694876" class="commentdate_17694876_concise subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 06:45"><time class="livestamp" datetime="2023-03-01T06:45:59+0000">01/Mar/23 06:45</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226362  


 ########## 
.github/workflows/vector-plugins.yml: 
########## 
@@ -0,0 +1,56 @@ 
+# Licensed to the Apache Software Foundation (ASF) under one 
+# or more contributor license agreements.  See the NOTICE file 
+# distributed with this work for additional information 
+# regarding copyright ownership.  The ASF licenses this file 
+# to you under the Apache License, Version 2.0 (the 
+# "License"); you may not use this file except in compliance 
+# with the License.  You may obtain a copy of the License at 
+# 
+#    http://www.apache.org/licenses/LICENSE-2.0  
+# 
+# Unless required by applicable law or agreed to in writing, 
+# software distributed under the License is distributed on an 
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+# KIND, either express or implied.  See the License for the 
+# specific language governing permissions and limitations 
+# under the License. 
+ 
+name: Vector-plugins 
+ 
+on:  [push, pull_request]  
+ 
+jobs: 
+  build: 
+ 
+    runs-on: ubuntu-latest 
+    strategy: 
+      fail-fast: false 
+      matrix: 
+        java: [ '17' ] 
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ] 
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }} 
+ 
+    steps: 
+      - uses: actions/checkout@master 
+      - name: Set up JDK ${{ matrix.java }} 
+        uses: actions/setup-java@v1 
+        with: 
+          java-version: ${{ matrix.java }} 
+      - name: before_install 
+        env: 
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF 
+        run: | 
+          bash dev/ci-before_install.sh 
+      - name: install 
+        run: | 
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout) 
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS" 
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift 

 Review Comment: 
   because they have been run in the Test workflow. I think vector-plugins should run only the module associated with it 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17694877" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694877_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694877&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694877" class="commentdate_17694877_verbose subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 06:46"><time class="livestamp" datetime="2023-03-01T06:46:19+0000">01/Mar/23 06:46</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226677" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226677</a></p>


<p>##########<br>
.github/workflows/vector-plugins.yml:<br>
##########<br>
@@ -0,0 +1,56 @@<br>
+# Licensed to the Apache Software Foundation (ASF) under one<br>
+# or more contributor license agreements.  See the NOTICE file<br>
+# distributed with this work for additional information<br>
+# regarding copyright ownership.  The ASF licenses this file<br>
+# to you under the Apache License, Version 2.0 (the<br>
+# "License"); you may not use this file except in compliance<br>
+# with the License.  You may obtain a copy of the License at<br>
+#<br>
+#   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+#<br>
+# Unless required by applicable law or agreed to in writing,<br>
+# software distributed under the License is distributed on an<br>
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+# KIND, either express or implied.  See the License for the<br>
+# specific language governing permissions and limitations<br>
+# under the License.<br>
+<br>
+name: Vector-plugins<br>
+<br>
+on: <span class="error">[push, pull_request]</span><br>
+<br>
+jobs:<br>
+  build:<br>
+<br>
+    runs-on: ubuntu-latest<br>
+    strategy:<br>
+      fail-fast: false<br>
+      matrix:<br>
+        java: [ '17' ]<br>
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ]</p>

<p>Review Comment:<br>
   it makes sense</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17694877_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17694877&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17694877" class="commentdate_17694877_concise subText comment-created-date-link"><span class="date user-tz" title="01/Mar/23 06:46"><time class="livestamp" datetime="2023-03-01T06:46:19+0000">01/Mar/23 06:46</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226677  


 ########## 
.github/workflows/vector-plugins.yml: 
########## 
@@ -0,0 +1,56 @@ 
+# Licensed to the Apache Software Foundation (ASF) under one 
+# or more contributor license agreements.  See the NOTICE file 
+# distributed with this work for additional information 
+# regarding copyright ownership.  The ASF licenses this file 
+# to you under the Apache License, Version 2.0 (the 
+# "License"); you may not use this file except in compliance 
+# with the License.  You may obtain a copy of the License at 
+# 
+#    http://www.apache.org/licenses/LICENSE-2.0  
+# 
+# Unless required by applicable law or agreed to in writing, 
+# software distributed under the License is distributed on an 
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+# KIND, either express or implied.  See the License for the 
+# specific language governing permissions and limitations 
+# under the License. 
+ 
+name: Vector-plugins 
+ 
+on:  [push, pull_request]  
+ 
+jobs: 
+  build: 
+ 
+    runs-on: ubuntu-latest 
+    strategy: 
+      fail-fast: false 
+      matrix: 
+        java: [ '17' ] 
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ] 

 Review Comment: 
   it makes sense 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17695405" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695405_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695405&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695405" class="commentdate_17695405_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 01:32"><time class="livestamp" datetime="2023-03-02T01:32:14+0000">02/Mar/23 01:32</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226362" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226362</a></p>


<p>##########<br>
.github/workflows/vector-plugins.yml:<br>
##########<br>
@@ -0,0 +1,56 @@<br>
+# Licensed to the Apache Software Foundation (ASF) under one<br>
+# or more contributor license agreements.  See the NOTICE file<br>
+# distributed with this work for additional information<br>
+# regarding copyright ownership.  The ASF licenses this file<br>
+# to you under the Apache License, Version 2.0 (the<br>
+# "License"); you may not use this file except in compliance<br>
+# with the License.  You may obtain a copy of the License at<br>
+#<br>
+#   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+#<br>
+# Unless required by applicable law or agreed to in writing,<br>
+# software distributed under the License is distributed on an<br>
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+# KIND, either express or implied.  See the License for the<br>
+# specific language governing permissions and limitations<br>
+# under the License.<br>
+<br>
+name: Vector-plugins<br>
+<br>
+on: <span class="error">[push, pull_request]</span><br>
+<br>
+jobs:<br>
+  build:<br>
+<br>
+    runs-on: ubuntu-latest<br>
+    strategy:<br>
+      fail-fast: false<br>
+      matrix:<br>
+        java: [ '17' ]<br>
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ]<br>
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }}<br>
+<br>
+    steps:<br>
+      - uses: actions/checkout@master<br>
+      - name: Set up JDK ${{ matrix.java }}<br>
+        uses: actions/setup-java@v1<br>
+        with:<br>
+          java-version: ${{ matrix.java }}<br>
+      - name: before_install<br>
+        env:<br>
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF<br>
+        run: |<br>
+          bash dev/ci-before_install.sh<br>
+      - name: install<br>
+        run: |<br>
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout)<br>
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS"<br>
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift</p>

<p>Review Comment:<br>
   because these module have been run in the Test workflow. I think vector-plugins should run only the modules associated with vector</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695405_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695405&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695405" class="commentdate_17695405_concise subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 01:32"><time class="livestamp" datetime="2023-03-02T01:32:14+0000">02/Mar/23 01:32</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226362  


 ########## 
.github/workflows/vector-plugins.yml: 
########## 
@@ -0,0 +1,56 @@ 
+# Licensed to the Apache Software Foundation (ASF) under one 
+# or more contributor license agreements.  See the NOTICE file 
+# distributed with this work for additional information 
+# regarding copyright ownership.  The ASF licenses this file 
+# to you under the Apache License, Version 2.0 (the 
+# "License"); you may not use this file except in compliance 
+# with the License.  You may obtain a copy of the License at 
+# 
+#    http://www.apache.org/licenses/LICENSE-2.0  
+# 
+# Unless required by applicable law or agreed to in writing, 
+# software distributed under the License is distributed on an 
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+# KIND, either express or implied.  See the License for the 
+# specific language governing permissions and limitations 
+# under the License. 
+ 
+name: Vector-plugins 
+ 
+on:  [push, pull_request]  
+ 
+jobs: 
+  build: 
+ 
+    runs-on: ubuntu-latest 
+    strategy: 
+      fail-fast: false 
+      matrix: 
+        java: [ '17' ] 
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ] 
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }} 
+ 
+    steps: 
+      - uses: actions/checkout@master 
+      - name: Set up JDK ${{ matrix.java }} 
+        uses: actions/setup-java@v1 
+        with: 
+          java-version: ${{ matrix.java }} 
+      - name: before_install 
+        env: 
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF 
+        run: | 
+          bash dev/ci-before_install.sh 
+      - name: install 
+        run: | 
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout) 
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS" 
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift 

 Review Comment: 
   because these module have been run in the Test workflow. I think vector-plugins should run only the modules associated with vector 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17695406" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695406_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695406&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695406" class="commentdate_17695406_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 01:33"><time class="livestamp" datetime="2023-03-02T01:33:34+0000">02/Mar/23 01:33</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226362" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226362</a></p>


<p>##########<br>
.github/workflows/vector-plugins.yml:<br>
##########<br>
@@ -0,0 +1,56 @@<br>
+# Licensed to the Apache Software Foundation (ASF) under one<br>
+# or more contributor license agreements.  See the NOTICE file<br>
+# distributed with this work for additional information<br>
+# regarding copyright ownership.  The ASF licenses this file<br>
+# to you under the Apache License, Version 2.0 (the<br>
+# "License"); you may not use this file except in compliance<br>
+# with the License.  You may obtain a copy of the License at<br>
+#<br>
+#   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+#<br>
+# Unless required by applicable law or agreed to in writing,<br>
+# software distributed under the License is distributed on an<br>
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+# KIND, either express or implied.  See the License for the<br>
+# specific language governing permissions and limitations<br>
+# under the License.<br>
+<br>
+name: Vector-plugins<br>
+<br>
+on: <span class="error">[push, pull_request]</span><br>
+<br>
+jobs:<br>
+  build:<br>
+<br>
+    runs-on: ubuntu-latest<br>
+    strategy:<br>
+      fail-fast: false<br>
+      matrix:<br>
+        java: [ '17' ]<br>
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ]<br>
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }}<br>
+<br>
+    steps:<br>
+      - uses: actions/checkout@master<br>
+      - name: Set up JDK ${{ matrix.java }}<br>
+        uses: actions/setup-java@v1<br>
+        with:<br>
+          java-version: ${{ matrix.java }}<br>
+      - name: before_install<br>
+        env:<br>
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF<br>
+        run: |<br>
+          bash dev/ci-before_install.sh<br>
+      - name: install<br>
+        run: |<br>
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout)<br>
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS"<br>
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift</p>

<p>Review Comment:<br>
   because these modules have been execute in the Test workflow. I think vector-plugins should execute only the modules associated with vector. vector-plugins should not execute repeated part with Test workflow.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695406_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695406&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695406" class="commentdate_17695406_concise subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 01:33"><time class="livestamp" datetime="2023-03-02T01:33:34+0000">02/Mar/23 01:33</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226362  


 ########## 
.github/workflows/vector-plugins.yml: 
########## 
@@ -0,0 +1,56 @@ 
+# Licensed to the Apache Software Foundation (ASF) under one 
+# or more contributor license agreements.  See the NOTICE file 
+# distributed with this work for additional information 
+# regarding copyright ownership.  The ASF licenses this file 
+# to you under the Apache License, Version 2.0 (the 
+# "License"); you may not use this file except in compliance 
+# with the License.  You may obtain a copy of the License at 
+# 
+#    http://www.apache.org/licenses/LICENSE-2.0  
+# 
+# Unless required by applicable law or agreed to in writing, 
+# software distributed under the License is distributed on an 
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+# KIND, either express or implied.  See the License for the 
+# specific language governing permissions and limitations 
+# under the License. 
+ 
+name: Vector-plugins 
+ 
+on:  [push, pull_request]  
+ 
+jobs: 
+  build: 
+ 
+    runs-on: ubuntu-latest 
+    strategy: 
+      fail-fast: false 
+      matrix: 
+        java: [ '17' ] 
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ] 
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }} 
+ 
+    steps: 
+      - uses: actions/checkout@master 
+      - name: Set up JDK ${{ matrix.java }} 
+        uses: actions/setup-java@v1 
+        with: 
+          java-version: ${{ matrix.java }} 
+      - name: before_install 
+        env: 
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF 
+        run: | 
+          bash dev/ci-before_install.sh 
+      - name: install 
+        run: | 
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout) 
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS" 
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift 

 Review Comment: 
   because these modules have been execute in the Test workflow. I think vector-plugins should execute only the modules associated with vector. vector-plugins should not execute repeated part with Test workflow. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17695408" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695408_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695408&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695408" class="commentdate_17695408_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 01:35"><time class="livestamp" datetime="2023-03-02T01:35:04+0000">02/Mar/23 01:35</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226362" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226362</a></p>


<p>##########<br>
.github/workflows/vector-plugins.yml:<br>
##########<br>
@@ -0,0 +1,56 @@<br>
+# Licensed to the Apache Software Foundation (ASF) under one<br>
+# or more contributor license agreements.  See the NOTICE file<br>
+# distributed with this work for additional information<br>
+# regarding copyright ownership.  The ASF licenses this file<br>
+# to you under the Apache License, Version 2.0 (the<br>
+# "License"); you may not use this file except in compliance<br>
+# with the License.  You may obtain a copy of the License at<br>
+#<br>
+#   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+#<br>
+# Unless required by applicable law or agreed to in writing,<br>
+# software distributed under the License is distributed on an<br>
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+# KIND, either express or implied.  See the License for the<br>
+# specific language governing permissions and limitations<br>
+# under the License.<br>
+<br>
+name: Vector-plugins<br>
+<br>
+on: <span class="error">[push, pull_request]</span><br>
+<br>
+jobs:<br>
+  build:<br>
+<br>
+    runs-on: ubuntu-latest<br>
+    strategy:<br>
+      fail-fast: false<br>
+      matrix:<br>
+        java: [ '17' ]<br>
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ]<br>
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }}<br>
+<br>
+    steps:<br>
+      - uses: actions/checkout@master<br>
+      - name: Set up JDK ${{ matrix.java }}<br>
+        uses: actions/setup-java@v1<br>
+        with:<br>
+          java-version: ${{ matrix.java }}<br>
+      - name: before_install<br>
+        env:<br>
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF<br>
+        run: |<br>
+          bash dev/ci-before_install.sh<br>
+      - name: install<br>
+        run: |<br>
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout)<br>
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS"<br>
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift</p>

<p>Review Comment:<br>
   because these modules(parquet-hadoop parquet-arrow ...) have been executed in the Test workflow. I think vector-plugins should execute only the modules associated with vector. vector-plugins should not execute repeated part with Test workflow.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695408_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695408&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695408" class="commentdate_17695408_concise subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 01:35"><time class="livestamp" datetime="2023-03-02T01:35:04+0000">02/Mar/23 01:35</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1121226362  


 ########## 
.github/workflows/vector-plugins.yml: 
########## 
@@ -0,0 +1,56 @@ 
+# Licensed to the Apache Software Foundation (ASF) under one 
+# or more contributor license agreements.  See the NOTICE file 
+# distributed with this work for additional information 
+# regarding copyright ownership.  The ASF licenses this file 
+# to you under the Apache License, Version 2.0 (the 
+# "License"); you may not use this file except in compliance 
+# with the License.  You may obtain a copy of the License at 
+# 
+#    http://www.apache.org/licenses/LICENSE-2.0  
+# 
+# Unless required by applicable law or agreed to in writing, 
+# software distributed under the License is distributed on an 
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+# KIND, either express or implied.  See the License for the 
+# specific language governing permissions and limitations 
+# under the License. 
+ 
+name: Vector-plugins 
+ 
+on:  [push, pull_request]  
+ 
+jobs: 
+  build: 
+ 
+    runs-on: ubuntu-latest 
+    strategy: 
+      fail-fast: false 
+      matrix: 
+        java: [ '17' ] 
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ] 
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }} 
+ 
+    steps: 
+      - uses: actions/checkout@master 
+      - name: Set up JDK ${{ matrix.java }} 
+        uses: actions/setup-java@v1 
+        with: 
+          java-version: ${{ matrix.java }} 
+      - name: before_install 
+        env: 
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF 
+        run: | 
+          bash dev/ci-before_install.sh 
+      - name: install 
+        run: | 
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout) 
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS" 
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift 

 Review Comment: 
   because these modules(parquet-hadoop parquet-arrow ...) have been executed in the Test workflow. I think vector-plugins should execute only the modules associated with vector. vector-plugins should not execute repeated part with Test workflow. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17695418" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695418_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695418&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695418" class="commentdate_17695418_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 02:33"><time class="livestamp" datetime="2023-03-02T02:33:19+0000">02/Mar/23 02:33</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1122538089" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1122538089</a></p>


<p>##########<br>
.github/workflows/vector-plugins.yml:<br>
##########<br>
@@ -0,0 +1,56 @@<br>
+# Licensed to the Apache Software Foundation (ASF) under one<br>
+# or more contributor license agreements.  See the NOTICE file<br>
+# distributed with this work for additional information<br>
+# regarding copyright ownership.  The ASF licenses this file<br>
+# to you under the Apache License, Version 2.0 (the<br>
+# "License"); you may not use this file except in compliance<br>
+# with the License.  You may obtain a copy of the License at<br>
+#<br>
+#   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+#<br>
+# Unless required by applicable law or agreed to in writing,<br>
+# software distributed under the License is distributed on an<br>
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+# KIND, either express or implied.  See the License for the<br>
+# specific language governing permissions and limitations<br>
+# under the License.<br>
+<br>
+name: Vector-plugins<br>
+<br>
+on: <span class="error">[push, pull_request]</span><br>
+<br>
+jobs:<br>
+  build:<br>
+<br>
+    runs-on: ubuntu-latest<br>
+    strategy:<br>
+      fail-fast: false<br>
+      matrix:<br>
+        java: [ '17' ]<br>
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ]<br>
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }}<br>
+<br>
+    steps:<br>
+      - uses: actions/checkout@master<br>
+      - name: Set up JDK ${{ matrix.java }}<br>
+        uses: actions/setup-java@v1<br>
+        with:<br>
+          java-version: ${{ matrix.java }}<br>
+      - name: before_install<br>
+        env:<br>
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF<br>
+        run: |<br>
+          bash dev/ci-before_install.sh<br>
+      - name: install<br>
+        run: |<br>
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout)<br>
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS"<br>
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift</p>

<p>Review Comment:<br>
   @wgtmac I updated the vector-plugins workflow, it only specifies modules needed to execute</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695418_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695418&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695418" class="commentdate_17695418_concise subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 02:33"><time class="livestamp" datetime="2023-03-02T02:33:19+0000">02/Mar/23 02:33</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1122538089  


 ########## 
.github/workflows/vector-plugins.yml: 
########## 
@@ -0,0 +1,56 @@ 
+# Licensed to the Apache Software Foundation (ASF) under one 
+# or more contributor license agreements.  See the NOTICE file 
+# distributed with this work for additional information 
+# regarding copyright ownership.  The ASF licenses this file 
+# to you under the Apache License, Version 2.0 (the 
+# "License"); you may not use this file except in compliance 
+# with the License.  You may obtain a copy of the License at 
+# 
+#    http://www.apache.org/licenses/LICENSE-2.0  
+# 
+# Unless required by applicable law or agreed to in writing, 
+# software distributed under the License is distributed on an 
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+# KIND, either express or implied.  See the License for the 
+# specific language governing permissions and limitations 
+# under the License. 
+ 
+name: Vector-plugins 
+ 
+on:  [push, pull_request]  
+ 
+jobs: 
+  build: 
+ 
+    runs-on: ubuntu-latest 
+    strategy: 
+      fail-fast: false 
+      matrix: 
+        java: [ '17' ] 
+        codes: [ 'uncompressed,brotli', 'gzip,snappy' ] 
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }} 
+ 
+    steps: 
+      - uses: actions/checkout@master 
+      - name: Set up JDK ${{ matrix.java }} 
+        uses: actions/setup-java@v1 
+        with: 
+          java-version: ${{ matrix.java }} 
+      - name: before_install 
+        env: 
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF 
+        run: | 
+          bash dev/ci-before_install.sh 
+      - name: install 
+        run: | 
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout) 
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS" 
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl -parquet-hadoop,-parquet-arrow,-parquet-avro,-parquet-benchmarks,-parquet-cli,-parquet-column,-parquet-hadoop-bundle,-parquet-jackson,-parquet-pig,-parquet-pig-bundle,-parquet-protobuf,-parquet-thrift 

 Review Comment: 
   @wgtmac I updated the vector-plugins workflow, it only specifies modules needed to execute 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17695499" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695499_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695499&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695499" class="commentdate_17695499_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 06:56"><time class="livestamp" datetime="2023-03-02T06:56:07+0000">02/Mar/23 06:56</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1451385421" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1451385421</a></p>

<p>   I'd request sign off from @gszadovszky @shangxinli </p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695499_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695499&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695499" class="commentdate_17695499_concise subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 06:56"><time class="livestamp" datetime="2023-03-02T06:56:07+0000">02/Mar/23 06:56</time></span></a>                    wgtmac commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1451385421  

    I'd request sign off from @gszadovszky @shangxinli  

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17695546" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695546_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695546&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695546" class="commentdate_17695546_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 08:33"><time class="livestamp" datetime="2023-03-02T08:33:18+0000">02/Mar/23 08:33</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1122744256" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1122744256</a></p>


<p>##########<br>
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java:<br>
##########<br>
@@ -0,0 +1,172 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.junit.Test;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.math.BigDecimal;<br>
+import java.nio.ByteBuffer;<br>
+import java.util.ArrayList;<br>
+import java.util.List;<br>
+<br>
+import static org.junit.Assert.assertArrayEquals;<br>
+<br>
+public class TestByteBitPacking512VectorLE {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class);<br>
+  @Test<br>
+  public void unpackValuesUsingVector() {<br>
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512) </p>
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

<p>Review Comment:<br>
   This way this is not a quality gate. I think we should not allow bypassing this test here but somehow ensure that the environment is capable of executing it. What do you think?</p>



<p>##########<br>
.github/workflows/vector-plugins.yml:<br>
##########<br>
@@ -0,0 +1,56 @@<br>
+# Licensed to the Apache Software Foundation (ASF) under one<br>
+# or more contributor license agreements.  See the NOTICE file<br>
+# distributed with this work for additional information<br>
+# regarding copyright ownership.  The ASF licenses this file<br>
+# to you under the Apache License, Version 2.0 (the<br>
+# "License"); you may not use this file except in compliance<br>
+# with the License.  You may obtain a copy of the License at<br>
+#<br>
+#   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+#<br>
+# Unless required by applicable law or agreed to in writing,<br>
+# software distributed under the License is distributed on an<br>
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+# KIND, either express or implied.  See the License for the<br>
+# specific language governing permissions and limitations<br>
+# under the License.<br>
+<br>
+name: Vector-plugins<br>
+<br>
+on: <span class="error">[push, pull_request]</span><br>
+<br>
+jobs:<br>
+  build:<br>
+<br>
+    runs-on: ubuntu-latest<br>
+    strategy:<br>
+      fail-fast: false<br>
+      matrix:<br>
+        java: [ '17' ]<br>
+        codes: [ 'uncompressed' ]<br>
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }}<br>
+<br>
+    steps:<br>
+      - uses: actions/checkout@master<br>
+      - name: Set up JDK ${{ matrix.java }}<br>
+        uses: actions/setup-java@v1<br>
+        with:<br>
+          java-version: ${{ matrix.java }}<br>
+      - name: before_install<br>
+        env:<br>
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF<br>
+        run: |<br>
+          bash dev/ci-before_install.sh<br>
+      - name: install<br>
+        run: |<br>
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout)<br>
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS"<br>
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl parquet-encoding,parquet-plugins/parquet-encoding-vector,parquet-plugins/parquet-plugins-benchmarks<br>
+      - name: verify<br>
+        env:<br>
+          TEST_CODECS: ${{ matrix.codes }}<br>
+          JAVA_VERSION: ${{ matrix.java }}<br>
+        run: |<br>
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout)<br>
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS"<br>
+          mvn verify --batch-mode javadoc:javadoc -Pci-test</p>

<p>Review Comment:<br>
   Shouldn't we use `-Pvector-plugins` here as well? Without it we won't actually run the related unit tests only compile the code in the `install` phase.<br>
   BTW, do we want to execute every tests in this workflow? I've thought the intent is to compile only the necessary modules to execute the tests of `vector-plugins` only.</p>



<p>##########<br>
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestParquetReadRouter.java:<br>
##########<br>
@@ -0,0 +1,61 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.apache.parquet.bytes.ByteBufferInputStream;<br>
+import org.junit.Test;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.io.IOException;<br>
+import java.nio.ByteBuffer;<br>
+<br>
+import static org.junit.Assert.assertArrayEquals;<br>
+<br>
+public class TestParquetReadRouter {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(TestParquetReadRouter.class);<br>
+<br>
+  private static final int minBitWidth = 1;<br>
+  private static final int maxBitWidth = 32;<br>
+  private static final int outputValues = 1024;<br>
+  private final int[] output = new int<span class="error">[outputValues]</span>;<br>
+  private final int[] outputBatch = new int<span class="error">[outputValues]</span>;<br>
+  private final int[] outputBatchVector = new int<span class="error">[outputValues]</span>;<br>
+<br>
+  @Test<br>
+  public void testRead() throws IOException {<br>
+    for (int bitWidth=minBitWidth; bitWidth &lt;= maxBitWidth; bitWidth++) {<br>
+      byte[] input = new byte<span class="error">[outputValues * bitWidth / 8]</span>;<br>
+      for (int i = 0; i &lt; input.length; i++) </p>
{
+        input[i] = (byte) i;
+      }
<p>+      ByteBufferInputStream inputStream = ByteBufferInputStream.wrap(ByteBuffer.wrap(input));<br>
+<br>
+      ParquetReadRouter.read(bitWidth, inputStream, 0, output);<br>
+      ParquetReadRouter.readBatch(bitWidth, inputStream, 0, outputBatch);<br>
+      assertArrayEquals(output, outputBatch);<br>
+      if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512) </p>
{
+        LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+        return;
+      }

<p>Review Comment:<br>
   See my previous comment in the other test class.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695546_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695546&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695546" class="commentdate_17695546_concise subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 08:33"><time class="livestamp" datetime="2023-03-02T08:33:18+0000">02/Mar/23 08:33</time></span></a>                    gszadovszky commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1122744256  


 ########## 
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java: 
########## 
@@ -0,0 +1,172 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.junit.Test; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.math.BigDecimal; 
+import java.nio.ByteBuffer; 
+import java.util.ArrayList; 
+import java.util.List; 
+ 
+import static org.junit.Assert.assertArrayEquals; 
+ 
+public class TestByteBitPacking512VectorLE { 
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class); 
+  @Test 
+  public void unpackValuesUsingVector() { 
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512)  
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

 Review Comment: 
   This way this is not a quality gate. I think we should not allow bypassing this test here but somehow ensure that the environment is capable of executing it. What do you think? 



 ########## 
.github/workflows/vector-plugins.yml: 
########## 
@@ -0,0 +1,56 @@ 
+# Licensed to the Apache Software Foundation (ASF) under one 
+# or more contributor license agreements.  See the NOTICE file 
+# distributed with this work for additional information 
+# regarding copyright ownership.  The ASF licenses this file 
+# to you under the Apache License, Version 2.0 (the 
+# "License"); you may not use this file except in compliance 
+# with the License.  You may obtain a copy of the License at 
+# 
+#    http://www.apache.org/licenses/LICENSE-2.0  
+# 
+# Unless required by applicable law or agreed to in writing, 
+# software distributed under the License is distributed on an 
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+# KIND, either express or implied.  See the License for the 
+# specific language governing permissions and limitations 
+# under the License. 
+ 
+name: Vector-plugins 
+ 
+on:  [push, pull_request]  
+ 
+jobs: 
+  build: 
+ 
+    runs-on: ubuntu-latest 
+    strategy: 
+      fail-fast: false 
+      matrix: 
+        java: [ '17' ] 
+        codes: [ 'uncompressed' ] 
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }} 
+ 
+    steps: 
+      - uses: actions/checkout@master 
+      - name: Set up JDK ${{ matrix.java }} 
+        uses: actions/setup-java@v1 
+        with: 
+          java-version: ${{ matrix.java }} 
+      - name: before_install 
+        env: 
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF 
+        run: | 
+          bash dev/ci-before_install.sh 
+      - name: install 
+        run: | 
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout) 
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS" 
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl parquet-encoding,parquet-plugins/parquet-encoding-vector,parquet-plugins/parquet-plugins-benchmarks 
+      - name: verify 
+        env: 
+          TEST_CODECS: ${{ matrix.codes }} 
+          JAVA_VERSION: ${{ matrix.java }} 
+        run: | 
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout) 
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS" 
+          mvn verify --batch-mode javadoc:javadoc -Pci-test 

 Review Comment: 
   Shouldn't we use `-Pvector-plugins` here as well? Without it we won't actually run the related unit tests only compile the code in the `install` phase. 
   BTW, do we want to execute every tests in this workflow? I've thought the intent is to compile only the necessary modules to execute the tests of `vector-plugins` only. 



 ########## 
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestParquetReadRouter.java: 
########## 
@@ -0,0 +1,61 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.apache.parquet.bytes.ByteBufferInputStream; 
+import org.junit.Test; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.io.IOException; 
+import java.nio.ByteBuffer; 
+ 
+import static org.junit.Assert.assertArrayEquals; 
+ 
+public class TestParquetReadRouter { 
+  private static final Logger LOG = LoggerFactory.getLogger(TestParquetReadRouter.class); 
+ 
+  private static final int minBitWidth = 1; 
+  private static final int maxBitWidth = 32; 
+  private static final int outputValues = 1024; 
+  private final int[] output = new int [outputValues] ; 
+  private final int[] outputBatch = new int [outputValues] ; 
+  private final int[] outputBatchVector = new int [outputValues] ; 
+ 
+  @Test 
+  public void testRead() throws IOException { 
+    for (int bitWidth=minBitWidth; bitWidth &lt;= maxBitWidth; bitWidth++) { 
+      byte[] input = new byte [outputValues * bitWidth / 8] ; 
+      for (int i = 0; i &lt; input.length; i++)  
{
+        input[i] = (byte) i;
+      }
 +      ByteBufferInputStream inputStream = ByteBufferInputStream.wrap(ByteBuffer.wrap(input)); 
+ 
+      ParquetReadRouter.read(bitWidth, inputStream, 0, output); 
+      ParquetReadRouter.readBatch(bitWidth, inputStream, 0, outputBatch); 
+      assertArrayEquals(output, outputBatch); 
+      if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512)  
{
+        LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+        return;
+      }

 Review Comment: 
   See my previous comment in the other test class. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17695590" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695590_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695590&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695590" class="commentdate_17695590_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 09:34"><time class="livestamp" datetime="2023-03-02T09:34:37+0000">02/Mar/23 09:34</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1122821855" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1122821855</a></p>


<p>##########<br>
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java:<br>
##########<br>
@@ -0,0 +1,172 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.junit.Test;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.math.BigDecimal;<br>
+import java.nio.ByteBuffer;<br>
+import java.util.ArrayList;<br>
+import java.util.List;<br>
+<br>
+import static org.junit.Assert.assertArrayEquals;<br>
+<br>
+public class TestByteBitPacking512VectorLE {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class);<br>
+  @Test<br>
+  public void unpackValuesUsingVector() {<br>
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512) </p>
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

<p>Review Comment:<br>
   @gszadovszky I agree with you. <br>
   1、I have verified with `lscpu command` that there are not avx512vbmi and avx512_vbmi2 instruction set on actions runner.<br>
   2、I have checked the docs(<a href="https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners" class="external-link" target="_blank" rel="nofollow noopener">https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners</a>), github actions do not support to select runner with specific instruction set.<br>
   3、I have resubmitted the help on how to select specific runner(<a href="https://github.com/orgs/community/discussions/48955" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/orgs/community/discussions/48955</a>)<br>
   I think there are two ways to fix it:<br>
   a. skip vector related tests until github actions support to select specific runner.<br>
   b. I will add a self-hosted runner for parquet-mr repo with cloud instance  to run vector related tests. But the runner is not long time since I have to pay money for it.</p>

<p>   What do you think ?  @gszadovszky </p>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695590_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695590&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695590" class="commentdate_17695590_concise subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 09:34"><time class="livestamp" datetime="2023-03-02T09:34:37+0000">02/Mar/23 09:34</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1122821855  


 ########## 
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java: 
########## 
@@ -0,0 +1,172 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.junit.Test; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.math.BigDecimal; 
+import java.nio.ByteBuffer; 
+import java.util.ArrayList; 
+import java.util.List; 
+ 
+import static org.junit.Assert.assertArrayEquals; 
+ 
+public class TestByteBitPacking512VectorLE { 
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class); 
+  @Test 
+  public void unpackValuesUsingVector() { 
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512)  
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

 Review Comment: 
   @gszadovszky I agree with you.  
   1、I have verified with `lscpu command` that there are not avx512vbmi and avx512_vbmi2 instruction set on actions runner. 
   2、I have checked the docs( https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners ), github actions do not support to select runner with specific instruction set. 
   3、I have resubmitted the help on how to select specific runner( https://github.com/orgs/community/discussions/48955 ) 
   I think there are two ways to fix it: 
   a. skip vector related tests until github actions support to select specific runner. 
   b. I will add a self-hosted runner for parquet-mr repo with cloud instance  to run vector related tests. But the runner is not long time since I have to pay money for it. 

    What do you think ?  @gszadovszky  



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17695591" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695591_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695591&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695591" class="commentdate_17695591_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 09:35"><time class="livestamp" datetime="2023-03-02T09:35:32+0000">02/Mar/23 09:35</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1122821855" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1122821855</a></p>


<p>##########<br>
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java:<br>
##########<br>
@@ -0,0 +1,172 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.junit.Test;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.math.BigDecimal;<br>
+import java.nio.ByteBuffer;<br>
+import java.util.ArrayList;<br>
+import java.util.List;<br>
+<br>
+import static org.junit.Assert.assertArrayEquals;<br>
+<br>
+public class TestByteBitPacking512VectorLE {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class);<br>
+  @Test<br>
+  public void unpackValuesUsingVector() {<br>
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512) </p>
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

<p>Review Comment:<br>
   @gszadovszky I agree with you. <br>
   1、I have verified with `lscpu` command that there are not avx512vbmi and avx512_vbmi2 instruction set on actions runner.<br>
   2、I have checked the docs(<a href="https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners" class="external-link" target="_blank" rel="nofollow noopener">https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners</a>), github actions do not support to select runner with specific instruction set.<br>
   3、I have resubmitted the help on how to select specific runner(<a href="https://github.com/orgs/community/discussions/48955" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/orgs/community/discussions/48955</a>)</p>
<ul>
	<li>I think there are two ways to fix it:</li>
	<li>a. skip vector related tests until github actions support to select specific runner.</li>
	<li>b. I will add a self-hosted runner for parquet-mr repo with cloud instance  to run vector related tests. But the runner is not long time since I have to pay money for it.</li>
</ul>


<p>   What do you think ?  @gszadovszky </p>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695591_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695591&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695591" class="commentdate_17695591_concise subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 09:35"><time class="livestamp" datetime="2023-03-02T09:35:32+0000">02/Mar/23 09:35</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1122821855  


 ########## 
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java: 
########## 
@@ -0,0 +1,172 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.junit.Test; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.math.BigDecimal; 
+import java.nio.ByteBuffer; 
+import java.util.ArrayList; 
+import java.util.List; 
+ 
+import static org.junit.Assert.assertArrayEquals; 
+ 
+public class TestByteBitPacking512VectorLE { 
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class); 
+  @Test 
+  public void unpackValuesUsingVector() { 
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512)  
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

 Review Comment: 
   @gszadovszky I agree with you.  
   1、I have verified with `lscpu` command that there are not avx512vbmi and avx512_vbmi2 instruction set on actions runner. 
   2、I have checked the docs( https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners ), github actions do not support to select runner with specific instruction set. 
   3、I have resubmitted the help on how to select specific runner( https://github.com/orgs/community/discussions/48955 ) 
 
	 I think there are two ways to fix it: 
	 a. skip vector related tests until github actions support to select specific runner. 
	 b. I will add a self-hosted runner for parquet-mr repo with cloud instance  to run vector related tests. But the runner is not long time since I have to pay money for it. 
 


    What do you think ?  @gszadovszky  



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17695594" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695594_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695594&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695594" class="commentdate_17695594_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 09:37"><time class="livestamp" datetime="2023-03-02T09:37:33+0000">02/Mar/23 09:37</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1122821855" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1122821855</a></p>


<p>##########<br>
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java:<br>
##########<br>
@@ -0,0 +1,172 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.junit.Test;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.math.BigDecimal;<br>
+import java.nio.ByteBuffer;<br>
+import java.util.ArrayList;<br>
+import java.util.List;<br>
+<br>
+import static org.junit.Assert.assertArrayEquals;<br>
+<br>
+public class TestByteBitPacking512VectorLE {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class);<br>
+  @Test<br>
+  public void unpackValuesUsingVector() {<br>
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512) </p>
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

<p>Review Comment:<br>
   @gszadovszky I agree with you. <br>
   1、I have verified with `lscpu` command that there are not avx512vbmi and avx512_vbmi2 instruction set on actions runner.<br>
   2、I have checked the docs(<a href="https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners" class="external-link" target="_blank" rel="nofollow noopener">https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners</a>), github actions do not support to select runner with specific instruction set.<br>
   3、I have resubmitted the help on how to select specific runner(<a href="https://github.com/orgs/community/discussions/48955" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/orgs/community/discussions/48955</a>)</p>
<ul>
	<li>I think there are two ways to fix it:</li>
	<li>a. skip vector related tests until github actions support to select specific runner.</li>
	<li>b. I will add a *<b>self-hosted runner</b>* for parquet-mr repo with cloud instance  to run vector related tests. But the runner is not long time since I have to pay money for it.</li>
</ul>


<p>   What do you think ?  @gszadovszky </p>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695594_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695594&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695594" class="commentdate_17695594_concise subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 09:37"><time class="livestamp" datetime="2023-03-02T09:37:33+0000">02/Mar/23 09:37</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1122821855  


 ########## 
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java: 
########## 
@@ -0,0 +1,172 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.junit.Test; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.math.BigDecimal; 
+import java.nio.ByteBuffer; 
+import java.util.ArrayList; 
+import java.util.List; 
+ 
+import static org.junit.Assert.assertArrayEquals; 
+ 
+public class TestByteBitPacking512VectorLE { 
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class); 
+  @Test 
+  public void unpackValuesUsingVector() { 
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512)  
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

 Review Comment: 
   @gszadovszky I agree with you.  
   1、I have verified with `lscpu` command that there are not avx512vbmi and avx512_vbmi2 instruction set on actions runner. 
   2、I have checked the docs( https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners ), github actions do not support to select runner with specific instruction set. 
   3、I have resubmitted the help on how to select specific runner( https://github.com/orgs/community/discussions/48955 ) 
 
	 I think there are two ways to fix it: 
	 a. skip vector related tests until github actions support to select specific runner. 
	 b. I will add a * self-hosted runner * for parquet-mr repo with cloud instance  to run vector related tests. But the runner is not long time since I have to pay money for it. 
 


    What do you think ?  @gszadovszky  



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17695595" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695595_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695595&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695595" class="commentdate_17695595_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 09:38"><time class="livestamp" datetime="2023-03-02T09:38:42+0000">02/Mar/23 09:38</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1122821855" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1122821855</a></p>


<p>##########<br>
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java:<br>
##########<br>
@@ -0,0 +1,172 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.junit.Test;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.math.BigDecimal;<br>
+import java.nio.ByteBuffer;<br>
+import java.util.ArrayList;<br>
+import java.util.List;<br>
+<br>
+import static org.junit.Assert.assertArrayEquals;<br>
+<br>
+public class TestByteBitPacking512VectorLE {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class);<br>
+  @Test<br>
+  public void unpackValuesUsingVector() {<br>
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512) </p>
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

<p>Review Comment:<br>
   @gszadovszky I agree with you. <br>
   1、I have verified with `lscpu` command that there are not avx512vbmi and avx512_vbmi2 instruction set on actions runner.<br>
   2、I have checked the docs(<a href="https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners" class="external-link" target="_blank" rel="nofollow noopener">https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners</a>), github actions do not support to select runner with specific instruction set.<br>
   3、I have resubmitted the help on how to select specific runner(<a href="https://github.com/orgs/community/discussions/48955" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/orgs/community/discussions/48955</a>)</p>
<ul>
	<li>I think there are two ways to fix it:</li>
	<li>a. skip vector related tests until github actions support to select specific runner.</li>
	<li>b. I will add a *<b>self-hosted runner</b>* for parquet-mr repo with cloud instance  to run vector related tests. But the runner will be not running for a long time since I have to pay money for it.</li>
</ul>


<p>   What do you think ?  @gszadovszky </p>



 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695595_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695595&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695595" class="commentdate_17695595_concise subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 09:38"><time class="livestamp" datetime="2023-03-02T09:38:42+0000">02/Mar/23 09:38</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1122821855  


 ########## 
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java: 
########## 
@@ -0,0 +1,172 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.junit.Test; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.math.BigDecimal; 
+import java.nio.ByteBuffer; 
+import java.util.ArrayList; 
+import java.util.List; 
+ 
+import static org.junit.Assert.assertArrayEquals; 
+ 
+public class TestByteBitPacking512VectorLE { 
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class); 
+  @Test 
+  public void unpackValuesUsingVector() { 
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512)  
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

 Review Comment: 
   @gszadovszky I agree with you.  
   1、I have verified with `lscpu` command that there are not avx512vbmi and avx512_vbmi2 instruction set on actions runner. 
   2、I have checked the docs( https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners ), github actions do not support to select runner with specific instruction set. 
   3、I have resubmitted the help on how to select specific runner( https://github.com/orgs/community/discussions/48955 ) 
 
	 I think there are two ways to fix it: 
	 a. skip vector related tests until github actions support to select specific runner. 
	 b. I will add a * self-hosted runner * for parquet-mr repo with cloud instance  to run vector related tests. But the runner will be not running for a long time since I have to pay money for it. 
 


    What do you think ?  @gszadovszky  



             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17695611" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695611_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695611&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695611" class="commentdate_17695611_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 09:45"><time class="livestamp" datetime="2023-03-02T09:45:08+0000">02/Mar/23 09:45</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>gszadovszky commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1122834543" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1122834543</a></p>


<p>##########<br>
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java:<br>
##########<br>
@@ -0,0 +1,172 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.junit.Test;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.math.BigDecimal;<br>
+import java.nio.ByteBuffer;<br>
+import java.util.ArrayList;<br>
+import java.util.List;<br>
+<br>
+import static org.junit.Assert.assertArrayEquals;<br>
+<br>
+public class TestByteBitPacking512VectorLE {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class);<br>
+  @Test<br>
+  public void unpackValuesUsingVector() {<br>
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512) </p>
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

<p>Review Comment:<br>
   @jiangjiguang, I wouldn't expect you to spend money on it. I accept there is no proper solution for now. Since this is more for the developers who work on this part and it does not part of the official parquet-mr distribution I am fine with not enforcing these tests to be executed.<br>
   I would suggest to use `Assume` from `junit`. This way the tests would be marked as <em>skipped</em> instead of having them <em>passed</em>.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695611_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695611&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695611" class="commentdate_17695611_concise subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 09:45"><time class="livestamp" datetime="2023-03-02T09:45:08+0000">02/Mar/23 09:45</time></span></a>                    gszadovszky commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1122834543  


 ########## 
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java: 
########## 
@@ -0,0 +1,172 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.junit.Test; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.math.BigDecimal; 
+import java.nio.ByteBuffer; 
+import java.util.ArrayList; 
+import java.util.List; 
+ 
+import static org.junit.Assert.assertArrayEquals; 
+ 
+public class TestByteBitPacking512VectorLE { 
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class); 
+  @Test 
+  public void unpackValuesUsingVector() { 
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512)  
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

 Review Comment: 
   @jiangjiguang, I wouldn't expect you to spend money on it. I accept there is no proper solution for now. Since this is more for the developers who work on this part and it does not part of the official parquet-mr distribution I am fine with not enforcing these tests to be executed. 
   I would suggest to use `Assume` from `junit`. This way the tests would be marked as  skipped  instead of having them  passed . 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17695625" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695625_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695625&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695625" class="commentdate_17695625_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 10:05"><time class="livestamp" datetime="2023-03-02T10:05:44+0000">02/Mar/23 10:05</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1122860932" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1122860932</a></p>


<p>##########<br>
.github/workflows/vector-plugins.yml:<br>
##########<br>
@@ -0,0 +1,56 @@<br>
+# Licensed to the Apache Software Foundation (ASF) under one<br>
+# or more contributor license agreements.  See the NOTICE file<br>
+# distributed with this work for additional information<br>
+# regarding copyright ownership.  The ASF licenses this file<br>
+# to you under the Apache License, Version 2.0 (the<br>
+# "License"); you may not use this file except in compliance<br>
+# with the License.  You may obtain a copy of the License at<br>
+#<br>
+#   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+#<br>
+# Unless required by applicable law or agreed to in writing,<br>
+# software distributed under the License is distributed on an<br>
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+# KIND, either express or implied.  See the License for the<br>
+# specific language governing permissions and limitations<br>
+# under the License.<br>
+<br>
+name: Vector-plugins<br>
+<br>
+on: <span class="error">[push, pull_request]</span><br>
+<br>
+jobs:<br>
+  build:<br>
+<br>
+    runs-on: ubuntu-latest<br>
+    strategy:<br>
+      fail-fast: false<br>
+      matrix:<br>
+        java: [ '17' ]<br>
+        codes: [ 'uncompressed' ]<br>
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }}<br>
+<br>
+    steps:<br>
+      - uses: actions/checkout@master<br>
+      - name: Set up JDK ${{ matrix.java }}<br>
+        uses: actions/setup-java@v1<br>
+        with:<br>
+          java-version: ${{ matrix.java }}<br>
+      - name: before_install<br>
+        env:<br>
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF<br>
+        run: |<br>
+          bash dev/ci-before_install.sh<br>
+      - name: install<br>
+        run: |<br>
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout)<br>
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS"<br>
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl parquet-encoding,parquet-plugins/parquet-encoding-vector,parquet-plugins/parquet-plugins-benchmarks<br>
+      - name: verify<br>
+        env:<br>
+          TEST_CODECS: ${{ matrix.codes }}<br>
+          JAVA_VERSION: ${{ matrix.java }}<br>
+        run: |<br>
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout)<br>
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS"<br>
+          mvn verify --batch-mode javadoc:javadoc -Pci-test</p>

<p>Review Comment:<br>
   fix it</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695625_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695625&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695625" class="commentdate_17695625_concise subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 10:05"><time class="livestamp" datetime="2023-03-02T10:05:44+0000">02/Mar/23 10:05</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1122860932  


 ########## 
.github/workflows/vector-plugins.yml: 
########## 
@@ -0,0 +1,56 @@ 
+# Licensed to the Apache Software Foundation (ASF) under one 
+# or more contributor license agreements.  See the NOTICE file 
+# distributed with this work for additional information 
+# regarding copyright ownership.  The ASF licenses this file 
+# to you under the Apache License, Version 2.0 (the 
+# "License"); you may not use this file except in compliance 
+# with the License.  You may obtain a copy of the License at 
+# 
+#    http://www.apache.org/licenses/LICENSE-2.0  
+# 
+# Unless required by applicable law or agreed to in writing, 
+# software distributed under the License is distributed on an 
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+# KIND, either express or implied.  See the License for the 
+# specific language governing permissions and limitations 
+# under the License. 
+ 
+name: Vector-plugins 
+ 
+on:  [push, pull_request]  
+ 
+jobs: 
+  build: 
+ 
+    runs-on: ubuntu-latest 
+    strategy: 
+      fail-fast: false 
+      matrix: 
+        java: [ '17' ] 
+        codes: [ 'uncompressed' ] 
+    name: Build Parquet with JDK ${{ matrix.java }} and ${{ matrix.codes }} 
+ 
+    steps: 
+      - uses: actions/checkout@master 
+      - name: Set up JDK ${{ matrix.java }} 
+        uses: actions/setup-java@v1 
+        with: 
+          java-version: ${{ matrix.java }} 
+      - name: before_install 
+        env: 
+          CI_TARGET_BRANCH: $GITHUB_HEAD_REF 
+        run: | 
+          bash dev/ci-before_install.sh 
+      - name: install 
+        run: | 
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout) 
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS" 
+          mvn install --batch-mode -Pvector-plugins -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true -Djava.version=${{ matrix.java }} -pl parquet-encoding,parquet-plugins/parquet-encoding-vector,parquet-plugins/parquet-plugins-benchmarks 
+      - name: verify 
+        env: 
+          TEST_CODECS: ${{ matrix.codes }} 
+          JAVA_VERSION: ${{ matrix.java }} 
+        run: | 
+          EXTRA_JAVA_TEST_ARGS=$(mvn help:evaluate -Dexpression=extraJavaTestArgs -q -DforceStdout) 
+          export MAVEN_OPTS="$MAVEN_OPTS $EXTRA_JAVA_TEST_ARGS" 
+          mvn verify --batch-mode javadoc:javadoc -Pci-test 

 Review Comment: 
   fix it 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17695626" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695626_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695626&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695626" class="commentdate_17695626_verbose subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 10:08"><time class="livestamp" datetime="2023-03-02T10:08:09+0000">02/Mar/23 10:08</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on code in PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#discussion_r1122863674" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#discussion_r1122863674</a></p>


<p>##########<br>
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java:<br>
##########<br>
@@ -0,0 +1,172 @@<br>
+/*<br>
+ * Licensed to the Apache Software Foundation (ASF) under one<br>
+ * or more contributor license agreements.  See the NOTICE file<br>
+ * distributed with this work for additional information<br>
+ * regarding copyright ownership.  The ASF licenses this file<br>
+ * to you under the Apache License, Version 2.0 (the<br>
+ * "License"); you may not use this file except in compliance<br>
+ * with the License.  You may obtain a copy of the License at<br>
+ *<br>
+ *   <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link" target="_blank" rel="nofollow noopener">http://www.apache.org/licenses/LICENSE-2.0</a><br>
+ *<br>
+ * Unless required by applicable law or agreed to in writing,<br>
+ * software distributed under the License is distributed on an<br>
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br>
+ * KIND, either express or implied.  See the License for the<br>
+ * specific language governing permissions and limitations<br>
+ * under the License.<br>
+ */<br>
+package org.apache.parquet.column.values.bitpacking;<br>
+<br>
+import org.junit.Test;<br>
+import org.slf4j.Logger;<br>
+import org.slf4j.LoggerFactory;<br>
+<br>
+import java.math.BigDecimal;<br>
+import java.nio.ByteBuffer;<br>
+import java.util.ArrayList;<br>
+import java.util.List;<br>
+<br>
+import static org.junit.Assert.assertArrayEquals;<br>
+<br>
+public class TestByteBitPacking512VectorLE {<br>
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class);<br>
+  @Test<br>
+  public void unpackValuesUsingVector() {<br>
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512) </p>
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

<p>Review Comment:<br>
   @gszadovszky thanks, I have used assume from junit and added vector-plugins in vector-plugins.yml.</p>

<p>   please take a look.</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17695626_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17695626&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17695626" class="commentdate_17695626_concise subText comment-created-date-link"><span class="date user-tz" title="02/Mar/23 10:08"><time class="livestamp" datetime="2023-03-02T10:08:09+0000">02/Mar/23 10:08</time></span></a>                    jiangjiguang commented on code in PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#discussion_r1122863674  


 ########## 
parquet-plugins/parquet-encoding-vector/src/test/java/org/apache/parquet/column/values/bitpacking/TestByteBitPacking512VectorLE.java: 
########## 
@@ -0,0 +1,172 @@ 
+/* 
+ * Licensed to the Apache Software Foundation (ASF) under one 
+ * or more contributor license agreements.  See the NOTICE file 
+ * distributed with this work for additional information 
+ * regarding copyright ownership.  The ASF licenses this file 
+ * to you under the Apache License, Version 2.0 (the 
+ * "License"); you may not use this file except in compliance 
+ * with the License.  You may obtain a copy of the License at 
+ * 
+ *    http://www.apache.org/licenses/LICENSE-2.0  
+ * 
+ * Unless required by applicable law or agreed to in writing, 
+ * software distributed under the License is distributed on an 
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
+ * KIND, either express or implied.  See the License for the 
+ * specific language governing permissions and limitations 
+ * under the License. 
+ */ 
+package org.apache.parquet.column.values.bitpacking; 
+ 
+import org.junit.Test; 
+import org.slf4j.Logger; 
+import org.slf4j.LoggerFactory; 
+ 
+import java.math.BigDecimal; 
+import java.nio.ByteBuffer; 
+import java.util.ArrayList; 
+import java.util.List; 
+ 
+import static org.junit.Assert.assertArrayEquals; 
+ 
+public class TestByteBitPacking512VectorLE { 
+  private static final Logger LOG = LoggerFactory.getLogger(TestByteBitPacking512VectorLE.class); 
+  @Test 
+  public void unpackValuesUsingVector() { 
+    if (ParquetReadRouter.getSupportVectorFromCPUFlags() != VectorSupport.VECTOR_512)  
{
+      LOG.info("avx512vbmi and avx512_vbmi2 are not supported, skip this test.");
+      return;
+    }

 Review Comment: 
   @gszadovszky thanks, I have used assume from junit and added vector-plugins in vector-plugins.yml. 

    please take a look. 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17696399" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17696399_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17696399&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17696399" class="commentdate_17696399_verbose subText comment-created-date-link"><span class="date user-tz" title="04/Mar/23 03:49"><time class="livestamp" datetime="2023-03-04T03:49:33+0000">04/Mar/23 03:49</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jatin-bhateja commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1454364112" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1454364112</a></p>

<p>   Hi @gszadovszky , @wgtmac Thanks for your reviews and guidance during this long review process. May we request to you please merge this PR by adding following people as  co-authors ( jiangjiguang jiyu1021 guangzegu Fang-Xie jatin-bhateja) alternatively make @jiangjiguang a committer so that he can merge on our behalf.</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17696399_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17696399&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17696399" class="commentdate_17696399_concise subText comment-created-date-link"><span class="date user-tz" title="04/Mar/23 03:49"><time class="livestamp" datetime="2023-03-04T03:49:33+0000">04/Mar/23 03:49</time></span></a>                    jatin-bhateja commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1454364112  

    Hi @gszadovszky , @wgtmac Thanks for your reviews and guidance during this long review process. May we request to you please merge this PR by adding following people as  co-authors ( jiangjiguang jiyu1021 guangzegu Fang-Xie jatin-bhateja) alternatively make @jiangjiguang a committer so that he can merge on our behalf. 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17696440" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17696440_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17696440&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17696440" class="commentdate_17696440_verbose subText comment-created-date-link"><span class="date user-tz" title="04/Mar/23 13:05"><time class="livestamp" datetime="2023-03-04T13:05:41+0000">04/Mar/23 13:05</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>jiangjiguang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1454733852" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1454733852</a></p>

<p>   &gt; Hi @gszadovszky , @wgtmac Thanks for your reviews and guidance during this long review process. May we request to you please merge this PR by adding following people as co-authors ( @jiangjiguang @jiyu1021 @guangzegu @Fang-Xie @jatin-bhateja) alternatively make @jiangjiguang a committer so that he can merge on our behalf.</p>

<p>   @jatin-bhateja I have added them as co-authors on the first commit.<br>
   !<span class="error">[image]</span>(<a href="https://user-images.githubusercontent.com/12368495/222903521-648745d9-e389-48d0-b223-9abfb308d125.png" class="external-link" target="_blank" rel="nofollow noopener">https://user-images.githubusercontent.com/12368495/222903521-648745d9-e389-48d0-b223-9abfb308d125.png</a>)</p>


 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17696440_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17696440&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17696440" class="commentdate_17696440_concise subText comment-created-date-link"><span class="date user-tz" title="04/Mar/23 13:05"><time class="livestamp" datetime="2023-03-04T13:05:41+0000">04/Mar/23 13:05</time></span></a>                    jiangjiguang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1454733852  

    &gt; Hi @gszadovszky , @wgtmac Thanks for your reviews and guidance during this long review process. May we request to you please merge this PR by adding following people as co-authors ( @jiangjiguang @jiyu1021 @guangzegu @Fang-Xie @jatin-bhateja) alternatively make @jiangjiguang a committer so that he can merge on our behalf. 

    @jatin-bhateja I have added them as co-authors on the first commit. 
   ! [image] ( https://user-images.githubusercontent.com/12368495/222903521-648745d9-e389-48d0-b223-9abfb308d125.png ) 


             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17696444" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17696444_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17696444&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17696444" class="commentdate_17696444_verbose subText comment-created-date-link"><span class="date user-tz" title="04/Mar/23 13:51"><time class="livestamp" datetime="2023-03-04T13:51:33+0000">04/Mar/23 13:51</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac merged PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011</a></p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17696444_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17696444&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17696444" class="commentdate_17696444_concise subText comment-created-date-link"><span class="date user-tz" title="04/Mar/23 13:51"><time class="livestamp" datetime="2023-03-04T13:51:33+0000">04/Mar/23 13:51</time></span></a>                    wgtmac merged PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011  

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17696445" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17696445_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17696445&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17696445" class="commentdate_17696445_verbose subText comment-created-date-link"><span class="date user-tz" title="04/Mar/23 13:53"><time class="livestamp" datetime="2023-03-04T13:53:53+0000">04/Mar/23 13:53</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>wgtmac commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1454747482" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1454747482</a></p>

<p>   I have merged it. Thanks @jiangjiguang @jatin-bhateja for the contribution and @gszadovszky for the review!</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17696445_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17696445&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17696445" class="commentdate_17696445_concise subText comment-created-date-link"><span class="date user-tz" title="04/Mar/23 13:53"><time class="livestamp" datetime="2023-03-04T13:53:53+0000">04/Mar/23 13:53</time></span></a>                    wgtmac commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1454747482  

    I have merged it. Thanks @jiangjiguang @jatin-bhateja for the contribution and @gszadovszky for the review! 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17708309" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17708309_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17708309&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17708309" class="commentdate_17708309_verbose subText comment-created-date-link"><span class="date user-tz" title="04/Apr/23 08:30"><time class="livestamp" datetime="2023-04-04T08:30:17+0000">04/Apr/23 08:30</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>LuciferYang commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1495563620" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1495563620</a></p>

<p>   @jiangjiguang Sorry to bother you, I am not sure if the use of the AVX 512 will still make other CPU cores to downshift frequency. If so, is there a way to manually turn off this feature now? Otherwise, the new version will be difficult to promote and use in the enterprise.</p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17708309_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17708309&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17708309" class="commentdate_17708309_concise subText comment-created-date-link"><span class="date user-tz" title="04/Apr/23 08:30"><time class="livestamp" datetime="2023-04-04T08:30:17+0000">04/Apr/23 08:30</time></span></a>                    LuciferYang commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1495563620  

    @jiangjiguang Sorry to bother you, I am not sure if the use of the AVX 512 will still make other CPU cores to downshift frequency. If so, is there a way to manually turn off this feature now? Otherwise, the new version will be difficult to promote and use in the enterprise. 

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17746083" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17746083_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17746083&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17746083" class="commentdate_17746083_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Jul/23 14:46"><time class="livestamp" datetime="2023-07-23T14:46:49+0000">23/Jul/23 14:46</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>CascadingCloud commented on PR #1011:<br>
URL: <a href="https://github.com/apache/parquet-mr/pull/1011#issuecomment-1646860071" class="external-link" target="_blank" rel="nofollow noopener">https://github.com/apache/parquet-mr/pull/1011#issuecomment-1646860071</a></p>

<p>   &gt; @jiangjiguang Sorry to bother you, I am not sure if the use of the AVX 512 will still make other CPU cores to downshift frequency. If so, is there a way to manually turn off this feature now? Otherwise, the new version may be difficult to promote and use in the enterprise.</p>

<p>   spark.sql.parquet.vector512.read.enabled </p>

 </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="githubbot" id="commentauthor_17746083_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(1)" alt="githubbot"></span></span> ASF GitHub Bot</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17746083&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17746083" class="commentdate_17746083_concise subText comment-created-date-link"><span class="date user-tz" title="23/Jul/23 14:46"><time class="livestamp" datetime="2023-07-23T14:46:49+0000">23/Jul/23 14:46</time></span></a>                    CascadingCloud commented on PR #1011: 
URL:  https://github.com/apache/parquet-mr/pull/1011#issuecomment-1646860071  

    &gt; @jiangjiguang Sorry to bother you, I am not sure if the use of the AVX 512 will still make other CPU cores to downshift frequency. If so, is there a way to manually turn off this feature now? Otherwise, the new version may be difficult to promote and use in the enterprise. 

    spark.sql.parquet.vector512.read.enabled  

             </div>
        </div>
    </div>
</div>
                                     


<div id="comment-17859106" class="issue-data-block activity-comment twixi-block  expanded">
    <div class="twixi-wrap verbose actionContainer">
        <div class="action-head">
            <button aria-label="Collapse comment" title="Collapse comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-expanded"></button>
            <div class="action-details">        
    
    
    
                

    <a class="user-hover user-avatar" rel="rok" id="commentauthor_17859106_verbose" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rok"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(2)" alt="rok"></span></span> Rok Mihevc</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17859106&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17859106" class="commentdate_17859106_verbose subText comment-created-date-link"><span class="date user-tz" title="23/Jun/24 03:32"><time class="livestamp" datetime="2024-06-23T03:32:38+0000">23/Jun/24 03:32</time></span></a>  </div>
        </div>
        <div class="action-body flooded"><p>This issue has been migrated to <a href="https://github.com/apache/parquet-java/issues/1643" class="external-link" target="_blank" rel="nofollow noopener">issue #1643</a> on GitHub. Please see the <a href="https://issues.apache.org/jira/browse/PARQUET-2502" class="external-link" rel="nofollow">migration documentation</a> for further details.</p> </div>
        <div class="action-links action-comment-actions">
                                </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <div class="action-head">
            <button aria-label="Expand comment" title="Expand comment" class="twixi icon-default aui-icon aui-icon-small aui-iconfont-collapsed"></button>
            <div class="action-details flooded">
                        
    
    
    
                

    <a class="user-hover user-avatar" rel="rok" id="commentauthor_17859106_concise" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rok"><span class="aui-avatar aui-avatar-xsmall"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(2)" alt="rok"></span></span> Rok Mihevc</a>
 added a comment  - <a href="https://issues.apache.org/jira/browse/PARQUET-2159?focusedCommentId=17859106&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17859106" class="commentdate_17859106_concise subText comment-created-date-link"><span class="date user-tz" title="23/Jun/24 03:32"><time class="livestamp" datetime="2024-06-23T03:32:38+0000">23/Jun/24 03:32</time></span></a>                    This issue has been migrated to  issue #1643  on GitHub. Please see the  migration documentation  for further details.              </div>
        </div>
    </div>
</div>
                                     </div>
    </div>
</div></div></div><div id="viewissuesidebar" class="aui-item issue-side-column"><div id="peoplemodule" class="module toggle-wrap"><div id="peoplemodule_heading" class="mod-header"><button class="aui-button toggle-title" aria-label="People" aria-controls="peoplemodule" aria-expanded="true" resolved=""><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"><g fill="none" fill-rule="evenodd"><path d="M3.29175 4.793c-.389.392-.389 1.027 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955c.388-.392.388-1.027 0-1.419-.389-.392-1.018-.392-1.406 0l-2.298 2.317-2.307-2.327c-.194-.195-.449-.293-.703-.293-.255 0-.51.098-.703.293z" fill="#344563"></path></g></svg></button><h4 class="toggle-title" id="peoplemodule-label">People</h4><ul class="ops"></ul></div><div class="mod-content">





<div class="item-details people-details" id="peopledetails">
                        
<dl>
    <dt title="Assignee">
        <label for="assignee-field">Assignee:</label>
    </dt>
    <dd>
        <span id="assignee-val" class="view-issue-field">

            <span class="user-hover" id="issue_summary_assignee_Fang-Xie" rel="Fang-Xie">
            

    
    <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(3)" alt="Fang-Xie"></span></span>
            Fang-Xie
        </span>
    </span>
            </dd>
</dl>                                
<dl>
    <dt title="Reporter">
        <label for="reporter-field">Reporter:</label>
    </dt>
    <dd>
        <span id="reporter-val" class="view-issue-field">

            <span class="user-hover" id="issue_summary_reporter_Fang-Xie" rel="Fang-Xie">
            

    
    <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/useravatar(3)" alt="Fang-Xie"></span></span>
            Fang-Xie
        </span>
    </span>
    </dd>
</dl>                </div>
    <div class="item-details">
                        <dl>
        <dt title="Votes">Votes:</dt>
        <dd>
                                <aui-badge id="vote-data" class="">0</aui-badge>
            
                                                <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span>
                    </dd>
    </dl>
                            <dl>
        <dt title="Watchers">Watchers:</dt>
        <dd>
                                
                                
                            <aui-badge id="watcher-data" class="">7</aui-badge>
            
                                        <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span>
                    </dd>
    </dl>
        </div>
</div></div><div id="datesmodule" class="module toggle-wrap"><div id="datesmodule_heading" class="mod-header"><button class="aui-button toggle-title" aria-label="Dates" aria-controls="datesmodule" aria-expanded="true" resolved=""><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"><g fill="none" fill-rule="evenodd"><path d="M3.29175 4.793c-.389.392-.389 1.027 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955c.388-.392.388-1.027 0-1.419-.389-.392-1.018-.392-1.406 0l-2.298 2.317-2.307-2.327c-.194-.195-.449-.293-.703-.293-.255 0-.51.098-.703.293z" fill="#344563"></path></g></svg></button><h4 class="toggle-title" id="datesmodule-label">Dates</h4><ul class="ops"></ul></div><div class="mod-content">
<div class="item-details">
            <dl class="dates">
            <dt>
                                    Created:
                            </dt>
            <dd class="date user-tz" title="15/Jun/22 14:18">
                <span data-name="Created" id="created-val" data-fieldtype="datetime">
                                                                                                        <time class="livestamp" datetime="2022-06-15T14:18:55+0000">15/Jun/22 14:18</time>                                                                                         </span>
            </dd>
        </dl>
            <dl class="dates">
            <dt>
                                    Updated:
                            </dt>
            <dd class="date user-tz" title="23/Jun/24 03:32">
                <span data-name="Updated" id="updated-val" data-fieldtype="datetime">
                                                                                                        <time class="livestamp" datetime="2024-06-23T03:32:38+0000">23/Jun/24 03:32</time>                                                                                         </span>
            </dd>
        </dl>
            <dl class="dates">
            <dt>
                                    Resolved:
                            </dt>
            <dd class="date user-tz" title="26/Mar/23 05:46">
                <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime">
                                                                                                        <time class="livestamp" datetime="2023-03-26T05:46:35+0000">26/Mar/23 05:46</time>                                                                                         </span>
            </dd>
        </dl>
    </div>
</div></div></div></div></div></div></div><div class="tools-container"><div class="issue-tools"><div class="pager-container"><div class="pager"><div class="showing"><span>61 of 3110</span></div><div class="previous"><button data-id="12741822" data-key="HIVE-8128" class="aui-button aui-button-subtle" title="Previous Issue &#39;HIVE-8128 ( Type &#39;k&#39; )" resolved=""><span class="aui-icon aui-icon-small aui-iconfont-chevron-up">Previous Issue'HIVE-8128'</span></button></div><div class="next"><button id="next-issue" data-id="13086947" data-key="SPARK-21404" class="aui-button aui-button-subtle" title="Next Issue &#39;SPARK-21404&#39; ( Type &#39;j&#39; )" resolved=""><span class="aui-icon aui-icon-small aui-iconfont-chevron-down">Next Issue'SPARK-21404'</span></button></div></div></div><div class="expand-container"></div></div></div></div></div></div></div></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    

                    <div id="criteriaJson" style="display:none;">{"searchers":{"groups":[{"searchers":[{"name":"Project","id":"project","key":"issue.field.project","isShown":true,"lastViewed":1752155696150},{"name":"Summary","id":"summary","key":"issue.field.summary","isShown":true},{"name":"Type","id":"issuetype","key":"issue.field.issuetype","isShown":true,"lastViewed":1752155696159},{"name":"Status","id":"status","key":"issue.field.status","isShown":true,"lastViewed":1752155696169},{"name":"Priority","id":"priority","key":"issue.field.priority","isShown":true},{"name":"Resolution","id":"resolution","key":"issue.field.resolution","isShown":true},{"name":"Creator","id":"creator","key":"issue.field.creator","isShown":true},{"name":"Affects Version","id":"version","key":"issue.field.affectsversions","isShown":true},{"name":"Fix Version","id":"fixfor","key":"issue.field.fixversions","isShown":true},{"name":"Component","id":"component","key":"issue.field.components","isShown":true},{"name":"% Limits","id":"workratio","key":"issue.field.workratio","isShown":true},{"name":"Link types","id":"issue_link_type","key":"issue.field.issuelinks","isShown":true},{"name":"Environment","id":"environment","key":"issue.field.environment","isShown":true},{"name":"Description","id":"description","key":"issue.field.description","isShown":true},{"name":"Comment","id":"comment","key":"issue.field.comment","isShown":true},{"name":"Label","id":"labels","key":"issue.field.labels","isShown":true},{"name":"Query","id":"text","key":"text","isShown":true,"lastViewed":1752155696197},{"name":"Affects version (Component)","id":"customfield_12314145","key":"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","isShown":true},{"name":"Affects version (Component)","id":"customfield_12310171","key":"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","isShown":false},{"name":"Attachment count","id":"customfield_12310310","key":"com.atlassian.jira.toolkit:attachments","isShown":true},{"name":"Backport to Version","id":"customfield_12310271","key":"com.atlassian.jira.plugin.system.customfieldtypes:multiversion","isShown":false},{"name":"Backport to Version","id":"customfield_12314144","key":"com.atlassian.jira.plugin.system.customfieldtypes:multiversion","isShown":true},{"name":"Blog - New Blog Administrators","id":"customfield_12312332","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":true},{"name":"Blog - New Blog PMC","id":"customfield_12312331","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Blog - Write access","id":"customfield_12312330","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":true},{"name":"Blog Administrator?","id":"customfield_12312328","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":true},{"name":"Blogs - Admin for blog","id":"customfield_12312329","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Blogs - Email Address","id":"customfield_12312327","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Blogs - Existing Blog Access Level","id":"customfield_12312335","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":true},{"name":"Blogs - Existing Blog Name","id":"customfield_12312334","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Blogs - New Blog Write Access","id":"customfield_12312333","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":true},{"name":"Blogs - Username","id":"customfield_12312326","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Browser Version","id":"customfield_12310223","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Bug Category","id":"customfield_12313825","key":"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","isShown":true},{"name":"Bug behavior facts","id":"customfield_12310200","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":false},{"name":"Bug behavior facts","id":"customfield_12314125","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":true},{"name":"Bugtraq ID","id":"customfield_12310150","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Bugzilla - Email Notification Address","id":"customfield_12312338","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Bugzilla - List of usernames","id":"customfield_12312339","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":true},{"name":"Bugzilla - PMC Name","id":"customfield_12312337","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Bugzilla - Project Name","id":"customfield_12312336","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Bugzilla Id","id":"customfield_10010","key":"com.atlassian.jira.plugin.system.customfieldtypes:importid","isShown":true},{"name":"Bugzilla Id","id":"customfield_12314122","key":"com.atlassian.jira.plugin.system.customfieldtypes:importid","isShown":true},{"name":"CXF Fields","id":"customfield_12310210","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":false},{"name":"Cc","id":"customfield_12310020","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Change Category","id":"customfield_12313826","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":true},{"name":"Cloudstack-CVSS","id":"customfield_12311720","key":"com.atlassian.jira.plugin.system.customfieldtypes:float","isShown":false},{"name":"Code Review","id":"customfield_12312421","key":"com.atlassian.jira.plugin.system.customfieldtypes:url","isShown":false},{"name":"Codeplex ID","id":"customfield_12310280","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Complexity","id":"customfield_12313821","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":true},{"name":"Customer(s)","id":"customfield_12310224","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Database","id":"customfield_12310225","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Detailed Description","id":"customfield_12314320","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":false},{"name":"Development","id":"customfield_12314020","key":"com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary","isShown":true},{"name":"Discovered By","id":"customfield_12313822","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":true},{"name":"Docs Text","id":"customfield_12312720","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":true},{"name":"Enable Automatic Patch Review","id":"customfield_12313422","key":"com.atlassian.jirafisheyeplugin:jobcheckbox","isShown":true},{"name":"Epic Color","id":"customfield_12312822","key":"com.pyxis.greenhopper.jira:gh-epic-color","isShown":false},{"name":"Epic Colour","id":"customfield_12311123","key":"com.pyxis.greenhopper.jira:gh-epic-color","isShown":false},{"name":"Epic Link","id":"customfield_12311120","key":"com.pyxis.greenhopper.jira:gh-epic-link","isShown":true},{"name":"Epic Name","id":"customfield_12311121","key":"com.pyxis.greenhopper.jira:gh-epic-label","isShown":true},{"name":"Epic Status","id":"customfield_12311122","key":"com.pyxis.greenhopper.jira:gh-epic-status","isShown":false},{"name":"Epic/Theme","id":"customfield_12310291","key":"com.atlassian.jira.plugin.system.customfieldtypes:labels","isShown":true},{"name":"Estimated Complexity","id":"customfield_12310060","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":false},{"name":"Estimated Complexity","id":"customfield_12314121","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":true},{"name":"Evidence Of Registration","id":"customfield_12314130","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":true},{"name":"Evidence Of Registration","id":"customfield_12310523","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":false},{"name":"Evidence Of Use On World Wide Web","id":"customfield_12314128","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":true},{"name":"Evidence Of Use On World Wide Web","id":"customfield_12310620","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":false},{"name":"Existing GitBox Approval","id":"customfield_12312923","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":true},{"name":"External issue ID","id":"customfield_12311034","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"External issue ID","id":"customfield_12311024","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"External issue URL","id":"customfield_12311020","key":"com.atlassian.jira.plugin.system.customfieldtypes:url","isShown":true},{"name":"Fix priority","id":"customfield_10023","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":false},{"name":"Fix version (Component)","id":"customfield_12314143","key":"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","isShown":true},{"name":"Fix version (Component)","id":"customfield_12310172","key":"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","isShown":false},{"name":"Flagged","id":"customfield_12310290","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":true},{"name":"Flags","id":"customfield_12310250","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":true},{"name":"Git Notification Mailing List","id":"customfield_12312322","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Git Repository Import Path","id":"customfield_12312324","key":"com.atlassian.jira.plugin.system.customfieldtypes:url","isShown":true},{"name":"Git Repository Name","id":"customfield_12312320","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Git Repository Type","id":"customfield_12312321","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":true},{"name":"GitHub Options","id":"customfield_12312921","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":true},{"name":"Github Integration","id":"customfield_12312323","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":true},{"name":"Github Integration - Triggers","id":"customfield_12312340","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":true},{"name":"Github Integrations - Other","id":"customfield_12312520","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Global Rank","id":"customfield_12310420","key":"com.pyxis.greenhopper.jira:gh-global-rank","isShown":true},{"name":"Hadoop Flags","id":"customfield_12310191","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":false},{"name":"Hadoop Flags","id":"customfield_12314134","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":true},{"name":"INFRA - Subversion Repository Path","id":"customfield_12312341","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Ignite Flags","id":"customfield_12314140","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":true},{"name":"Ignite Flags","id":"customfield_12313620","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":false},{"name":"Impacts","id":"customfield_12313922","key":"jira.plugin.projectspecificselectfield.jpssf:multicftype","isShown":false},{"name":"Initial Confluence Contributors","id":"customfield_12312026","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Issue &amp; fix info","id":"customfield_12314132","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":true},{"name":"Issue &amp; fix info","id":"customfield_12310090","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":false},{"name":"JDK Version","id":"customfield_12310226","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Language","id":"customfield_12314421","key":"com.atlassian.jira.plugin.system.customfieldtypes:labels","isShown":true},{"name":"Last public comment date","id":"customfield_12312521","key":"com.atlassian.jira.toolkit:LastCommentDate","isShown":true},{"name":"Level of effort","id":"customfield_12310227","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":false},{"name":"Level of effort","id":"customfield_12314127","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":true},{"name":"Lucene Fields","id":"customfield_12310120","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":false},{"name":"Lucene Fields","id":"customfield_12314124","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":true},{"name":"New-TLP-TLPName","id":"customfield_12312325","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"O/S Version","id":"customfield_12310228","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Old Scarab Id","id":"customfield_12310106","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Original story points","id":"customfield_12314523","key":"com.atlassian.jpo:jpo-custom-field-original-story-points","isShown":true},{"name":"Other Info","id":"customfield_12310051","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":false},{"name":"Parent Link","id":"customfield_12314520","key":"com.atlassian.jpo:jpo-custom-field-parent","isShown":false},{"name":"Patch Info","id":"customfield_12310041","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":false},{"name":"Platform","id":"customfield_12313921","key":"jira.plugin.projectspecificselectfield.jpssf:multicftype","isShown":false},{"name":"Podling","id":"customfield_12310520","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Priority","id":"customfield_12313720","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":false},{"name":"Project","id":"customfield_12312823","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":true},{"name":"Proper Noun","id":"customfield_12314720","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":false},{"name":"Proposed Name","id":"customfield_12310521","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Proposed Name Derivation","id":"customfield_12314721","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":false},{"name":"Protected Branch","id":"customfield_12312920","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"RYG","id":"customfield_12313120","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":false},{"name":"Rank","id":"customfield_12311820","key":"com.pyxis.greenhopper.jira:gh-lexo-rank","isShown":true},{"name":"Rank (Obsolete)","id":"customfield_12310292","key":"com.atlassian.jira.plugin.system.customfieldtypes:float","isShown":false},{"name":"Rank (Obsolete)","id":"customfield_12310920","key":"com.pyxis.greenhopper.jira:gh-global-rank","isShown":true},{"name":"Regression","id":"customfield_12314120","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":true},{"name":"Regression","id":"customfield_12310080","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":false},{"name":"Release Note","id":"customfield_12310192","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":false},{"name":"Release Version History","id":"customfield_12310300","key":"com.pyxis.greenhopper.jira:greenhopper-releasedmultiversionhistory","isShown":true},{"name":"Reproduced In","id":"customfield_12311421","key":"com.atlassian.jira.plugin.system.customfieldtypes:multiversion","isShown":false},{"name":"Reproduced In","id":"customfield_12314138","key":"com.atlassian.jira.plugin.system.customfieldtypes:multiversion","isShown":true},{"name":"Review Patch?","id":"customfield_12313520","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":true},{"name":"Severity","id":"customfield_12310160","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":false},{"name":"Severity","id":"customfield_12313721","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":false},{"name":"Severity","id":"customfield_12313820","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":true},{"name":"Since Version","id":"customfield_12311420","key":"com.atlassian.jira.plugin.system.customfieldtypes:version","isShown":false},{"name":"Since Version","id":"customfield_12314136","key":"com.atlassian.jira.plugin.system.customfieldtypes:version","isShown":true},{"name":"Skill Level","id":"customfield_12311320","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":false},{"name":"Skill Level","id":"customfield_12314142","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":false},{"name":"Skill Level","id":"customfield_12310270","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":false},{"name":"Skill Level","id":"customfield_12314146","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":true},{"name":"Source Control Link","id":"customfield_12313924","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Space Description","id":"customfield_12312024","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":true},{"name":"Space Key","id":"customfield_12312022","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Space Name","id":"customfield_12312023","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Sprint","id":"customfield_12310921","key":"com.pyxis.greenhopper.jira:gh-sprint","isShown":true},{"name":"Status Whiteboard","id":"customfield_12311023","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Status Whiteboard","id":"customfield_12311038","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Status Whiteboard","id":"customfield_12311033","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Status Whiteboard","id":"customfield_12311028","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Story Points","id":"customfield_12310293","key":"com.atlassian.jira.plugin.system.customfieldtypes:float","isShown":false},{"name":"Tags","id":"customfield_12310230","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":false},{"name":"Tags","id":"customfield_12314137","key":"com.atlassian.jira.plugin.system.customfieldtypes:textfield","isShown":true},{"name":"Target Version","id":"customfield_12312821","key":"com.atlassian.jira.plugin.system.customfieldtypes:multiversion","isShown":false},{"name":"Target Version/s","id":"customfield_12314126","key":"com.atlassian.jira.plugin.system.customfieldtypes:multiversion","isShown":true},{"name":"Target Version/s","id":"customfield_12310320","key":"com.atlassian.jira.plugin.system.customfieldtypes:multiversion","isShown":false},{"name":"Team","id":"customfield_12314524","key":"com.atlassian.teams:rm-teams-custom-field-team","isShown":true},{"name":"Test and Documentation Plan","id":"customfield_12313823","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":true},{"name":"Testcase included","id":"customfield_12312220","key":"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons","isShown":true},{"name":"Urgency","id":"customfield_12310050","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":false},{"name":"Workaround","id":"customfield_12310180","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":false},{"name":"Workaround","id":"customfield_12314123","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":true},{"name":"Xalan info","id":"customfield_10024","key":"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","isShown":false},{"name":"difficulty-level","id":"customfield_12314621","key":"com.atlassian.jira.plugin.system.customfieldtypes:select","isShown":false},{"name":"issueFunction","id":"customfield_12311920","key":"com.onresolve.jira.groovy.groovyrunner:jqlFunctionsCustomFieldType","isShown":true},{"name":"old issue number","id":"customfield_12311520","key":"com.atlassian.jira.plugin.system.customfieldtypes:float","isShown":false},{"name":"required-knowledge","id":"customfield_12314622","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":false},{"name":"useful-knowledge","id":"customfield_12314623","key":"com.atlassian.jira.plugin.system.customfieldtypes:textarea","isShown":false}],"type":"DETAILS","title":"Details"},{"searchers":[{"name":"Created Date","id":"created","key":"issue.field.created","isShown":true},{"name":"Updated Date","id":"updated","key":"issue.field.updated","isShown":true},{"name":"Resolution Date","id":"resolutiondate","key":"issue.field.resolution.date","isShown":true},{"name":"Due Date","id":"duedate","key":"issue.field.duedate","isShown":true},{"name":"Review Date","id":"customfield_12310820","key":"com.atlassian.jira.plugin.system.customfieldtypes:datepicker","isShown":false},{"name":"Review Date","id":"customfield_12314129","key":"com.atlassian.jira.plugin.system.customfieldtypes:datepicker","isShown":true},{"name":"Start Date","id":"customfield_12314422","key":"com.atlassian.jira.plugin.system.customfieldtypes:datepicker","isShown":true},{"name":"Target end","id":"customfield_12314522","key":"com.atlassian.jpo:jpo-custom-field-baseline-end","isShown":true},{"name":"Target start","id":"customfield_12314521","key":"com.atlassian.jpo:jpo-custom-field-baseline-start","isShown":true}],"type":"DATES","title":"Dates"},{"searchers":[{"name":"Assignee","id":"assignee","key":"issue.field.assignee","isShown":true,"lastViewed":1752155696173},{"name":"Reporter","id":"reporter","key":"issue.field.reporter","isShown":true},{"name":"Authors","id":"customfield_12313920","key":"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","isShown":true},{"name":"Mentor","id":"customfield_12314420","key":"com.atlassian.jira.plugin.system.customfieldtypes:userpicker","isShown":true},{"name":"Reviewer","id":"customfield_12314135","key":"com.atlassian.jira.plugin.system.customfieldtypes:userpicker","isShown":true},{"name":"Reviewer","id":"customfield_10022","key":"com.atlassian.jira.plugin.system.customfieldtypes:userpicker","isShown":false},{"name":"Reviewers","id":"customfield_12314141","key":"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","isShown":true},{"name":"Reviewers","id":"customfield_12313420","key":"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","isShown":false},{"name":"Shepherd","id":"customfield_12311620","key":"com.atlassian.jira.plugin.system.customfieldtypes:userpicker","isShown":false},{"name":"Tester","id":"customfield_12314139","key":"com.atlassian.jira.plugin.system.customfieldtypes:userpicker","isShown":true},{"name":"Tester","id":"customfield_12311124","key":"com.atlassian.jira.plugin.system.customfieldtypes:userpicker","isShown":false},{"name":"Testers","id":"customfield_12314220","key":"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","isShown":false},{"name":"potential-mentor","id":"customfield_12314620","key":"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","isShown":false}],"type":"PEOPLE","title":"People"}]},"values":{"issuetype":{"name":"Type","editHtml":"\n\n\n\n                                &lt;div class=\"field-group aui-field-issuetype\" &gt;\n                                                                        &lt;label for=\"searcher-type\"&gt;Type&lt;/label&gt;                    &lt;select class=\"select js-default-checkboxmultiselect\" id=\"searcher-type\" multiple=\"multiple\" name=\"type\"\n            data-placeholder-text=\"Find Issue Types...\" size=\"5\"&gt;\n        &lt;optgroup&gt;\n             \n    &lt;option class=\"        \"\n                id=\"type_-2\"\n                            title=\"All Standard Issue Types\"\n                value=\"-2\"&gt;All Standard Issue Types&lt;/option&gt;\n  \n    &lt;option class=\"        \"\n                id=\"type_-3\"\n                            title=\"All Sub-Task Issue Types\"\n                value=\"-3\"&gt;All Sub-Task Issue Types&lt;/option&gt;\n         &lt;/optgroup&gt;\n\n        &lt;optgroup label=\"Standard Issue Types\"&gt;\n             \n    &lt;option class=\" imagebacked 10100         \"\n                        data-icon=\"/jira/servicedesk/issue-type-icons?icon=access\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10301\"\n                            title=\"Access\"\n                value=\"10301\"&gt;Access&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10206\"\n                            title=\"Blog - New Blog Request\"\n                value=\"10206\"&gt;Blog - New Blog Request&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10208\"\n                            title=\"Blogs - Access to Existing Blog\"\n                value=\"10208\"&gt;Blogs - Access to Existing Blog&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10207\"\n                            title=\"Blogs - New Blog User Account Request\"\n                value=\"10207\"&gt;Blogs - New Blog User Account Request&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21136&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_11400\"\n                            title=\"Board Vote\"\n                value=\"11400\"&gt;Board Vote&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10370 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_13\"\n                            title=\"Brainstorming\"\n                value=\"13\"&gt;Brainstorming&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10240 11840 15040 15041 10370 19140 19141 15240 10120 12940 19341 18642 14740 16342 10390 17049 18841 18842 10331 18843 10400 11940 13540 11941 14440 19241 13740 12140 11245 18543 16944 10290 10100 10102 16441 12540 15740 10110 10430         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21133&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_1\"\n                            title=\"Bug\"\n                value=\"1\"&gt;Bug&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_11002\"\n                            title=\"Choose from below ...\"\n                value=\"11002\"&gt;Choose from below ...&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_11001\"\n                            title=\"Comment\"\n                value=\"11001\"&gt;Comment&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10100 10331         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10900\"\n                            title=\"Dependency\"\n                value=\"10900\"&gt;Dependency&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100 10390 15240 11245         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21140&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_18\"\n                            title=\"Dependency upgrade\"\n                value=\"18\"&gt;Dependency upgrade&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100 12540 13740 12140 11245         \"\n                        data-icon=\"/jira/images/icons/issuetypes/documentation.png\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_20\"\n                            title=\"Documentation\"\n                value=\"20\"&gt;Documentation&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10400 15040 11940 19140 19141 14440 19241 13740 12140 19341 16944 18642 14740 10100 16342 16441 17049 18841 18842 10331 12540 15740         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21137&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_15\"\n                            title=\"Epic\"\n                value=\"15\"&gt;Epic&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10800\"\n                            title=\"GitBox Request\"\n                value=\"10800\"&gt;GitBox Request&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10201\"\n                            title=\"Github Integration\"\n                value=\"10201\"&gt;Github Integration&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/servicedesk/issue-type-icons?icon=it-help\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10300\"\n                            title=\"IT Help\"\n                value=\"10300\"&gt;IT Help&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10240 11840 15040 15041 10370 19140 19141 15240 10120 19341 18642 14740 16342 10390 17049 18841 18842 10331 18843 10400 11941 14440 19241 13740 12140 11245 18543 16944 10290 10100 10102 16441 12540 15740 10110 10430         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21140&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_4\"\n                            title=\"Improvement\"\n                value=\"4\"&gt;Improvement&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10209\"\n                            title=\"New Bugzilla Project\"\n                value=\"10209\"&gt;New Bugzilla Project&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=23211&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10100\"\n                            title=\"New Confluence Wiki\"\n                value=\"10100\"&gt;New Confluence Wiki&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10240 13440 11840 15040 15041 10370 19140 19141 15240 10120 12940 19341 18642 14740 16342 10390 17049 18841 18842 10331 18843 13540 11941 14440 19241 13740 11245 18543 16944 10100 10102 16441 12540 15740 10110         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21141&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_2\"\n                            title=\"New Feature\"\n                value=\"2\"&gt;New Feature&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21140&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10200\"\n                            title=\"New Git Repo\"\n                value=\"10200\"&gt;New Git Repo&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/images/icons/jiraman18.gif\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_8\"\n                            title=\"New JIRA Project\"\n                value=\"8\"&gt;New JIRA Project&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10202\"\n                            title=\"New TLP \"\n                value=\"10202\"&gt;New TLP &lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10204\"\n                            title=\"New TLP - Common Tasks\"\n                value=\"10204\"&gt;New TLP - Common Tasks&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21144&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_11200\"\n                            title=\"Office Hours\"\n                value=\"11200\"&gt;Office Hours&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_11100\"\n                            title=\"Outage\"\n                value=\"11100\"&gt;Outage&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_11300\"\n                            title=\"Pending Review\"\n                value=\"11300\"&gt;Pending Review&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21144&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10000\"\n                            title=\"Planned Work\"\n                value=\"10000\"&gt;Planned Work&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21133&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10600\"\n                            title=\"Project\"\n                value=\"10600\"&gt;Project&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 15041 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10700\"\n                            title=\"Proposal\"\n                value=\"10700\"&gt;Proposal&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10640 14740 10100 11941 10230         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_11\"\n                            title=\"Question\"\n                value=\"11\"&gt;Question&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100 10110         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21141&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_9\"\n                            title=\"RTC\"\n                value=\"9\"&gt;RTC&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10400\"\n                            title=\"Request\"\n                value=\"10400\"&gt;Request&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_11000\"\n                            title=\"Requirement\"\n                value=\"11000\"&gt;Requirement&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21134&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10205\"\n                            title=\"SVN-&amp;gt;GIT Migration\"\n                value=\"10205\"&gt;SVN-&amp;gt;GIT Migration&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10210\"\n                            title=\"SVN-&amp;gt;GIT Mirroring\"\n                value=\"10210\"&gt;SVN-&amp;gt;GIT Mirroring&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10400 11840 13540 11940 19140 12940 13740 12140 16944 14740 10100 12540 15740         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21145&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_16\"\n                            title=\"Story\"\n                value=\"16\"&gt;Story&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10640 14740 10100         \"\n                        data-icon=\"/jira/images/icons/issuetypes/requirement.png\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_19\"\n                            title=\"Suitable Name Search\"\n                value=\"19\"&gt;Suitable Name Search&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 14740 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21148&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_10\"\n                            title=\"TCK Challenge\"\n                value=\"10\"&gt;TCK Challenge&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10240 11840 15040 13440 15041 10370 19140 19141 15240 10120 12940 19341 18642 18643 14740 16342 10390 17049 18841 18842 10331 11940 13540 11941 14440 19241 13740 12140 11245 18543 16944 10290 10100 10230 10102 16441 12540 15740 10110 10430         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21148&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_3\"\n                            title=\"Task\"\n                value=\"3\"&gt;Task&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10100 18843         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_11500\"\n                            title=\"Technical Debt\"\n                value=\"11500\"&gt;Technical Debt&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10100 10331         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_12\"\n                            title=\"Temp\"\n                value=\"12\"&gt;Temp&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10240 15040 15041 10370 19140 19141 15240 10120 19341 18642 14740 10390 18842 11941 14440 19241 13740 11245 11246 18543 16944 10100 10102 16441 12540 15740 10110         \"\n                        data-icon=\"/jira/images/icons/issuetypes/requirement.png\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_6\"\n                            title=\"Test\"\n                value=\"6\"&gt;Test&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10370 14740 10100 16441         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_14\"\n                            title=\"Umbrella\"\n                value=\"14\"&gt;Umbrella&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21130&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_11600\"\n                            title=\"Volunteer\"\n                value=\"11600\"&gt;Volunteer&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 15040 15041 10370 19140 19141 15240 10120 19341 10640 18642 14740 10390 18842 10400 11941 14440 19241 13740 12140 11245 18543 16944 10100 10102 16441 12540 15740 10110         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21140&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_5\"\n                            title=\"Wish\"\n                value=\"5\"&gt;Wish&lt;/option&gt;\n         &lt;/optgroup&gt;\n\n        &lt;optgroup label=\"Sub-Task Issue Types\"&gt;\n             \n    &lt;option class=\" imagebacked 10100         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21133&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_11401\"\n                            title=\"Director Vote\"\n                value=\"11401\"&gt;Director Vote&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10240 13440 11840 15040 15041 10370 19140 19141 15240 10120 12940 19341 18642 18643 14740 16342 10390 17049 18841 18842 10331 18843 13540 11940 11941 14440 19241 13740 11245 18543 16944 10290 10100 10102 16441 12540 15740 10110 10430         \"\n                        data-icon=\"/jira/secure/viewavatar?size=xsmall&amp;amp;avatarId=21146&amp;amp;avatarType=issuetype\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_7\"\n                            title=\"Sub-task\"\n                value=\"7\"&gt;Sub-task&lt;/option&gt;\n  \n    &lt;option class=\" imagebacked 10400 14740 10100 12540 13740         \"\n                        data-icon=\"/jira/images/icons/issuetypes/task_agile.png\"\n                data-fallback-icon=\"/jira/images/icons/issuetypes/blank.png\"\n                id=\"type_17\"\n                            title=\"Technical task\"\n                value=\"17\"&gt;Technical task&lt;/option&gt;\n         &lt;/optgroup&gt;\n    &lt;/select&gt;\n                                        &lt;/div&gt;\n    ","validSearcher":true,"isShown":true},"project":{"name":"Project","editHtml":"\n                                &lt;div class=\"field-group aui-field-project\" &gt;\n                                                                        &lt;label for=\"searcher-pid\"&gt;Project&lt;/label&gt;                \n\n        &lt;select class=\"select js-default-checkboxmultiselect\" data-placeholder-text=\"Find Projects...\" id=\"searcher-pid\" multiple=\"multiple\" name=\"pid\" size=\"5\"&gt;\n                &lt;optgroup label=\"All Projects\"&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320120&amp;size=small\"\n                                                title=\"aardvark\"\n                        value=\"12320120\"&gt;\n                    aardvark (AAR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310505&amp;size=small\"\n                                                title=\"Abdera\"\n                        value=\"12310505\"&gt;\n                    Abdera (ABDERA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312121&amp;size=small\"\n                                                title=\"Accumulo\"\n                        value=\"12312121\"&gt;\n                    Accumulo (ACCUMULO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310931&amp;size=small\"\n                                                title=\"ACE\"\n                        value=\"12310931\"&gt;\n                    ACE (ACE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311200&amp;size=small\"\n                                                title=\"ActiveCluster\"\n                        value=\"12311200\"&gt;\n                    ActiveCluster (ACL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311201&amp;size=small\"\n                                                title=\"ActiveMQ .Net\"\n                        value=\"12311201\"&gt;\n                    ActiveMQ .Net (AMQNET)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311310&amp;size=small\"\n                                                title=\"ActiveMQ Apollo (Retired)\"\n                        value=\"12311310\"&gt;\n                    ActiveMQ Apollo (Retired) (APLO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315920&amp;size=small\"\n                                                title=\"ActiveMQ Artemis\"\n                        value=\"12315920\"&gt;\n                    ActiveMQ Artemis (ARTEMIS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311207&amp;size=small\"\n                                                title=\"ActiveMQ C++ Client\"\n                        value=\"12311207\"&gt;\n                    ActiveMQ C++ Client (AMQCPP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311210&amp;size=small\"\n                                                title=\"ActiveMQ Classic\"\n                        value=\"12311210\"&gt;\n                    ActiveMQ Classic (AMQ)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320821&amp;size=small\"\n                                                title=\"ActiveMQ CLI Tools\"\n                        value=\"12320821\"&gt;\n                    ActiveMQ CLI Tools (AMQCLI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315620&amp;size=small\"\n                                                title=\"ActiveMQ OpenWire\"\n                        value=\"12315620\"&gt;\n                    ActiveMQ OpenWire (OPENWIRE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325420&amp;size=small\"\n                                                title=\"ActiveMQ Website\"\n                        value=\"12325420\"&gt;\n                    ActiveMQ Website (AMQWEBSITE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311204&amp;size=small\"\n                                                title=\"ActiveRealTime (Retired)\"\n                        value=\"12311204\"&gt;\n                    ActiveRealTime (Retired) (BLAZE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310060&amp;size=small\"\n                                                title=\"Addressing\"\n                        value=\"12310060\"&gt;\n                    Addressing (ADDR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10730&amp;size=small\"\n                                                title=\"Agila\"\n                        value=\"10730\"&gt;\n                    Agila (AGILA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311302&amp;size=small\"\n                                                title=\"Airavata\"\n                        value=\"12311302\"&gt;\n                    Airavata (AIRAVATA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311173&amp;size=small\"\n                                                title=\"ALOIS\"\n                        value=\"12311173\"&gt;\n                    ALOIS (ALOIS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10101&amp;size=small\"\n                                                title=\"AltRMI\"\n                        value=\"10101\"&gt;\n                    AltRMI (ARMI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321521&amp;size=small\"\n                                                title=\"AMATERASU\"\n                        value=\"12321521\"&gt;\n                    AMATERASU (AMATERASU)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312020&amp;size=small\"\n                                                title=\"Ambari\"\n                        value=\"12312020\"&gt;\n                    Ambari (AMBARI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311100&amp;size=small\"\n                                                title=\"Amber\"\n                        value=\"12311100\"&gt;\n                    Amber (AMBER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310632&amp;size=small\"\n                                                title=\"Anakia\"\n                        value=\"12310632\"&gt;\n                    Anakia (ANAKIA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324621&amp;size=small\"\n                                                title=\"Apache AGE\"\n                        value=\"12324621\"&gt;\n                    Apache AGE (AGE2)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324223&amp;size=small\"\n                                                title=\"Apache AGE (old)\"\n                        value=\"12324223\"&gt;\n                    Apache AGE (old) (AGEOLD)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312323&amp;size=small\"\n                                                title=\"Apache Any23 (Retired)\"\n                        value=\"12312323\"&gt;\n                    Apache Any23 (Retired) (ANY23)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318823&amp;size=small\"\n                                                title=\"Apache Apex Core\"\n                        value=\"12318823\"&gt;\n                    Apache Apex Core (APEXCORE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318824&amp;size=small\"\n                                                title=\"Apache Apex Malhar\"\n                        value=\"12318824\"&gt;\n                    Apache Apex Malhar (APEXMALHAR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319525&amp;size=small\"\n                                                title=\"Apache Arrow\"\n                        value=\"12319525\"&gt;\n                    Apache Arrow (ARROW)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12316420&amp;size=small\"\n                                                title=\"Apache AsterixDB\"\n                        value=\"12316420\"&gt;\n                    Apache AsterixDB (ASTERIXDB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310911&amp;size=small\"\n                                                title=\"Apache Avro\"\n                        value=\"12310911\"&gt;\n                    Apache Avro (AVRO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313220&amp;size=small\"\n                                                title=\"Apache AWF\"\n                        value=\"12313220\"&gt;\n                    Apache AWF (AWF)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324320&amp;size=small\"\n                                                title=\"Apache BlueMarlin (Retired)\"\n                        value=\"12324320\"&gt;\n                    Apache BlueMarlin (Retired) (BLUEMARLIN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313721&amp;size=small\"\n                                                title=\"Apache Blur\"\n                        value=\"12313721\"&gt;\n                    Apache Blur (BLUR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310865&amp;size=small\"\n                                                title=\"Apache Cassandra\"\n                        value=\"12310865\"&gt;\n                    Apache Cassandra (CASSANDRA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325525&amp;size=small\"\n                                                title=\"Apache Cassandra Analytics\"\n                        value=\"12325525\"&gt;\n                    Apache Cassandra Analytics (CASSANALYTICS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325524&amp;size=small\"\n                                                title=\"Apache Cassandra Go driver\"\n                        value=\"12325524\"&gt;\n                    Apache Cassandra Go driver (CASSGO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325523&amp;size=small\"\n                                                title=\"Apache Cassandra Java driver\"\n                        value=\"12325523\"&gt;\n                    Apache Cassandra Java driver (CASSJAVA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325522&amp;size=small\"\n                                                title=\"Apache Cassandra Python driver\"\n                        value=\"12325522\"&gt;\n                    Apache Cassandra Python driver (CASSPYTHON)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324920&amp;size=small\"\n                                                title=\"Apache Celeborn\"\n                        value=\"12324920\"&gt;\n                    Apache Celeborn (CELEBORN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321824&amp;size=small\"\n                                                title=\"Apache Chainsaw\"\n                        value=\"12321824\"&gt;\n                    Apache Chainsaw (CHAINSAW)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318520&amp;size=small\"\n                                                title=\"Apache Climate Model Diagnostic Analyzer\"\n                        value=\"12318520\"&gt;\n                    Apache Climate Model Diagnostic Analyzer (CMDA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325521&amp;size=small\"\n                                                title=\"Apache Cloudberry\"\n                        value=\"12325521\"&gt;\n                    Apache Cloudberry (CLOUDBERRY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310466&amp;size=small\"\n                                                title=\"Apache Commons All\"\n                        value=\"12310466\"&gt;\n                    Apache Commons All (COMMONSSITE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12316620&amp;size=small\"\n                                                title=\"Apache Commons RDF\"\n                        value=\"12316620\"&gt;\n                    Apache Commons RDF (COMMONSRDF)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321821&amp;size=small\"\n                                                title=\"Apache Commons Testing\"\n                        value=\"12321821\"&gt;\n                    Apache Commons Testing (TESTING)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319120&amp;size=small\"\n                                                title=\"Apache Concerted\"\n                        value=\"12319120\"&gt;\n                    Apache Concerted (CONCERTED)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321820&amp;size=small\"\n                                                title=\"Apache Coral\"\n                        value=\"12321820\"&gt;\n                    Apache Coral (CORAL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312420&amp;size=small\"\n                                                title=\"Apache Cordova\"\n                        value=\"12312420\"&gt;\n                    Apache Cordova (CB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321625&amp;size=small\"\n                                                title=\"Apache Crail\"\n                        value=\"12321625\"&gt;\n                    Apache Crail (CRAIL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314425&amp;size=small\"\n                                                title=\"Apache Curator\"\n                        value=\"12314425\"&gt;\n                    Apache Curator (CURATOR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322420&amp;size=small\"\n                                                title=\"Apache DataLab (Retired)\"\n                        value=\"12322420\"&gt;\n                    Apache DataLab (Retired) (DATALAB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12323120&amp;size=small\"\n                                                title=\"Apache Datasketches\"\n                        value=\"12323120\"&gt;\n                    Apache Datasketches (DATASKETCHES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312321&amp;size=small\"\n                                                title=\"Apache DirectMemory\"\n                        value=\"12312321\"&gt;\n                    Apache DirectMemory (DIRECTMEMORY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324720&amp;size=small\"\n                                                title=\"Apache Doris\"\n                        value=\"12324720\"&gt;\n                    Apache Doris (DORIS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313820&amp;size=small\"\n                                                title=\"Apache Drill\"\n                        value=\"12313820\"&gt;\n                    Apache Drill (DRILL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321822&amp;size=small\"\n                                                title=\"Apache Dubbo\"\n                        value=\"12321822\"&gt;\n                    Apache Dubbo (DUBBO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321921&amp;size=small\"\n                                                title=\"Apache ECharts\"\n                        value=\"12321921\"&gt;\n                    Apache ECharts (ECHARTS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324520&amp;size=small\"\n                                                title=\"Apache EventMesh\"\n                        value=\"12324520\"&gt;\n                    Apache EventMesh (EVENTMESH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319420&amp;size=small\"\n                                                title=\"Apache Fineract\"\n                        value=\"12319420\"&gt;\n                    Apache Fineract (FINERACT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313521&amp;size=small\"\n                                                title=\"Apache Flex\"\n                        value=\"12313521\"&gt;\n                    Apache Flex (FLEX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318825&amp;size=small\"\n                                                title=\"Apache Freemarker\"\n                        value=\"12318825\"&gt;\n                    Apache Freemarker (FREEMARKER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319920&amp;size=small\"\n                                                title=\"Apache Gearpump\"\n                        value=\"12319920\"&gt;\n                    Apache Gearpump (GEARPUMP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325220&amp;size=small\"\n                                                title=\"Apache Gluten (incubating)\"\n                        value=\"12325220\"&gt;\n                    Apache Gluten (incubating) (GLUTEN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321020&amp;size=small\"\n                                                title=\"Apache Gobblin\"\n                        value=\"12321020\"&gt;\n                    Apache Gobblin (GOBBLIN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311172&amp;size=small\"\n                                                title=\"Apache Gora (Retired)\"\n                        value=\"12311172\"&gt;\n                    Apache Gora (Retired) (GORA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318826&amp;size=small\"\n                                                title=\"Apache HAWQ (Retired)\"\n                        value=\"12318826\"&gt;\n                    Apache HAWQ (Retired) (HAWQ)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314020&amp;size=small\"\n                                                title=\"Apache Helix\"\n                        value=\"12314020\"&gt;\n                    Apache Helix (HELIX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324323&amp;size=small\"\n                                                title=\"Apache Hop (Retired)\"\n                        value=\"12324323\"&gt;\n                    Apache Hop (Retired) (HOP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318827&amp;size=small\"\n                                                title=\"Apache Horn\"\n                        value=\"12318827\"&gt;\n                    Apache Horn (HORN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322822&amp;size=small\"\n                                                title=\"Apache Hudi\"\n                        value=\"12322822\"&gt;\n                    Apache Hudi (HUDI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12323523&amp;size=small\"\n                                                title=\"Apache InLong\"\n                        value=\"12323523\"&gt;\n                    Apache InLong (INLONG)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322720&amp;size=small\"\n                                                title=\"Apache IoTDB\"\n                        value=\"12322720\"&gt;\n                    Apache IoTDB (IOTDB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311220&amp;size=small\"\n                                                title=\"Apache Jena\"\n                        value=\"12311220\"&gt;\n                    Apache Jena (JENA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314427&amp;size=small\"\n                                                title=\"Apache Knox\"\n                        value=\"12314427\"&gt;\n                    Apache Knox (KNOX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315923&amp;size=small\"\n                                                title=\"Apache Lens (Retired)\"\n                        value=\"12315923\"&gt;\n                    Apache Lens (Retired) (LENS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324221&amp;size=small\"\n                                                title=\"Apache Liminal (Retired)\"\n                        value=\"12324221\"&gt;\n                    Apache Liminal (Retired) (LIMINAL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315720&amp;size=small\"\n                                                title=\"Apache Lucy-Clownfish\"\n                        value=\"12315720\"&gt;\n                    Apache Lucy-Clownfish (CLOWNFISH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318923&amp;size=small\"\n                                                title=\"Apache MADlib\"\n                        value=\"12318923\"&gt;\n                    Apache MADlib (MADLIB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325620&amp;size=small\"\n                                                title=\"Apache ManifoldCF SDK\"\n                        value=\"12325620\"&gt;\n                    Apache ManifoldCF SDK (MCFSDK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322622&amp;size=small\"\n                                                title=\"Apache Marvin (Retired)\"\n                        value=\"12322622\"&gt;\n                    Apache Marvin (Retired) (MARVIN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314621&amp;size=small\"\n                                                title=\"Apache Maven Resource Bundles (Moved to GitHub Issues)\"\n                        value=\"12314621\"&gt;\n                    Apache Maven Resource Bundles (Moved to GitHub Issues) (MASFRES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314523&amp;size=small\"\n                                                title=\"Apache MetaModel (Retired)\"\n                        value=\"12314523\"&gt;\n                    Apache MetaModel (Retired) (METAMODEL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321623&amp;size=small\"\n                                                title=\"Apache MXNet (Retired)\"\n                        value=\"12321623\"&gt;\n                    Apache MXNet (Retired) (MXNET)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321823&amp;size=small\"\n                                                title=\"Apache Nemo (Retired)\"\n                        value=\"12321823\"&gt;\n                    Apache Nemo (Retired) (NEMO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12323920&amp;size=small\"\n                                                title=\"Apache NetBeans Infra\"\n                        value=\"12323920\"&gt;\n                    Apache NetBeans Infra (NETBEANSINFRA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12316020&amp;size=small\"\n                                                title=\"Apache NiFi\"\n                        value=\"12316020\"&gt;\n                    Apache NiFi (NIFI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319921&amp;size=small\"\n                                                title=\"Apache NiFi MiNiFi - MOVED TO NIFI PROJECT\"\n                        value=\"12319921\"&gt;\n                    Apache NiFi MiNiFi - MOVED TO NIFI PROJECT (MINIFI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321520&amp;size=small\"\n                                                title=\"Apache NiFi MiNiFi C++\"\n                        value=\"12321520\"&gt;\n                    Apache NiFi MiNiFi C++ (MINIFICPP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12323524&amp;size=small\"\n                                                title=\"Apache NuttX\"\n                        value=\"12323524\"&gt;\n                    Apache NuttX (NUTTX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314420&amp;size=small\"\n                                                title=\"Apache Oltu\"\n                        value=\"12314420\"&gt;\n                    Apache Oltu (OLTU)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314120&amp;size=small\"\n                                                title=\"Apache Onami\"\n                        value=\"12314120\"&gt;\n                    Apache Onami (ONAMI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314422&amp;size=small\"\n                                                title=\"Apache Open Climate Workbench (Retired)\"\n                        value=\"12314422\"&gt;\n                    Apache Open Climate Workbench (Retired) (CLIMATE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318220&amp;size=small\"\n                                                title=\"Apache OpenAZ\"\n                        value=\"12318220\"&gt;\n                    Apache OpenAZ (OPENAZ)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325526&amp;size=small\"\n                                                title=\"Apache Otava (incubating)\"\n                        value=\"12325526\"&gt;\n                    Apache Otava (incubating) (OTAVA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321922&amp;size=small\"\n                                                title=\"Apache Ozone\"\n                        value=\"12321922\"&gt;\n                    Apache Ozone (HDDS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324222&amp;size=small\"\n                                                title=\"Apache Pegasus\"\n                        value=\"12324222\"&gt;\n                    Apache Pegasus (PEGASUS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12323521&amp;size=small\"\n                                                title=\"Apache Petri\"\n                        value=\"12323521\"&gt;\n                    Apache Petri (PETRI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322620&amp;size=small\"\n                                                title=\"Apache Pinot\"\n                        value=\"12322620\"&gt;\n                    Apache Pinot (PINOT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321628&amp;size=small\"\n                                                title=\"Apache PLC4X\"\n                        value=\"12321628\"&gt;\n                    Apache PLC4X (PLC4X)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318621&amp;size=small\"\n                                                title=\"Apache QPID Interoperability Test Suite\"\n                        value=\"12318621\"&gt;\n                    Apache QPID Interoperability Test Suite (QPIDIT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320022&amp;size=small\"\n                                                title=\"Apache Quickstep\"\n                        value=\"12320022\"&gt;\n                    Apache Quickstep (QUICKSTEP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310750&amp;size=small\"\n                                                title=\"Apache Rat\"\n                        value=\"12310750\"&gt;\n                    Apache Rat (RAT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314421&amp;size=small\"\n                                                title=\"Apache Ripple\"\n                        value=\"12314421\"&gt;\n                    Apache Ripple (RIPPLE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320724&amp;size=small\"\n                                                title=\"Apache RocketMQ\"\n                        value=\"12320724\"&gt;\n                    Apache RocketMQ (ROCKETMQ)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310906&amp;size=small\"\n                                                title=\"Apache Roller\"\n                        value=\"12310906\"&gt;\n                    Apache Roller (ROL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312322&amp;size=small\"\n                                                title=\"Apache S4\"\n                        value=\"12312322\"&gt;\n                    Apache S4 (S4)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321620&amp;size=small\"\n                                                title=\"Apache Science Data Analytics Platform\"\n                        value=\"12321620\"&gt;\n                    Apache Science Data Analytics Platform (SDAP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322321&amp;size=small\"\n                                                title=\"Apache SCIMple\"\n                        value=\"12322321\"&gt;\n                    Apache SCIMple (SCIMPLE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324321&amp;size=small\"\n                                                title=\"Apache Sedona\"\n                        value=\"12324321\"&gt;\n                    Apache Sedona (SEDONA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321626&amp;size=small\"\n                                                title=\"Apache ServiceComb\"\n                        value=\"12321626\"&gt;\n                    Apache ServiceComb (SCB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314820&amp;size=small\"\n                                                title=\"Apache Storm\"\n                        value=\"12314820\"&gt;\n                    Apache Storm (STORM)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325022&amp;size=small\"\n                                                title=\"Apache StreamPark\"\n                        value=\"12325022\"&gt;\n                    Apache StreamPark (STREAMPARK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322824&amp;size=small\"\n                                                title=\"Apache Submarine\"\n                        value=\"12322824\"&gt;\n                    Apache Submarine (SUBMARINE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325122&amp;size=small\"\n                                                title=\"Apache Superset security\"\n                        value=\"12325122\"&gt;\n                    Apache Superset security (SUPERSETSEC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318322&amp;size=small\"\n                                                title=\"Apache Taverna\"\n                        value=\"12318322\"&gt;\n                    Apache Taverna (TAVERNA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313620&amp;size=small\"\n                                                title=\"Apache Tentacles\"\n                        value=\"12313620\"&gt;\n                    Apache Tentacles (TENTACLES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314426&amp;size=small\"\n                                                title=\"Apache Tez\"\n                        value=\"12314426\"&gt;\n                    Apache Tez (TEZ)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312120&amp;size=small\"\n                                                title=\"Apache Tomcat Maven Plugin\"\n                        value=\"12312120\"&gt;\n                    Apache Tomcat Maven Plugin (MTOMCAT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318620&amp;size=small\"\n                                                title=\"Apache Trafodion (Retired)\"\n                        value=\"12318620\"&gt;\n                    Apache Trafodion (Retired) (TRAFODION)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322825&amp;size=small\"\n                                                title=\"Apache Training\"\n                        value=\"12322825\"&gt;\n                    Apache Training (TRAINING)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315020&amp;size=small\"\n                                                title=\"Apache Twill (Retired)\"\n                        value=\"12315020\"&gt;\n                    Apache Twill (Retired) (TWILL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319220&amp;size=small\"\n                                                title=\"Apache Unomi\"\n                        value=\"12319220\"&gt;\n                    Apache Unomi (UNOMI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324420&amp;size=small\"\n                                                title=\"Apache Wayang\"\n                        value=\"12324420\"&gt;\n                    Apache Wayang (WAYANG)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311110&amp;size=small\"\n                                                title=\"Apache Whirr (retired)\"\n                        value=\"12311110\"&gt;\n                    Apache Whirr (retired) (WHIRR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313020&amp;size=small\"\n                                                title=\"Apache Whisker\"\n                        value=\"12313020\"&gt;\n                    Apache Whisker (WHISKER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12323620&amp;size=small\"\n                                                title=\"Apache YuniKorn\"\n                        value=\"12323620\"&gt;\n                    Apache YuniKorn (YUNIKORN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322520&amp;size=small\"\n                                                title=\"Apache Zipkin\"\n                        value=\"12322520\"&gt;\n                    Apache Zipkin (ZIPKIN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324021&amp;size=small\"\n                                                title=\"APISIX\"\n                        value=\"12324021\"&gt;\n                    APISIX (APISIX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12316920&amp;size=small\"\n                                                title=\"Archiva (Retired)\"\n                        value=\"12316920\"&gt;\n                    Archiva (Retired) (MRM)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320626&amp;size=small\"\n                                                title=\"AriaTosca\"\n                        value=\"12320626\"&gt;\n                    AriaTosca (ARIA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310981&amp;size=small\"\n                                                title=\"Aries\"\n                        value=\"12310981\"&gt;\n                    Aries (ARIES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310752&amp;size=small\"\n                                                title=\"Asyncweb\"\n                        value=\"12310752\"&gt;\n                    Asyncweb (ASYNCWEB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318521&amp;size=small\"\n                                                title=\"Atlas\"\n                        value=\"12318521\"&gt;\n                    Atlas (ATLAS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310920&amp;size=small\"\n                                                title=\"Attic\"\n                        value=\"12310920\"&gt;\n                    Attic (ATTIC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314922&amp;size=small\"\n                                                title=\"Aurora\"\n                        value=\"12314922\"&gt;\n                    Aurora (AURORA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10572&amp;size=small\"\n                                                title=\"Avalon\"\n                        value=\"10572\"&gt;\n                    Avalon (AVALON)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10426&amp;size=small\"\n                                                title=\"Avalon Castle\"\n                        value=\"10426\"&gt;\n                    Avalon Castle (AVNSHARP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10425&amp;size=small\"\n                                                title=\"Avalon Merlin Runtime\"\n                        value=\"10425\"&gt;\n                    Avalon Merlin Runtime (RUNTIME)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10531&amp;size=small\"\n                                                title=\"Avalon Merlin Studio\"\n                        value=\"10531\"&gt;\n                    Avalon Merlin Studio (STUDIO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10530&amp;size=small\"\n                                                title=\"Avalon Metro Central\"\n                        value=\"10530\"&gt;\n                    Avalon Metro Central (CENTRAL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10532&amp;size=small\"\n                                                title=\"Avalon Metro Planet\"\n                        value=\"10532\"&gt;\n                    Avalon Metro Planet (PLANET)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10533&amp;size=small\"\n                                                title=\"Avalon Metro Tools\"\n                        value=\"10533\"&gt;\n                    Avalon Metro Tools (TOOLS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10081&amp;size=small\"\n                                                title=\"Avalon Phoenix\"\n                        value=\"10081\"&gt;\n                    Avalon Phoenix (PNIX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311190&amp;size=small\"\n                                                title=\"Axiom\"\n                        value=\"12311190\"&gt;\n                    Axiom (AXIOM)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10460&amp;size=small\"\n                                                title=\"Axis\"\n                        value=\"10460\"&gt;\n                    Axis (AXIS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10461&amp;size=small\"\n                                                title=\"Axis-C++\"\n                        value=\"10461\"&gt;\n                    Axis-C++ (AXISCPP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10462&amp;size=small\"\n                                                title=\"Axis-WSIF\"\n                        value=\"10462\"&gt;\n                    Axis-WSIF (WSIF)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10611&amp;size=small\"\n                                                title=\"Axis2\"\n                        value=\"10611\"&gt;\n                    Axis2 (AXIS2)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311160&amp;size=small\"\n                                                title=\"Axis2 Transports\"\n                        value=\"12311160\"&gt;\n                    Axis2 Transports (TRANSPORTS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310180&amp;size=small\"\n                                                title=\"Axis2-C\"\n                        value=\"12310180\"&gt;\n                    Axis2-C (AXIS2C)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320122&amp;size=small\"\n                                                title=\"Bahir (Retired)\"\n                        value=\"12320122\"&gt;\n                    Bahir (Retired) (BAHIR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314924&amp;size=small\"\n                                                title=\"BatchEE\"\n                        value=\"12314924\"&gt;\n                    BatchEE (BATCHEE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314222&amp;size=small\"\n                                                title=\"Batik\"\n                        value=\"12314222\"&gt;\n                    Batik (BATIK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319527&amp;size=small\"\n                                                title=\"Beam\"\n                        value=\"12319527\"&gt;\n                    Beam (BEAM)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10570&amp;size=small\"\n                                                title=\"Beehive\"\n                        value=\"10570\"&gt;\n                    Beehive (BEEHIVE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311420&amp;size=small\"\n                                                title=\"Bigtop\"\n                        value=\"12311420\"&gt;\n                    Bigtop (BIGTOP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310907&amp;size=small\"\n                                                title=\"Bluesky\"\n                        value=\"12310907\"&gt;\n                    Bluesky (BLUESKY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311293&amp;size=small\"\n                                                title=\"Bookkeeper\"\n                        value=\"12311293\"&gt;\n                    Bookkeeper (BOOKKEEPER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312920&amp;size=small\"\n                                                title=\"BRAND\"\n                        value=\"12312920\"&gt;\n                    BRAND (TM)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315421&amp;size=small\"\n                                                title=\"Brooklyn\"\n                        value=\"12315421\"&gt;\n                    Brooklyn (BROOKLYN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310734&amp;size=small\"\n                                                title=\"Buildr (Retired)\"\n                        value=\"12310734\"&gt;\n                    Buildr (Retired) (BUILDR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311080&amp;size=small\"\n                                                title=\"BVal\"\n                        value=\"12311080\"&gt;\n                    BVal (BVAL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310070&amp;size=small\"\n                                                title=\"C++ Standard Library\"\n                        value=\"12310070\"&gt;\n                    C++ Standard Library (STDCXX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10471&amp;size=small\"\n                                                title=\"Cactus\"\n                        value=\"10471\"&gt;\n                    Cactus (CACTUS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315524&amp;size=small\"\n                                                title=\"Calcite\"\n                        value=\"12315524\"&gt;\n                    Calcite (CALCITE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311211&amp;size=small\"\n                                                title=\"Camel\"\n                        value=\"12311211\"&gt;\n                    Camel (CAMEL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320220&amp;size=small\"\n                                                title=\"CarbonData\"\n                        value=\"12320220\"&gt;\n                    CarbonData (CARBONDATA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311171&amp;size=small\"\n                                                title=\"Causeway\"\n                        value=\"12311171\"&gt;\n                    Causeway (CAUSEWAY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310903&amp;size=small\"\n                                                title=\"Cayenne\"\n                        value=\"12310903\"&gt;\n                    Cayenne (CAY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311213&amp;size=small\"\n                                                title=\"Celix\"\n                        value=\"12311213\"&gt;\n                    Celix (CELIX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12323522&amp;size=small\"\n                                                title=\"Central Services\"\n                        value=\"12323522\"&gt;\n                    Central Services (CS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310936&amp;size=small\"\n                                                title=\"Chemistry (Retired)\"\n                        value=\"12310936\"&gt;\n                    Chemistry (Retired) (CMIS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310900&amp;size=small\"\n                                                title=\"Chukwa (retired)\"\n                        value=\"12310900\"&gt;\n                    Chukwa (retired) (CHUKWA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311020&amp;size=small\"\n                                                title=\"Clerezza (Retired)\"\n                        value=\"12311020\"&gt;\n                    Clerezza (Retired) (CLEREZZA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310902&amp;size=small\"\n                                                title=\"Click\"\n                        value=\"12310902\"&gt;\n                    Click (CLK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310901&amp;size=small\"\n                                                title=\"Click Eclipse\"\n                        value=\"12310901\"&gt;\n                    Click Eclipse (CLKE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313920&amp;size=small\"\n                                                title=\"CloudStack\"\n                        value=\"12313920\"&gt;\n                    CloudStack (CLOUDSTACK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310170&amp;size=small\"\n                                                title=\"Cocoon (Retired)\"\n                        value=\"12310170\"&gt;\n                    Cocoon (Retired) (COCOON)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310838&amp;size=small\"\n                                                title=\"Cocoon 3 (Retired) (Retired) (Retired)\"\n                        value=\"12310838\"&gt;\n                    Cocoon 3 (Retired) (Retired) (Retired) (COCOON3)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325021&amp;size=small\"\n                                                title=\"Comdev GSOC\"\n                        value=\"12325021\"&gt;\n                    Comdev GSOC (GSOC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310459&amp;size=small\"\n                                                title=\"Commons Attributes\"\n                        value=\"12310459\"&gt;\n                    Commons Attributes (ATTRIBUTES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314220&amp;size=small\"\n                                                title=\"Commons BCEL\"\n                        value=\"12314220\"&gt;\n                    Commons BCEL (BCEL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310460&amp;size=small\"\n                                                title=\"Commons BeanUtils\"\n                        value=\"12310460\"&gt;\n                    Commons BeanUtils (BEANUTILS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310461&amp;size=small\"\n                                                title=\"Commons Betwixt\"\n                        value=\"12310461\"&gt;\n                    Commons Betwixt (BETWIXT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310621&amp;size=small\"\n                                                title=\"Commons BSF\"\n                        value=\"12310621\"&gt;\n                    Commons BSF (BSF)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310462&amp;size=small\"\n                                                title=\"Commons Chain\"\n                        value=\"12310462\"&gt;\n                    Commons Chain (CHAIN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310463&amp;size=small\"\n                                                title=\"Commons CLI\"\n                        value=\"12310463\"&gt;\n                    Commons CLI (CLI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310464&amp;size=small\"\n                                                title=\"Commons Codec\"\n                        value=\"12310464\"&gt;\n                    Commons Codec (CODEC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310465&amp;size=small\"\n                                                title=\"Commons Collections\"\n                        value=\"12310465\"&gt;\n                    Commons Collections (COLLECTIONS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310904&amp;size=small\"\n                                                title=\"Commons Compress\"\n                        value=\"12310904\"&gt;\n                    Commons Compress (COMPRESS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310467&amp;size=small\"\n                                                title=\"Commons Configuration\"\n                        value=\"12310467\"&gt;\n                    Commons Configuration (CONFIGURATION)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320024&amp;size=small\"\n                                                title=\"Commons Crypto\"\n                        value=\"12320024\"&gt;\n                    Commons Crypto (CRYPTO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313222&amp;size=small\"\n                                                title=\"Commons CSV\"\n                        value=\"12313222\"&gt;\n                    Commons CSV (CSV)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310468&amp;size=small\"\n                                                title=\"Commons Daemon\"\n                        value=\"12310468\"&gt;\n                    Commons Daemon (DAEMON)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310469&amp;size=small\"\n                                                title=\"Commons DBCP\"\n                        value=\"12310469\"&gt;\n                    Commons DBCP (DBCP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310470&amp;size=small\"\n                                                title=\"Commons DbUtils\"\n                        value=\"12310470\"&gt;\n                    Commons DbUtils (DBUTILS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310471&amp;size=small\"\n                                                title=\"Commons Digester\"\n                        value=\"12310471\"&gt;\n                    Commons Digester (DIGESTER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310472&amp;size=small\"\n                                                title=\"Commons Discovery\"\n                        value=\"12310472\"&gt;\n                    Commons Discovery (DISCOVERY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310591&amp;size=small\"\n                                                title=\"Commons Dormant\"\n                        value=\"12310591\"&gt;\n                    Commons Dormant (DORMANT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310473&amp;size=small\"\n                                                title=\"Commons EL\"\n                        value=\"12310473\"&gt;\n                    Commons EL (EL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310474&amp;size=small\"\n                                                title=\"Commons Email\"\n                        value=\"12310474\"&gt;\n                    Commons Email (EMAIL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310814&amp;size=small\"\n                                                title=\"Commons Exec\"\n                        value=\"12310814\"&gt;\n                    Commons Exec (EXEC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310475&amp;size=small\"\n                                                title=\"Commons FeedParser\"\n                        value=\"12310475\"&gt;\n                    Commons FeedParser (FEEDPARSER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310476&amp;size=small\"\n                                                title=\"Commons FileUpload\"\n                        value=\"12310476\"&gt;\n                    Commons FileUpload (FILEUPLOAD)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312520&amp;size=small\"\n                                                title=\"Commons Functor (Dormant)\"\n                        value=\"12312520\"&gt;\n                    Commons Functor (Dormant) (FUNCTOR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321920&amp;size=small\"\n                                                title=\"Commons Geometry\"\n                        value=\"12321920\"&gt;\n                    Commons Geometry (GEOMETRY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313421&amp;size=small\"\n                                                title=\"Commons Imaging\"\n                        value=\"12313421\"&gt;\n                    Commons Imaging (IMAGING)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310477&amp;size=small\"\n                                                title=\"Commons IO\"\n                        value=\"12310477\"&gt;\n                    Commons IO (IO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310650&amp;size=small\"\n                                                title=\"Commons JCI\"\n                        value=\"12310650\"&gt;\n                    Commons JCI (JCI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310506&amp;size=small\"\n                                                title=\"Commons JCS\"\n                        value=\"12310506\"&gt;\n                    Commons JCS (JCS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10012&amp;size=small\"\n                                                title=\"Commons Jelly\"\n                        value=\"10012\"&gt;\n                    Commons Jelly (JELLY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310479&amp;size=small\"\n                                                title=\"Commons JEXL\"\n                        value=\"12310479\"&gt;\n                    Commons JEXL (JEXL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310480&amp;size=small\"\n                                                title=\"Commons JXPath\"\n                        value=\"12310480\"&gt;\n                    Commons JXPath (JXPATH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310481&amp;size=small\"\n                                                title=\"Commons Lang\"\n                        value=\"12310481\"&gt;\n                    Commons Lang (LANG)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310483&amp;size=small\"\n                                                title=\"Commons Launcher\"\n                        value=\"12310483\"&gt;\n                    Commons Launcher (LAUNCHER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310484&amp;size=small\"\n                                                title=\"Commons Logging\"\n                        value=\"12310484\"&gt;\n                    Commons Logging (LOGGING)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310485&amp;size=small\"\n                                                title=\"Commons Math\"\n                        value=\"12310485\"&gt;\n                    Commons Math (MATH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310486&amp;size=small\"\n                                                title=\"Commons Modeler\"\n                        value=\"12310486\"&gt;\n                    Commons Modeler (MODELER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310487&amp;size=small\"\n                                                title=\"Commons Net\"\n                        value=\"12310487\"&gt;\n                    Commons Net (NET)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320720&amp;size=small\"\n                                                title=\"Commons Numbers\"\n                        value=\"12320720\"&gt;\n                    Commons Numbers (NUMBERS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313525&amp;size=small\"\n                                                title=\"Commons OGNL (Dormant)\"\n                        value=\"12313525\"&gt;\n                    Commons OGNL (Dormant) (OGNL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310488&amp;size=small\"\n                                                title=\"Commons Pool\"\n                        value=\"12310488\"&gt;\n                    Commons Pool (POOL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310489&amp;size=small\"\n                                                title=\"Commons Primitives\"\n                        value=\"12310489\"&gt;\n                    Commons Primitives (PRIMITIVES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310731&amp;size=small\"\n                                                title=\"Commons Proxy\"\n                        value=\"12310731\"&gt;\n                    Commons Proxy (PROXY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310490&amp;size=small\"\n                                                title=\"Commons Resources\"\n                        value=\"12310490\"&gt;\n                    Commons Resources (RESOURCES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320623&amp;size=small\"\n                                                title=\"Commons RNG\"\n                        value=\"12320623\"&gt;\n                    Commons RNG (RNG)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310491&amp;size=small\"\n                                                title=\"Commons Sandbox\"\n                        value=\"12310491\"&gt;\n                    Commons Sandbox (SANDBOX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310720&amp;size=small\"\n                                                title=\"Commons Sanselan\"\n                        value=\"12310720\"&gt;\n                    Commons Sanselan (SANSELAN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310492&amp;size=small\"\n                                                title=\"Commons SCXML\"\n                        value=\"12310492\"&gt;\n                    Commons SCXML (SCXML)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321632&amp;size=small\"\n                                                title=\"Commons Statistics\"\n                        value=\"12321632\"&gt;\n                    Commons Statistics (STATISTICS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318221&amp;size=small\"\n                                                title=\"Commons Text\"\n                        value=\"12318221\"&gt;\n                    Commons Text (TEXT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310493&amp;size=small\"\n                                                title=\"Commons Transaction\"\n                        value=\"12310493\"&gt;\n                    Commons Transaction (TRANSACTION)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310494&amp;size=small\"\n                                                title=\"Commons Validator\"\n                        value=\"12310494\"&gt;\n                    Commons Validator (VALIDATOR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310495&amp;size=small\"\n                                                title=\"Commons VFS\"\n                        value=\"12310495\"&gt;\n                    Commons VFS (VFS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315320&amp;size=small\"\n                                                title=\"Commons Weaver\"\n                        value=\"12315320\"&gt;\n                    Commons Weaver (WEAVER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311010&amp;size=small\"\n                                                title=\"Community Development\"\n                        value=\"12311010\"&gt;\n                    Community Development (COMDEV)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12316921&amp;size=small\"\n                                                title=\"Continuum\"\n                        value=\"12316921\"&gt;\n                    Continuum (CONTINUUM)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12316120&amp;size=small\"\n                                                title=\"Corinthia\"\n                        value=\"12316120\"&gt;\n                    Corinthia (COR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318722&amp;size=small\"\n                                                title=\"COTTON\"\n                        value=\"12318722\"&gt;\n                    COTTON (COTTON)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310780&amp;size=small\"\n                                                title=\"CouchDB\"\n                        value=\"12310780\"&gt;\n                    CouchDB (COUCHDB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313526&amp;size=small\"\n                                                title=\"Crunch (Retired)\"\n                        value=\"12313526\"&gt;\n                    Crunch (Retired) (CRUNCH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313621&amp;size=small\"\n                                                title=\"cTAKES\"\n                        value=\"12313621\"&gt;\n                    cTAKES (CTAKES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324121&amp;size=small\"\n                                                title=\"Custos Security\"\n                        value=\"12324121\"&gt;\n                    Custos Security (CUSTOS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310511&amp;size=small\"\n                                                title=\"CXF\"\n                        value=\"12310511\"&gt;\n                    CXF (CXF)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311031&amp;size=small\"\n                                                title=\"CXF Distributed OSGi (Retired)\"\n                        value=\"12311031\"&gt;\n                    CXF Distributed OSGi (Retired) (DOSGI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315520&amp;size=small\"\n                                                title=\"CXF XJC Utils\"\n                        value=\"12315520\"&gt;\n                    CXF XJC Utils (CXFXJC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313420&amp;size=small\"\n                                                title=\"CXF-Fediz\"\n                        value=\"12313420\"&gt;\n                    CXF-Fediz (FEDIZ)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321622&amp;size=small\"\n                                                title=\"Daffodil\"\n                        value=\"12321622\"&gt;\n                    Daffodil (DAFFODIL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315221&amp;size=small\"\n                                                title=\"DataFu\"\n                        value=\"12315221\"&gt;\n                    DataFu (DATAFU)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310320&amp;size=small\"\n                                                title=\"DayTrader\"\n                        value=\"12310320\"&gt;\n                    DayTrader (DAYTRADER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10731&amp;size=small\"\n                                                title=\"DdlUtils\"\n                        value=\"10731\"&gt;\n                    DdlUtils (DDLUTILS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311150&amp;size=small\"\n                                                title=\"DeltaCloud\"\n                        value=\"12311150\"&gt;\n                    DeltaCloud (DTACLOUD)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312820&amp;size=small\"\n                                                title=\"DeltaSpike\"\n                        value=\"12312820\"&gt;\n                    DeltaSpike (DELTASPIKE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10403&amp;size=small\"\n                                                title=\"Depot\"\n                        value=\"10403\"&gt;\n                    Depot (DEPOT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10594&amp;size=small\"\n                                                title=\"Derby\"\n                        value=\"10594\"&gt;\n                    Derby (DERBY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312921&amp;size=small\"\n                                                title=\"DeviceMap\"\n                        value=\"12312921\"&gt;\n                    DeviceMap (DMAP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10400&amp;size=small\"\n                                                title=\"Directory\"\n                        value=\"10400\"&gt;\n                    Directory (DIR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310260&amp;size=small\"\n                                                title=\"Directory ApacheDS\"\n                        value=\"12310260\"&gt;\n                    Directory ApacheDS (DIRSERVER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310962&amp;size=small\"\n                                                title=\"Directory Client API\"\n                        value=\"12310962\"&gt;\n                    Directory Client API (DIRAPI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310880&amp;size=small\"\n                                                title=\"Directory Groovy LDAP\"\n                        value=\"12310880\"&gt;\n                    Directory Groovy LDAP (DIRGROOVY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310910&amp;size=small\"\n                                                title=\"Directory Kerberos\"\n                        value=\"12310910\"&gt;\n                    Directory Kerberos (DIRKRB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10512&amp;size=small\"\n                                                title=\"Directory Naming\"\n                        value=\"10512\"&gt;\n                    Directory Naming (DIRNAMING)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310770&amp;size=small\"\n                                                title=\"Directory Shared (Please use DIRAPI instead)\"\n                        value=\"12310770\"&gt;\n                    Directory Shared (Please use DIRAPI instead) (DIRSHARED)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310590&amp;size=small\"\n                                                title=\"Directory Studio\"\n                        value=\"12310590\"&gt;\n                    Directory Studio (DIRSTUDIO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320620&amp;size=small\"\n                                                title=\"DistributedLog\"\n                        value=\"12320620\"&gt;\n                    DistributedLog (DL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322922&amp;size=small\"\n                                                title=\"Diversity and Inclusion\"\n                        value=\"12322922\"&gt;\n                    Diversity and Inclusion (DI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310652&amp;size=small\"\n                                                title=\"DocBook Framework\"\n                        value=\"12310652\"&gt;\n                    DocBook Framework (DBF)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310842&amp;size=small\"\n                                                title=\"Droids\"\n                        value=\"12310842\"&gt;\n                    Droids (DROIDS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310670&amp;size=small\"\n                                                title=\"Dvsl\"\n                        value=\"12310670\"&gt;\n                    Dvsl (DVSL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319222&amp;size=small\"\n                                                title=\"Eagle (Retired)\"\n                        value=\"12319222\"&gt;\n                    Eagle (Retired) (EAGLE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311270&amp;size=small\"\n                                                title=\"EasyAnt\"\n                        value=\"12311270\"&gt;\n                    EasyAnt (EASYANT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310813&amp;size=small\"\n                                                title=\"ECS\"\n                        value=\"12310813\"&gt;\n                    ECS (ECS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319623&amp;size=small\"\n                                                title=\"Edgent\"\n                        value=\"12319623\"&gt;\n                    Edgent (EDGENT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310820&amp;size=small\"\n                                                title=\"Empire-DB\"\n                        value=\"12310820\"&gt;\n                    Empire-DB (EMPIREDB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310850&amp;size=small\"\n                                                title=\"Enterprise Social Messaging Environment (ESME)\"\n                        value=\"12310850\"&gt;\n                    Enterprise Social Messaging Environment (ESME) (ESME)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314926&amp;size=small\"\n                                                title=\"eSCIMo \"\n                        value=\"12314926\"&gt;\n                    eSCIMo  (ESCIMO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310835&amp;size=small\"\n                                                title=\"Etch\"\n                        value=\"12310835\"&gt;\n                    Etch (ETCH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10620&amp;size=small\"\n                                                title=\"ews\"\n                        value=\"10620\"&gt;\n                    ews (EWS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10428&amp;size=small\"\n                                                title=\"Excalibur Components\"\n                        value=\"10428\"&gt;\n                    Excalibur Components (EXLBR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10420&amp;size=small\"\n                                                title=\"Excalibur Fortress\"\n                        value=\"10420\"&gt;\n                    Excalibur Fortress (FORTRESS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314429&amp;size=small\"\n                                                title=\"Falcon\"\n                        value=\"12314429\"&gt;\n                    Falcon (FALCON)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310100&amp;size=small\"\n                                                title=\"Felix\"\n                        value=\"12310100\"&gt;\n                    Felix (FELIX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321627&amp;size=small\"\n                                                title=\"Fineract Cloud Native\"\n                        value=\"12321627\"&gt;\n                    Fineract Cloud Native (FINCN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320621&amp;size=small\"\n                                                title=\"Flagon\"\n                        value=\"12320621\"&gt;\n                    Flagon (FLAGON)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315522&amp;size=small\"\n                                                title=\"Flink\"\n                        value=\"12315522\"&gt;\n                    Flink (FLINK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311321&amp;size=small\"\n                                                title=\"Flume\"\n                        value=\"12311321\"&gt;\n                    Flume (FLUME)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314223&amp;size=small\"\n                                                title=\"FOP\"\n                        value=\"12314223\"&gt;\n                    FOP (FOP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310000&amp;size=small\"\n                                                title=\"Forrest (Retired)\"\n                        value=\"12310000\"&gt;\n                    Forrest (Retired) (FOR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315921&amp;size=small\"\n                                                title=\"FORTRESS\"\n                        value=\"12315921\"&gt;\n                    FORTRESS (FC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10571&amp;size=small\"\n                                                title=\"FtpServer\"\n                        value=\"10571\"&gt;\n                    FtpServer (FTPSERVER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325320&amp;size=small\"\n                                                title=\"Gav Testing\"\n                        value=\"12325320\"&gt;\n                    Gav Testing (GAVTESTY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310200&amp;size=small\"\n                                                title=\"GBuild\"\n                        value=\"12310200\"&gt;\n                    GBuild (GBUILD)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318420&amp;size=small\"\n                                                title=\"Geode\"\n                        value=\"12318420\"&gt;\n                    Geode (GEODE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10220&amp;size=small\"\n                                                title=\"Geronimo\"\n                        value=\"10220\"&gt;\n                    Geronimo (GERONIMO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310111&amp;size=small\"\n                                                title=\"Geronimo-Devtools\"\n                        value=\"12310111\"&gt;\n                    Geronimo-Devtools (GERONIMODEVTOOLS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311820&amp;size=small\"\n                                                title=\"Giraph (Retired)\"\n                        value=\"12311820\"&gt;\n                    Giraph (Retired) (GIRAPH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320121&amp;size=small\"\n                                                title=\"Gossip\"\n                        value=\"12320121\"&gt;\n                    Gossip (GOSSIP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10661&amp;size=small\"\n                                                title=\"Graffito\"\n                        value=\"10661\"&gt;\n                    Graffito (GRFT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320728&amp;size=small\"\n                                                title=\"Griffin\"\n                        value=\"12320728\"&gt;\n                    Griffin (GRIFFIN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318123&amp;size=small\"\n                                                title=\"Groovy\"\n                        value=\"12318123\"&gt;\n                    Groovy (GROOVY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310503&amp;size=small\"\n                                                title=\"GShell\"\n                        value=\"12310503\"&gt;\n                    GShell (GSHELL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319620&amp;size=small\"\n                                                title=\"Guacamole\"\n                        value=\"12319620\"&gt;\n                    Guacamole (GUACAMOLE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10457&amp;size=small\"\n                                                title=\"Gump\"\n                        value=\"10457\"&gt;\n                    Gump (GUMP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310240&amp;size=small\"\n                                                title=\"Hadoop Common\"\n                        value=\"12310240\"&gt;\n                    Hadoop Common (HADOOP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314121&amp;size=small\"\n                                                title=\"Hadoop Development Tools\"\n                        value=\"12314121\"&gt;\n                    Hadoop Development Tools (HDT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310942&amp;size=small\"\n                                                title=\"Hadoop HDFS\"\n                        value=\"12310942\"&gt;\n                    Hadoop HDFS (HDFS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310941&amp;size=small\"\n                                                title=\"Hadoop Map/Reduce\"\n                        value=\"12310941\"&gt;\n                    Hadoop Map/Reduce (MAPREDUCE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313722&amp;size=small\"\n                                                title=\"Hadoop YARN\"\n                        value=\"12313722\"&gt;\n                    Hadoop YARN (YARN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310810&amp;size=small\"\n                                                title=\"Hama\"\n                        value=\"12310810\"&gt;\n                    Hama (HAMA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310050&amp;size=small\"\n                                                title=\"Harmony\"\n                        value=\"12310050\"&gt;\n                    Harmony (HARMONY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310753&amp;size=small\"\n                                                title=\"HBase\"\n                        value=\"12310753\"&gt;\n                    HBase (HBASE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311291&amp;size=small\"\n                                                title=\"HCatalog\"\n                        value=\"12311291\"&gt;\n                    HCatalog (HCATALOG)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310550&amp;size=small\"\n                                                title=\"Heraldry\"\n                        value=\"12310550\"&gt;\n                    Heraldry (HERALDRY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311000&amp;size=small\"\n                                                title=\"HISE\"\n                        value=\"12311000\"&gt;\n                    HISE (HISE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310843&amp;size=small\"\n                                                title=\"Hive\"\n                        value=\"12310843\"&gt;\n                    Hive (HIVE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320630&amp;size=small\"\n                                                title=\"Hivemall\"\n                        value=\"12320630\"&gt;\n                    Hivemall (HIVEMALL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10500&amp;size=small\"\n                                                title=\"HiveMind\"\n                        value=\"10500\"&gt;\n                    HiveMind (HIVEMIND)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315924&amp;size=small\"\n                                                title=\"HTrace\"\n                        value=\"12315924\"&gt;\n                    HTrace (HTRACE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311081&amp;size=small\"\n                                                title=\"HttpComponents HttpAsyncClient\"\n                        value=\"12311081\"&gt;\n                    HttpComponents HttpAsyncClient (HTTPASYNC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310360&amp;size=small\"\n                                                title=\"HttpComponents HttpClient\"\n                        value=\"12310360\"&gt;\n                    HttpComponents HttpClient (HTTPCLIENT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310340&amp;size=small\"\n                                                title=\"HttpComponents HttpCore\"\n                        value=\"12310340\"&gt;\n                    HttpComponents HttpCore (HTTPCORE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10602&amp;size=small\"\n                                                title=\"iBatis for .NET\"\n                        value=\"10602\"&gt;\n                    iBatis for .NET (IBATISNET)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10601&amp;size=small\"\n                                                title=\"iBatis for Java [READ ONLY]\"\n                        value=\"10601\"&gt;\n                    iBatis for Java [READ ONLY] (IBATIS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310572&amp;size=small\"\n                                                title=\"iBATIS for Ruby\"\n                        value=\"12310572\"&gt;\n                    iBATIS for Ruby (RBATIS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315922&amp;size=small\"\n                                                title=\"Ignite\"\n                        value=\"12315922\"&gt;\n                    Ignite (IGNITE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321021&amp;size=small\"\n                                                title=\"IMPALA\"\n                        value=\"12321021\"&gt;\n                    IMPALA (IMPALA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310742&amp;size=small\"\n                                                title=\"Imperius\"\n                        value=\"12310742\"&gt;\n                    Imperius (IMPERIUS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10595&amp;size=small\"\n                                                title=\"Incubator\"\n                        value=\"10595\"&gt;\n                    Incubator (INCUBATOR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325120&amp;size=small\"\n                                                title=\"Infra test 2\"\n                        value=\"12325120\"&gt;\n                    Infra test 2 (INFRATESTY2)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325121&amp;size=small\"\n                                                title=\"Infra Testy 33\"\n                        value=\"12325121\"&gt;\n                    Infra Testy 33 (INFRATESTY33)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324421&amp;size=small\"\n                                                title=\"INFRACLOUD1\"\n                        value=\"12324421\"&gt;\n                    INFRACLOUD1 (INFRACLOUD1)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319528&amp;size=small\"\n                                                title=\"Iota\"\n                        value=\"12319528\"&gt;\n                    Iota (IOTA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310580&amp;size=small\"\n                                                title=\"Ivy\"\n                        value=\"12310580\"&gt;\n                    Ivy (IVY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310640&amp;size=small\"\n                                                title=\"IvyDE (Retired)\"\n                        value=\"12310640\"&gt;\n                    IvyDE (Retired) (IVYDE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10591&amp;size=small\"\n                                                title=\"Jackrabbit Content Repository\"\n                        value=\"10591\"&gt;\n                    Jackrabbit Content Repository (JCR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314920&amp;size=small\"\n                                                title=\"Jackrabbit FileVault\"\n                        value=\"12314920\"&gt;\n                    Jackrabbit FileVault (JCRVLT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310935&amp;size=small\"\n                                                title=\"Jackrabbit JCR Benchmark\"\n                        value=\"12310935\"&gt;\n                    Jackrabbit JCR Benchmark (JCRBENCH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310934&amp;size=small\"\n                                                title=\"Jackrabbit JCR Classloader\"\n                        value=\"12310934\"&gt;\n                    Jackrabbit JCR Classloader (JCRCL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310933&amp;size=small\"\n                                                title=\"Jackrabbit JCR Servlets\"\n                        value=\"12310933\"&gt;\n                    Jackrabbit JCR Servlets (JCRSERVLET)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310970&amp;size=small\"\n                                                title=\"Jackrabbit JCR Tests\"\n                        value=\"12310970\"&gt;\n                    Jackrabbit JCR Tests (JCRTCK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310862&amp;size=small\"\n                                                title=\"Jackrabbit JCR-RMI\"\n                        value=\"12310862\"&gt;\n                    Jackrabbit JCR-RMI (JCRRMI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313221&amp;size=small\"\n                                                title=\"Jackrabbit Oak\"\n                        value=\"12313221\"&gt;\n                    Jackrabbit Oak (OAK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310932&amp;size=small\"\n                                                title=\"Jackrabbit OCM\"\n                        value=\"12310932\"&gt;\n                    Jackrabbit OCM (OCM)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310861&amp;size=small\"\n                                                title=\"Jackrabbit Site\"\n                        value=\"12310861\"&gt;\n                    Jackrabbit Site (JCRSITE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310980&amp;size=small\"\n                                                title=\"James Hupa\"\n                        value=\"12310980\"&gt;\n                    James Hupa (HUPA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310831&amp;size=small\"\n                                                title=\"James Imap\"\n                        value=\"12310831\"&gt;\n                    James Imap (IMAP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310990&amp;size=small\"\n                                                title=\"James jDKIM\"\n                        value=\"12310990\"&gt;\n                    James jDKIM (JDKIM)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10412&amp;size=small\"\n                                                title=\"James jSieve\"\n                        value=\"10412\"&gt;\n                    James jSieve (JSIEVE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310350&amp;size=small\"\n                                                title=\"James jSPF\"\n                        value=\"12310350\"&gt;\n                    James jSPF (JSPF)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311221&amp;size=small\"\n                                                title=\"James Mailbox\"\n                        value=\"12311221\"&gt;\n                    James Mailbox (MAILBOX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310660&amp;size=small\"\n                                                title=\"James Mailet\"\n                        value=\"12310660\"&gt;\n                    James Mailet (MAILET)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310521&amp;size=small\"\n                                                title=\"James Mime4j\"\n                        value=\"12310521\"&gt;\n                    James Mime4j (MIME4J)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310847&amp;size=small\"\n                                                title=\"James MPT\"\n                        value=\"12310847\"&gt;\n                    James MPT (MPT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310507&amp;size=small\"\n                                                title=\"James Postage\"\n                        value=\"12310507\"&gt;\n                    James Postage (POSTAGE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311060&amp;size=small\"\n                                                title=\"James Protocols\"\n                        value=\"12311060\"&gt;\n                    James Protocols (PROTOCOLS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10411&amp;size=small\"\n                                                title=\"James Server\"\n                        value=\"10411\"&gt;\n                    James Server (JAMES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10463&amp;size=small\"\n                                                title=\"JaxMe\"\n                        value=\"10463\"&gt;\n                    JaxMe (JAXME)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314430&amp;size=small\"\n                                                title=\"jclouds\"\n                        value=\"12314430\"&gt;\n                    jclouds (JCLOUDS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10630&amp;size=small\"\n                                                title=\"JDO\"\n                        value=\"10630\"&gt;\n                    JDO (JDO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10493&amp;size=small\"\n                                                title=\"Jetspeed (Retired)\"\n                        value=\"10493\"&gt;\n                    Jetspeed (Retired) (JS1)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10492&amp;size=small\"\n                                                title=\"Jetspeed 2 (Retired)\"\n                        value=\"10492\"&gt;\n                    Jetspeed 2 (Retired) (JS2)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315523&amp;size=small\"\n                                                title=\"Johnzon\"\n                        value=\"12315523\"&gt;\n                    Johnzon (JOHNZON)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319720&amp;size=small\"\n                                                title=\"Joshua (Retired)\"\n                        value=\"12319720\"&gt;\n                    Joshua (Retired) (JOSHUA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310812&amp;size=small\"\n                                                title=\"JSecurity\"\n                        value=\"12310812\"&gt;\n                    JSecurity (JSEC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310732&amp;size=small\"\n                                                title=\"JSPWiki\"\n                        value=\"12310732\"&gt;\n                    JSPWiki (JSPWIKI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10401&amp;size=small\"\n                                                title=\"jUDDI (Retired)\"\n                        value=\"10401\"&gt;\n                    jUDDI (Retired) (JUDDI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320520&amp;size=small\"\n                                                title=\"Juneau\"\n                        value=\"12320520\"&gt;\n                    Juneau (JUNEAU)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311720&amp;size=small\"\n                                                title=\"Kafka\"\n                        value=\"12311720\"&gt;\n                    Kafka (KAFKA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312324&amp;size=small\"\n                                                title=\"Kalumet (Retired)\"\n                        value=\"12312324\"&gt;\n                    Kalumet (Retired) (KALUMET)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310061&amp;size=small\"\n                                                title=\"Kandula\"\n                        value=\"12310061\"&gt;\n                    Kandula (KAND)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311140&amp;size=small\"\n                                                title=\"Karaf\"\n                        value=\"12311140\"&gt;\n                    Karaf (KARAF)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310848&amp;size=small\"\n                                                title=\"Kato\"\n                        value=\"12310848\"&gt;\n                    Kato (KATO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310890&amp;size=small\"\n                                                title=\"Ki\"\n                        value=\"12310890\"&gt;\n                    Ki (KI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311202&amp;size=small\"\n                                                title=\"Kitty\"\n                        value=\"12311202\"&gt;\n                    Kitty (KITTY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319523&amp;size=small\"\n                                                title=\"Kudu\"\n                        value=\"12319523\"&gt;\n                    Kudu (KUDU)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12316121&amp;size=small\"\n                                                title=\"Kylin\"\n                        value=\"12316121\"&gt;\n                    Kylin (KYLIN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310571&amp;size=small\"\n                                                title=\"Labs (Retired)\"\n                        value=\"12310571\"&gt;\n                    Labs (Retired) (LABS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310740&amp;size=small\"\n                                                title=\"Labs WebArch draft-fielding-http (Retired)\"\n                        value=\"12310740\"&gt;\n                    Labs WebArch draft-fielding-http (Retired) (HTTPDRAFT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310811&amp;size=small\"\n                                                title=\"Legal Discuss\"\n                        value=\"12310811\"&gt;\n                    Legal Discuss (LEGAL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311030&amp;size=small\"\n                                                title=\"Libcloud\"\n                        value=\"12311030\"&gt;\n                    Libcloud (LIBCLOUD)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321434&amp;size=small\"\n                                                title=\"Livy\"\n                        value=\"12321434\"&gt;\n                    Livy (LIVY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10550&amp;size=small\"\n                                                title=\"Log4cxx\"\n                        value=\"10550\"&gt;\n                    Log4cxx (LOGCXX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310790&amp;size=small\"\n                                                title=\"Log4j 2\"\n                        value=\"12310790\"&gt;\n                    Log4j 2 (LOG4J2)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10690&amp;size=small\"\n                                                title=\"Log4net\"\n                        value=\"10690\"&gt;\n                    Log4net (LOG4NET)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310690&amp;size=small\"\n                                                title=\"Log4php\"\n                        value=\"12310690\"&gt;\n                    Log4php (LOG4PHP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310560&amp;size=small\"\n                                                title=\"Lokahi\"\n                        value=\"12310560\"&gt;\n                    Lokahi (LOKAHI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310110&amp;size=small\"\n                                                title=\"Lucene - Core\"\n                        value=\"12310110\"&gt;\n                    Lucene - Core (LUCENE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310290&amp;size=small\"\n                                                title=\"Lucene.Net\"\n                        value=\"12310290\"&gt;\n                    Lucene.Net (LUCENENET)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10701&amp;size=small\"\n                                                title=\"Lucene4c\"\n                        value=\"10701\"&gt;\n                    Lucene4c (LCN4C)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310501&amp;size=small\"\n                                                title=\"Lucy\"\n                        value=\"12310501\"&gt;\n                    Lucy (LUCY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310751&amp;size=small\"\n                                                title=\"Mahout\"\n                        value=\"12310751\"&gt;\n                    Mahout (MAHOUT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311050&amp;size=small\"\n                                                title=\"ManifoldCF\"\n                        value=\"12311050\"&gt;\n                    ManifoldCF (CONNECTORS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314321&amp;size=small\"\n                                                title=\"Marmotta (Retired)\"\n                        value=\"12314321\"&gt;\n                    Marmotta (Retired) (MARMOTTA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12316922&amp;size=small\"\n                                                title=\"Maven (Moved to GitHub Issues)\"\n                        value=\"12316922\"&gt;\n                    Maven (Moved to GitHub Issues) (MNG)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317020&amp;size=small\"\n                                                title=\"Maven ACR Plugin (Moved to GitHub Issues)\"\n                        value=\"12317020\"&gt;\n                    Maven ACR Plugin (Moved to GitHub Issues) (MACR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317021&amp;size=small\"\n                                                title=\"Maven Ant Plugin (RETIRED)\"\n                        value=\"12317021\"&gt;\n                    Maven Ant Plugin (RETIRED) (MANT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317120&amp;size=small\"\n                                                title=\"Maven Ant Tasks (RETIRED)\"\n                        value=\"12317120\"&gt;\n                    Maven Ant Tasks (RETIRED) (MANTTASKS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317121&amp;size=small\"\n                                                title=\"Maven Antrun Plugin (Moved to GitHub Issues)\"\n                        value=\"12317121\"&gt;\n                    Maven Antrun Plugin (Moved to GitHub Issues) (MANTRUN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317122&amp;size=small\"\n                                                title=\"Maven Archetype (Moved to GitHub Issues)\"\n                        value=\"12317122\"&gt;\n                    Maven Archetype (Moved to GitHub Issues) (ARCHETYPE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317123&amp;size=small\"\n                                                title=\"Maven Archetype Bundles (Moved to GitHub Issues)\"\n                        value=\"12317123\"&gt;\n                    Maven Archetype Bundles (Moved to GitHub Issues) (MARCHETYPES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324322&amp;size=small\"\n                                                title=\"Maven Artifact Plugin (Moved to GitHub Issues)\"\n                        value=\"12324322\"&gt;\n                    Maven Artifact Plugin (Moved to GitHub Issues) (MARTIFACT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317220&amp;size=small\"\n                                                title=\"Maven Assembly Plugin (Moved to GitHub Issues)\"\n                        value=\"12317220\"&gt;\n                    Maven Assembly Plugin (Moved to GitHub Issues) (MASSEMBLY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324820&amp;size=small\"\n                                                title=\"Maven Build Cache Extension (Moved to GitHub Issues)\"\n                        value=\"12324820\"&gt;\n                    Maven Build Cache Extension (Moved to GitHub Issues) (MBUILDCACHE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317221&amp;size=small\"\n                                                title=\"Maven Changelog Plugin (Moved to GitHub Issues)\"\n                        value=\"12317221\"&gt;\n                    Maven Changelog Plugin (Moved to GitHub Issues) (MCHANGELOG)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317222&amp;size=small\"\n                                                title=\"Maven Changes Plugin (Moved to GitHub Issues)\"\n                        value=\"12317222\"&gt;\n                    Maven Changes Plugin (Moved to GitHub Issues) (MCHANGES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317223&amp;size=small\"\n                                                title=\"Maven Checkstyle Plugin (Moved to GitHub Issues)\"\n                        value=\"12317223\"&gt;\n                    Maven Checkstyle Plugin (Moved to GitHub Issues) (MCHECKSTYLE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317224&amp;size=small\"\n                                                title=\"Maven Clean Plugin (Moved to GitHub Issues)\"\n                        value=\"12317224\"&gt;\n                    Maven Clean Plugin (Moved to GitHub Issues) (MCLEAN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317225&amp;size=small\"\n                                                title=\"Maven Compiler Plugin (Moved to GitHub Issues)\"\n                        value=\"12317225\"&gt;\n                    Maven Compiler Plugin (Moved to GitHub Issues) (MCOMPILER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317227&amp;size=small\"\n                                                title=\"Maven Dependency Plugin (Moved to GitHub Issues)\"\n                        value=\"12317227\"&gt;\n                    Maven Dependency Plugin (Moved to GitHub Issues) (MDEP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317228&amp;size=small\"\n                                                title=\"Maven Deploy Plugin (Moved to GitHub Issues)\"\n                        value=\"12317228\"&gt;\n                    Maven Deploy Plugin (Moved to GitHub Issues) (MDEPLOY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317226&amp;size=small\"\n                                                title=\"Maven DOAP Plugin (Moved to GitHub Issues)\"\n                        value=\"12317226\"&gt;\n                    Maven DOAP Plugin (Moved to GitHub Issues) (MDOAP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317229&amp;size=small\"\n                                                title=\"Maven Documentation Checker Plugin  (RETIRED) (Retired)\"\n                        value=\"12317229\"&gt;\n                    Maven Documentation Checker Plugin  (RETIRED) (Retired) (MDOCCK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317230&amp;size=small\"\n                                                title=\"Maven Doxia (Moved to GitHub Issues)\"\n                        value=\"12317230\"&gt;\n                    Maven Doxia (Moved to GitHub Issues) (DOXIA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317320&amp;size=small\"\n                                                title=\"Maven Doxia Sitetools (Moved to GitHub Issues)\"\n                        value=\"12317320\"&gt;\n                    Maven Doxia Sitetools (Moved to GitHub Issues) (DOXIASITETOOLS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317420&amp;size=small\"\n                                                title=\"Maven Doxia Tools\"\n                        value=\"12317420\"&gt;\n                    Maven Doxia Tools (DOXIATOOLS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317422&amp;size=small\"\n                                                title=\"Maven EAR Plugin (Moved to GitHub Issues)\"\n                        value=\"12317422\"&gt;\n                    Maven EAR Plugin (Moved to GitHub Issues) (MEAR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317423&amp;size=small\"\n                                                title=\"Maven Eclipse Plugin (RETIRED)\"\n                        value=\"12317423\"&gt;\n                    Maven Eclipse Plugin (RETIRED) (MECLIPSE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317421&amp;size=small\"\n                                                title=\"Maven EJB Plugin (Moved to GitHub Issues)\"\n                        value=\"12317421\"&gt;\n                    Maven EJB Plugin (Moved to GitHub Issues) (MEJB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317520&amp;size=small\"\n                                                title=\"Maven Enforcer Plugin (Moved to GitHub Issues)\"\n                        value=\"12317520\"&gt;\n                    Maven Enforcer Plugin (Moved to GitHub Issues) (MENFORCER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317521&amp;size=small\"\n                                                title=\"Maven GPG Plugin (Moved to GitHub Issues)\"\n                        value=\"12317521\"&gt;\n                    Maven GPG Plugin (Moved to GitHub Issues) (MGPG)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317522&amp;size=small\"\n                                                title=\"Maven Help Plugin (Moved to GitHub Issues)\"\n                        value=\"12317522\"&gt;\n                    Maven Help Plugin (Moved to GitHub Issues) (MPH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317523&amp;size=small\"\n                                                title=\"Maven Indexer (Moved to GitHub Issues)\"\n                        value=\"12317523\"&gt;\n                    Maven Indexer (Moved to GitHub Issues) (MINDEXER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317524&amp;size=small\"\n                                                title=\"Maven Install Plugin (Moved to GitHub Issues)\"\n                        value=\"12317524\"&gt;\n                    Maven Install Plugin (Moved to GitHub Issues) (MINSTALL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317525&amp;size=small\"\n                                                title=\"Maven Invoker Plugin (Moved to GitHub Issues)\"\n                        value=\"12317525\"&gt;\n                    Maven Invoker Plugin (Moved to GitHub Issues) (MINVOKER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317526&amp;size=small\"\n                                                title=\"Maven JAR Plugin (Moved to GitHub Issues)\"\n                        value=\"12317526\"&gt;\n                    Maven JAR Plugin (Moved to GitHub Issues) (MJAR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317528&amp;size=small\"\n                                                title=\"Maven Jar Signer Plugin (Moved to GitHub Issues)\"\n                        value=\"12317528\"&gt;\n                    Maven Jar Signer Plugin (Moved to GitHub Issues) (MJARSIGNER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317529&amp;size=small\"\n                                                title=\"Maven Javadoc Plugin (Moved to GitHub Issues)\"\n                        value=\"12317529\"&gt;\n                    Maven Javadoc Plugin (Moved to GitHub Issues) (MJAVADOC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321621&amp;size=small\"\n                                                title=\"Maven JDeprScan Plugin (Moved to GitHub Issues)\"\n                        value=\"12321621\"&gt;\n                    Maven JDeprScan Plugin (Moved to GitHub Issues) (MJDEPRSCAN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319223&amp;size=small\"\n                                                title=\"Maven JDeps Plugin (Moved to GitHub Issues)\"\n                        value=\"12319223\"&gt;\n                    Maven JDeps Plugin (Moved to GitHub Issues) (MJDEPS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321432&amp;size=small\"\n                                                title=\"Maven JLink Plugin (Moved to GitHub Issues)\"\n                        value=\"12321432\"&gt;\n                    Maven JLink Plugin (Moved to GitHub Issues) (MJLINK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321433&amp;size=small\"\n                                                title=\"Maven JMod Plugin (Moved to GitHub Issues)\"\n                        value=\"12321433\"&gt;\n                    Maven JMod Plugin (Moved to GitHub Issues) (MJMOD)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317527&amp;size=small\"\n                                                title=\"Maven JXR (Moved to GitHub Issues)\"\n                        value=\"12317527\"&gt;\n                    Maven JXR (Moved to GitHub Issues) (JXR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317530&amp;size=small\"\n                                                title=\"Maven Linkcheck Plugin (Moved to GitHub Issues)\"\n                        value=\"12317530\"&gt;\n                    Maven Linkcheck Plugin (Moved to GitHub Issues) (MLINKCHECK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317622&amp;size=small\"\n                                                title=\"Maven Patch Plugin (RETIRED)\"\n                        value=\"12317622\"&gt;\n                    Maven Patch Plugin (RETIRED) (MPATCH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317620&amp;size=small\"\n                                                title=\"Maven PDF Plugin (RETIRED)\"\n                        value=\"12317620\"&gt;\n                    Maven PDF Plugin (RETIRED) (MPDF)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317720&amp;size=small\"\n                                                title=\"Maven Plugin Testing  (Moved to GitHub Issues)\"\n                        value=\"12317720\"&gt;\n                    Maven Plugin Testing  (Moved to GitHub Issues) (MPLUGINTESTING)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317820&amp;size=small\"\n                                                title=\"Maven Plugin Tools (Moved to GitHub Issues)\"\n                        value=\"12317820\"&gt;\n                    Maven Plugin Tools (Moved to GitHub Issues) (MPLUGIN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317621&amp;size=small\"\n                                                title=\"Maven PMD Plugin (Moved to GitHub Issues)\"\n                        value=\"12317621\"&gt;\n                    Maven PMD Plugin (Moved to GitHub Issues) (MPMD)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311250&amp;size=small\"\n                                                title=\"Maven POMs (Moved to GitHub issues) \"\n                        value=\"12311250\"&gt;\n                    Maven POMs (Moved to GitHub issues)  (MPOM)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317821&amp;size=small\"\n                                                title=\"Maven Project Info Reports Plugin (Moved to GitHub Issues)\"\n                        value=\"12317821\"&gt;\n                    Maven Project Info Reports Plugin (Moved to GitHub Issues) (MPIR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317822&amp;size=small\"\n                                                title=\"Maven Project Web Site (Moved to GitHub Issues)\"\n                        value=\"12317822\"&gt;\n                    Maven Project Web Site (Moved to GitHub Issues) (MNGSITE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317823&amp;size=small\"\n                                                title=\"Maven RAR Plugin (Moved to GitHub Issues)\"\n                        value=\"12317823\"&gt;\n                    Maven RAR Plugin (Moved to GitHub Issues) (MRAR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317824&amp;size=small\"\n                                                title=\"Maven Release Plugin (Moved to GitHub Issues)\"\n                        value=\"12317824\"&gt;\n                    Maven Release Plugin (Moved to GitHub Issues) (MRELEASE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317825&amp;size=small\"\n                                                title=\"Maven Remote Resources Plugin (Moved to GitHub Issues)\"\n                        value=\"12317825\"&gt;\n                    Maven Remote Resources Plugin (Moved to GitHub Issues) (MRRESOURCES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317826&amp;size=small\"\n                                                title=\"Maven Repository Plugin (RETIRED)\"\n                        value=\"12317826\"&gt;\n                    Maven Repository Plugin (RETIRED) (MREPOSITORY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320628&amp;size=small\"\n                                                title=\"Maven Resolver\"\n                        value=\"12320628\"&gt;\n                    Maven Resolver (MRESOLVER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317827&amp;size=small\"\n                                                title=\"Maven Resources Plugin (Moved to GitHub Issues)\"\n                        value=\"12317827\"&gt;\n                    Maven Resources Plugin (Moved to GitHub Issues) (MRESOURCES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317828&amp;size=small\"\n                                                title=\"Maven SCM (Moved to GitHub Issues)\"\n                        value=\"12317828\"&gt;\n                    Maven SCM (Moved to GitHub Issues) (SCM)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317920&amp;size=small\"\n                                                title=\"Maven SCM Publish Plugin (Moved to GitHub Issues)\"\n                        value=\"12317920\"&gt;\n                    Maven SCM Publish Plugin (Moved to GitHub Issues) (MSCMPUB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322823&amp;size=small\"\n                                                title=\"Maven Scripting (Moved to GitHub Issues)\"\n                        value=\"12322823\"&gt;\n                    Maven Scripting (Moved to GitHub Issues) (MSCRIPTING)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317921&amp;size=small\"\n                                                title=\"Maven Shade Plugin (Moved to GitHub Issues)\"\n                        value=\"12317921\"&gt;\n                    Maven Shade Plugin (Moved to GitHub Issues) (MSHADE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317922&amp;size=small\"\n                                                title=\"Maven Shared Components\"\n                        value=\"12317922\"&gt;\n                    Maven Shared Components (MSHARED)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317923&amp;size=small\"\n                                                title=\"Maven Site Plugin (Moved to GitHub Issues)\"\n                        value=\"12317923\"&gt;\n                    Maven Site Plugin (Moved to GitHub Issues) (MSITE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317926&amp;size=small\"\n                                                title=\"Maven Skins\"\n                        value=\"12317926\"&gt;\n                    Maven Skins (MSKINS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317924&amp;size=small\"\n                                                title=\"Maven Source Plugin (Moved to GitHub Issues)\"\n                        value=\"12317924\"&gt;\n                    Maven Source Plugin (Moved to GitHub Issues) (MSOURCES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317925&amp;size=small\"\n                                                title=\"Maven Stage Plugin (Moved to GitHub Issues)\"\n                        value=\"12317925\"&gt;\n                    Maven Stage Plugin (Moved to GitHub Issues) (MSTAGE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12317927&amp;size=small\"\n                                                title=\"Maven Surefire (Moved to GitHub Issues)\"\n                        value=\"12317927\"&gt;\n                    Maven Surefire (Moved to GitHub Issues) (SUREFIRE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318020&amp;size=small\"\n                                                title=\"Maven Toolchains Plugin (Moved to GitHub Issues)\"\n                        value=\"12318020\"&gt;\n                    Maven Toolchains Plugin (Moved to GitHub Issues) (MTOOLCHAINS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318120&amp;size=small\"\n                                                title=\"Maven Verifier Plugin (Moved to GitHub Issues)\"\n                        value=\"12318120\"&gt;\n                    Maven Verifier Plugin (Moved to GitHub Issues) (MVERIFIER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318122&amp;size=small\"\n                                                title=\"Maven Wagon (Moved to GitHub Issues)\"\n                        value=\"12318122\"&gt;\n                    Maven Wagon (Moved to GitHub Issues) (WAGON)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318121&amp;size=small\"\n                                                title=\"Maven WAR Plugin (Moved to GitHub Issues)\"\n                        value=\"12318121\"&gt;\n                    Maven WAR Plugin (Moved to GitHub Issues) (MWAR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12323721&amp;size=small\"\n                                                title=\"Maven Wrapper (Moved to GitHub Issues)\"\n                        value=\"12323721\"&gt;\n                    Maven Wrapper (Moved to GitHub Issues) (MWRAPPER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314620&amp;size=small\"\n                                                title=\"Mavibot\"\n                        value=\"12314620\"&gt;\n                    Mavibot (MAVIBOT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320731&amp;size=small\"\n                                                title=\"Meecrowave\"\n                        value=\"12320731\"&gt;\n                    Meecrowave (MEECROWAVE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311242&amp;size=small\"\n                                                title=\"Mesos\"\n                        value=\"12311242\"&gt;\n                    Mesos (MESOS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319323&amp;size=small\"\n                                                title=\"Metron (Retired)\"\n                        value=\"12319323\"&gt;\n                    Metron (Retired) (METRON)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319526&amp;size=small\"\n                                                title=\"Milagro (Retired)\"\n                        value=\"12319526\"&gt;\n                    Milagro (Retired) (MILAGRO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10670&amp;size=small\"\n                                                title=\"MINA\"\n                        value=\"10670\"&gt;\n                    MINA (DIRMINA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310849&amp;size=small\"\n                                                title=\"MINA SSHD\"\n                        value=\"12310849\"&gt;\n                    MINA SSHD (SSHD)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10671&amp;size=small\"\n                                                title=\"Mirae\"\n                        value=\"10671\"&gt;\n                    Mirae (MIRAE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319820&amp;size=small\"\n                                                title=\"Mnemonic (Retired)\"\n                        value=\"12319820\"&gt;\n                    Mnemonic (Retired) (MNEMONIC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10640&amp;size=small\"\n                                                title=\"mod_python\"\n                        value=\"10640\"&gt;\n                    mod_python (MODPYTHON)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314428&amp;size=small\"\n                                                title=\"MRQL\"\n                        value=\"12314428\"&gt;\n                    MRQL (MRQL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311292&amp;size=small\"\n                                                title=\"MRUnit\"\n                        value=\"12311292\"&gt;\n                    MRUnit (MRUNIT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10614&amp;size=small\"\n                                                title=\"Muse\"\n                        value=\"10614\"&gt;\n                    Muse (MUSE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322320&amp;size=small\"\n                                                title=\"MxNet Test\"\n                        value=\"12322320\"&gt;\n                    MxNet Test (MXNETTEST)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310300&amp;size=small\"\n                                                title=\"MyFaces ADF-Faces\"\n                        value=\"12310300\"&gt;\n                    MyFaces ADF-Faces (ADFFACES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311071&amp;size=small\"\n                                                title=\"MyFaces CODI\"\n                        value=\"12311071\"&gt;\n                    MyFaces CODI (EXTCDI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310846&amp;size=small\"\n                                                title=\"MyFaces Commons\"\n                        value=\"12310846\"&gt;\n                    MyFaces Commons (MFCOMMONS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10600&amp;size=small\"\n                                                title=\"MyFaces Core\"\n                        value=\"10600\"&gt;\n                    MyFaces Core (MYFACES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310964&amp;size=small\"\n                                                title=\"MyFaces Extensions Scripting\"\n                        value=\"12310964\"&gt;\n                    MyFaces Extensions Scripting (EXTSCRIPT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310821&amp;size=small\"\n                                                title=\"MyFaces Extensions Validator\"\n                        value=\"12310821\"&gt;\n                    MyFaces Extensions Validator (EXTVAL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311280&amp;size=small\"\n                                                title=\"MyFaces HTML5 Component Library\"\n                        value=\"12311280\"&gt;\n                    MyFaces HTML5 Component Library (MFHTML5)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310691&amp;size=small\"\n                                                title=\"MyFaces Orchestra\"\n                        value=\"12310691\"&gt;\n                    MyFaces Orchestra (ORCHESTRA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310733&amp;size=small\"\n                                                title=\"MyFaces Portlet Bridge\"\n                        value=\"12310733\"&gt;\n                    MyFaces Portlet Bridge (PORTLETBRIDGE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310951&amp;size=small\"\n                                                title=\"MyFaces Test\"\n                        value=\"12310951\"&gt;\n                    MyFaces Test (MYFACESTEST)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310273&amp;size=small\"\n                                                title=\"MyFaces Tobago\"\n                        value=\"12310273\"&gt;\n                    MyFaces Tobago (TOBAGO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310272&amp;size=small\"\n                                                title=\"MyFaces Tomahawk\"\n                        value=\"12310272\"&gt;\n                    MyFaces Tomahawk (TOMAHAWK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310661&amp;size=small\"\n                                                title=\"MyFaces Trinidad\"\n                        value=\"12310661\"&gt;\n                    MyFaces Trinidad (TRINIDAD)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319221&amp;size=small\"\n                                                title=\"Mynewt\"\n                        value=\"12319221\"&gt;\n                    Mynewt (MYNEWT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320020&amp;size=small\"\n                                                title=\"MyNewt Docs\"\n                        value=\"12320020\"&gt;\n                    MyNewt Docs (MYNEWTDOC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318522&amp;size=small\"\n                                                title=\"Myriad\"\n                        value=\"12318522\"&gt;\n                    Myriad (MYRIAD)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311260&amp;size=small\"\n                                                title=\"Neethi\"\n                        value=\"12311260\"&gt;\n                    Neethi (NEETHI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320634&amp;size=small\"\n                                                title=\"NetBeans\"\n                        value=\"12320634\"&gt;\n                    NetBeans (NETBEANS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12325520&amp;size=small\"\n                                                title=\"NiFi Improvement Proposal\"\n                        value=\"12325520\"&gt;\n                    NiFi Improvement Proposal (NIP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320920&amp;size=small\"\n                                                title=\"NiFi Registry - MOVED TO NIFI PROJECT\"\n                        value=\"12320920\"&gt;\n                    NiFi Registry - MOVED TO NIFI PROJECT (NIFIREG)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12323420&amp;size=small\"\n                                                title=\"NiFi Standard Libraries\"\n                        value=\"12323420\"&gt;\n                    NiFi Standard Libraries (NIFILIBS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12323722&amp;size=small\"\n                                                title=\"NLPCraft\"\n                        value=\"12323722\"&gt;\n                    NLPCraft (NLPCRAFT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311182&amp;size=small\"\n                                                title=\"NPanday\"\n                        value=\"12311182\"&gt;\n                    NPanday (NPANDAY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10680&amp;size=small\"\n                                                title=\"Nutch\"\n                        value=\"10680\"&gt;\n                    Nutch (NUTCH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311151&amp;size=small\"\n                                                title=\"Nuvem\"\n                        value=\"12311151\"&gt;\n                    Nuvem (NUVEM)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310270&amp;size=small\"\n                                                title=\"ODE\"\n                        value=\"12310270\"&gt;\n                    ODE (ODE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314525&amp;size=small\"\n                                                title=\"ODE JaCOb\"\n                        value=\"12314525\"&gt;\n                    ODE JaCOb (JACOB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320636&amp;size=small\"\n                                                title=\"ODE Web Console\"\n                        value=\"12320636\"&gt;\n                    ODE Web Console (OWC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312220&amp;size=small\"\n                                                title=\"ODF Toolkit\"\n                        value=\"12312220\"&gt;\n                    ODF Toolkit (ODFTOOLKIT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310500&amp;size=small\"\n                                                title=\"OFBiz\"\n                        value=\"12310500\"&gt;\n                    OFBiz (OFBIZ)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10700&amp;size=small\"\n                                                title=\"OJB\"\n                        value=\"10700\"&gt;\n                    OJB (OJB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314520&amp;size=small\"\n                                                title=\"Olingo\"\n                        value=\"12314520\"&gt;\n                    Olingo (OLINGO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310839&amp;size=small\"\n                                                title=\"Olio\"\n                        value=\"12310839\"&gt;\n                    Olio (OLIO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311070&amp;size=small\"\n                                                title=\"OODT (Retired)\"\n                        value=\"12311070\"&gt;\n                    OODT (Retired) (OODT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311620&amp;size=small\"\n                                                title=\"Oozie (Retired)\"\n                        value=\"12311620\"&gt;\n                    Oozie (Retired) (OOZIE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310943&amp;size=small\"\n                                                title=\"Open Relevance Project \"\n                        value=\"12310943\"&gt;\n                    Open Relevance Project  (ORP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310530&amp;size=small\"\n                                                title=\"OpenEJB\"\n                        value=\"12310530\"&gt;\n                    OpenEJB (OPENEJB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310834&amp;size=small\"\n                                                title=\"OpenEJB Eclipse Plugin\"\n                        value=\"12310834\"&gt;\n                    OpenEJB Eclipse Plugin (OEP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310351&amp;size=small\"\n                                                title=\"OpenJPA\"\n                        value=\"12310351\"&gt;\n                    OpenJPA (OPENJPA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312720&amp;size=small\"\n                                                title=\"Openmeetings\"\n                        value=\"12312720\"&gt;\n                    Openmeetings (OPENMEETINGS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311215&amp;size=small\"\n                                                title=\"OpenNLP\"\n                        value=\"12311215\"&gt;\n                    OpenNLP (OPENNLP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322821&amp;size=small\"\n                                                title=\"OpenOffice\"\n                        value=\"12322821\"&gt;\n                    OpenOffice (OPENOFFICE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310844&amp;size=small\"\n                                                title=\"OpenWebBeans\"\n                        value=\"12310844\"&gt;\n                    OpenWebBeans (OWB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318320&amp;size=small\"\n                                                title=\"ORC\"\n                        value=\"12318320\"&gt;\n                    ORC (ORC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315521&amp;size=small\"\n                                                title=\"Parquet\"\n                        value=\"12315521\"&gt;\n                    Parquet (PARQUET)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310760&amp;size=small\"\n                                                title=\"PDFBox\"\n                        value=\"12310760\"&gt;\n                    PDFBox (PDFBOX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315120&amp;size=small\"\n                                                title=\"Phoenix\"\n                        value=\"12315120\"&gt;\n                    Phoenix (PHOENIX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320021&amp;size=small\"\n                                                title=\"Phoenix Omid\"\n                        value=\"12320021\"&gt;\n                    Phoenix Omid (OMID)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320123&amp;size=small\"\n                                                title=\"Phoenix Tephra\"\n                        value=\"12320123\"&gt;\n                    Phoenix Tephra (TEPHRA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310832&amp;size=small\"\n                                                title=\"PhotArk\"\n                        value=\"12310832\"&gt;\n                    PhotArk (PHOTARK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310730&amp;size=small\"\n                                                title=\"Pig\"\n                        value=\"12310730\"&gt;\n                    Pig (PIG)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320320&amp;size=small\"\n                                                title=\"PIRK\"\n                        value=\"12320320\"&gt;\n                    PIRK (PIRK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310863&amp;size=small\"\n                                                title=\"Pivot (Retired)\"\n                        value=\"12310863\"&gt;\n                    Pivot (Retired) (PIVOT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10560&amp;size=small\"\n                                                title=\"Pluto\"\n                        value=\"10560\"&gt;\n                    Pluto (PLUTO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312620&amp;size=small\"\n                                                title=\"Podling Suitable Names Search\"\n                        value=\"12312620\"&gt;\n                    Podling Suitable Names Search (PODLINGNAMESEARCH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12316820&amp;size=small\"\n                                                title=\"Polygene\"\n                        value=\"12316820\"&gt;\n                    Polygene (POLYGENE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10741&amp;size=small\"\n                                                title=\"Portals\"\n                        value=\"10741\"&gt;\n                    Portals (PORTALS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310870&amp;size=small\"\n                                                title=\"Portals Apps (Retired)\"\n                        value=\"12310870\"&gt;\n                    Portals Apps (Retired) (APA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10720&amp;size=small\"\n                                                title=\"Portals Bridges (Retired)\"\n                        value=\"10720\"&gt;\n                    Portals Bridges (Retired) (PB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320420&amp;size=small\"\n                                                title=\"PredictionIO (Retired)\"\n                        value=\"12320420\"&gt;\n                    PredictionIO (Retired) (PIO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314423&amp;size=small\"\n                                                title=\"Provisionr\"\n                        value=\"12314423\"&gt;\n                    Provisionr (PROVISIONR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310837&amp;size=small\"\n                                                title=\"Public Relations\"\n                        value=\"12310837\"&gt;\n                    Public Relations (PRC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10613&amp;size=small\"\n                                                title=\"Pubscribe\"\n                        value=\"10613\"&gt;\n                    Pubscribe (HERMES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321221&amp;size=small\"\n                                                title=\"Pulsar (Retired)\"\n                        value=\"12321221\"&gt;\n                    Pulsar (Retired) (PULSAR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310871&amp;size=small\"\n                                                title=\"PyLucene\"\n                        value=\"12310871\"&gt;\n                    PyLucene (PYLUCENE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310520&amp;size=small\"\n                                                title=\"Qpid\"\n                        value=\"12310520\"&gt;\n                    Qpid (QPID)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315321&amp;size=small\"\n                                                title=\"Qpid Dispatch\"\n                        value=\"12315321\"&gt;\n                    Qpid Dispatch (DISPATCH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314524&amp;size=small\"\n                                                title=\"Qpid JMS\"\n                        value=\"12314524\"&gt;\n                    Qpid JMS (QPIDJMS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313720&amp;size=small\"\n                                                title=\"Qpid Proton\"\n                        value=\"12313720\"&gt;\n                    Qpid Proton (PROTON)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310610&amp;size=small\"\n                                                title=\"Rampart\"\n                        value=\"12310610\"&gt;\n                    Rampart (RAMPART)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310630&amp;size=small\"\n                                                title=\"Rampart/C\"\n                        value=\"12310630\"&gt;\n                    Rampart/C (RAMPARTC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315621&amp;size=small\"\n                                                title=\"Ranger\"\n                        value=\"12315621\"&gt;\n                    Ranger (RANGER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320820&amp;size=small\"\n                                                title=\"Ratis\"\n                        value=\"12320820\"&gt;\n                    Ratis (RATIS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311290&amp;size=small\"\n                                                title=\"Rave\"\n                        value=\"12311290\"&gt;\n                    Rave (RAVE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315820&amp;size=small\"\n                                                title=\"REEF (Retired)\"\n                        value=\"12315820\"&gt;\n                    REEF (Retired) (REEF)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310600&amp;size=small\"\n                                                title=\"River (Retired)\"\n                        value=\"12310600\"&gt;\n                    River (Retired) (RIVER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319020&amp;size=small\"\n                                                title=\"Rya\"\n                        value=\"12319020\"&gt;\n                    Rya (RYA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319320&amp;size=small\"\n                                                title=\"S2Graph\"\n                        value=\"12319320\"&gt;\n                    S2Graph (S2GRAPH)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12316220&amp;size=small\"\n                                                title=\"SAMOA\"\n                        value=\"12316220\"&gt;\n                    SAMOA (SAMOA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314526&amp;size=small\"\n                                                title=\"Samza\"\n                        value=\"12314526\"&gt;\n                    Samza (SAMZA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310062&amp;size=small\"\n                                                title=\"Sandesha\"\n                        value=\"12310062\"&gt;\n                    Sandesha (SAND)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310190&amp;size=small\"\n                                                title=\"Sandesha2\"\n                        value=\"12310190\"&gt;\n                    Sandesha2 (SANDESHA2)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310540&amp;size=small\"\n                                                title=\"Sandesha2/C\"\n                        value=\"12310540\"&gt;\n                    Sandesha2/C (SANDESHA2C)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311231&amp;size=small\"\n                                                title=\"Santuario\"\n                        value=\"12311231\"&gt;\n                    Santuario (SANTUARIO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310622&amp;size=small\"\n                                                title=\"Savan\"\n                        value=\"12310622\"&gt;\n                    Savan (SAVAN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10610&amp;size=small\"\n                                                title=\"Scout (Retired)\"\n                        value=\"10610\"&gt;\n                    Scout (Retired) (SCOUT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314720&amp;size=small\"\n                                                title=\"Sentry (Retired)\"\n                        value=\"12314720\"&gt;\n                    Sentry (Retired) (SENTRY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318820&amp;size=small\"\n                                                title=\"serf\"\n                        value=\"12318820\"&gt;\n                    serf (SERF)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311206&amp;size=small\"\n                                                title=\"ServiceMix\"\n                        value=\"12311206\"&gt;\n                    ServiceMix (SM)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311208&amp;size=small\"\n                                                title=\"ServiceMix 4\"\n                        value=\"12311208\"&gt;\n                    ServiceMix 4 (SMX4)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311212&amp;size=small\"\n                                                title=\"ServiceMix Components\"\n                        value=\"12311212\"&gt;\n                    ServiceMix Components (SMXCOMP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311205&amp;size=small\"\n                                                title=\"ServiceMix Kernel\"\n                        value=\"12311205\"&gt;\n                    ServiceMix Kernel (SMX4KNL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311209&amp;size=small\"\n                                                title=\"ServiceMix NMR\"\n                        value=\"12311209\"&gt;\n                    ServiceMix NMR (SMX4NMR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311040&amp;size=small\"\n                                                title=\"Shale\"\n                        value=\"12311040\"&gt;\n                    Shale (SHALE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310741&amp;size=small\"\n                                                title=\"Shindig\"\n                        value=\"12310741\"&gt;\n                    Shindig (SHINDIG)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310950&amp;size=small\"\n                                                title=\"Shiro\"\n                        value=\"12310950\"&gt;\n                    Shiro (SHIRO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324020&amp;size=small\"\n                                                title=\"Sidecar for Apache Cassandra\"\n                        value=\"12324020\"&gt;\n                    Sidecar for Apache Cassandra (CASSSIDECAR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12316720&amp;size=small\"\n                                                title=\"Singa\"\n                        value=\"12316720\"&gt;\n                    Singa (SINGA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314925&amp;size=small\"\n                                                title=\"Sirona\"\n                        value=\"12314925\"&gt;\n                    Sirona (SIRONA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315422&amp;size=small\"\n                                                title=\"Slider\"\n                        value=\"12315422\"&gt;\n                    Slider (SLIDER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310710&amp;size=small\"\n                                                title=\"Sling\"\n                        value=\"12310710\"&gt;\n                    Sling (SLING)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10459&amp;size=small\"\n                                                title=\"SOAP\"\n                        value=\"10459\"&gt;\n                    SOAP (SOAP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310230&amp;size=small\"\n                                                title=\"Solr\"\n                        value=\"12310230\"&gt;\n                    Solr (SOLR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315420&amp;size=small\"\n                                                title=\"Spark\"\n                        value=\"12315420\"&gt;\n                    Spark (SPARK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311072&amp;size=small\"\n                                                title=\"Spatial Information Systems\"\n                        value=\"12311072\"&gt;\n                    Spatial Information Systems (SIS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320637&amp;size=small\"\n                                                title=\"Spot (Retired)\"\n                        value=\"12320637\"&gt;\n                    Spot (Retired) (SPOT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311320&amp;size=small\"\n                                                title=\"Sqoop (Retired)\"\n                        value=\"12311320\"&gt;\n                    Sqoop (Retired) (SQOOP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311214&amp;size=small\"\n                                                title=\"Stanbol (Retired)\"\n                        value=\"12311214\"&gt;\n                    Stanbol (Retired) (STANBOL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315220&amp;size=small\"\n                                                title=\"Steve\"\n                        value=\"12315220\"&gt;\n                    Steve (STEVE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311203&amp;size=small\"\n                                                title=\"Stomp Specification\"\n                        value=\"12311203\"&gt;\n                    Stomp Specification (STOMP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310845&amp;size=small\"\n                                                title=\"Stonehenge\"\n                        value=\"12310845\"&gt;\n                    Stonehenge (STONEHENGE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314521&amp;size=small\"\n                                                title=\"Stratos\"\n                        value=\"12314521\"&gt;\n                    Stratos (STRATOS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12323520&amp;size=small\"\n                                                title=\"StreamPipes\"\n                        value=\"12323520\"&gt;\n                    StreamPipes (STREAMPIPES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314320&amp;size=small\"\n                                                title=\"Streams (Retired) (Retired)\"\n                        value=\"12314320\"&gt;\n                    Streams (Retired) (Retired) (STREAMS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311043&amp;size=small\"\n                                                title=\"Struts 1\"\n                        value=\"12311043\"&gt;\n                    Struts 1 (STR)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311041&amp;size=small\"\n                                                title=\"Struts 2\"\n                        value=\"12311041\"&gt;\n                    Struts 2 (WW)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311044&amp;size=small\"\n                                                title=\"Struts Sandbox\"\n                        value=\"12311044\"&gt;\n                    Struts Sandbox (SB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311045&amp;size=small\"\n                                                title=\"Struts Shared Resources\"\n                        value=\"12311045\"&gt;\n                    Struts Shared Resources (SITE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318828&amp;size=small\"\n                                                title=\"Subversion\"\n                        value=\"12318828\"&gt;\n                    Subversion (SVN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321120&amp;size=small\"\n                                                title=\"Superset\"\n                        value=\"12321120\"&gt;\n                    Superset (SUPERSET)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310201&amp;size=small\"\n                                                title=\"Synapse\"\n                        value=\"12310201\"&gt;\n                    Synapse (SYNAPSE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313120&amp;size=small\"\n                                                title=\"Syncope\"\n                        value=\"12313120\"&gt;\n                    Syncope (SYNCOPE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319522&amp;size=small\"\n                                                title=\"SystemDS\"\n                        value=\"12319522\"&gt;\n                    SystemDS (SYSTEMDS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314424&amp;size=small\"\n                                                title=\"Tajo (Retired)\"\n                        value=\"12314424\"&gt;\n                    Tajo (Retired) (TAJO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12315925&amp;size=small\"\n                                                title=\"Tamaya\"\n                        value=\"12315925\"&gt;\n                    Tamaya (TAMAYA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10573&amp;size=small\"\n                                                title=\"Tapestry\"\n                        value=\"10573\"&gt;\n                    Tapestry (TAPESTRY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310833&amp;size=small\"\n                                                title=\"Tapestry 5\"\n                        value=\"12310833\"&gt;\n                    Tapestry 5 (TAP5)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310841&amp;size=small\"\n                                                title=\"Tashi\"\n                        value=\"12310841\"&gt;\n                    Tashi (TASHI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10650&amp;size=small\"\n                                                title=\"Test Project\"\n                        value=\"10650\"&gt;\n                    Test Project (TST)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310651&amp;size=small\"\n                                                title=\"Texen\"\n                        value=\"12310651\"&gt;\n                    Texen (TEXEN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12324220&amp;size=small\"\n                                                title=\"The Maven Metric Extension\"\n                        value=\"12324220\"&gt;\n                    The Maven Metric Extension (MMETRIC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310800&amp;size=small\"\n                                                title=\"Thrift\"\n                        value=\"12310800\"&gt;\n                    Thrift (THRIFT)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310631&amp;size=small\"\n                                                title=\"Tika\"\n                        value=\"12310631\"&gt;\n                    Tika (TIKA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311046&amp;size=small\"\n                                                title=\"Tiles\"\n                        value=\"12311046\"&gt;\n                    Tiles (TILES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311422&amp;size=small\"\n                                                title=\"Tiles Autotag\"\n                        value=\"12311422\"&gt;\n                    Tiles Autotag (AUTOTAG)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311423&amp;size=small\"\n                                                title=\"Tiles Eval\"\n                        value=\"12311423\"&gt;\n                    Tiles Eval (TEVAL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311421&amp;size=small\"\n                                                title=\"Tiles Request\"\n                        value=\"12311421\"&gt;\n                    Tiles Request (TREQ)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311049&amp;size=small\"\n                                                title=\"Tiles Sandbox\"\n                        value=\"12311049\"&gt;\n                    Tiles Sandbox (TILESSB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311048&amp;size=small\"\n                                                title=\"Tiles Shared Resources\"\n                        value=\"12311048\"&gt;\n                    Tiles Shared Resources (TILESSHARED)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311047&amp;size=small\"\n                                                title=\"Tiles Showcase\"\n                        value=\"12311047\"&gt;\n                    Tiles Showcase (TILESSHOW)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12316520&amp;size=small\"\n                                                title=\"TinkerPop\"\n                        value=\"12316520\"&gt;\n                    TinkerPop (TINKERPOP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12312320&amp;size=small\"\n                                                title=\"TomEE\"\n                        value=\"12312320\"&gt;\n                    TomEE (TOMEE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314322&amp;size=small\"\n                                                title=\"TomEE Arquillian Test Porting Initiative\"\n                        value=\"12314322\"&gt;\n                    TomEE Arquillian Test Porting Initiative (TATPI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319524&amp;size=small\"\n                                                title=\"TOREE\"\n                        value=\"12319524\"&gt;\n                    TOREE (TOREE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310280&amp;size=small\"\n                                                title=\"Torque\"\n                        value=\"12310280\"&gt;\n                    Torque (TORQUE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310542&amp;size=small\"\n                                                title=\"Torque issues (old)\"\n                        value=\"12310542\"&gt;\n                    Torque issues (old) (TORQUEOLD)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12319621&amp;size=small\"\n                                                title=\"Trademarks Committee\"\n                        value=\"12319621\"&gt;\n                    Trademarks Committee (BRAND)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320632&amp;size=small\"\n                                                title=\"Traffic Control\"\n                        value=\"12320632\"&gt;\n                    Traffic Control (TC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310963&amp;size=small\"\n                                                title=\"Traffic Server\"\n                        value=\"12310963\"&gt;\n                    Traffic Server (TS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310592&amp;size=small\"\n                                                title=\"Triplesec\"\n                        value=\"12310592\"&gt;\n                    Triplesec (DIRTSEC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310620&amp;size=small\"\n                                                title=\"TripleSoup\"\n                        value=\"12310620\"&gt;\n                    TripleSoup (TRIPLES)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10742&amp;size=small\"\n                                                title=\"TSIK\"\n                        value=\"10742\"&gt;\n                    TSIK (TSIK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310090&amp;size=small\"\n                                                title=\"Turbine\"\n                        value=\"12310090\"&gt;\n                    Turbine (TRB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310210&amp;size=small\"\n                                                title=\"Tuscany\"\n                        value=\"12310210\"&gt;\n                    Tuscany (TUSCANY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12322921&amp;size=small\"\n                                                title=\"Tuweni (Retired)\"\n                        value=\"12322921\"&gt;\n                    Tuweni (Retired) (TUWENI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310570&amp;size=small\"\n                                                title=\"UIMA\"\n                        value=\"12310570\"&gt;\n                    UIMA (UIMA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314923&amp;size=small\"\n                                                title=\"Usergrid (Retired)\"\n                        value=\"12314923\"&gt;\n                    Usergrid (Retired) (USERGRID)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310840&amp;size=small\"\n                                                title=\"VCL\"\n                        value=\"12310840\"&gt;\n                    VCL (VCL)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310104&amp;size=small\"\n                                                title=\"Velocity\"\n                        value=\"12310104\"&gt;\n                    Velocity (VELOCITY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311130&amp;size=small\"\n                                                title=\"Velocity Sandbox\"\n                        value=\"12311130\"&gt;\n                    Velocity Sandbox (VELOCITYSB)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310130&amp;size=small\"\n                                                title=\"Velocity Tools\"\n                        value=\"12310130\"&gt;\n                    Velocity Tools (VELTOOLS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310960&amp;size=small\"\n                                                title=\"VXQuery (Retired)\"\n                        value=\"12310960\"&gt;\n                    VXQuery (Retired) (VXQUERY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310930&amp;size=small\"\n                                                title=\"VYSPER\"\n                        value=\"12310930\"&gt;\n                    VYSPER (VYSPER)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310220&amp;size=small\"\n                                                title=\"WADI\"\n                        value=\"12310220\"&gt;\n                    WADI (WADI)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311240&amp;size=small\"\n                                                title=\"Wave\"\n                        value=\"12311240\"&gt;\n                    Wave (WAVE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12320726&amp;size=small\"\n                                                title=\"Weex (Retired)\"\n                        value=\"12320726\"&gt;\n                    Weex (Retired) (WEEX)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318723&amp;size=small\"\n                                                title=\"Whimsy\"\n                        value=\"12318723\"&gt;\n                    Whimsy (WHIMSY)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310561&amp;size=small\"\n                                                title=\"Wicket\"\n                        value=\"12310561\"&gt;\n                    Wicket (WICKET)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310940&amp;size=small\"\n                                                title=\"Wink\"\n                        value=\"12310940\"&gt;\n                    Wink (WINK)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10710&amp;size=small\"\n                                                title=\"Woden\"\n                        value=\"10710\"&gt;\n                    Woden (WODEN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310961&amp;size=small\"\n                                                title=\"Wookie\"\n                        value=\"12310961\"&gt;\n                    Wookie (WOOKIE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310250&amp;size=small\"\n                                                title=\"WS-Commons\"\n                        value=\"12310250\"&gt;\n                    WS-Commons (WSCOMMONS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10612&amp;size=small\"\n                                                title=\"WSRF\"\n                        value=\"10612\"&gt;\n                    WSRF (APOLLO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10464&amp;size=small\"\n                                                title=\"WSRP4J\"\n                        value=\"10464\"&gt;\n                    WSRP4J (WSRP4J)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310063&amp;size=small\"\n                                                title=\"WSS4J\"\n                        value=\"12310063\"&gt;\n                    WSS4J (WSS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12321220&amp;size=small\"\n                                                title=\"www.apache.org website\"\n                        value=\"12321220\"&gt;\n                    www.apache.org website (ASFSITE)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10582&amp;size=small\"\n                                                title=\"XalanC\"\n                        value=\"10582\"&gt;\n                    XalanC (XALANC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10584&amp;size=small\"\n                                                title=\"XalanJ2\"\n                        value=\"10584\"&gt;\n                    XalanJ2 (XALANJ)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310502&amp;size=small\"\n                                                title=\"XAP\"\n                        value=\"12310502\"&gt;\n                    XAP (XAP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310312&amp;size=small\"\n                                                title=\"XBean\"\n                        value=\"12310312\"&gt;\n                    XBean (XBEAN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10510&amp;size=small\"\n                                                title=\"Xerces-C++\"\n                        value=\"10510\"&gt;\n                    Xerces-C++ (XERCESC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310241&amp;size=small\"\n                                                title=\"Xerces-P\"\n                        value=\"12310241\"&gt;\n                    Xerces-P (XERCESP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10520&amp;size=small\"\n                                                title=\"Xerces2-J\"\n                        value=\"10520\"&gt;\n                    Xerces2-J (XERCESJ)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311230&amp;size=small\"\n                                                title=\"XML Commons\"\n                        value=\"12311230\"&gt;\n                    XML Commons (XMLCOMMONS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10465&amp;size=small\"\n                                                title=\"XML-RPC\"\n                        value=\"10465\"&gt;\n                    XML-RPC (XMLRPC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=10436&amp;size=small\"\n                                                title=\"XMLBeans\"\n                        value=\"10436\"&gt;\n                    XMLBeans (XMLBEANS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12314221&amp;size=small\"\n                                                title=\"XMLGraphicsCommons\"\n                        value=\"12314221\"&gt;\n                    XMLGraphicsCommons (XGC)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311191&amp;size=small\"\n                                                title=\"XmlSchema\"\n                        value=\"12311191\"&gt;\n                    XmlSchema (XMLSCHEMA)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12313523&amp;size=small\"\n                                                title=\"XWork\"\n                        value=\"12313523\"&gt;\n                    XWork (XW)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12318920&amp;size=small\"\n                                                title=\"Yetus\"\n                        value=\"12318920\"&gt;\n                    Yetus (YETUS)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310271&amp;size=small\"\n                                                title=\"Yoko - CORBA Server\"\n                        value=\"12310271\"&gt;\n                    Yoko - CORBA Server (YOKO)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12316221&amp;size=small\"\n                                                title=\"Zeppelin\"\n                        value=\"12316221\"&gt;\n                    Zeppelin (ZEPPELIN)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12311131&amp;size=small\"\n                                                title=\"Zeta Components\"\n                        value=\"12311131\"&gt;\n                    Zeta Components (ZETACOMP)\n                &lt;/option&gt;\n            \n                &lt;option data-icon=\"/jira/secure/projectavatar?pid=12310801&amp;size=small\"\n                                                title=\"ZooKeeper\"\n                        value=\"12310801\"&gt;\n                    ZooKeeper (ZOOKEEPER)\n                &lt;/option&gt;\n                    &lt;/optgroup&gt;\n    &lt;/select&gt;\n                                            &lt;/div&gt;\n    \n","validSearcher":true,"isShown":true},"assignee":{"name":"Assignee","editHtml":"\n    \n                                    &lt;div class=\"field-group aui-field-userlist\" &gt;\n                                                                        &lt;label for=\"searcher-assigneeSelect\"&gt;Assignee&lt;/label&gt;                    &lt;fieldset rel=\"assignee\" class=\"hidden user-group-searcher-params\"&gt;\n            &lt;/fieldset&gt;\n    &lt;select class=\"js-usergroup-checkboxmultiselect\" multiple=\"multiple\" id=\"assignee\" name=\"assignee\" data-placeholder-text=\"Enter username or group\"&gt;\n                &lt;optgroup&gt;\n                            &lt;option class=\"headerOption\" data-icon=\"https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453\"  value=\"empty\" title=\"Unassigned\"&gt;Unassigned&lt;/option&gt;\n            &lt;/optgroup&gt;\n                            &lt;optgroup&gt;\n    &lt;/optgroup&gt;\n    &lt;/select&gt;\n    &lt;input type=\"hidden\" name=\"check_prev_assignee\" value=\"true\"&gt;\n                                                &lt;/div&gt;\n        \n","validSearcher":true,"isShown":true},"text":{"name":"Query","viewHtml":"Vector API","editHtml":"Vector API","jql":"text ~ \"Vector API\"","validSearcher":true,"isShown":true},"status":{"name":"Status","editHtml":"\n                                &lt;div class=\"field-group aui-field-constants\" &gt;\n                                                                        &lt;label for=\"searcher-status\"&gt;Status&lt;/label&gt;                    \n    &lt;select class=\"select js-default-checkboxmultiselectstatuslozenge\" data-placeholder-text=\"Find Statuses...\" id=\"searcher-status\" multiple=\"multiple\" name=\"status\" size=\"4\" data-status-lozenge=\"true\"&gt;\n                                                                                &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/open.png\" value=\"1\" title=\"Open\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;1&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Open&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;The issue is open and ready for the assignee to start work on it.&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/open.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;Open&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/inprogress.png\" value=\"3\" title=\"In Progress\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;3&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;In Progress&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;This issue is being actively worked on at the moment by the assignee.&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/inprogress.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;In Progress&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/reopened.png\" value=\"4\" title=\"Reopened\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;4&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Reopened&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/reopened.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;Reopened&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/resolved.png\" value=\"5\" title=\"Resolved\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;5&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Resolved&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/resolved.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Resolved&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/closed.png\" value=\"6\" title=\"Closed\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;6&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Closed&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/closed.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Closed&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/needinfo.png\" value=\"10000\" title=\"Blocked\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10000&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Blocked&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;The issue is open but work on it is temporarily suspended until further feedback is received determining its resolution.&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/needinfo.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Blocked&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10001\" title=\"Continued\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10001&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Continued&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;The issue was on hold, and feedback was received indicating that further action are required towards its resolution.&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Continued&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/document.png\" value=\"10002\" title=\"Patch Available\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10002&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Patch Available&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;A patch for this issue has been uploaded to JIRA by a contributor.&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/document.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Patch Available&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/visible.png\" value=\"10003\" title=\"Patch Reviewed\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10003&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Patch Reviewed&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;A patch attached to this issue has been reviewed by another contributor.&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/visible.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Patch Reviewed&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10006\" title=\"Reviewable\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10006&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Reviewable&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Issue is to be reviewed before resolving/closing&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;Reviewable&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/needinfo.png\" value=\"10007\" title=\"Documentation Required\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10007&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Documentation Required&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Documentation needs to be updated/created before resolving/closing the issue&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/needinfo.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Documentation Required&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/needinfo.png\" value=\"10008\" title=\"Testcases Required\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10008&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Testcases Required&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Further (unit and/or integration) test cases are required before resolving/closing the issue&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/needinfo.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Testcases Required&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/needinfo.png\" value=\"10009\" title=\"Documentation/Testcases Required\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10009&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Documentation/Testcases Required&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Documentation and Test Cases must be created/updated before resolving/closing the issue&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/needinfo.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Documentation/Testcases Required&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/needinfo.png\" value=\"10010\" title=\"Waiting for user\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10010&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Waiting for user&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/needinfo.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Waiting for user&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10011\" title=\"Waiting for Infra\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10011&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Waiting for Infra&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;Waiting for Infra&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/document.png\" value=\"10012\" title=\"Testing\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10012&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Testing&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Patch is being tested, to be approved or rejected.&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/document.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Testing&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/visible.png\" value=\"10013\" title=\"Unknown\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10013&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Unknown&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Test requires a review to see if it is worth porting&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/visible.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;Unknown&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/up.png\" value=\"10014\" title=\"Requires Porting\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10014&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Requires Porting&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Test has been determined to be useful and worth the time porting&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/up.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Requires Porting&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/trash.png\" value=\"10015\" title=\"Not Applicable\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10015&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Not Applicable&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Test not generally applicable or not worth the time to port&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/trash.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Not Applicable&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/closed.png\" value=\"10016\" title=\"Ported\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10016&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Ported&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/closed.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Ported&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/closed.png\" value=\"10017\" title=\"Done\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10017&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Done&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/closed.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Done&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/information.png\" value=\"10018\" title=\"In Review\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10018&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;In Review&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/information.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;In Review&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/open.png\" value=\"10019\" title=\"To Do\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10019&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;To Do&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/open.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;To Do&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10020\" title=\"Accepted\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10020&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Accepted&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Accepted&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10221\" title=\"Ready to Commit\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10221&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Ready to Commit&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Ready to Commit&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10222\" title=\"Awaiting Feedback\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10222&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Awaiting Feedback&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Awaiting Feedback&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10323\" title=\"New\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10323&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;New&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;New Issue&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;New&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10324\" title=\"Fixed\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10324&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Fixed&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Fixed&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Fixed&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10421\" title=\"Invalid\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10421&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Invalid&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Invalid&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Invalid&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10422\" title=\"FixedInBranch\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10422&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;FixedInBranch&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Fixed In a Branch&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;FixedInBranch&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10423\" title=\"Duplicate\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10423&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Duplicate&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Duplicate&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Duplicate&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10424\" title=\"Verified\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10424&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Verified&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Verified&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Verified&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10425\" title=\"WontFix\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10425&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;WontFix&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;WontFix&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;WontFix&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10426\" title=\"UnderReview\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10426&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;UnderReview&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Under Review&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;UnderReview&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10427\" title=\"Started\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10427&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Started&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;Started&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Started&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10521\" title=\"For Review\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10521&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;For Review&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;For Review&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;For Review&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10621\" title=\"Idea\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10621&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Idea&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;Idea&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10622\" title=\"Abandoned\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10622&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Abandoned&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Abandoned&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10623\" title=\"Under Discussion\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10623&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Under Discussion&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Under Discussion&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10624\" title=\"Completed\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10624&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Completed&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Completed&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10625\" title=\"In Implementation\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10625&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;In Implementation&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;In Implementation&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/\" value=\"10721\" title=\"on hold\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10721&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;on hold&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;This status is managed internally by JIRA Software&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;on hold&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10722\" title=\"Triage Needed\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10722&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Triage Needed&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;Triage Needed&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10723\" title=\"Review In Progress\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10723&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Review In Progress&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Review In Progress&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10724\" title=\"Changes Suggested\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10724&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Changes Suggested&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;Changes Suggested&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10725\" title=\"Requires Testing\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10725&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Requires Testing&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;Requires Testing&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10921\" title=\"Draft\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10921&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Draft&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;Draft&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10922\" title=\"Voting\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10922&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Voting&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Voting&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10923\" title=\"Passed\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10923&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Passed&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Passed&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10924\" title=\"Failed\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10924&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Failed&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Failed&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10925\" title=\"Pending\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10925&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Pending&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;Pending&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10926\" title=\"Yes\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10926&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Yes&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Yes&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10927\" title=\"No\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10927&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;No&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;No&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"10928\" title=\"Abstain\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;10928&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Abstain&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Abstain&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"11021\" title=\"Needs Committer\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;11021&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Needs Committer&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;This issue needs an additional review.&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:2,&amp;quot;key&amp;quot;:&amp;quot;new&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;blue-gray&amp;quot;}}\"&gt;Needs Committer&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"11121\" title=\"In Tests\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;11121&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;In Tests&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;In Tests&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"11221\" title=\"Triaged\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;11221&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Triaged&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;The issue has undergone preliminary assessments&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:4,&amp;quot;key&amp;quot;:&amp;quot;indeterminate&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;yellow&amp;quot;}}\"&gt;Triaged&lt;/option&gt;\n                                            &lt;option   class=\"imagebacked\" data-icon=\"/jira/images/icons/statuses/generic.png\" value=\"11222\" title=\"Fix Released/Published\" data-simple-status=\"{&amp;quot;id&amp;quot;:&amp;quot;11222&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Fix Released/Published&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;The issue has been released as part of a public release&amp;quot;,&amp;quot;iconUrl&amp;quot;:&amp;quot;/jira/images/icons/statuses/generic.png&amp;quot;,&amp;quot;statusCategory&amp;quot;:{&amp;quot;id&amp;quot;:3,&amp;quot;key&amp;quot;:&amp;quot;done&amp;quot;,&amp;quot;colorName&amp;quot;:&amp;quot;green&amp;quot;}}\"&gt;Fix Released/Published&lt;/option&gt;\n            &lt;/select&gt;\n                                            &lt;/div&gt;\n    \n","validSearcher":true,"isShown":true}}}</div>
        <div id="systemFiltersJson" style="display:none;">[{"id":-1,"name":"My open issues","jql":"assignee = currentUser() AND resolution = Unresolved order by updated DESC","isSystem":true,"sharePermissions":[],"requiresLogin":true},{"id":-2,"name":"Reported by me","jql":"reporter = currentUser() order by created DESC","isSystem":true,"sharePermissions":[],"requiresLogin":true},{"id":-4,"name":"All issues","jql":"order by created DESC","isSystem":true,"sharePermissions":[],"requiresLogin":false},{"id":-5,"name":"Open issues","jql":"resolution = Unresolved order by priority DESC,updated DESC","isSystem":true,"sharePermissions":[],"requiresLogin":false},{"id":-9,"name":"Done issues","jql":"statusCategory = Done order by updated DESC","isSystem":true,"sharePermissions":[],"requiresLogin":false},{"id":-3,"name":"Viewed recently","jql":"issuekey in issueHistory() order by lastViewed DESC","isSystem":true,"sharePermissions":[],"requiresLogin":false},{"id":-6,"name":"Created recently","jql":"created &gt;= -1w order by created DESC","isSystem":true,"sharePermissions":[],"requiresLogin":false},{"id":-7,"name":"Resolved recently","jql":"resolutiondate &gt;= -1w order by updated DESC","isSystem":true,"sharePermissions":[],"requiresLogin":false},{"id":-8,"name":"Updated recently","jql":"updated &gt;= -1w order by updated DESC","isSystem":true,"sharePermissions":[],"requiresLogin":false}]</div>
        <div id="jqlAutocompleteQueryDelay" style="display:none;">0.3</div>
        <div id="jqlAutocompleteMinQueryLength" style="display:none;">0</div>
    
    </div>
    <footer id="footer" role="contentinfo">
        

<section class="footer-body">
<ul class="atlassian-footer">
    <li>
        Atlassian Jira <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a>
            </li>
    <li>
        <a id="about-link" rel="nofollow" href="https://issues.apache.org/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About Jira</a>
    </li>
    <li>
        <a id="footer-report-problem-link" rel="nofollow" href="https://issues.apache.org/jira/secure/CreateIssue!default.jspa">Report a problem</a>
    </li>
</ul>
    <p class="atlassian-footer">
        <span class="licensemessage">
                Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">Jira</a> open source license for Apache Software Foundation. Try Jira - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team.

        </span>
    </p>

    <div id="footer-logo"><a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a></div>
</section>











<fieldset class="hidden parameters">
    <input type="hidden" title="loggedInUser" value="">
    <input type="hidden" title="ajaxTimeout" value="The call to the Jira server did not complete within the timeout period.  We are unsure of the result of this operation.">
    <input type="hidden" title="JiraVersion" value="8.20.10">
    <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in.">
    <input type="hidden" title="baseURL" value="https://issues.apache.org/jira">
    <input type="hidden" title="ajaxCommsError" value="The Jira server could not be contacted. This may be a temporary glitch or the server may be down. ">
    <input type="hidden" title="ajaxServerError" value="The Jira server was contacted but has returned an error response. We are unsure of the result of this operation.">
    <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser">
    <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown">

    <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost.">
    <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog.">
    <input type="hidden" title="keyType" value="Type">
    <input type="hidden" title="keyThen" value="then">
    <input type="hidden" title="dblClickToExpand" value="Double click to expand">
    <input type="hidden" title="actions" value="Actions">
    <input type="hidden" title="removeItem" value="Remove">
    <input type="hidden" title="workflow" value="Workflow">
    <input type="hidden" title="labelNew" value="New Label">
    <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all">
    <input type="hidden" title="closelink" value="Close">
    <input type="hidden" title="dotOperations" value="Operations">
    <input type="hidden" title="dotLoading" value="Loading...">
    <input type="hidden" title="frotherSuggestions" value="Suggestions">
    <input type="hidden" title="frotherNomatches" value="No Matches">
    <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version.">
    <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component.">
    <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid.">
</fieldset>

    </footer>
</div>


<script type="text/javascript" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/jira.webresources_bigpipe-js.js.download" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered=""></script>
<script type="text/javascript" src="./[PARQUET-2159] Parquet bit-packing de_encode optimization - ASF JIRA_files/jira.webresources_bigpipe-init.js.download" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered=""></script>

<form id="jira_request_timing_info" class="dont-default-focus">
	<fieldset class="parameters hidden">
		<input type="hidden" title="jira.request.start.millis" value="1752155695904">
		<input type="hidden" title="jira.request.server.time" value="353">
		<input type="hidden" title="jira.request.id" value="834x269220048x24">
		<input type="hidden" title="jira.session.expiry.time" value="-">
		<input type="hidden" title="jira.session.expiry.in.mins" value="-">
		<input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="25">
		<input type="hidden" title="issue.index.reads.time.in.ms" value="174">
		<input type="hidden" title="db.reads.time.in.ms" value="0">
		<input type="hidden" title="db.conns.time.in.ms" value="5">
	</fieldset>
</form>
<!--
	                 REQUEST ID : 834x269220048x24
	          REQUEST TIMESTAMP : [10/Jul/2025:13:54:55 +0000]
	               REQUEST TIME : 0.3530
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 25

	             issue.index.reads : OpSnapshot{name='issue.index.reads', invocationCount=1, elapsedTotal=174917953, elapsedMin=174917953, elapsedMax=174917953, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.reads : OpSnapshot{name='db.reads', invocationCount=2, elapsedTotal=448013, elapsedMin=133701, elapsedMax=314312, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=10, elapsedTotal=5388976, elapsedMin=121529, elapsedMax=2259234, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->



<div id="fancybox-tmp"></div><div id="fancybox-loading"><div></div></div><div id="fancybox-overlay"></div><div id="fancybox-wrap" class="fancybox-ie"><div id="fancybox-outer"><div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div><div id="fancybox-content"></div><a id="fancybox-close"></a><div id="fancybox-title"></div><a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a><a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a></div></div><div id="browser-metrics-report" style="display: none;">{"report":{"pageVisibility":"visible","entityId":13450244,"key":"jira.issue.nav-detail","isInitial":false,"threshold":1000,"elementTimings":{},"userDeviceMemory":8,"userDeviceProcessors":8,"apdex":0.5,"journeyId":"980a3ae9-795a-4989-abf4-3e2c17d82408","readyForUser":2376.4000000059605,"resourceTiming":[{"duration":303.30000001192093,"initiatorType":"xmlhttprequest","name":"https://issues.apache.org/jira/rest/api/2/mypermissions?_=1752155697755","startTime":2.699999988079071,"connectEnd":2.699999988079071,"connectStart":2.699999988079071,"domainLookupEnd":2.699999988079071,"domainLookupStart":2.699999988079071,"fetchStart":2.699999988079071,"redirectEnd":0,"redirectStart":0,"requestStart":48.900000005960464,"responseEnd":306,"responseStart":304.7999999821186,"secureConnectionStart":2.699999988079071},{"duration":353.19999998807907,"initiatorType":"xmlhttprequest","name":"https://issues.apache.org/jira/rest/menu/latest/appswitcher?_=1752155697756","startTime":3.5999999940395355,"connectEnd":3.5999999940395355,"connectStart":3.5999999940395355,"domainLookupEnd":3.5999999940395355,"domainLookupStart":3.5999999940395355,"fetchStart":3.5999999940395355,"redirectEnd":0,"redirectStart":0,"requestStart":94.5,"responseEnd":356.7999999821186,"responseStart":356,"secureConnectionStart":3.5999999940395355},{"duration":309.5,"initiatorType":"xmlhttprequest","name":"https://issues.apache.org/jira/rest/scriptrunner/1.0/message?_=1752155697757","startTime":56.400000005960464,"connectEnd":56.400000005960464,"connectStart":56.400000005960464,"domainLookupEnd":56.400000005960464,"domainLookupStart":56.400000005960464,"fetchStart":56.400000005960464,"redirectEnd":0,"redirectStart":0,"requestStart":113.40000000596046,"responseEnd":365.90000000596046,"responseStart":364.59999999403954,"secureConnectionStart":56.400000005960464},{"duration":370.90000000596046,"initiatorType":"xmlhttprequest","name":"https://issues.apache.org/jira/rest/webResources/1.0/resources","startTime":66.19999998807907,"connectEnd":66.19999998807907,"connectStart":66.19999998807907,"domainLookupEnd":66.19999998807907,"domainLookupStart":66.19999998807907,"fetchStart":66.19999998807907,"redirectEnd":0,"redirectStart":0,"requestStart":163,"responseEnd":437.09999999403954,"responseStart":435.59999999403954,"secureConnectionStart":66.19999998807907},{"duration":270.09999999403954,"initiatorType":"fetch","name":"https://issues.apache.org/jira/rest/scriptrunner/behaviours/latest/validators.json?issueId=13450244","startTime":518.6999999880791,"connectEnd":518.6999999880791,"connectStart":518.6999999880791,"domainLookupEnd":518.6999999880791,"domainLookupStart":518.6999999880791,"fetchStart":518.6999999880791,"redirectEnd":0,"redirectStart":0,"requestStart":523.7999999821186,"responseEnd":788.7999999821186,"responseStart":787.6999999880791,"secureConnectionStart":518.6999999880791},{"duration":269,"initiatorType":"xmlhttprequest","name":"https://issues.apache.org/jira/rest/orderbycomponent/latest/orderByOptions/primary","startTime":583,"connectEnd":583,"connectStart":583,"domainLookupEnd":583,"domainLookupStart":583,"fetchStart":583,"redirectEnd":0,"redirectStart":0,"requestStart":597.9000000059605,"responseEnd":852,"responseStart":850.6999999880791,"secureConnectionStart":583},{"duration":289,"initiatorType":"link","name":"https://issues.apache.org/jira/s/31a38e51478f105983cfcacd372f4aff-T/-lmjgmc/820010/13pdxe5/838faba911657bbbfac14609dcb42d1c/_/download/contextbatch/css/com.atlassian.jira.plugins.jira-development-integration-plugin:7,com.atlassian.jira.plugins.jira-development-integration-plugin:0,jira.rich.editor.api,jira.rich.editor,-_super,-jira.view.issue,-jira.global,-jira.navigator.kickass,-viewissue.standalone,-atl.global,-atl.general,-jira.navigator,-jira.general/batch.css?agile_global_admin_condition=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;richediton=true&amp;slack-enabled=true","startTime":622.5,"connectEnd":622.5,"connectStart":622.5,"domainLookupEnd":622.5,"domainLookupStart":622.5,"fetchStart":622.5,"redirectEnd":0,"redirectStart":0,"requestStart":639.5999999940395,"responseEnd":911.5,"responseStart":905.1999999880791,"secureConnectionStart":622.5},{"duration":659.7000000178814,"initiatorType":"script","name":"https://issues.apache.org/jira/s/70bd25d85bc48dbf4f7b78ef74f58f88-T/-lmjgmc/820010/13pdxe5/838faba911657bbbfac14609dcb42d1c/_/download/contextbatch/js/com.atlassian.jira.plugins.jira-development-integration-plugin:7,com.atlassian.jira.plugins.jira-development-integration-plugin:0,jira.rich.editor.api,jira.rich.editor,-_super,-jira.view.issue,-jira.global,-jira.navigator.kickass,-viewissue.standalone,-atl.global,-atl.general,-jira.navigator,-jira.general/batch.js?agile_global_admin_condition=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true&amp;slack-enabled=true","startTime":622.7999999821186,"connectEnd":622.7999999821186,"connectStart":622.7999999821186,"domainLookupEnd":622.7999999821186,"domainLookupStart":622.7999999821186,"fetchStart":622.7999999821186,"redirectEnd":0,"redirectStart":0,"requestStart":641.7999999821186,"responseEnd":1282.5,"responseStart":920.5,"secureConnectionStart":622.7999999821186},{"duration":513,"initiatorType":"script","name":"https://issues.apache.org/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-lmjgmc/820010/13pdxe5/4.7.6/_/download/resources/com.atlassian.jira.plugins.jira-editor-plugin:tinymce/tinymce.js?batch=false","startTime":623.0999999940395,"connectEnd":623.0999999940395,"connectStart":623.0999999940395,"domainLookupEnd":623.0999999940395,"domainLookupStart":623.0999999940395,"fetchStart":623.0999999940395,"redirectEnd":0,"redirectStart":0,"requestStart":672.9000000059605,"responseEnd":1136.0999999940395,"responseStart":961.6999999880791,"secureConnectionStart":623.0999999940395},{"duration":309.7000000178814,"initiatorType":"script","name":"https://issues.apache.org/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-lmjgmc/820010/13pdxe5/4.7.6/_/download/resources/com.atlassian.jira.plugins.jira-editor-plugin:tinymce/tinymce-amd.js?batch=false","startTime":623.1999999880791,"connectEnd":623.1999999880791,"connectStart":623.1999999880791,"domainLookupEnd":623.1999999880791,"domainLookupStart":623.1999999880791,"fetchStart":623.1999999880791,"redirectEnd":0,"redirectStart":0,"requestStart":674.7999999821186,"responseEnd":932.9000000059605,"responseStart":931.2999999821186,"secureConnectionStart":623.1999999880791},{"duration":582.5,"initiatorType":"script","name":"https://issues.apache.org/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-lmjgmc/820010/13pdxe5/4.7.6/_/download/resources/com.atlassian.jira.plugins.jira-editor-plugin:tinymce/icons.js?batch=false","startTime":623.4000000059605,"connectEnd":623.4000000059605,"connectStart":623.4000000059605,"domainLookupEnd":623.4000000059605,"domainLookupStart":623.4000000059605,"fetchStart":623.4000000059605,"redirectEnd":0,"redirectStart":0,"requestStart":940.2999999821186,"responseEnd":1205.9000000059605,"responseStart":1198,"secureConnectionStart":623.4000000059605},{"duration":1037.199999988079,"initiatorType":"script","name":"https://issues.apache.org/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-lmjgmc/820010/13pdxe5/4.7.6/_/download/resources/com.atlassian.jira.plugins.jira-editor-plugin:tinymce/themes/silver/theme.js?batch=false","startTime":623.5999999940395,"connectEnd":623.5999999940395,"connectStart":623.5999999940395,"domainLookupEnd":623.5999999940395,"domainLookupStart":623.5999999940395,"fetchStart":623.5999999940395,"redirectEnd":0,"redirectStart":0,"requestStart":1058.5999999940395,"responseEnd":1660.7999999821186,"responseStart":1318.199999988079,"secureConnectionStart":623.5999999940395},{"duration":395.5,"initiatorType":"fetch","name":"https://issues.apache.org/jira/rest/analytics/1.0/publish/bulk","startTime":659,"connectEnd":659,"connectStart":659,"domainLookupEnd":659,"domainLookupStart":659,"fetchStart":659,"redirectEnd":0,"redirectStart":0,"requestStart":789.0999999940395,"responseEnd":1054.5,"responseStart":1053.0999999940395,"secureConnectionStart":659},{"duration":425.09999999403954,"initiatorType":"other","name":"https://issues.apache.org/jira/s/-lmjgmc/820010/13pdxe5/_/images/fav-jsw.png","startTime":688.6999999880791,"connectEnd":688.6999999880791,"connectStart":688.6999999880791,"domainLookupEnd":688.6999999880791,"domainLookupStart":688.6999999880791,"fetchStart":688.6999999880791,"redirectEnd":0,"redirectStart":0,"requestStart":852.4000000059605,"responseEnd":1113.7999999821186,"responseStart":1095.2999999821186,"secureConnectionStart":688.6999999880791},{"duration":1566.5,"initiatorType":"xmlhttprequest","name":"https://issues.apache.org/jira/secure/AjaxIssueAction!default.jspa?issueKey=PARQUET-2159&amp;decorator=none&amp;prefetch=false&amp;shouldUpdateCurrentProject=false&amp;loadFields=false&amp;_=1752155697758","startTime":704.1999999880791,"connectEnd":704.1999999880791,"connectStart":704.1999999880791,"domainLookupEnd":704.1999999880791,"domainLookupStart":704.1999999880791,"fetchStart":704.1999999880791,"redirectEnd":0,"redirectStart":0,"requestStart":911.9000000059605,"responseEnd":2270.699999988079,"responseStart":1887.5,"secureConnectionStart":704.1999999880791},{"duration":330.80000001192093,"initiatorType":"xmlhttprequest","name":"https://issues.apache.org/jira/rest/webResources/1.0/resources","startTime":1707.2999999821186,"connectEnd":1707.2999999821186,"connectStart":1707.2999999821186,"domainLookupEnd":1707.2999999821186,"domainLookupStart":1707.2999999821186,"fetchStart":1707.2999999821186,"redirectEnd":0,"redirectStart":0,"requestStart":1779.4000000059605,"responseEnd":2038.0999999940395,"responseStart":2031.9000000059605,"secureConnectionStart":1707.2999999821186},{"duration":328.7999999821186,"initiatorType":"xmlhttprequest","name":"https://issues.apache.org/jira/rest/migration/latest/browser-metrics/enabled?_=1752155697759","startTime":1710,"connectEnd":1710,"connectStart":1710,"domainLookupEnd":1710,"domainLookupStart":1710,"fetchStart":1710,"redirectEnd":0,"redirectStart":0,"requestStart":1780.9000000059605,"responseEnd":2038.7999999821186,"responseStart":2037.7999999821186,"secureConnectionStart":1710}],"userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36","marks":[{"name":"@grammarly-extension:checkScriptInitStart","time":219.59999999403954},{"name":"@grammarly-extension:checkScriptInitEnd","time":541.5},{"name":"activityTabFullyLoaded","time":2354.699999988079}],"measures":[],"effectiveType":"4g","downlink":2.25,"rtt":150,"applicationHash":"ace47f9899e9ee25d7157d59aa17ab06aee30d3d","experiments":[]}}</div></body><grammarly-desktop-integration data-grammarly-shadow-root="true"><template shadowrootmode="open"><style>
      div.grammarly-desktop-integration {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select:none;
        user-select:none;
      }

      div.grammarly-desktop-integration:before {
        content: attr(data-content);
      }
    </style><div aria-label="grammarly-integration" role="group" tabindex="-1" class="grammarly-desktop-integration" data-content="{&quot;mode&quot;:&quot;full&quot;,&quot;isActive&quot;:true,&quot;isUserDisabled&quot;:false}"></div></template></grammarly-desktop-integration></html>